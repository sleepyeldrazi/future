if (self.CavalryLogger) { CavalryLogger.start_js(["03GEv"]); }

__d('GroupPostScheduleDialog.react',['cx','fbt','DatePickerRestraints','React','ReactLayeredComponentMixin_DEPRECATED','XUICard.react','XUIDateTimePicker.react','XUIDialog.react','XUIDialogBody.react','XUIDialogButton.react','XUIDialogCancelButton.react','XUIDialogFooter.react','XUIDialogTitle.react','XUINotice.react','XUIText.react'],(function a(b,c,d,e,f,g,h,i){var j=c('React').PropTypes,k=60*1000,l=60*k,m=24*l,n=30*m,o=450,p=325,q=c('React').createClass({displayName:'GroupPostScheduleDialog',mixins:[c('ReactLayeredComponentMixin_DEPRECATED')],propTypes:{timezoneStr:j.string.isRequired,onSubmit:j.func.isRequired,defaultScheduledTimeDelta:j.number.isRequired},getInitialState:function r(){return {shown:false,publishDate:new Date(Date.now()+this.props.defaultScheduledTimeDelta)};},show:function r(){var s=this.getInitialState();s.shown=true;this.setState(s);},renderLayers:function r(){var s=i._("Schedule post"),t=i._("Schedule"),u=this._renderInvalidTimeNotice();return (c('React').createElement('div',null,c('React').createElement(c('XUIDialog.react'),{shown:this.state.shown,width:o,fixedTopPosition:p},c('React').createElement(c('XUIDialogTitle.react'),null,s),c('React').createElement(c('XUIDialogBody.react'),{className:"_4f9h"},this._renderSchedule(),u),c('React').createElement(c('XUIDialogFooter.react'),null,c('React').createElement(c('XUIDialogCancelButton.react'),null),c('React').createElement(c('XUIDialogButton.react'),{action:'confirm',label:t,onClick:this._onSubmitClick,disabled:u!==null,use:'confirm'})))));},_isPublishTimeValid:function r(){var s=this.state.publishDate.getTime(),t=Date.now()+l-10*k,u=Date.now()+n+m;return s>t&&s<u;},_renderSchedule:function r(){return (c('React').createElement('div',null,c('React').createElement(c('XUIText.react'),{display:'block'},i._("Select a date and time in the future for when you want your post to be published.")),c('React').createElement(c('XUICard.react'),{background:'light-wash',className:"_2ph- _3-8n"},c('React').createElement(c('XUIDateTimePicker.react'),{allowEmpty:false,dateRestraints:[c('DatePickerRestraints').enforceDateIsNoEarlierThan(new Date(Date.now())),c('DatePickerRestraints').enforceDateIsNoLaterThan(new Date(Date.now()+n))],date:this.state.publishDate,onChange:function(s){return this.setState({publishDate:s});}.bind(this),timezone:this.props.timezoneStr}))));},_renderInvalidTimeNotice:function r(){if(this._isPublishTimeValid())return null;return (c('React').createElement(c('XUINotice.react'),{use:'warn',className:"_3-8x"},i._("Scheduled posts need to be shared between one hour and one month from when you create them.")));},render:function r(){return (c('React').createElement('div',null));},_onSubmitClick:function r(){this.props.onSubmit(this.state.publishDate);this.setState({shown:false});}});f.exports=q;}),null);
__d('GroupsComposerActions',['GroupsComposerActionsTypes','ReactComposerDispatcher'],(function a(b,c,d,e,f,g){var h={schedule:function i(j,k){c('ReactComposerDispatcher').dispatch({composerID:j,type:c('GroupsComposerActionsTypes').SCHEDULE,scheduleDate:k});}};f.exports=h;}),null);
__d('ReactComposerMediaAttachmentPostButtonContainer.react',['ReactComposerMediaPostButtonContainerMixin','React'],(function a(b,c,d,e,f,g){var h=c('React').createClass({displayName:'ReactComposerMediaAttachmentPostButtonContainer',mixins:[c('ReactComposerMediaPostButtonContainerMixin')]});f.exports=h;}),null);
__d('ReactComposerGroupPostButtonContainer.react',['ix','cx','fbt','ReactComposerActions','ReactComposerAttachmentStore','ReactComposerAttachmentType','ReactComposerConfig','ReactComposerContextMixin','ReactComposerGroupStore','ReactComposerMediaAttachmentPostButtonContainer.react','ReactComposerPhotoStore','ReactComposerMarkdownStore','ReactComposerMediaUploadStore','ReactComposerPostButtonContainer.react','ReactComposerPropsAndStoreBasedStateMixin','ReactComposerStore','ReactComposerSellStore','ReactComposerVideoUploadStore','Bootloader','ContextualDialogArrow','DOM','GroupsComposerActions','GroupPostScheduleDialog.react','GroupSellInterceptUtil','Image.react','PopoverMenu.react','ReactComponentWithPureRenderMixin','React','ReactDOM','XUIButton.react','ReactXUIMenu','fbglyph'],(function a(b,c,d,e,f,g,h,i,j){var k=c('ReactXUIMenu').Item,l=c('React').createClass({displayName:'ReactComposerGroupPostButtonContainer',mixins:[c('ReactComposerContextMixin'),c('ReactComponentWithPureRenderMixin'),c('ReactComposerPropsAndStoreBasedStateMixin')(c('ReactComposerAttachmentStore'),c('ReactComposerPhotoStore'),c('ReactComposerMediaUploadStore'),c('ReactComposerSellStore'),c('ReactComposerStore'),c('ReactComposerVideoUploadStore'),c('ReactComposerMarkdownStore'))],propTypes:{config:c('ReactComposerConfig').isRequired},statics:{calculateState:function m(n,o,p){return {currencySymbol:c('ReactComposerSellStore').getCurrencySymbol(n),interceptWords:c('ReactComposerSellStore').getInterceptWords(n),interceptWordsAfterNumber:c('ReactComposerSellStore').getInterceptedWordsAfterNumber(n),isDialogShown:c('ReactComposerSellStore').showNLUIntercept(n)||c('ReactComposerSellStore').showURLIntercept(n)||c('ReactComposerMarkdownStore').showIntercept(n),selectedAttachment:c('ReactComposerAttachmentStore').getSelectedAttachmentID(n)};}},_performInterceptAttempt:function m(n,o){if(this._showNLUIntercept())return true;if(c('GroupSellInterceptUtil').shouldAttemptInterceptReact(n,o,this.state.interceptWords,this.state.interceptWordsAfterNumber,this.state.currencySymbol)){this.setState({isDialogShown:true});return false;}return true;},componentDidMount:function m(){c('ReactComposerGroupStore').registerComposerID(this.context.composerID);if(this._shouldAttemptIntercept()){c('ReactComposerActions').registerPostIntendedHandler(function(n,o,p,q){return this._performInterceptAttempt(n,q);}.bind(this));c('Bootloader').loadModules(["GroupSellInterceptDialogContainer.react"],function(n){this.setState({sellInterceptDialog:n});}.bind(this),'ReactComposerGroupPostButtonContainer.react');}if(this._shouldAttemptMarkdownIntercept())c('Bootloader').loadModules(["MarkdownInterceptDialogContainer.react"],function(n){this.setState({markdownInterceptDialog:n});}.bind(this),'ReactComposerGroupPostButtonContainer.react');},render:function m(){var n=this.state.sellInterceptDialog||this.state.markdownInterceptDialog;return (c('React').createElement('div',{className:"_332r"},this._isMediaAttachment()?c('React').createElement(c('ReactComposerMediaAttachmentPostButtonContainer.react'),babelHelpers['extends']({},this.props,{config:this.props.config,onClickPreprocess:this._onClickPreprocess})):c('React').createElement(c('ReactComposerPostButtonContainer.react'),babelHelpers['extends']({},this.props,{config:this.props.config,onClickPreprocess:this._onClickPreprocess})),this._canSchedule()?c('React').createElement(c('PopoverMenu.react'),{className:"_1meg",menu:this._renderMenu(),alignh:'right',alignv:'middle',layerBehaviors:[c('ContextualDialogArrow')],position:'below'},c('React').createElement(c('XUIButton.react'),{imageRight:c('React').createElement(c('Image.react'),{src:h("\/images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/triangle-down_16_fig-white.png")}),label:j._("Down"),labelIsHidden:true,size:'medium',use:'confirm'})):null,n&&this.state.isDialogShown?c('React').createElement(n,{config:this.props.config}):null));},_isMediaAttachment:function m(){return this.state.selectedAttachment===c('ReactComposerAttachmentType').MEDIA;},_canSchedule:function m(){return this.props.config.actorConfig.canSchedule;},_onScheduleClicked:function m(){var n=c('ReactDOM').render(c('React').createElement(c('GroupPostScheduleDialog.react'),{timezoneStr:this.props.config.actorConfig.timezoneStr,onSubmit:this._onScheduledTimeSelected,defaultScheduledTimeDelta:this.props.config.actorConfig.defaultScheduledTimeDelta}),c('DOM').create('div'));n.show();},_onScheduledTimeSelected:function m(n){c('GroupsComposerActions').schedule(this.context.composerID,n);c('ReactComposerActions').postStarted(this.context.composerID,{actorID:this.context.actorID,composerType:this.context.composerType,config:this.props.config,targetID:this.context.targetID});},_renderMenu:function m(){return (c('React').createElement(c('ReactXUIMenu'),null,c('React').createElement(k,{onclick:this._onScheduleClicked},j._("Schedule"))));},_shouldAttemptIntercept:function m(){var n=this.props.config.attachmentsConfig[c('ReactComposerAttachmentType').STATUS];return n.attemptIntercept;},_shouldAttemptMarkdownIntercept:function m(){var n=this.props.config.attachmentsConfig[c('ReactComposerAttachmentType').STATUS];return n.attemptMarkdownIntercept;},_showNLUIntercept:function m(){var n=this.props.config.attachmentsConfig[c('ReactComposerAttachmentType').STATUS];return n.nluIntercept;},_onClickPreprocess:function m(){if(this._shouldAttemptIntercept()){var n=this.context.composerID,o=this.context.targetID;return this._performInterceptAttempt(n,o);}return true;}});f.exports=l;}),null);