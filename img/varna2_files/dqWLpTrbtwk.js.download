if (self.CavalryLogger) { CavalryLogger.start_js(["zSA\/1"]); }

__d('BlueBarFocusListener',['CSS','Deferred','Event'],(function a(b,c,d,e,f,g){var h='f_key',i='f_click',j=null,k=function r(){j=null;};function l(r){c('CSS').removeClass(r,h);c('CSS').removeClass(r,i);}function m(r){if(j)j.reject();j=new (c('Deferred'))();j.then(function(s){l(r);c('CSS').addClass(r,s);}).done(k,k);}function n(){if(j)j.resolve(h);}function o(r){if(j)j.reject();c('CSS').removeClass(r,h);c('CSS').addClass(r,i);}function p(r){return function(event){r(event.getTarget());};}var q={listen:function r(s){if(!s)return;c('Event').listen(s,'focusout',p(l));c('Event').listen(s,'focusin',p(m));c('Event').listen(s,'click',p(o));c('Event').listen(s,'keyup',n);}};f.exports=q;}),null);
__d('RoyalBluebar',['Arbiter','Event','Run','SubscriptionsHandler'],(function a(b,c,d,e,f,g){var h={_subscriptionHandler:null,_getSubscriptionHandler:function i(){if(!this._subscriptionHandler){this._subscriptionHandler=new (c('SubscriptionsHandler'))();c('Run').onUnload(function(){this._subscriptionHandler.release();this._subscriptionHandler=null;}.bind(this));}return this._subscriptionHandler;},informOnClick:function i(j){this._getSubscriptionHandler().addSubscriptions(c('Event').listen(j,'click',function(event){if(c('Arbiter').inform('BlueBar/homeClick',event)===false)event.preventDefault();}));}};f.exports=h;}),null);
__d('NotificationSeenState',['NotificationConstants','NotificationUpdates','createObjectFrom'],(function a(b,c,d,e,f,g){var h={},i=1,j=2,k=0,l=i,m=i|j,n=c('NotificationConstants').PayloadSourceType.INITIAL_LOAD,o={UNSEEN_AND_UNREAD:k,SEEN_BUT_UNREAD:l,SEEN_AND_READ:m};function p(s){var t=[],u=[];Object.keys(s).forEach(function(v){var w=s[v],x=h[v];h[v]=w;if(x===undefined){t.push(v);u.push(v);return;}var y=x^w;if(y&i)t.push(v);if(y&j)u.push(v);});t.length&&c('NotificationUpdates').didUpdateSeenState(t);u.length&&c('NotificationUpdates').didUpdateReadState(u);}c('NotificationUpdates').subscribe('update-notifications',function(s,t){var u=t.nodes;if(!u||!u.length)return;var v=t.payloadsource,w=c('NotificationConstants').PayloadSourceType,x=v==w.ENDPOINT,y={};t.nodes.forEach(function(z){var aa=z.alert_id;if(!x||h[aa]===undefined)y[aa]=o[z.seen_state];});p(y);});c('NotificationUpdates').subscribe('update-seen',function(s,t){if(!t.seenState)return;var u=[],v={};Object.keys(t.seenState).forEach(function(x){if(!t.seenState[x]){u.push(x);return;}var y=h[x];if(y!==undefined)v[x]=y|i;});var w=babelHelpers['extends']({},c('createObjectFrom')(u,k),v);p(w);});c('NotificationUpdates').subscribe('update-read',function(s,t){if(!t.readState)return;var u=[],v={};Object.keys(t.readState).forEach(function(x){if(t.readState[x]){u.push(x);return;}var y=h[x];if(y!==undefined){v[x]=y&~j;}else if(t.payloadsource==n)v[x]=l;});var w=babelHelpers['extends']({},c('createObjectFrom')(u,m),v);p(w);});function q(s){var t=h[s];return t;}var r={isRead:function s(t){return q(t)===m;},isSeen:function s(t){return q(t)!==k;},getUnseenCount:function s(){return r.getUnseenIDs().length;},getUnseenIDs:function s(){return Object.keys(h).filter(function(t){return h[t]===k;});},getUnreadCount:function s(){return r.getUnreadIDs().length;},getUnreadIDs:function s(){return Object.keys(h).filter(function(t){return h[t]!==m;});}};f.exports=r;}),6);
__d('NotificationJewelControllerModuleLoader',['JSResource','NotificationSeenState','NotificationStore','NotificationUpdates'],(function a(b,c,d,e,f,g){c('NotificationSeenState');c('NotificationStore');c('NotificationUpdates');f.exports=c('JSResource')('NotificationJewelController').__setRef('NotificationJewelControllerModuleLoader');}),null);
__d('NotificationJewelHeaderController',['DOM','Event','NotificationSeenState','NotificationUserActions','NotificationUpdates'],(function a(b,c,d,e,f,g){function h(i,j){'use strict';c('Event').listen(i,'click',function(){var k=c('NotificationSeenState').getUnreadIDs();if(k.length)c('NotificationUserActions').markNotificationsAsRead(k);});c('NotificationUpdates').subscribe('read-state-updated',function(){if(j)c('DOM').setContent(j,c('NotificationSeenState').getUnreadCount());});}f.exports=h;}),null);
__d('NotificationJewelListController',['Bootloader','React','ReactDOM'],(function a(b,c,d,e,f,g){var h=null,i=null;function j(k,l){'use strict';this.$NotificationJewelListController1=false;this.$NotificationJewelListController2=false;this.$NotificationJewelListController3=k;this.$NotificationJewelListController4=l;}j.prototype.open=function(){'use strict';this.$NotificationJewelListController1=true;this.$NotificationJewelListController5();};j.prototype.pause=function(){'use strict';this.$NotificationJewelListController2=true;this.$NotificationJewelListController5();};j.prototype.unpause=function(){'use strict';this.$NotificationJewelListController2=false;this.$NotificationJewelListController5();};j.prototype.$NotificationJewelListController5=function(){'use strict';if(!h||!i){c('Bootloader').loadModules(["NotificationList.react","NotificationJewelList.react"],function(k,l){h=k;i=l;this.$NotificationJewelListController6();}.bind(this),'NotificationJewelListController');}else this.$NotificationJewelListController6();};j.prototype.$NotificationJewelListController6=function(){'use strict';if(!h)return;c('ReactDOM').render(c('React').createElement(h,{hasEverBeenOpened:this.$NotificationJewelListController1,paused:this.$NotificationJewelListController2,tracking:this.$NotificationJewelListController4.tracking,negativeTracking:this.$NotificationJewelListController4.negativeTracking,shortenTimestamp:this.$NotificationJewelListController4.shortenTimestamp,businessID:this.$NotificationJewelListController4.businessID,maxHeight:this.$NotificationJewelListController4.maxHeight,useChevron:this.$NotificationJewelListController4.useChevron,chevronType:this.$NotificationJewelListController4.chevronType,numPerPage:5,listRenderer:i,upsell:this.$NotificationJewelListController4.upsell||null,endpoint:this.$NotificationJewelListController4.endpoint}),this.$NotificationJewelListController3);};f.exports=j;}),null);
__d('EXHPLeftNavController',['cx','csx','Arbiter','Bootloader','Event','Parent','UIPagelet','emptyFunction','requireWeak'],(function a(b,c,d,e,f,g,h,i){var j=void 0;function k(){if(!j){j=true;c('Bootloader').loadModules(["LeftNavActions","BookmarkPopoverMenu.react","LeftNavDragController","LeftNavItemDraggableBehavior"],c('emptyFunction'),'EXHPLeftNavController');}}var l=void 0;function m(){if(!l){l=true;c('UIPagelet').loadFromEndpoint('ReactLeftNavPagelet','pagelet_navigation').setHandler(function(){l=false;if(o){o.remove();o=null;}});}}var n={},o=void 0,p={init:function t(u){o=c('Event').listen(u,'click',function(event){var v=event.target,w=c('Parent').byAttribute(v,'data-nav-item-id');if(!w)return;var x=w.getAttribute('data-nav-item-id'),y=c('Parent').bySelector(v,"._26tg");if(y){q(y,x);event.preventDefault();}else r(w,x);});},consumeDidHaveClick:function t(u){var v=n[u];delete n[u];return !!v;}};function q(t,u){t.parentNode.replaceChild(s(),t);n[u]=true;k();m();}function r(t,u){var v=t.querySelector('.countValue');v&&v.remove();if(t.getAttribute('data-type')==='type_explore_feed'){m();c('requireWeak')('LeftNavController',function(w){c('Arbiter').inform('LeftNavController/topicFeedClick',u);});}}function s(){var t=document.createElement('span');t.className="_2ita _55ym _55yn _55yo";return t;}f.exports=p;}),null);
__d("XBrowserPushDisabledController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/notifications\/client\/push\/disabled\/",{});}),null);
__d("XBrowserPushXOutController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/notifications\/client\/push\/xout\/",{});}),null);
__d("XServiceWorkerSessionChangeController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/service_workers\/session\/persist\/",{});}),null);
__d('BrowserPushSessionChange.react',['cx','fbt','ix','AsyncRequest','BanzaiLogger','Image.react','ImageBlock.react','LayerFadeOnHide','React','ReloadPage','XBrowserPushDisabledController','XBrowserPushXOutController','XServiceWorkerSessionChangeController','XUIDialog.react','XUIDialogBody.react','XUIDialogButton.react','XUIDialogFooter.react','XUIDialogOkayButton.react','XUIDialogTitle.react','XUISpinner.react','XUIText.react'],(function a(b,c,d,e,f,g,h,i,j){var k,l,m=c('React').PropTypes;k=babelHelpers.inherits(n,c('React').Component);l=k&&k.prototype;function n(){var o,p;'use strict';for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=l.constructor).call.apply(o,[this].concat(r)),this.state={dialogShown:true,spin:false},this.$BrowserPushSessionChange1=function(t){if(t)return;this.setState({dialogShown:false});this.$BrowserPushSessionChange2('session_keep');var u=c('XServiceWorkerSessionChangeController').getURIBuilder().getURI();new (c('AsyncRequest'))().setURI(u).setMethod('post').setData({app_id:this.props.push.appID}).setAllowCrossPageTransition(true).setHandler(function(v){this.props.onHide();}.bind(this)).send();}.bind(this),this.$BrowserPushSessionChange2=function(event){var t={event:event,appid:this.props.push.appID,surface:'session_change'};c('BanzaiLogger').log('BrowserPushLoggerConfig',t);}.bind(this),this.$BrowserPushSessionChange3=function(){this.setState({spin:true});this.$BrowserPushSessionChange2('session_uninstall');this.$BrowserPushSessionChange2('xout');var t=c('XBrowserPushXOutController').getURIBuilder().getURI(),u=function(){this.props.push.unregisterPushAndSW(c('XBrowserPushDisabledController'),c('AsyncRequest')).done(function(v){c('ReloadPage').now();});}.bind(this);new (c('AsyncRequest'))().setURI(t).setMethod('post').setHandler(u).setAllowCrossPageTransition(true).send();}.bind(this),p;}n.prototype.componentDidMount=function(){'use strict';this.$BrowserPushSessionChange2('session_change_prompt');};n.prototype.render=function(){'use strict';if(!this.state.dialogShown)return null;var o=j('/images/notifications/potsy_jump.png');return (c('React').createElement(c('XUIDialog.react'),{shown:true,behaviors:{LayerFadeOnHide:c('LayerFadeOnHide')},onToggle:this.$BrowserPushSessionChange1,width:445,key:'dialog'},c('React').createElement(c('XUIDialogTitle.react'),null,i._("Desktop notifications are on")),c('React').createElement(c('XUIDialogBody.react'),null,this.state.spin?c('React').createElement(c('XUISpinner.react'),{size:'large'}):c('React').createElement(c('ImageBlock.react'),{spacing:'medium'},c('React').createElement(c('Image.react'),{src:o,alt:i._("Desktop notifications are on")}),c('React').createElement('div',null,c('React').createElement('div',{className:"_3-8h"},c('React').createElement(c('XUIText.react'),{size:'large'},i._("When you get a new notification, you'll see it in the corner of your screen."))),c('React').createElement('div',{className:"_3-8h"},c('React').createElement(c('XUIText.react'),{size:'small'},i._("To make sure that you get notifications, you'll now stay logged in to Facebook on this computer. If you're using a public computer or don't want to stay logged in, click Undo to turn off desktop notifications.")))))),c('React').createElement(c('XUIDialogFooter.react'),null,c('React').createElement(c('XUIDialogButton.react'),{action:'button',label:i._("Undo"),onClick:this.$BrowserPushSessionChange3}),c('React').createElement(c('XUIDialogOkayButton.react'),{use:'confirm',action:'cancel'}))));};n.propTypes={onHide:m.func.isRequired,push:m.object.isRequired};f.exports=n;}),null);
__d('NotificationPermissionNotice.react',['cx','fbt','Event','Keys','React','XUIAmbientNUX.react'],(function a(b,c,d,e,f,g,h,i){var j,k,l=[],m=c('React').PropTypes;j=babelHelpers.inherits(n,c('React').Component);k=j&&j.prototype;function n(){var o,p;'use strict';for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.renderLayers=function(){var t=this.props.shortText?i._("Click the lock to give {browser_name} permission to send you desktop notifications.",[i.param('browser_name',this.props.browserName)]):i._("If you change your mind, click the lock to give {browser_name} permission to send you desktop notifications.",[i.param('browser_name',this.props.browserName)]);return (c('React').createElement(c('XUIAmbientNUX.react'),{contextRef:function(){return this.refs.noticeAnchor;}.bind(this),shown:true,position:'below',onCloseButtonClick:this.props.onHide,key:'nux'},t));}.bind(this),p;}n.prototype.componentDidMount=function(){'use strict';l.push(c('Event').listen(window,'mousedown',this.props.onHide));l.push(c('Event').listen(window,'keydown',function(event){if(event.keyCode===c('Keys').ESC)this.props.onHide();}.bind(this)));};n.prototype.componentWillUnmount=function(){'use strict';while(l.length>0){var o=l.pop();o.remove();}};n.prototype.render=function(){'use strict';return (c('React').createElement('span',null,c('React').createElement('span',{ref:'noticeAnchor',className:"_1_i1"}),this.renderLayers()));};n.propTypes={onHide:m.func.isRequired,shortText:m.bool,browserName:m.string.isRequired};f.exports=n;}),null);
__d('NotificationPermissionRequest.react',['cx','Spotlight.react','React'],(function a(b,c,d,e,f,g,h){var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.render=function(){'use strict';return (c('React').createElement(c('Spotlight.react'),{shown:true,onHide:this.props.onHide,key:'spotlight'},c('React').createElement('div',{className:"_n3"})));};function l(){'use strict';i.apply(this,arguments);}l.propTypes={onHide:k.func.isRequired};f.exports=l;}),null);
__d('ContextualHelpSearchController',['Event','AsyncRequest','DOM','CSS','Focus','Input'],(function a(b,c,d,e,f,g){var h=400;function i(j,k,l,m,n,o){this._token=null;this._timerID=0;this._lastQuery=null;this.loader=j;this.search_box=k;this.topics_area=l;this.results_area=m;this.clear_button=n;this.typing_listener=c('Event').listen(this.search_box,'keyup',this.setTimer.bind(this));this.clear_listener=c('Event').listen(this.clear_button,'click',this.clearResults.bind(this));if(o==null||o.focusSearchBox==null||o.focusSearchBox)c('Focus').set(this.search_box);this.async_request=null;}Object.assign(i.prototype,{source:'contextual_help',clearResults:function j(){this.show(this.topics_area);this._lastQuery='';c('Input').reset(this.search_box);c('Focus').set(this.search_box);if(this.async_request!==null){this.async_request.abort();this.async_request=null;}c('CSS').addClass(this.clear_button,'hidden_elem');},update:function j(){var k=c('Input').getValue(this.search_box);if(k===this._lastQuery)return;this._lastQuery=k;if(k===''){this.clearResults();return;}this.show(this.loader);var l={query:k,width:this._width||h,source:this.source};this.async_request=new (c('AsyncRequest'))('/help/ajax/search/').setData(l).setHandler(function(m){this._update(m);}.bind(this));this.async_request.send();},_update:function j(k){this.async_request=null;var l=k.getPayload().results;c('DOM').setContent(this.results_area,l);this.show(this.results_area);if(c('Input').getValue(this.search_box)===''){this.clearResults();}else c('CSS').removeClass(this.clear_button,'hidden_elem');},setTimer:function j(){if(this._timerID!==0)clearTimeout(this._timerID);this._timerID=setTimeout(this.update.bind(this),300);if(this.async_request!=null){this.async_request.abort();this.async_request=null;}},show:function j(k){var l=[this.loader,this.topics_area,this.results_area];for(var m=0;m<l.length;m++)c('CSS').addClass(l[m],'hidden_elem');c('CSS').removeClass(k,'hidden_elem');}});f.exports=i;}),null);
__d('JewelCountSideLoader',['CSS'],(function a(b,c,d,e,f,g){var h={},i={},j={},k={queueInstances:function l(m,n,o){h[m]={badge:n,root:o};},updateCountAndQueueArgs:function l(m,n,o){var p=i[m];if(p){p.updateCountAndArgs(o,n);return;}var q=h[m];if(!q)throw new Error('Jewel instances where not set');j[m]={count:n,args:o};c('CSS').conditionClass(q.root,'hasNew',n);q.badge.setLegacyContent(n);return;},getOverwritesForJewel:function l(m){if(j[m.name])return j[m.name];i[m.name]=m;return null;}};f.exports=k;}),null);
__d('NotificationJewelFunnelLoggingConstants',[],(function a(b,c,d,e,f,g){'use strict';f.exports={FUNNEL_LOGGING_NAME:'WWW_NOTIFICATION_FUNNEL',FUNNEL_LOGGING_EVENT:{FETCH_NOTIFICATIONS:'fetch_notifications',OPEN_JEWEL:'open_jewel',CLOSE_JEWEL:'close_jewel',MOUSE_OVER_ON_JEWEL:'mouse_over_on_jewel',SCROLL_TO_FETCH:'scroll_to_fetch',FETCH_NEXT_SET:'fetch_next_set',CLEAR_BADGE_COUNT:'clear_badge_count'}};}),null);
__d('JewelBase',['csx','Promise','Arbiter','ArbiterMixin','CSS','DOM','Event','HTML','JewelCountSideLoader','Keys','Run','TabIsolation','Toggler','TooltipData','FunnelLogger','NotificationJewelFunnelLoggingConstants','mixin','reportData'],(function a(b,c,d,e,f,g,h){var i,j,k=c('NotificationJewelFunnelLoggingConstants').FUNNEL_LOGGING_NAME,l=c('NotificationJewelFunnelLoggingConstants').FUNNEL_LOGGING_EVENT,m={};i=babelHelpers.inherits(n,c('mixin')(c('ArbiterMixin')));j=i&&i.prototype;function n(o,p){'use strict';j.constructor.call(this);this.name=p.name;this.label=p.label;this.root=o;this.badge=p.badge;this.countNew=0;this.initialCount=0;this.escHandler=null;this.bootload_module=p.bootload_module;this.bootload_args=p.bootload_args;this.bootloading=null;this.togglerInstance=c('Toggler').getInstance(o).setSticky(false);c('Run').onAfterLoad(function(){return this.$JewelBase1();}.bind(this));if(p.keepOpenForSnowlift)this.togglerInstance.setPrePageTransitionCallback(this.$JewelBase2.bind(this));m[this.name]=this;this.$JewelBase3();var q=this.getFlyout(),r=new (c('TabIsolation'))(q);c('Toggler').createInstance(q).setSticky(false);this.$JewelBase4();c('Toggler').listen('show',this.root,function(s){c('FunnelLogger').appendAction(k,l.OPEN_JEWEL);this.$JewelBase5();this.hasNew()&&this.markSeen();this.reset();c('Arbiter').inform('layer_shown',{type:'Jewel'});r.enable();this.setupEvents();this.$JewelBase6();return this.$JewelBase1().then(function(){this.inform('opened');}.bind(this));}.bind(this));c('Toggler').listen('hide',this.root,function(s,t){c('FunnelLogger').appendAction(k,l.CLOSE_JEWEL);c('FunnelLogger').endFunnel(k);this.hasNew()&&this.markSeen();this.reset();this.inform('closed');c('Arbiter').inform('layer_hidden',{type:'Jewel'});r.disable();this.removeEvents();this.$JewelBase4();}.bind(this));c('Arbiter').subscribe('jewel/count-updated',function(s,t){t.jewel==this.name&&this.update(t);}.bind(this));c('Arbiter').subscribe('jewel/hide',function(s,t){this.hide();}.bind(this));}n.prototype.getRoot=function(){'use strict';return this.root;};n.prototype.hide=function(){'use strict';if(this.isOpen())c('Toggler').hide(this.root);};n.prototype.getFlyout=function(){'use strict';if(this.$JewelBase7===undefined)this.$JewelBase7=c('DOM').find(this.root,".__tw");return this.$JewelBase7;};n.prototype.hasNew=function(){'use strict';return c('CSS').hasClass(this.root,'hasNew');};n.prototype.isOpen=function(){'use strict';return c('CSS').hasClass(this.root,'openToggler');};n.prototype.reset=function(){'use strict';c('FunnelLogger').appendAction(k,l.CLEAR_BADGE_COUNT);c('CSS').removeClass(this.root,'hasNew');};n.prototype.setContent=function(o){'use strict';var p=c('DOM').find(this.root,'ul.jewelItemList');c('DOM').setContent(p,c('HTML')(o));};n.prototype.update=function(o){'use strict';this.countNew=o.count;if(typeof this.countNew==='number'&&this.countNew<0)this.countNew=0;this.badge.setLegacyContent(this.countNew);var p=isNaN(this.countNew)||this.countNew>0;c('CSS').conditionClass(this.root,'hasNew',p);this.inform('updated',o);};n.prototype.setupEvents=function(){'use strict';this.escHandler=c('Event').listen(document.documentElement,'keydown',function(o){if(o.keyCode===c('Keys').ESC)this.hide();}.bind(this));};n.prototype.removeEvents=function(){'use strict';if(this.escHandler){this.escHandler.remove();this.escHandler=null;}};n.prototype.markSeen=function(){'use strict';c('Arbiter').inform('jewel/count-updated',{jewel:this.name,count:0},c('Arbiter').BEHAVIOR_STATE);this.inform('marked-seen');};n.prototype.$JewelBase8=function(){'use strict';if(typeof this.$JewelBase9==='undefined')this.$JewelBase9=c('DOM').find(this.root,"a.jewelButton");return this.$JewelBase9;};n.prototype.$JewelBase4=function(){'use strict';var o=this.$JewelBase8();c('TooltipData').set(o,this.label);o.setAttribute('data-tooltip-delay','500');};n.prototype.$JewelBase6=function(){'use strict';c('TooltipData').remove(this.$JewelBase8());};n.prototype.$JewelBase2=function(o,p){'use strict';if(!this.$JewelBase10(p.from)&&!this.$JewelBase10(p.to))this.togglerInstance&&this.togglerInstance.hide();};n.prototype.$JewelBase10=function(o){'use strict';return o&&o.getQueryData().hasOwnProperty('theater');};n.prototype.$JewelBase5=function(){'use strict';c('reportData')('jewel_click',{gt:{count:this.countNew,initial:this.initialCount,jewel:this.name}});};n.prototype.$JewelBase1=function(){'use strict';if(!this.bootload_module)return c('Promise').resolve();if(!this.bootloading)this.bootloading=new (c('Promise'))(function(o,p){this.bootload_module.load().then(function(q){new q(this,this.bootload_args);o();}.bind(this))['catch'](p);}.bind(this));return this.bootloading;};n.prototype.$JewelBase3=function(){'use strict';if(this.bootloading)return;var o=c('JewelCountSideLoader').getOverwritesForJewel(this);if(!o)return;this.updateCountAndArgs(o.args,o.count);};n.prototype.updateCountAndArgs=function(o,p){'use strict';for(var q in o)if(o[q])this.bootload_args[q]=o[q];if(p)c('Arbiter').inform('jewel/count-updated',{jewel:this.name,count:p},c('Arbiter').BEHAVIOR_STATE);};f.exports=n;}),null);
__d('ModalMask',['DOM'],(function a(b,c,d,e,f,g){var h=null,i=0,j={show:function k(){i++;if(!h){h=c('DOM').create('div',{id:'modalMaskOverlay'});c('DOM').appendContent(document.body,h);}},hide:function k(){if(i){i--;if(!i&&h){c('DOM').remove(h);h=null;}}},getNode:function k(){return h;}};f.exports=j;}),null);
__d('LitestandChromeHomeCount',['cx','Arbiter','AsyncRequest','CSS','DOM','Event','LitestandMessages','UserAgent'],(function a(b,c,d,e,f,g,h){var i=300000,j={},k,l;function m(){l&&clearTimeout(l);if(k)return;l=setTimeout(n,i);}function n(){if(k)return;new (c('AsyncRequest'))().setURI('/ajax/litestand/newsfeed_count').setHandler(function(q){if(k)return;p.setCount(q.getPayload());m();}).setAllowCrossPageTransition(true).send();}function o(q){c('CSS').conditionClass(j.wrapNode,"_461d",q>0);if(q>0){var r=q>j.max?j.max+'+':q;c('DOM').setContent(j.countNode,r);}}var p={init:function q(r){j=r;c('Event').listen(j.homeNode,'click',function(event){var s=event.getModifiers(),t=s.shift,u=s.meta,v=s.control;if(t||c('UserAgent').isPlatform('Mac OS X')&&u||c('UserAgent').isPlatform('Windows')&&v)o(0);});c('Arbiter').subscribe(c('LitestandMessages').NEWSFEED_LOAD,function(){k=true;this.setCount(0);}.bind(this));c('Arbiter').subscribe(c('LitestandMessages').LEAVE_HOME,function(){k=false;m();});m();},setCount:function q(r){o(k?0:r);}};f.exports=p;}),null);
__d('AccessibilityShortcut',['AccessibilityLogger','Event','Focus','ge','onEnclosingPageletDestroy','warning'],(function a(b,c,d,e,f,g){var h={init:function i(j,k){var l=c('Event').listen(j,'click',function(m){m.preventDefault();var n=c('ge')(k);if(n){c('Focus').set(n);c('AccessibilityLogger').logSRKey();}else c('warning')(n,'Failed to set focus on element with ID: %s',k);});c('onEnclosingPageletDestroy')(j,function(){return l.remove();});}};f.exports=h;}),null);
__d('QuicklingAugmenter',['URI'],(function a(b,c,d,e,f,g){var h=[],i={addHandler:function j(k){h.push(k);},augmentURI:function j(k){var l=[],m=new (c('URI'))(k);h.forEach(function(n){var o=n(m);if(!o)return m;l.push(n);m=m.addQueryData(o);});h=l;return m;}};f.exports=i;}),null);
__d('cancelIdleCallback',['TimerStorage','IdleCallbackImplementation'],(function a(b,c,d,e,f,g){f.exports=function(){for(var h=arguments.length,i=Array(h),j=0;j<h;j++)i[j]=arguments[j];c('TimerStorage').unset(c('TimerStorage').IDLE_CALLBACK,i[0]);return Function.prototype.apply.call(c('IdleCallbackImplementation').cancelIdleCallback,b,i);};}),null);
__d('replaceNativeTimer',['clearInterval','clearTimeout','setInterval','setTimeout'],(function a(b,c,d,e,f,g){var h=false;function i(){if(!h){h=true;c('setTimeout').nativeBackup=b.setTimeout;c('clearTimeout').nativeBackup=b.clearTimeout;c('setInterval').nativeBackup=b.setInterval;c('clearInterval').nativeBackup=b.clearInterval;b.setTimeout=c('setTimeout');b.clearTimeout=c('clearTimeout');b.setInterval=c('setInterval');b.clearInterval=c('clearInterval');}}f.exports=i;}),null);
__d('Quickling',['AjaxPipeRequest','Arbiter','CSSClassTransition','DocumentTitle','DOM','HTML','PageHooks','PageEvents','PageTransitionsRegistrar','QuicklingAugmenter','QuicklingConfig','Run','URI','UserAgent_DEPRECATED','PHPQuerySerializer','TimerStorage','cancelAnimationFrame','cancelIdleCallback','clearImmediate','clearInterval','clearTimeout','goOrReplace','isEmpty','replaceNativeTimer','requireWeak'],(function a(b,c,d,e,f,g){var h,i,j;c('requireWeak')('PageTransitions',function(w){j=w;});var k=c('QuicklingConfig').version,l=c('QuicklingConfig').sessionLength,m=new RegExp(c('QuicklingConfig').inactivePageRegex),n=0,o,p='',q={isActive:function w(){return true;},isPageActive:function w(x){if(x=='#')return false;x=new (c('URI'))(x);if(x.getDomain()&&x.getDomain()!=new (c('URI'))(window.location.href).getDomain())return false;if(x.getPath()=='/l.php'){var y=x.getQueryData().u;if(y){y=new (c('URI'))(unescape(y)).getDomain();if(y&&y!=new (c('URI'))(window.location.href).getDomain())return false;}}var z=x.getPath(),aa=x.getQueryData();if(!c('isEmpty')(aa))z+='?'+c('PHPQuerySerializer').serialize(aa);return !m.test(z);},getLoadCount:function w(){return n;}};function r(w){w=w||'Facebook';c('DocumentTitle').set(w);if(c('UserAgent_DEPRECATED').ie()){p=w;if(!o)o=window.setInterval(function(){var x=p,y=c('DocumentTitle').get();if(x!=y)c('DocumentTitle').set(x);},5000,false);}}function s(w){var x=document.getElementsByTagName('link');for(var y=0;y<x.length;++y){if(x[y].rel!='alternate')continue;c('DOM').remove(x[y]);}if(w.length){var z=c('DOM').find(document,'head');z&&c('DOM').appendContent(z,c('HTML')(w[0]));}}h=babelHelpers.inherits(t,c('AjaxPipeRequest'));i=h&&h.prototype;function t(w){'use strict';var x={version:k};i.constructor.call(this,w,{quickling:x});this._isQuickling=true;}t.prototype._preBootloadFirstResponse=function(w){'use strict';return true;};t.prototype._fireDomContentCallback=function(){'use strict';this._request.cavalry&&this._request.cavalry.setTimeStamp('t_domcontent');if(j)j.transitionComplete();this._onPageDisplayed&&this._onPageDisplayed(this.pipe);i._fireDomContentCallback.call(this);};t.prototype._fireOnloadCallback=function(){'use strict';if(this._request.cavalry){this._request.cavalry.setTimeStamp('t_hooks');this._request.cavalry.setTimeStamp('t_layout');this._request.cavalry.setTimeStamp('t_onload');}i._fireOnloadCallback.call(this);};t.prototype.isPageActive=function(w){'use strict';return q.isPageActive(w);};t.prototype._versionCheck=function(w){'use strict';if(w.version==k)return true;var x=['quickling','ajaxpipe','ajaxpipe_token'];c('goOrReplace')(window.location,new (c('URI'))(w.uri).removeQueryData(x),true);return false;};t.prototype._processFirstResponse=function(w){'use strict';var x=w.getPayload();r(x.title);s(x.syndication||[]);window.scrollTo(0,0);c('CSSClassTransition').go(document.body,x.body_class||'',j.getMostRecentURI(),w.getRequest().getURI());c('Arbiter').inform('quickling/response');};t.prototype.getSanitizedParameters=function(){'use strict';return ['quickling'];};function u(){n++;return n>=l;}function v(w){c('AjaxPipeRequest').setCurrentRequest(null);if(u()){w.addQueryData({qsefr:1});return false;}w=c('QuicklingAugmenter').augmentURI(w);if(!q.isPageActive(w))return false;c('TimerStorage').clearAll(c('TimerStorage').ANIMATION_FRAME,c('cancelAnimationFrame'));c('TimerStorage').clearAll(c('TimerStorage').IDLE_CALLBACK,c('cancelIdleCallback'));c('TimerStorage').clearAll(c('TimerStorage').IMMEDIATE,c('clearImmediate'));c('TimerStorage').clearAll(c('TimerStorage').INTERVAL,c('clearInterval'));c('TimerStorage').clearAll(c('TimerStorage').TIMEOUT,c('clearTimeout'));window.ExitTime=Date.now();c('Run').__removeHook(c('PageHooks').ONLOAD_HOOK);c('Run').__removeHook(c('PageHooks').DOMREADY_HOOK);c('PageHooks').runHooks('onleavehooks');c('Arbiter').inform(c('PageEvents').AJAXPIPE_ONUNLOAD,{transition_type:'quickling'});new t(w).setCanvasId('content').send();var x=window.__bodyWrapper;if(x.getCodeUsage)x.clearCodeUsage();return c('PageTransitionsRegistrar').DELAY_HISTORY;}c('replaceNativeTimer')();c('Run').onAfterLoad(function w(){c('PageTransitionsRegistrar').registerHandler(v,1);});f.exports=b.Quickling=q;}),null);
__d('BrowserPushCommands',[],(function a(b,c,d,e,f,g){var h='browser_push_ack',i='browser_push_redirect',j='browser_push_window_visible',k={ACK:h,REDIRECT:i,WINDOW_VISIBLE:j};f.exports=k;}),null);
__d('BrowserPushMessageRedirectUtil',['Bootloader','MercuryConfig'],(function a(b,c,d,e,f,g){var h=function i(j){var k='(messages)(.*?)(?:(tid=))([^&]*)',l=j.match(k);if(!l)return true;var m=l.pop();if(c('MercuryConfig').FantaTabs){c('Bootloader').loadModules(["FantaTabActions"],function(n){n.openTab(m);},'BrowserPushMessageRedirectUtil');}else c('Bootloader').loadModules(["ChatOpenTab"],function(n){n.openThread(m,'jewel');},'BrowserPushMessageRedirectUtil');return false;};f.exports=h;}),null);
__d('BrowserPushMessageHandler',['BrowserPushCommands','BrowserPushMessageRedirectUtil','EventListener','isFacebookURI','URISchemes','URI'],(function a(b,c,d,e,f,g){function h(event){if(event.data.command&&event.data.command===c('BrowserPushCommands').REDIRECT){if(window.onbeforeunload()===undefined){event.ports[0].postMessage({command:c('BrowserPushCommands').ACK,success:true});}else{event.ports[0].postMessage({command:c('BrowserPushCommands').ACK,success:false});return;}var j=event.data.uri;if(/^([^.:/?#]+):/.test(j)&&!c('URISchemes').isAllowed(/^([^.:/?#]+):/.exec(j)[1])||!c('isFacebookURI')(new (c('URI'))(j)))throw new Error('goURI: URI scheme rejected, URI: '+j);if(c('BrowserPushMessageRedirectUtil')(j))window.location.href=j;}}var i={registerRedirectHandler:function j(){c('EventListener').listen(window,'message',function(event){if(event.origin==='')h(event);});if(navigator.serviceWorker&&navigator.serviceWorker.addEventListener)navigator.serviceWorker.addEventListener('message',function(event){if(navigator.serviceWorker&&navigator.serviceWorker.controller&&event.target&&event.target.controller&&event.target.controller===navigator.serviceWorker.controller||new RegExp('^'+window.location.protocol+'//'+window.location.host+'$').test(event.origin))h(event);});}};f.exports=i;}),null);
__d('BrowserPushVisibilityChanger',['BrowserPushCommands','ClientServiceWorkerMessage','Visibility'],(function a(b,c,d,e,f,g){function h(){new (c('ClientServiceWorkerMessage'))(c('BrowserPushCommands').WINDOW_VISIBLE,null).sendViaController();}var i={listenForVisibility:function j(){if(!c('Visibility').isHidden())h();c('Visibility').addListener(c('Visibility').VISIBLE,h);}};f.exports=i;}),null);
__d('PushRegistration',['Promise','BrowserPushMessageHandler','BrowserPushVisibilityChanger','Map','ServiceWorkerRegistration'],(function a(b,c,d,e,f,g){var h=window.Notification,i=new (c('Map'))();j.get=function(k,l){'use strict';if(i.has(l))return i.get(l);var m=new j(k,l);i.set(l,m);return m;};function j(k,l){'use strict';this.$PushRegistration3=k;this.appID=l;if(!j.$PushRegistration1&&!j.$PushRegistration2){j.$PushRegistration1=false;j.$PushRegistration2=false;}}j.prototype.getPushSubscription=function(){'use strict';return new (c('Promise'))(function(k,l){if(!h||h.permission==='denied')l(new Error('No permission or not supported'));c('ServiceWorkerRegistration').getWorkerRegistration(this.$PushRegistration3).then(function(m){if(!m){k(null);return;}m.pushManager.getSubscription().then(function(n){k(n);})['catch'](l);})['catch'](l);}.bind(this));};j.prototype.$PushRegistration4=function(k){'use strict';var l=k.endpoint;if('subscriptionId' in k&&!new RegExp('/'+k.subscriptionId+'$').test(l))l+='/'+k.subscriptionId;return l;};j.prototype.$PushRegistration5=function(k,l,m,n){'use strict';var o=this.$PushRegistration4(m),p=k.getURIBuilder().getURI(),q=new l(p);q.setData({app_id:this.appID,push_endpoint:o,subscription_keys:JSON.stringify(m.toJSON().keys)});q.setMethod('post');if(q.setHandler)q.setHandler(function(r){if(r.payload&&r.payload.session_change)n();});q.send();};j.prototype.getSubscription=function(){'use strict';return new (c('Promise'))(function(k,l){this.getPushSubscription().then(function(m){if(m){k(this.$PushRegistration4(m));}else k(null);}.bind(this))['catch'](l);}.bind(this));};j.prototype.maybeRegisterPushAgain=function(k,l,m){'use strict';return new (c('Promise'))(function(n,o){this.getPushSubscription().then(function(p){if(p){this.$PushRegistration5(k,l,p,m);n(this.$PushRegistration4(p));}else n(null);}.bind(this))['catch'](function(){n(null);});}.bind(this));};j.prototype.$PushRegistration6=function(k,l,m){'use strict';return new (c('Promise'))(function(n,o){if(j.$PushRegistration2&&!m){o(new Error('sending disable info already'));return;}j.$PushRegistration2=true;var p=k.getURIBuilder().getURI(),q=new l(p.toString());q.setData({appid:this.appID,from_browser_settings:m});q.setMethod('post');if(q.listen){q.listen('finally',n);q.listen('fail',function(){j.$PushRegistration2=false;o();});}else if(q.setErrorHandler&&q.setHandler){q.setErrorHandler(function(){j.$PushRegistration2=false;o();});q.setHandler(n);}else n();q.send();}.bind(this));};j.prototype.isPushRegistered=function(k,l,m,n,o,p,q){'use strict';c('BrowserPushMessageHandler').registerRedirectHandler();return new (c('Promise'))(function(r,s){this.getPushSubscription().then(function(t){r(!!t||k&&!j.pushPermissionIsPending());if(t){if(o){self.$PushRegistration5(l,n,p,q);}else c('BrowserPushVisibilityChanger').listenForVisibility();}else if(!t&&k)if(j.pushPermissionIsOn()){this.registerPush(l,n,p,q)['catch'](function(){});}else this.$PushRegistration6(m,n,false);}.bind(this))['catch'](function(){if(k){this.$PushRegistration6(m,n,false);s();}if(q)c('ServiceWorkerRegistration').unregisterControllingWorker();}.bind(this));}.bind(this));};j.prototype.$PushRegistration7=function(){'use strict';return new (c('Promise'))(function(k,l){h.requestPermission(k);});};j.prototype.registerPushAndWaitForEndpoint=function(k,l,m,n){'use strict';return new (c('Promise'))(function(o,p){this.$PushRegistration8(k,l,m,true,null,n).then(function(q){if(typeof q!=='string'){p(new Error('registerPushImpl did not return an endpoint'));return;}o(q);})['catch'](p);}.bind(this));};j.prototype.registerPush=function(k,l,m,n){'use strict';return this.registerPushWithFinishedCallBack(k,l,m,null,n);};j.prototype.registerPushWithFinishedCallBack=function(k,l,m,n,o){'use strict';return new (c('Promise'))(function(p,q){this.$PushRegistration8(k,l,m,false,n,o).then(function(r){if(typeof r!=='boolean'){q(new Error('registerPushImpl did not return a boolean'));return;}p(r);})['catch'](q);}.bind(this));};j.prototype.$PushRegistration8=function(k,l,m,n,o,p){'use strict';if(j.$PushRegistration1)return new (c('Promise'))(function(q,r){r(new Error('registering already'));});j.$PushRegistration1=true;return new (c('Promise'))(function(q,r){var s=c('ServiceWorkerRegistration').registerWorkerIfUnregistered(this.$PushRegistration3),t=this.$PushRegistration7();c('Promise').all([s,t]).then(function(u){var v=u[0];if(!j.pushPermissionIsOn()){if(p)v.unregister();throw new Error('Push permission was denied');}if(!n)q(true);v.pushManager.subscribe({userVisibleOnly:true}).then(function(w){if(n)q(this.$PushRegistration4(w));this.$PushRegistration5(k,l,w,m);if(o)o();c('BrowserPushVisibilityChanger').listenForVisibility();}.bind(this))['catch'](function(w){j.$PushRegistration1=false;if(p)v.unregister();r(w);});}.bind(this))['catch'](function(u){j.$PushRegistration1=false;r(u);});}.bind(this));};j.prototype.unregisterPushAndSW=function(k,l){'use strict';return new (c('Promise'))(function(m,n){this.$PushRegistration6(k,l,true).then(function(){c('ServiceWorkerRegistration').unregisterControllingWorker().done(m);})['catch'](n);}.bind(this));};j.prototype.unregisterPushOnly=function(k,l){'use strict';return new (c('Promise'))(function(m,n){this.getPushSubscription().then(function(o){if(o){o.unsubscribe().then(this.$PushRegistration6(k,l,true)).then(function(){m(true);})['catch'](n);}else n();}.bind(this))['catch'](n);}.bind(this));};j.pushPermissionIsPending=function(){'use strict';return h&&h.permission==='default';};j.pushPermissionIsOn=function(){'use strict';return h&&h.permission==='granted';};f.exports=j;}),null);
__d("XPushRegisterServiceWorkerController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/push\/register\/service_worker\/",{});}),null);
__d('BrowserPushDirectPromptInstaller',['Arbiter','AsyncRequest','BanzaiLogger','BrowserPushSessionChange.react','DOM','NotificationPermissionNotice.react','NotificationPermissionRequest.react','PushRegistration','React','ReactDOM','XBrowserPushDisabledController','XBrowserPushXOutController','XPushRegisterServiceWorkerController'],(function a(b,c,d,e,f,g){var h=false;function i(event,m){var n={event:event,appid:m,surface:'prompt'};c('BanzaiLogger').log('BrowserPushLoggerConfig',n);}function j(m){if(!h){h=true;c('ReactDOM').unmountComponentAtNode(m);}}function k(m,n){var o=c('DOM').insertBefore(m,c('DOM').create('span')),p=o.pop();c('ReactDOM').render(c('React').createElement(c('BrowserPushSessionChange.react'),{onHide:function q(){c('ReactDOM').unmountComponentAtNode(m);},push:n}),p);}var l={installPush:function m(n,o,p,q,r,s,t,u){var v=c('PushRegistration').get(n,o);v.isPushRegistered(q,c('XPushRegisterServiceWorkerController'),c('XBrowserPushDisabledController'),c('AsyncRequest'),!!s,function(){k(p,v);},u).then(function(w){if(w||r)return;if(c('PushRegistration').pushPermissionIsPending())c('ReactDOM').render(c('React').createElement(c('NotificationPermissionRequest.react'),{onHide:function x(){j(p);}}),p);i('turn_on',o);v.registerPushWithFinishedCallBack(c('XPushRegisterServiceWorkerController'),c('AsyncRequest'),function(){k(p,v);},function(){c('Arbiter').inform('BrowserPushInstall/installed');},u).then(function(){j(p);i('install',o);})['catch'](function(x){j(p);if(window.Notification&&window.Notification.permission==='denied'){c('ReactDOM').render(c('React').createElement(c('NotificationPermissionNotice.react'),{onHide:function z(){c('ReactDOM').unmountComponentAtNode(p);},browserName:t}),p);i('deny',o);}else i('install_ignore',o);var y=c('XBrowserPushXOutController').getURIBuilder().getURI();new (c('AsyncRequest'))().setURI(y).setMethod('post').send();i('xout',o);});})['catch'](function(){});}};f.exports=l;}),null);
__d("XBrowserPushMuteController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/notifications\/client\/push\/mute\/",{push_endpoint:{type:"String",required:true},appid:{type:"Int",required:true},is_settings_page:{type:"Bool",defaultValue:false},__asyncDialog:{type:"Int"}});}),null);
__d('BrowserPushMuteOptions',['fbt','AsyncRequest','PushRegistration','React','ReactDOM','XBrowserPushMuteController'],(function a(b,c,d,e,f,g,h){function i(k,l,m){var n=c('PushRegistration').get(l,m);n.getPushSubscription().done(function(o){if(o){var p=c('XBrowserPushMuteController').getURIBuilder().setString('push_endpoint',o.endpoint).setInt('appid',m).getURI();new (c('AsyncRequest'))().setURI(p).setRelativeTo(k).send();}});}var j={showMuteOptions:function k(l,m,n){if(!c('PushRegistration').pushPermissionIsOn())return;c('ReactDOM').render(c('React').createElement('a',{href:'#',onClick:function o(){i(l,m,n);}},h._("Mute")),l);}};f.exports=j;}),null);
__d('PrivacyLiteFlyoutHelp',['csx','cx','Arbiter','AsyncRequest','Banzai','ContextualHelpSearchController','CSS','DOM','Event','Parent'],(function a(b,c,d,e,f,g,h,i){var j,k;function l(m,n,o,p,q){this._width=315;k=c('DOM').find(n,'input');var r=c('DOM').create('div');c('ContextualHelpSearchController').call(this,m,k,r,o,p,{focusSearchBox:false});j=c('Parent').bySelector(n,"._8-a");c('Event').listen(q,'click',function(){this._hideSearch(this);c('Banzai').post('privacy_lite',{event:'plite_search_collapse',exit_point:null});}.bind(this));c('Arbiter').subscribe('PrivacyLiteFlyout/expandingSection',this._hideSearch.bind(this));var s=c('DOM').scry(j,"._d1r")[0];s&&c('Event').listen(s,'click',function(){c('CSS').addClass(j,"_aw6");k.focus();c('Banzai').post('privacy_lite',{event:'plite_search_expand',exit_point:null});if(!this.suggestedResults)new (c('AsyncRequest'))('/ajax/privacy/privacy_lite/help_suggestions').setHandler(function(t){var u=t.getPayload().searchSuggestions,v=c('DOM').find(j,"._4_8m");c('DOM').setContent(v,u);c('CSS').addClass(j,"_4_8l");}.bind(this)).send();}.bind(this));}Object.assign(l.prototype,c('ContextualHelpSearchController').prototype,{source:'privacy_shortcuts',_hideSearch:function m(){this.clearResults();c('CSS').removeClass(j,"_aw6");},show:function m(n){if(n===this.topics_area){c('CSS').removeClass(j,"_aw7");return;}else if(n===this.loader){c('CSS').addClass(j,"_aw7");c('CSS').hide(this.results_area);}else c('CSS').hide(this.loader);c('CSS').show(n);}});f.exports=l;}),null);
__d('ViewasChromeBar',['csx','cx','Arbiter','AsyncRequest','CSS','DOM','Event','Focus','ModalMask','PageTransitionsRegistrar','Parent'],(function a(b,c,d,e,f,g,h,i){var j='ViewasChromeBar/initialized',k=null,l=false;function m(p){c('Arbiter').subscribe(j,p);}function n(p){c('CSS').addClass(p,"_7g7");var q=c('DOM').find(p,"._7g0");c('Focus').set(c('DOM').find(q,'.textInput'));}var o={initChromeBar:function p(q){if(l)return;k=q;l=true;c('Arbiter').inform(j,null,c('Arbiter').BEHAVIOR_STATE);},update:function p(q,r){m(function(){c('DOM').setContent(k,q);if(r)new (c('AsyncRequest'))('/ajax/privacy/glasgow/viewas_bar_flyout_open').send();});},registerSpecificModeOnClick:function p(q){c('Event').listen(q,'click',n.bind(null,c('Parent').bySelector(q,"._7f-")));},registerFlyoutModalMask:function p(){c('ModalMask').show();c('PageTransitionsRegistrar').registerHandler(c('ModalMask').hide,10);}};f.exports=o;}),null);
__d('SearchPeopleFriendsOf',['fbt','TokenizeUtil','URI'],(function a(b,c,d,e,f,g,h){function i(j,k){'use strict';this.friendsOfUri=j;this.placementStrategy=k.placement_strategy;this.placementParams=k.placement_params;this.triggerStrategy=k.trigger_strategy;this.triggerParams=k.trigger_params;}i.prototype.injectInto=function(j,k){'use strict';if(!j||j.length===0||!this.$SearchPeopleFriendsOf1(j,k))return;if(j[0].type!=="user")return;var l=this.createFindAllFriendsOf(j[0].text,j[0].uid);this.$SearchPeopleFriendsOf2(l,j);};i.prototype.$SearchPeopleFriendsOf2=function(j,k){'use strict';var l=this.$SearchPeopleFriendsOf3(k);if(l==='last'){var m=k.filter(function(n){return n.type==='user';}).length;l=m;}k.splice(l,0,j);};i.prototype.$SearchPeopleFriendsOf1=function(j,k){'use strict';var l=this.$SearchPeopleFriendsOf4(this.triggerStrategy);return l(j,this.triggerParams,k);};i.prototype.$SearchPeopleFriendsOf3=function(j){'use strict';var k=this.$SearchPeopleFriendsOf4(this.placementStrategy);return k(j,this.placementParams);};i.prototype.$SearchPeopleFriendsOf4=function(j){'use strict';return this["$SearchPeopleFriendsOf_"+j];};i.prototype.$SearchPeopleFriendsOf5=function(j,k,l){'use strict';return false;};i.prototype.$SearchPeopleFriendsOf6=function(j,k,l){'use strict';return true;};i.prototype.$SearchPeopleFriendsOf7=function(j,k,l){'use strict';var m=parseInt(k,10),n=0;for(var o=0;o<j.length;o++){var p=j[o];if(p.type==='user'&&p.index_rank==-1)n++;if(n>m)return false;}return true;};i.prototype.$SearchPeopleFriendsOf8=function(j,k,l){'use strict';var m=parseInt(k,10),n=c('TokenizeUtil').tokenize(l);n=n.map(function(v){return v.toLowerCase();});var o=0;for(var p=0;p<j.length;p++){var q=j[p];if(q.type!=='user'||q.index_rank!=-1)continue;var r=c('TokenizeUtil').tokenize(q.text);r=r.map(function(v){return v.toLowerCase();});if(r.length<n.length)continue;var s=true;for(var t=0;t<n.length-1;t++)if(n[t]!==r[t]){s=false;break;}var u=n.length-1;if(s&&r[u].startsWith(n[u])){o++;if(o>=m)return false;}}return true;};i.prototype.$SearchPeopleFriendsOf9=function(j,k){'use strict';return "last";};i.prototype.$SearchPeopleFriendsOf10=function(j,k){'use strict';return 1;};i.prototype.createFindAllFriendsOf=function(j,k){'use strict';var l=h._("{name}'s Friends",[h.param('name',j)]),m=new (c('URI'))(this.friendsOfUri).addQueryData({q:"",init:'psm',fofid:k}).toString();return {uid:'people_search',type:'user',text:l,classNames:'seeAllUser',photo:'/images/search_typeahead/people_see_more.png',logType:'grammar',path:m};};f.exports=i;}),null);
__d('SearchPeopleSeeMore',['fbt','invariant','TokenizeUtil','URI'],(function a(b,c,d,e,f,g,h,i){function j(k,l){var m=l.placement,n=l.strategy,o=l.min_users,p=l.query_to_show;'use strict';this.seeMoreUri=k;this.placement=m;this.strategy=n;this.min_users=o;this.query_to_show=p;}j.prototype.injectInto=function(k,l){'use strict';if(!k||k.length===0)return;var m=this.$SearchPeopleSeeMore1(k,l);if(!m)return;var n=this.createFindAllPeopleResult(m);this.$SearchPeopleSeeMore2(n,k);};j.prototype.$SearchPeopleSeeMore1=function(k,l){'use strict';if(this.strategy==='disabled')return null;if(k[0].type!=='user')return null;var m=k.filter(function(q){return q.type==='user';});if(m.length<this.min_users){return null;}else if(m.length>this.min_users)m=m.slice(0,this.min_users);var n,o=m[0];switch(this.strategy){case 'all_identical':var p=m.every(function(q){return this.$SearchPeopleSeeMore3(o.text,q.text);}.bind(this));n=p?o.text:null;break;case 'top_results_prefix':n=m.reduce(function(q,r){return this.$SearchPeopleSeeMore4(q,r.text);}.bind(this),o.text);break;default:i(0);}if(!n)return null;return this.query_to_show==='common'?n:l;};j.prototype.$SearchPeopleSeeMore2=function(k,l){'use strict';if(this.placement==='last'){var m=l.filter(function(o){return o.type==='user';}).length;l.splice(m,0,k);}else{var n=parseInt(this.placement,10);l.splice(n,0,k);}};j.prototype.createFindAllPeopleResult=function(k){'use strict';var l=h._("Find all people named \"{query}\"",[h.param('query',k.toLowerCase())]),m=new (c('URI'))(this.seeMoreUri).addQueryData({q:k,init:'psm'}).toString();return {uid:'people_search',type:'user',text:l,classNames:'seeAllUser',photo:'/images/search_typeahead/people_see_more.png',path:m};};j.prototype.$SearchPeopleSeeMore3=function(k,l){'use strict';if(k===l)return true;var m=c('TokenizeUtil').tokenize(k),n=c('TokenizeUtil').tokenize(l);if(m.length!==n.length)return false;return m.every(function(o,p){return o===n[p];});};j.prototype.$SearchPeopleSeeMore4=function(k,l){'use strict';if(!k||!l)return;if(k===l)return k;var m=c('TokenizeUtil').tokenize(k),n=c('TokenizeUtil').tokenize(l),o=[];for(var p=0;p<m.length&&p<n.length;p++)if(m[p]===n[p]){o.push(m[p]);}else break;if(o.length===0)return null;return o.join(' ');};f.exports=j;}),null);
__d('SearchTypeaheadCore',['Arbiter','DOM','Event','Input','Keys','Parent','ScriptPath','TypeaheadCore'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('TypeaheadCore'));i=h&&h.prototype;function j(k){'use strict';i.constructor.call(this,k);}j.prototype.init=function(k,l,m){'use strict';i.init.call(this,k,l,m);var n=c('Parent').byTag(m,'form'),o=this.reset.bind(this);c('Arbiter').subscribe('pre_page_transition',function(event,q){var r=/^\/search/,s=r.test(q.from.path),t=r.test(q.to.path);if(s&&!t)setTimeout(o,0);});if(n){var p=c('DOM').find(n,'input.search_sid_input');c('Event').listen(n,'submit',function(){if(this.data&&this.data.queryData)p.value=this.data.queryData.sid;setTimeout(o,0);}.bind(this),c('Event').Priority.URGENT);}};j.prototype.select=function(){'use strict';this.reset();this.element.focus();setTimeout(function(){this.element.blur();}.bind(this),0);c('ScriptPath').setClickPointInfo({click:'Search'});};j.prototype.handleTab=function(event){'use strict';var k=this.view.getQuerySuggestion(this.value);if(k){c('Input').setValue(this.element,k);this.checkValue();event.kill();}else i.handleTab.call(this,event);};j.prototype.getSearchType=function(){'use strict';return 'regular';};j.prototype.focus=function(){'use strict';i.focus.call(this);if(this.getValue().length===0||this.element.getAttribute('singlestate')==='true')this.data.fetchNullState(this.getValue());};j.prototype.keyup=function(event){'use strict';if(this.getValue().length===0&&c('Event').getKeyCode(event)===c('Keys').ESC)return;if(this.getValue().length===0)this.data.fetchNullState(this.getValue());this.element.setAttribute('singlestate',false);};f.exports=j;}),null);
__d('SearchTypeaheadView',['csx','cx','fbt','Arbiter','ContextualLayerUpdateOnScroll','ContextualTypeaheadView','DOM','FbtResult','SearchPeopleFriendsOf','SearchPeopleFriendsOfOptions','SearchPeopleSeeMore','SearchPeopleSeeMoreOptions','URI','goURI','isEmail'],(function a(b,c,d,e,f,g,h,i,j){var k,l;k=babelHelpers.inherits(m,c('ContextualTypeaheadView'));l=k&&k.prototype;function m(o,p){'use strict';l.constructor.call(this,o,p);this._peopleSeeMore=new (c('SearchPeopleSeeMore'))(this.getSeeMoreEndpoint('',true),c('SearchPeopleSeeMoreOptions'));this._peopleFriendsOf=new (c('SearchPeopleFriendsOf'))(this.getSeeMoreEndpoint('',true),c('SearchPeopleFriendsOfOptions'));}m.prototype.initializeLayer=function(){'use strict';l.initializeLayer.call(this);this.layer.setOffsetY(-1);this.layer.enableBehavior(c('ContextualLayerUpdateOnScroll'));};m.prototype.ignoreClick=function(event){'use strict';event.prevent();};m.prototype.render=function(o,p,q){'use strict';if(!p)return;if(this._bucketize)p=n(p);if(this.showPeopleSeeMore&&o)this._peopleSeeMore.injectInto(p,o);if(this.showPeopleFriendsOf&&o)this._peopleFriendsOf.injectInto(p,o);var r={results:p,value:o};this.inform('finalResultsReordering',r);return l.render.call(this,o,r.results,q);};m.prototype.disableBucketization=function(){'use strict';this._bucketize=false;};m.prototype.buildBuckets=function(o,p){'use strict';var q=p.length,r=0,s;for(s=0;s<q;++s)if(p[s].type=='user')r++;this._redirectToUsersResultsPage=this.showFilterResults&&r===q;this.setWebSuggLoggingParams(o,p);if(!o&&this.showFindPeople)p.unshift(this.buildFindPeople());if(this._bucketize)p=l.buildBuckets.call(this,o,p);if(o&&this._shouldShowSeeMore){p.push(this.buildSeeMore(o,q));if(c('isEmail')(o)&&r<1)p.push(this.buildInvite(o));}return p;};m.prototype.buildFindPeople=function(){'use strict';var o=j._("Find people");return {classNames:'seeAllUser seeAllUserNullState',logType:'grammar',path:this.getSeeMoreEndpoint(null,true),photo:'/images/search_typeahead/people_see_more.png',text:o,type:'no_header'};};m.prototype.buildSeeMore=function(o,p){'use strict';var q=this.getSeeMoreText(o,p),r='seeMoreV2',s='calltoactionV2',t=c('DOM').create('span',{className:'simpleSearchSeeMoreRowRedesignIcon'}),u=c('DOM').create('li',{className:s},[t,c('DOM').create('a',{href:this.getSeeMoreEndpoint(o),rel:'ignore'},[c('DOM').create('span',{className:'text'},[c('DOM').create('span',{className:r},q)])])]);if(q instanceof c('FbtResult')){u.setAttribute('aria-label',q.flattenToArray());}else u.setAttribute('aria-label',q);return {uid:'search',node:u,search:true};};m.prototype.getSeeMoreText=function(o,p){'use strict';if(this.showKeywordResultsPage)return j._("Search for {query}",[j.param('query',o)]);if(p<=0)return j._("See results for {query}",[j.param('query',o)]);if(this._redirectToUsersResultsPage)return j._("Filter results for {query}",[j.param('query',o)]);var q=c('DOM').create('b',{},o);return j._("Find more results for {query}",[j.param('query',q)]);};m.prototype.getSeeMoreSubtext=function(o){'use strict';if(o===0)return j._("No results to display");if(o===1)return j._("Displaying top result");return j._({"*":"Displaying top {number} results"},[j.param('number',o,[0])]);};m.prototype.buildInvite=function(o){'use strict';var p=j._("Invite {query} to Facebook",[j.param('query',o)]),q=c('DOM').create('li',{className:'calltoaction'},[c('DOM').create('a',{href:this.getInviteEndpoint(o),rel:'ignore'},[c('DOM').create('span',{className:'text'},[c('DOM').create('span',{className:'invite'},[p])])])]);if(p instanceof c('FbtResult')){q.setAttribute('arial-label',p.flattenToArray());}else q.setAttribute('aria-label',p);return {uid:'invite',node:q,search:true};};m.prototype.searchPageQueryData=function(o){'use strict';return babelHelpers['extends']({q:o},this.queryData||{});};m.prototype.searchPageTypeData=function(o){'use strict';return this._redirectToUsersResultsPage||o?{type:"users"}:{};};m.prototype.select=function(o){'use strict';var p=this.index,q=this.results[p];if(!q||q.type=='header')return;var r=this.items[p],s=c('DOM').scry(r,'a')[0];l.select.call(this,o);if(s&&s.href)if(s.target=='_blank'){window.open(s.href);}else c('goURI')(s.href);};m.prototype.setSid=function(o){'use strict';this.queryData.tas=o;};m.prototype.getSeeMoreEndpoint=function(o,p){'use strict';return new (c('URI'))(this.seeMoreEndpoint).addQueryData(this.searchPageQueryData(o)).addQueryData(this.searchPageTypeData(p)).toString();};m.prototype.getInviteEndpoint=function(o){'use strict';return new (c('URI'))('/invite.php').addQueryData({email_list:o});};m.prototype.show=function(){'use strict';if(!this.isVisible()){c('Arbiter').inform('layer_shown',{type:'SearchTypeahead'});this.searchBtns=this.searchBtns||c('DOM').scry(this.typeahead,'button.reDesignedBtn');if(this.searchBtns[0])CSS.addClass(this.searchBtns[0],"btnSelected");l.show.call(this);}};m.prototype.hide=function(){'use strict';if(this.isVisible()){c('Arbiter').inform('layer_hidden',{type:'SearchTypeahead'});this.searchBtns=this.searchBtns||c('DOM').scry(this.typeahead,'button.reDesignedBtn');if(this.searchBtns[0]&&CSS.matchesSelector(this.searchBtns[0],".btnSelected"))CSS.removeClass(this.searchBtns[0],"btnSelected");l.hide.call(this);}};m.prototype.getQuerySuggestion=function(o){'use strict';var p=this.results[this.index],q=p&&p.type!='header'?p.text.toLowerCase():'';return q==o.toLowerCase()?'':q;};m.prototype.setWebSuggLoggingParams=function(o,p){'use strict';var q=0,r=0;for(var s=0;s<p.length;s++)if(p[s].type==='websuggestion'){if(r===0)r=s+1;var t='FR'+(s-q)+'AS'+q,u=s+1;p[s].path+='&wssk='+t+'&wssp='+u+'&wspq='+encodeURIComponent(o);p[s].path+='&wssrc='+p[s].websuggestion_source;q++;}var v='&wssc='+p.length+'-'+o.length+'&wsbp='+q+'-'+r;for(s=0;s<p.length;s++)if(p[s].type==='websuggestion')p[s].path+=v;};function n(o){var p,q,r,s,t=[],u={};q=o.length;for(p=0;p<q;p++){r=o[p];s=r.render_type||r.type;if(!u.hasOwnProperty(s)){u[s]=t.length;t.push([]);}t[u[s]].push(r);}var v=[];q=t.length;for(p=0;p<q;++p){r=t[p][0];s=r.render_type||r.type;v=v.concat(t[p]);}return v;}Object.assign(m.prototype,{_shouldShowSeeMore:true,_bucketize:true,queryData:{init:'quick'}});f.exports=m;}),null);
__d('TypeaheadSearchFilter',['Arbiter'],(function a(b,c,d,e,f,g){function h(i){'use strict';this._typeahead=i;}h.prototype.enable=function(){'use strict';var i=this._typeahead,j=i.getView().seeMoreEndpoint;this._subscriptions=[c('Arbiter').subscribe('search/typeahead/updateFilter',function(k,l){if(l.filter_type=='web')i.getView().queryData.form='FBKBFR';i.getView().queryData.type=l.filter_type;}),c('Arbiter').subscribe('search/typeahead/updateSeeMoreEndpoint',function(k,l){i.getView().seeMoreEndpoint=l;}),c('Arbiter').subscribe('page_transition',function(k,l){if(i.getView().queryData.form)delete i.getView().queryData.form;delete i.getView().queryData.type;i.getView().seeMoreEndpoint=j;},c('Arbiter').SUBSCRIBE_NEW)];};h.prototype.disable=function(){'use strict';this._subscriptions.forEach(function(i){i.unsubscribe();});this._subscriptions=null;};Object.assign(h.prototype,{_subscription:null});f.exports=h;}),null);
__d('legacy:SearchFilterTypeaheadBehavior',['TypeaheadSearchFilter'],(function a(b,c,d,e,f,g){if(!b.TypeaheadBehaviors)b.TypeaheadBehaviors={};b.TypeaheadBehaviors.initFilters=function(h){h.enableBehavior(c('TypeaheadSearchFilter'));};}),3);
__d('TypeaheadSearchRecorderBasic',['SearchTypeaheadRecorder','emptyFunction'],(function a(b,c,d,e,f,g){function h(i){'use strict';this._typeahead=i;}h.prototype.enable=function(){'use strict';new (c('SearchTypeaheadRecorder'))(this._typeahead);};Object.assign(h.prototype,{disable:c('emptyFunction')});f.exports=h;}),null);
__d('legacy:SearchRecorderBasicTypeaheadBehavior',['TypeaheadSearchRecorderBasic'],(function a(b,c,d,e,f,g){if(!b.TypeaheadBehaviors)b.TypeaheadBehaviors={};b.TypeaheadBehaviors.searchRecorderBasic=function(h){h.enableBehavior(c('TypeaheadSearchRecorderBasic'));};}),3);
__d('SessionStartSurvey',['AsyncRequest','SubscriptionsHandler','XSearchFacebarSurveyController','getOrCreateDOMID'],(function a(b,c,d,e,f,g){function h(i){'use strict';this.core=i.getCore();this.data=i.getData();this.subscriptionsHandler=new (c('SubscriptionsHandler'))();}h.prototype.enable=function(){'use strict';this.subscriptionsHandler.addSubscriptions(this.data.subscribe('query',function(){this.openSurvey();}.bind(this)));};h.prototype.disable=function(){'use strict';this.subscriptionsHandler.release();this.request&&this.request.abort();};h.prototype.openSurvey=function(){'use strict';if(this.openedSurvey)return;this.openedSurvey=true;var i=c('XSearchFacebarSurveyController').getURIBuilder().setString('id',c('getOrCreateDOMID')(this.core.element)).setExists('on_session_start',true).setString('session_id',this.data.queryData.sid);this.request=new (c('AsyncRequest'))().setMethod('post').setURI(i.getURI());this.request.send();};f.exports=h;}),null);
__d('TypeaheadDetectQueryLocale',[],(function a(b,c,d,e,f,g){function h(i){'use strict';this._typeahead=i;this._data=i.getData();this._queryCache={'':this._data.queryCache,ja_JP:{},zh_TW:{}};}h.prototype.enable=function(){'use strict';this._previousLocale='';this._reset=this._typeahead.subscribe('reset',this._swapQueryCache.bind(this,''));this._beforeQuery=this._data.subscribe('beforeQuery',function(i,j){var k=j.value;if(k===''){this._swapQueryCache('');return;}var l=null,m=k.charCodeAt(k.length-1);if(12352<=m&&m<=12543){l='ja_JP';}else if(12544<=m&&m<=12735)l='zh_TW';this._swapQueryCache(l);}.bind(this));};h.prototype.disable=function(){'use strict';this._swapQueryCache('');this._data.unsubscribe(this._beforeQuery);this._typeahead.ubsubscribe(this._reset);};h.prototype._swapQueryCache=function(i){'use strict';if(i===null||i===this._previousLocale)return;this._data.queryCache=this._queryCache[i];this._data.setQueryData({query_locale:i});this._previousLocale=i;};f.exports=h;}),null);
__d('TypeaheadExcludeBootstrapFromQueryCache',[],(function a(b,c,d,e,f,g){function h(i){'use strict';this._data=i.getData();}h.prototype.enable=function(){'use strict';this._buildingQueryCache=false;this._buildQueryCache=this._data.subscribe('buildQueryCache',function(){this._buildingQueryCache=true;}.bind(this));this._mergeUids=this._data.subscribe('mergeUids',function(i,j){if(this._buildingQueryCache)j.local_uids.splice(0,j.local_uids.length);}.bind(this));this._fetchComplete=this._data.subscribe('fetchComplete',function(){this._buildingQueryCache=false;}.bind(this));};h.prototype.disable=function(){'use strict';this._data.unsubscribe(this._buildQueryCache);this._data.unsubscribe(this._mergeUids);this._data.unsubscribe(this._fetchComplete);};f.exports=h;}),null);
__d('TypeaheadPostSearchRedirect',[],(function a(b,c,d,e,f,g){function h(i){'use strict';this.view=i.getView();}h.prototype.enable=function(){'use strict';this.view.queryData.ref='ss_see_more_link';};h.prototype.disable=function(){'use strict';delete this.view.queryData.ref;};f.exports=h;}),null);
__d('TypeaheadRecentSearchUpdater',['Arbiter'],(function a(b,c,d,e,f,g){function h(i){'use strict';this.view=i.getView();}h.prototype.enable=function(){'use strict';this.updaterSubscription=this.view.subscribe('select',function(){c('Arbiter').inform('search/refreshRecentSearchesNullstate',{},c('Arbiter').BEHAVIOR_STATE);});};h.prototype.disable=function(){'use strict';this.view.unsubscribe(this.updaterSubscription);};f.exports=h;}),null);
__d('SearchTypeaheadRenderer',['fbt','BadgeHelper','DOM','Locale','TokenizeUtil','TypeaheadFacepile','URI','UnicodeBidi','WWWBase'],(function a(b,c,d,e,f,g,h){var i=false;function j(k,l){var m=[],n=k.photos||k.photo;if(n){if(n instanceof Array){n=c('TypeaheadFacepile').render(n);}else n=c('DOM').create('img',{alt:'',src:n});m.push(n);}var o;if(k.text){var p=k.alias,q=this.value,r=k.text,s=c('UnicodeBidi').isDirectionRTL(r.toString()),t=c('Locale').isRTL(),u=s&&!t?'rtl':!s&&t?'ltr':'';o=[r];if(p&&c('TokenizeUtil').isQueryMatch(q,p)&&!c('TokenizeUtil').isQueryMatch(q,r))o.push(c('DOM').create('span',{className:'alias'},[' \xB7 '+p]));if(k.is_verified){o.push(c('BadgeHelper').renderBadge('xsmall','verified'));}else if(k.is_work_user)o.push(c('BadgeHelper').renderBadge('xsmall','work'));if(k.badge){o.push(c('DOM').create('span',{className:''},' \xB7 '));var v=[k.badge];o.push(c('DOM').create('span',{className:'unSeenPosts'},v));}m.push(c('DOM').create('span',{className:'text',dir:u},o));}if(k.category){var w=[k.category];if(k.is_external)w.push(c('DOM').create('span',{className:'arrow'}));var x=k.message?'preCategory':'category';m.push(c('DOM').create('span',{className:x},w));}if(k.message)m.push(c('DOM').create('span',{className:'category'},[k.message]));var y=k.subtextOverride||k.subtext;if(y){var z=[y];m.push(c('DOM').create('span',{className:'subtext'},z));}var aa=k.classNames||k.type||'',ba=k.is_external?'_blank':'',ca=!k.song&&k.path||'';if(ca){if(!/^https?\:\/\//.test(ca))ca=c('WWWBase').uri+ca.substr(1);ca+=(ca.indexOf('?')>0?'&':'?')+'ref=ts&fref=ts';}var da=c('DOM').create('a',{href:ca,rel:'ignore',target:ba},m),ea=null;if(k.type==='header'){var fa=null,ga=null;if(k.uid==='recent'){ga=new (c('URI'))('/profile.php');ga.setQueryData({sk:'allactivity',log_filter:'search'});fa=h._("EDIT");}else if(k.uid==='pymk'){ga=new (c('URI'))('/find-friends/browser/');fa=h._("SEE ALL");}if(ga){ea=c('DOM').create('a',{href:ga,className:'typeaheadHeaderRightLink'},fa);da.setAttribute('class','typeaheadHeaderLeftLink');aa+=' typeaheadHeader';}}var ha=c('DOM').create('li',{className:aa},[da,ea]);if(k.text){ha.setAttribute('title',k.text);ha.setAttribute('aria-label',k.text);}if(this.showupadatedsuggestions&&!i){j.className+=' updatedSuggestionRows';i=true;}return ha;}j.className='search';f.exports=j;}),null);
__d('legacy:SearchTypeaheadRenderer',['SearchTypeaheadRenderer'],(function a(b,c,d,e,f,g){if(!b.TypeaheadRenderers)b.TypeaheadRenderers={};b.TypeaheadRenderers.search=c('SearchTypeaheadRenderer');}),3);