if (self.CavalryLogger) { CavalryLogger.start_js(["R2gp+"]); }

__d("CommerceSaveProductNuxType",[],(function a(b,c,d,e,f,g){f.exports={WWW_FIND_SAVED_PRODUCTS:"www_find_saved_products",MSITE_SAVED_PRODUCTS:"msite_saved_products"};}),null);
__d("SaveStateType",[],(function a(b,c,d,e,f,g){f.exports={UNSAVED:0,SAVED:1,ARCHIVED:2};}),null);
__d('CssBackgroundImage.react',['EncryptedImg','React','createCancelableFunction','cssURL'],(function a(b,c,d,e,f,g){var h=c('React').PropTypes,i=c('React').createClass({displayName:'CssBackgroundImage',getProps:{imageURI:h.string.isRequired,className:h.string,backgroundPosition:h.string,height:h.string,width:h.string,style:h.object,onMouseDown:h.func,onMouseMove:h.func,onMouseUp:h.func,onMouseOut:h.func},getInitialState:function j(){return {image:'data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACwAAAAAAQABAAACAkQBADs='};},getDefaultProps:function j(){return {backgroundPosition:'0% 0%',style:{}};},_process:function j(k){if(!c('EncryptedImg').isEncrypted(k)){this.setState({image:k});return;}if(this.encryptedImgCallback)this.encryptedImgCallback.cancel();this.encryptedImgCallback=c('createCancelableFunction')(function(l){if(k===this.props.imageURI)this.setState({image:l});}.bind(this));c('EncryptedImg').load(k,this.encryptedImgCallback);},componentWillMount:function j(){if(this.props.imageURI!=null)this._process(this.props.imageURI);},componentWillReceiveProps:function j(k){if(k.imageURI!=null)this._process(k.imageURI);},componentWillUnmount:function j(){if(this.encryptedImgCallback)this.encryptedImgCallback.cancel();},render:function j(){var k=this.props,l=k.imageURI,m=k.backgroundPosition,n=k.height,o=k.width,p=k.style,q=babelHelpers.objectWithoutProperties(k,['imageURI','backgroundPosition','height','width','style']);return (c('React').createElement('div',babelHelpers['extends']({style:Object.assign({},p,{backgroundImage:c('cssURL')(this.state.image),backgroundPosition:m||p.backgroundPosition,height:n||p.height,width:o||p.width})},q)));}});f.exports=i;}),null);
__d("XCommerceMarkSaveNUXAsSeenController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/commerce\/mark-save-nux-seen\/",{nux_type:{type:"Enum",required:true,enumType:1}});}),null);
__d('CommerceProductItemImageBrowser.react',['cx','fbt','ix','xuiglyph','underscore.ads','AdsVideoPlayer.react','Animation','AsyncRequest','BOFWaterfallLoggerEvent','CollectionCurationMechanisms','CollectionCurationReferrerParamNames','CollectionCurationReferrerTags','CollectionsDisplaySurface','CommerceSaveProductNuxType','CssBackgroundImage.react','FBOverlayBase.react','FBOverlayContainer.react','FBOverlayElement.react','Image.react','Link.react','List.react','React','ReactDOM','SavedStateActions','SaveStateType','URI','XCommerceLogger','XCommerceMarkSaveNUXAsSeenController','XSaveController','XSavedForLaterDashboardController','XUIContextualDialog.react','XUIContextualDialogBody.react','XUIGrayText.react','XUISpinner.react'],(function a(b,c,d,e,f,g,h,i,j,k){var l=c('React').PropTypes,m=530,n=40,o=45,p=c('React').createClass({displayName:'CommerceProductItemImageBrowser',propTypes:{collectionToken:l.string,images:l.array.isRequired,internalPreviewImageIDParam:l.string.isRequired,internalPreviewImageID:l.number,itemID:l.string.isRequired,itemSaveStatus:l.number,logData:l.object.isRequired,shareHref:l.string.isRequired,showSaveNUX:l.bool.isRequired},getInitialState:function q(){var r=this.props.images.map(function(s){return s.id;}).indexOf(this.props.internalPreviewImageID);return {itemSaveStatus:this.props.itemSaveStatus,showSaveFlyout:false,showUfiBar:false,selectedImage:r>=0?r:0,shareSpinner:false};},renderLayers:function q(){var r=null;if(this.props.showSaveNUX)r=c('React').createElement('div',{className:"_2tqf _2piq _2pid"},c('React').createElement(c('Image.react'),{src:j('/images/commerce/saved_surface_preview.png')}));if(!this.props.collectionToken)return null;var s=c('XSavedForLaterDashboardController').getURIBuilder().setString('collection_token',this.props.collectionToken).setInt(c('CollectionCurationReferrerParamNames').CLICK_REF,c('CollectionCurationReferrerTags').DESKTOP_PRODUCT_DETAILS_SAVE_BUTTON_FLYOUT).getURI();return (c('React').createElement(c('XUIContextualDialog.react'),{contextRef:function(){return this.refs.saveLink;}.bind(this),shown:this.state.showSaveFlyout&&this.state.showUfiBar,alignment:'center',position:'above',onToggle:this._onSaveFlyoutToggled,width:c('XUIContextualDialog.react').WIDTH.WIDE,key:'contextualDialog'},c('React').createElement(c('XUIContextualDialogBody.react'),{className:"_2tqf"},c('React').createElement(c('Link.react'),{className:"_4njg",href:'#',onClick:function(){this.setState({showSaveFlyout:false});}.bind(this)},c('React').createElement(c('Image.react'),{src:k({name:'cross',shade:'light',size:'small'})})),r,c('React').createElement(c('XUIGrayText.react'),{display:'block'},i._("Find your saved product under the {products} tab in {Saved}.",[i.param('products',c('React').createElement(c('XUIGrayText.react'),{shade:'dark',weight:'bold'},i._("Products"))),i.param('Saved',c('React').createElement(c('XUIGrayText.react'),{shade:'dark',weight:'bold'},i._("Saved")))]),' ',c('React').createElement('div',null,c('React').createElement(c('Link.react'),{href:s,target:'_blank'},i._("Go to Saved")),'.')))));},_ufiAnimation:{animator:null,delay:0,performInitialDisplay:true},_cancelUfiAnimation:function q(){clearTimeout(this._ufiAnimation.delay);if(this._ufiAnimation.animator)this._ufiAnimation.animator.stop().to('opacity',1).duration(0).go();},componentDidMount:function q(){var r=c('ReactDOM').findDOMNode(this.refs.ufibar);if(r){var s=new (c('Animation'))(r);this._ufiAnimation.animator=s;this._ufiAnimation.delay=setTimeout(function(){s.to('opacity',0).duration(250).go();},1500);this._ufiAnimation.performInitialDisplay=false;}},componentWillUnmount:function q(){this._cancelUfiAnimation();},render:function q(){var r=this.props.images,s=r.map(function(y,z){return this._getThumbnailImage(y.uri,z);}.bind(this)),t=null,u=this.props.images[this.state.selectedImage];if(!u.isVideo){var v=this._getBestImageDimension(u.width,u.height),w=v.width,x=v.height;t=c('React').createElement(c('Image.react'),{height:x,width:w,src:u.uri});}else t=c('React').createElement('div',{className:"_fms"},c('React').createElement(c('AdsVideoPlayer.react'),{autoPlay:true,playerHeight:m-n,playerWidth:m,showControls:true,hideCloseButton:true,videoID:u.id}));return (c('React').createElement('div',{className:"_56vi"},c('React').createElement(c('FBOverlayContainer.react'),{className:"_56vj",onMouseOver:this._heroImageMouseOver},c('React').createElement(c('FBOverlayBase.react'),null,t),r.length&&r.length>1?c('React').createElement(c('FBOverlayElement.react'),{horizontal:'left'},c('React').createElement('div',null,c('React').createElement('span',{className:"_4-oa _4-ob",onClick:this._onClickLeft}))):null,r.length&&r.length>1?c('React').createElement(c('FBOverlayElement.react'),{horizontal:'right'},c('React').createElement('div',null,c('React').createElement('span',{className:"_4-oa _4-oc",onClick:this._onClickRight}))):null,this._getUfiBar()),c('React').createElement('div',{className:"_6e_"},s),this.renderLayers()));},_getThumbnailImage:function q(r,s){return (c('React').createElement(c('CssBackgroundImage.react'),{imageURI:r,className:"_9kl"+(s===this.state.selectedImage?' '+"_57s7":''),onClick:this._onClick,'data-index':s,key:s}));},_getBestImageDimension:function q(r,s){var t=r/s;if(t>1)return {width:m,height:m/t};return {width:m*t,height:m};},_getUfiBar:function q(){var r=this.props.images;if(r[this.state.selectedImage].isVideo)return null;var s=[];if(this.props.shareHref){var t=new (c('URI'))(this.props.shareHref);if(r[this.state.selectedImage].id)t.addQueryData(this.props.internalPreviewImageIDParam,r[this.state.selectedImage].id);s[s.length]=c('React').createElement('li',{key:'share'},c('React').createElement(c('Link.react'),{onClick:function(x){return this._onClickShare(x);}.bind(this),className:"_1tn4"},c('React').createElement(c('Image.react'),{src:j('/images/commerce/share.png')}),' ',i._("Share")),this.state.shareSpinner?c('React').createElement(c('XUISpinner.react'),{background:'light',size:'small'}):null);}if(this.state.itemSaveStatus!==null){var u=this.state.itemSaveStatus===c('SaveStateType').SAVED,v=u?k({name:'checkmark',shade:'white',size:'small'}):j('/images/commerce/saved_bookmark.png'),w=u?i._("Saved"):i._("Save");s[s.length]=c('React').createElement('li',{key:'save'},c('React').createElement(c('Link.react'),{onClick:u?this._handleUnsaveItem:this._handleSaveItem,className:"_1tn4"},c('React').createElement(c('Image.react'),{className:"_qpz",ref:'saveLink',src:v}),' ',w));}return (this._ufiAnimation.performInitialDisplay||this.state.showUfiBar)&&!c('underscore.ads').isEmpty(s)?c('React').createElement(c('FBOverlayElement.react'),{ref:'ufibar',vertical:'bottom'},c('React').createElement(c('List.react'),{direction:'horizontal',border:'medium',spacing:'small',className:"_1tn5"},s)):null;},_onClick:function q(event){var r=Number(event.currentTarget.dataset.index);if(this.state.selectedImage!=r)c('XCommerceLogger').logEvent(c('BOFWaterfallLoggerEvent').ACTN_CHANGE_PRODUCT_DETAILS_IMAGE,this.props.logData);this.setState({selectedImage:r,showUfiBar:false});},_onClickLeft:function q(event){var r=this.state.selectedImage-1;if(r<0)r+=this.props.images.length;this.setState({selectedImage:r,showUfiBar:false});},_onClickRight:function q(event){var r=(this.state.selectedImage+1)%this.props.images.length;this.setState({selectedImage:r,showUfiBar:false});},_onClickShare:function q(event){c('XCommerceLogger').logEvent(c('BOFWaterfallLoggerEvent').ACTN_SHARE_ARROW_CLICK,this.props.logData);new (c('AsyncRequest'))().setURI(this.props.shareHref).setFinallyHandler(function(){return this.setState({shareSpinner:false});}.bind(this)).send();this.setState({shareSpinner:true});},_heroImageMouseOver:function q(event){this._cancelUfiAnimation();this.setState({showUfiBar:true});},_handleSaveItem:function q(){this._updateItemSaveState(c('SaveStateType').SAVED,c('SavedStateActions').SAVE,this._showSaveFlyout);},_showSaveFlyout:function q(){if(this.state.itemSaveStatus!==c('SaveStateType').SAVED)return;this.setState({showSaveFlyout:true,showUfiBar:true},function(){var r=c('XCommerceMarkSaveNUXAsSeenController').getURIBuilder().setEnum('nux_type',c('CommerceSaveProductNuxType').WWW_FIND_SAVED_PRODUCTS).getURI();new (c('AsyncRequest'))().setURI(r).send();});},_onSaveFlyoutToggled:function q(r){if(r!==this.state.showSaveFlyout)this.setState({showSaveFlyout:r});},_handleUnsaveItem:function q(){this._onSaveFlyoutToggled(false);this._updateItemSaveState(c('SaveStateType').UNSAVED,c('SavedStateActions').UNSAVE,function(){});},_updateItemSaveState:function q(r,s,t){var u=this.state.itemSaveStatus;this.setState({itemSaveStatus:r});var v=c('XSaveController').getURIBuilder().setInt('object_id',this.props.itemID).setEnum('action',s).setEnum('surface',c('CollectionsDisplaySurface').PRODUCT_DETAILS_PAGE).setEnum('mechanism',c('CollectionCurationMechanisms').TOGGLE_BUTTON).getURI();new (c('AsyncRequest'))().setURI(v).setHandler(t).setErrorHandler(function(){this.setState({itemSaveStatus:u});}.bind(this)).send();}});f.exports=p;}),null);
__d('CommerceProductView',['CSS','Event'],(function a(b,c,d,e,f,g){var h={toggleBlurb:function i(j,k){c('Event').listen(j,'click',function(l){c('CSS').toggleClass(k,'truncated');});}};f.exports=h;}),null);
__d("XAdsCMAccountSettingsPageController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ads\/manager\/account\/settings\/",{act:{type:"Int"},page:{type:"Enum",enumType:1},tab:{type:"Enum",defaultValue:"information",enumType:1},ux:{type:"String"},nav_source:{type:"Enum",enumType:1},highlight_tax_id:{type:"Exists",defaultValue:false}});}),null);