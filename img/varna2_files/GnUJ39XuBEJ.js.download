if (self.CavalryLogger) { CavalryLogger.start_js(["RDqIn"]); }

__d("CommentsPluginSentryAction",[],(function a(b,c,d,e,f,g){f.exports={CONFIRM_POST_TO_PROFILE:"confirm_post_to_profile"};}),null);
__d("DeveloperCommentsModerationSource",[],(function a(b,c,d,e,f,g){f.exports={APP:"app",URL:"url"};}),null);
__d('MentionResultsPropTypes',['React','SearchableEntry','SelectionState'],(function a(b,c,d,e,f,g){var h=c('React').PropTypes,i={viewID:h.string.isRequired,selection:h.instanceOf(c('SelectionState')).isRequired,contextComponent:h.object.isRequired,mentionableEntries:h.array.isRequired,highlightedMentionable:h.instanceOf(c('SearchableEntry')),onMentionSelect:h.func.isRequired,onMentionHighlight:h.func.isRequired,onMentionRenderHighlight:h.func.isRequired};f.exports=i;}),null);
__d('MentionsLayer.react',['Bootloader','Locale','MentionResultsPropTypes','React','areEqual'],(function a(b,c,d,e,f,g){var h=c('React').PropTypes,i=false,j=c('Locale').isRTL(),k,l,m,n,o=5,p=c('React').createClass({displayName:'MentionsLayer',propTypes:babelHelpers['extends']({},c('MentionResultsPropTypes'),{typeaheadView:h.func.isRequired,typeaheadViewProps:h.object,autoflip:h.bool,position:h.oneOf(['above','below'])}),getInitialState:function r(){return {bootloaded:i};},componentWillMount:function r(){if(!this.state.bootloaded)q(function(){this.isMounted()&&this.setState({bootloaded:true});}.bind(this));},_onMentionSelect:function r(s,t){t.preventDefault();this.props.onMentionSelect(s,t);},shouldComponentUpdate:function r(s,t){return (this.state.bootloaded!==t.bootloaded||!c('areEqual')(this.props.mentionableEntries,s.mentionableEntries)||this.props.highlightedMentionable!==s.highlightedMentionable||this.props.characterOffset!==s.characterOffset);},render:function r(){if(!this.state.bootloaded)return null;var s=this.props.mentionableEntries,t=this.props.selection,u=t.isCollapsed()&&t.getHasFocus()&&s&&s.length,v=null,w=this.props.typeaheadViewProps,x=false;if(w&&w.positionAtContext){x=true;}else if(u)v=n(this.props.characterOffset,j);var y={};if(this.props.autoflip){y.ContextualLayerAutoFlip=l;y.ContextualLayerUpdateOnScroll=m;}var z=this.props.typeaheadView;return (c('React').createElement(k,{shown:u,context:this.props.contextComponent,contextBounds:v,containerWidthMatchContext:x,offsetY:o,position:this.props.position||'below',behaviors:y,shouldSetARIAProperties:false},c('React').createElement('div',{'data-testid':'mentions-contextual-layer'},c('React').createElement(z,{id:this.props.viewID,viewProps:this.props.typeaheadViewProps,highlightedEntry:this.props.highlightedMentionable,entries:s||[],onSelect:this._onMentionSelect,onHighlight:this.props.onMentionHighlight,onRenderHighlight:this.props.onMentionRenderHighlight}))));}});function q(r){c('Bootloader').loadModules(["ContextualLayer.react","ContextualLayerAutoFlip","ContextualLayerUpdateOnScroll","getMentionableRect"],function(s,t,u,v){k=s;l=t;m=u;n=v;i=true;r();},'MentionsLayer.react');}f.exports=p;}),null);
__d('ActorBio.react',['fbt','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.renderLink=function(r){return 'url' in r?c('React').createElement('a',babelHelpers['extends']({},this.props,{href:r.url}),r.name):c('React').createElement('span',null,r.name);}.bind(this),this.renderItem=function(r,s){var t=void 0;switch(r){case 'employer':if('position' in s){t=h._("{position} at {employer}",[h.param('position',this.renderLink(s.position)),h.param('employer',this.renderLink(s))]);}else t=h._("Works at {employer}",[h.param('employer',this.renderLink(s))]);break;case 'mutual_friend':t=h._("Friends with {user}",[h.param('user',this.renderLink(s))]);break;default:return this.renderLink(s);}return c('React').createElement('span',null,t);}.bind(this),n;}l.prototype.render=function(){var m=this.props.stats,n=this.props.preferredTypes;for(var o=0;o<n.length;o++)for(var p=0;p<n[o].length;p++){var q=n[o][p];if(q in m)return this.renderItem(q,m[q]);}return c('React').createElement('span',null);};l.propTypes={stats:k.object.isRequired,preferredTypes:k.array.isRequired};f.exports=l;}),null);
__d('EmojiSpan.react',['cx','EmojiRenderer','EmojiConfig','EmojiImageURL','SupportedEmoji','Utf16','React'],(function a(b,c,d,e,f,g,h){var i,j,k=c('EmojiImageURL').getFBEmojiURL,l=c('EmojiImageURL').getUnicodeURL;function m(o){if(typeof o==='string'||typeof o==='number'){return ''+o;}else if(Array.isArray(o)){return o.map(m).join('');}else if(o&&o.props&&o.props.text){return o.props.text;}else if(o&&o.props&&o.children)return m(o.props.children);return '';}i=babelHelpers.inherits(n,c('React').Component);j=i&&i.prototype;n.prototype.render=function(){'use strict';var o=c('EmojiRenderer').parse(m(this.props.children),1);if(o.length===1){var p=o[0].emoji;if(p[p.length-1]==='\uFE0F')p=p.slice(0,p.length-1);var q=p.map(function(s){return c('Utf16').decode(s).toString(16);}).join('_');if(c('SupportedEmoji').emoji.hasOwnProperty(q)){var r=c('EmojiConfig').hasFBEmoji?k(q):l(q);return (c('React').createElement('span',{className:"_3gl1",style:{backgroundImage:'url('+r+')'}},c('React').createElement('span',{className:"_3gl2"},this.props.children)));}}return (c('React').createElement('span',null,this.props.children));};function n(){'use strict';i.apply(this,arguments);}f.exports=n;}),null);
__d('HashtagSpan.react',['cx','React'],(function a(b,c,d,e,f,g,h){var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;k.prototype.render=function(){'use strict';return (c('React').createElement('span',babelHelpers['extends']({},this.props,{'data-offset-key':this.props.offsetKey,className:"_5u8n",spellCheck:false}),this.props.children));};function k(){'use strict';i.apply(this,arguments);}f.exports=k;}),null);
__d('MentionSpan.react',['cx','React'],(function a(b,c,d,e,f,g,h){var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;k.prototype.render=function(){'use strict';return (c('React').createElement('span',babelHelpers['extends']({},this.props,{'data-offset-key':this.props.offsetKey,className:"_5u8u",spellCheck:false}),this.props.children));};function k(){'use strict';i.apply(this,arguments);}f.exports=k;}),null);
__d('WeakMentionSpan.react',['cx','React'],(function a(b,c,d,e,f,g,h){var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;k.prototype.render=function(){'use strict';return (c('React').createElement('span',{'data-offset-key':this.props.offsetKey,className:"_whq",spellCheck:false},this.props.children));};function k(){'use strict';i.apply(this,arguments);}f.exports=k;}),null);
__d('getEmojiMatches',['EmojiRenderer'],(function a(b,c,d,e,f,g){function h(i,j){var k=i.getText(),l=c('EmojiRenderer').parse(k);for(var m=0;m<l.length;m++){var n=l[m],o=n.offset,p=n.length;j(o,o+p);}}f.exports=h;}),null);
__d('getHashtagMatches',['getHashtagRegex'],(function a(b,c,d,e,f,g){var h=c('getHashtagRegex')();function i(j,k){var l=j.getText(),m,n,o,p;while((m=h.exec(l))!==null){n=m.index+m[1].length;o=m[2];p=m[3];k(n,n+o.length+p.length);}}f.exports=i;}),null);
__d('getMentionsInputDecorator',['CompositeDraftDecorator','EmojiSpan.react','EmoticonSpan.react','HashtagSpan.react','MentionSpan.react','WeakMentionSpan.react','EmojiConfig','getEntityMatcher','getHashtagMatches','getEmojiMatches'],(function a(b,c,d,e,f,g){var h=c('EmojiConfig').hasFBEmojiInComposer,i;function j(){if(!i){var k=[{strategy:c('getEntityMatcher')(function(l){var m=l.getData();return l.getType()==='MENTION'&&m&&m.isWeak;}),component:c('WeakMentionSpan.react')},{strategy:c('getEntityMatcher')(function(l){return l.getType()==='MENTION';}),component:c('MentionSpan.react')},{strategy:c('getEntityMatcher')(function(l){return l.getType()==='EMOTICON';}),component:c('EmoticonSpan.react')},{strategy:c('getHashtagMatches'),component:c('HashtagSpan.react')}];if(h)k.push({strategy:c('getEmojiMatches'),component:c('EmojiSpan.react')});i=new (c('CompositeDraftDecorator'))(k);}return i;}f.exports=j;}),null);
__d('UFIAttachedMediaPreview.react',['cx','fbt','Arbiter','BootloadedComponent.react','CloseButton.react','DOMContainer.react','DOMVector','HTML','Image.react','LoadingIndicator.react','React','ReactDOM','UFIUIEvents','XUISpinner.react','JSResource'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes,m=80,n='ufi_photo_preview_test_id';j=babelHelpers.inherits(o,c('React').Component);k=j&&j.prototype;function o(){var p,q;for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=k.constructor).call.apply(p,[this].concat(s)),this.$UFIAttachedMediaPreview1=0,this.$UFIAttachedMediaPreview2=function(u,v){var w=void 0,x=void 0,y=void 0;if(v>u){y=m/v;w=u*y;x=v*y;}else{y=m/u;w=u*y;x=v*y;}return {height:Math.round(w),width:Math.round(x)};},this.$UFIAttachedMediaPreview3=function(){var u=c('ReactDOM').findDOMNode(this),v=u?c('DOMVector').getElementDimensions(u).y:0;if(v!==this.$UFIAttachedMediaPreview1){this.$UFIAttachedMediaPreview1=v;c('Arbiter').inform(c('UFIUIEvents').PhotoPreviewHeightChanged,{node:u});}}.bind(this),q;}o.prototype.componentDidUpdate=function(){if(this.props.monitorHeight)this.$UFIAttachedMediaPreview3();};o.prototype.render=function(){var p=null,q=this.props.attachedPhoto||this.props.attachedSticker||this.props.attachedVideo;if(q&&this.props.attachedSticker){var r=this.$UFIAttachedMediaPreview2(q.metadata.height,q.metadata.width),s=null,t=null;if(window.devicePixelRatio&&window.devicePixelRatio>1){s=q.metadata.sprite_uri_2x;t=q.metadata.source_uri_2x;}else{s=q.metadata.sprite_uri;t=q.metadata.source_uri;}p=c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:c('React').createElement(c('XUISpinner.react'),null),bootloadLoader:c('JSResource')('Sticker.react').__setRef('UFIAttachedMediaPreview.react'),animationTrigger:'load_and_hover',frameCount:q.metadata.frameCount,frameRate:q.metadata.frameRate,framesPerCol:q.metadata.framesPerCol,framesPerRow:q.metadata.framesPerRow,spriteURI:s,sourceHeight:r.height,sourceURI:t,sourceWidth:r.width});}else if(q&&this.props.attachedPhoto){var u=q.markupPreview;if(u){if(c('HTML').isHTML(u.markup))u=c('HTML').replaceJSONWrapper(u.markup).getRootNode();p=c('React').createElement(c('DOMContainer.react'),{'data-testid':n},u);}else if(this.props.attachedPhoto&&this.props.attachedPhoto.metadata&&this.props.attachedPhoto.metadata.preview_uri)p=c('React').createElement('div',{style:{height:this.props.attachedPhoto.metadata.height}},c('React').createElement(c('Image.react'),{src:this.props.attachedPhoto.metadata.preview_uri}));}else if(this.props.isLoadingPhoto){p=c('React').createElement(c('LoadingIndicator.react'),{color:'white',className:'UFICommentPhotoAttachedPreviewLoadingIndicator',size:'medium'});}else if(this.props.videoStatus==='uploading'||this.props.attachedVideo&&this.props.videoStatus==='encoding'){p=c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('OptimisticVideoComment.react').__setRef('UFIAttachedMediaPreview.react'),bootloadPlaceholder:c('React').createElement('span',null),videoFileURL:this.props.videoFileURL,videoStatus:this.props.videoStatus,progress:this.props.videoProgress});}else if(q&&this.props.attachedVideo)p=c('React').createElement('div',{className:"_3f0q"},c('React').createElement(c('DOMContainer.react'),null,q.markup));var v=null,w=this.props.attachedSticker?this.props.onRemoveAttachedStickerPreview:this.props.onRemoveAttachedMediaPreviewClicked;if(p!=null){var x=null;if(this.props.attachedSticker){x=i._("Remove Sticker");}else if(this.props.attachedPhoto){x=i._("Remove Photo");}else if(this.props.attachedVideo)x=i._("Remove Video");v=c('React').createElement('div',{className:'UFICommentPhotoAttachedPreview pas'},p,c('React').createElement(c('CloseButton.react'),{tooltip:x,onClick:w,ariaLabel:x}));}return v;};o.propTypes={attachedPhoto:l.object,attachedVideo:l.object,attachedSticker:l.object,onRemoveAttachedMediaPreviewClicked:l.func,onRemoveAttachedStickerPreview:l.func,subtitle:l.string,isLoadingPhoto:l.bool,videoFileURL:l.string,videoStatus:l.string,videoProgress:l.number};f.exports=o;}),null);
__d('addEmojiPicker',['cx','Bootloader','React','DraftModifier','EmojiFormat','EditorState'],(function a(b,c,d,e,f,g,h){'use strict';var i=void 0,j=void 0,k=3000;function l(m){return function(){var n,o;n=babelHelpers.inherits(p,c('React').PureComponent);o=n&&n.prototype;function p(q){'use strict';o.constructor.call(this,q);this.$EmojiPickerEditor5=false;this.$EmojiPickerEditor6=function(){clearTimeout(this.$EmojiPickerEditor1);this.setState({pickerStatus:'hidden'});}.bind(this);this.$EmojiPickerEditor8=function(r){this.props.onChange(r);this.setState({pickerStatus:'hidden'});clearTimeout(this.$EmojiPickerEditor1);this.$EmojiPickerEditor1=setTimeout(function(){this.$EmojiPickerEditor7(function(){this.setState(function(s){if(s.pickerStatus==='hidden')return {pickerStatus:'closed'};return {};});}.bind(this));}.bind(this),k);}.bind(this);this.$EmojiPickerEditor9=function(){this.setState({pickerStatus:'full'});}.bind(this);this.$EmojiPickerEditor10=function(r){var s=this.props.editorState,t=c('DraftModifier').insertText(s.getCurrentContent(),s.getSelection(),c('EmojiFormat').codeArrayToUnicode(r),s.getCurrentInlineStyle()),u=c('EditorState').push(s,t,'insert-characters');if(u!==s){this.props.onChange(u);this.$EmojiPickerEditor7();}}.bind(this);this.$EmojiPickerEditor11=function(r){if(this.state.pickerStatus==='full'||this.state.pickerStatus==='quick')if(r.key==='ArrowLeft'||r.key==='ArrowRight'||r.key==='ArrowUp'||r.key==='ArrowDown'){r.stopPropagation();r.preventDefault();this.refs.emojiPicker&&this.refs.emojiPicker.onArrowPress(r.key);}else if(r.key==='Enter'){r.stopPropagation();r.preventDefault();if(this.state.selectedEmoji)this.$EmojiPickerEditor10(this.state.selectedEmoji.codepoint);}}.bind(this);this.$EmojiPickerEditor13=function(r){this.setState({pickerPosition:r});}.bind(this);this.state={bootloaded:!!i&&!!j,contextDiv:null,pickerOffsetX:0,pickerOffsetY:0,pickerPosition:'below',pickerStatus:'hidden',selectedEmoji:null};}p.prototype.componentWillMount=function(){'use strict';if(!this.state.bootloaded)this.$EmojiPickerEditor3=setTimeout(function(){this.bootloadModules(function(){this.setState({bootloaded:true});this.focus();}.bind(this));}.bind(this),0);};p.prototype.componentWillUnmount=function(){'use strict';clearTimeout(this.$EmojiPickerEditor4);clearTimeout(this.$EmojiPickerEditor2);clearTimeout(this.$EmojiPickerEditor3);clearTimeout(this.$EmojiPickerEditor1);};p.prototype.bootloadModules=function(q){'use strict';c('Bootloader').loadModules(["EmojiCursor.react","EmojiPickerContainer.react"],function(r,s){i=r;j=s;q();},'addEmojiPicker');};p.prototype.$EmojiPickerEditor7=function(q){'use strict';if(!this.$EmojiPickerEditor5){this.$EmojiPickerEditor5=true;this.$EmojiPickerEditor4=setTimeout(function(){var r=this.state.contextDiv,s=0,t=0;if(r){var u=b.getSelection();if(u.rangeCount>0){var v=u.getRangeAt(0).getBoundingClientRect();if(v.left>0){var w=r.getBoundingClientRect();s=v.left-w.left;t=v.bottom-w.bottom;}}}this.setState({pickerOffsetX:s,pickerOffsetY:t});this.$EmojiPickerEditor5=false;q&&q();}.bind(this),0);}};p.prototype.focus=function(){'use strict';if(this.state.pickerStatus!=='closed'){clearTimeout(this.$EmojiPickerEditor2);this.$EmojiPickerEditor2=setTimeout(function(){this.refs.textEditor&&this.refs.textEditor.focus();this.$EmojiPickerEditor7(function(){return this.setState({pickerStatus:'closed'});}.bind(this));}.bind(this),0);}};p.prototype.$EmojiPickerEditor12=function(){'use strict';if(!this.state.bootloaded||!this.state.contextDiv)return null;return c('React').createElement(i,{context:this.state.contextDiv,offsetX:this.state.pickerOffsetX,offsetY:this.state.pickerOffsetY,onClick:this.$EmojiPickerEditor9,status:this.state.pickerStatus,position:this.state.pickerPosition});};p.prototype.$EmojiPickerEditor14=function(){'use strict';if(!this.state.bootloaded||!this.state.contextDiv)return null;return (c('React').createElement(j,{ref:'emojiPicker',key:0,status:this.state.pickerStatus,context:this.state.contextDiv,onEmojiClick:this.$EmojiPickerEditor10,onEmojiSelect:function(q){return this.setState({selectedEmoji:q});}.bind(this),offsetX:this.state.pickerOffsetX,offsetY:this.state.pickerOffsetY,onPositionChange:this.$EmojiPickerEditor13,onExpandClick:function(){return this.setState({pickerStatus:'full'});}.bind(this)}));};p.prototype.render=function(){'use strict';return (c('React').createElement('div',{onBlur:this.$EmojiPickerEditor6,onKeyDownCapture:this.$EmojiPickerEditor11,ref:function(q){return this.setState({contextDiv:q});}.bind(this)},c('React').createElement(m,babelHelpers['extends']({},this.props,{className:this.props.className,ref:'textEditor',onChange:this.$EmojiPickerEditor8})),c('React').createElement('div',{className:"uiContextualLayerParent"},this.$EmojiPickerEditor14(),this.$EmojiPickerEditor12())));};return p;}();}f.exports=l;}),null);
__d('createMentionEntity',['DraftEntity'],(function a(b,c,d,e,f,g){function h(i){var j=i.getType().toLowerCase();if(j==='hashtag')return c('DraftEntity').create('HASHTAG','IMMUTABLE');var k=j==='user'||j==='fb4c'?'SEGMENTED':'IMMUTABLE',l=i.getAuxiliaryData();return c('DraftEntity').create('MENTION',k,{id:i.getUniqueID(),isWeak:l&&l.renderType==='non_member',type:j});}f.exports=h;}),null);
__d('MentionsInput.react',['cx','addEmojiPicker','EmojiPickerConfig','AbstractMentionsTextEditor.react','EditorState','MentionsLayer.react','React','ReactDOM','createMentionEntity','joinClasses'],(function a(b,c,d,e,f,g,h){var i,j,k=c('EmojiPickerConfig').hasEmojiPicker,l=c('React').PropTypes;i=babelHelpers.inherits(m,c('React').Component);j=i&&i.prototype;function m(n){'use strict';j.constructor.call(this,n);this.AbstractMentionsComponent=c('AbstractMentionsTextEditor.react');this.blur=function(){this.refs.textEditor.blur();}.bind(this);this.focus=function(){this.refs.textEditor&&this.refs.textEditor.focus();}.bind(this);this.click=function(){c('ReactDOM').findDOMNode(this).dispatchEvent(new Event('focus'));}.bind(this);if(k&&this.props.showEmojiPicker)this.AbstractMentionsComponent=c('addEmojiPicker')(c('AbstractMentionsTextEditor.react'));}m.prototype.render=function(){'use strict';var n=c('joinClasses')(this.props.className,"_5yk1"),o=this.AbstractMentionsComponent;return (c('React').createElement('div',{className:n,onClick:this.click,onFocus:this.focus},c('React').createElement(o,babelHelpers['extends']({},this.props,{mentionResultsComponent:c('MentionsLayer.react'),mentionResultsProps:{typeaheadView:this.props.typeaheadView,typeaheadViewProps:this.props.typeaheadViewProps,autoflip:this.props.autoflip,position:this.props.position},mentionCreationFn:c('createMentionEntity'),ref:'textEditor',className:"_5yk2",stripPastedStyles:true}))));};m.propTypes={editorState:l.instanceOf(c('EditorState')).isRequired,mentionsSource:l.object,typeaheadView:l.func.isRequired,typeaheadViewPropTypes:l.object,spellCheck:l.bool,placeholder:l.string,className:l.string,autoflip:l.bool,position:l.oneOf(['above','below']),showEmojiPicker:l.bool,webDriverTestID:l.string,handleContentReturn:l.func,handleDroppedFiles:l.func,handlePastedFiles:l.func,onAddMention:l.func,onShowMentions:l.func,onChange:l.func,onInputFocus:l.func,onInputBlur:l.func};f.exports=m;}),null);
__d('DevxFluxDispatcher',['Dispatcher_DEPRECATED'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('Dispatcher_DEPRECATED'));i=h&&h.prototype;j.prototype.handleServerAction=function(k){this.$DevxFluxDispatcher1('serverAction',k);};j.prototype.handleViewAction=function(k){this.$DevxFluxDispatcher1('viewAction',k);};j.prototype.$DevxFluxDispatcher1=function(k,l){this.dispatch(babelHelpers['extends']({source:k},l));};function j(){h.apply(this,arguments);}f.exports=new j();}),null);
__d('DevxProxyActions',['DevxFluxDispatcher'],(function a(b,c,d,e,f,g){'use strict';function h(i){Object.keys(i.ActionHandler).forEach(function(j){this[j]=function(){for(var k=arguments.length,l=Array(k),m=0;m<k;m++)l[m]=arguments[m];c('DevxFluxDispatcher').handleViewAction({action:j,args:l});};}.bind(this));}f.exports=h;}),null);
__d("XPluginCommentsBanAuthorAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/plugins\/comments\/moderate\/ban\/{comment_id}\/",{comment_id:{type:"String",required:true}});}),null);
__d("XPluginCommentsCreateCommentAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/plugins\/comments\/async\/createComment\/{target_id}\/",{target_id:{type:"Int",required:true}});}),null);
__d("XPluginCommentsCreateReplyAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/plugins\/comments\/async\/createReply\/{parent_comment_id}\/",{parent_comment_id:{type:"String",required:true}});}),null);
__d("XPluginCommentsDeleteCommentAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/plugins\/comments\/async\/delete\/",{});}),null);
__d("XPluginCommentsEditCommentAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/plugins\/comments\/async\/edit\/",{});}),null);
__d("XPluginCommentsFlagCommentAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/plugins\/comments\/async\/flag\/",{});}),null);
__d("XPluginCommentsHideCommentAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/plugins\/comments\/moderate\/hide\/{url_id}\/",{url_id:{type:"Int",required:true},action:{type:"Enum",required:true,enumType:1},type:{type:"Enum",required:true,enumType:1}});}),null);
__d("XPluginCommentsLikeCommentAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/plugins\/comments\/async\/like\/",{action_like:{type:"Bool",defaultValue:false}});}),null);
__d("XPluginCommentsPagerAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/plugins\/comments\/async\/{target_id}\/pager\/{ordering}\/",{target_id:{type:"Int",required:true},ordering:{type:"Enum",required:true,enumType:1}});}),null);
__d("XPluginCommentsRepliesPagerAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/plugins\/comments\/async\/comment\/{comment_id}\/pager\/",{comment_id:{type:"String",required:true}});}),null);
__d('CommentsPluginStore',['invariant','AsyncDialog','AsyncRequest','XPluginCommentsBanAuthorAsyncController','XPluginCommentsCreateCommentAsyncController','XPluginCommentsCreateReplyAsyncController','CurrentUser','XPluginCommentsDeleteCommentAsyncController','DeveloperCommentsModerationAction','DeveloperCommentsModerationSource','DeveloperCommentsModerationType','DevxFluxDispatcher','XPluginCommentsEditCommentAsyncController','XCommentEmbedPluginEmbedAsyncDialogController','XPluginCommentsFlagCommentAsyncController','XPluginCommentsLikeCommentAsyncController','XPluginCommentsHideCommentAsyncController','PluginOptin','XPluginCommentsPagerAsyncController','XPluginCommentsRepliesPagerAsyncController','UnverifiedXD','URI','WebStorage','getMentionsTextForContentState','getVisibleValueForContentState','mixInEventEmitter','nullthrows','uniqueID'],(function a(b,c,d,e,f,g,h){'use strict';var i=10,j='__DEVX__',k={visibleValue:'',encodedValue:''},l={change:true,composerChange:true,composerCommentAdded:true,login:true,moreCommentsCompleted:true,moreRepliesCompleted:true,postError:true,sortingCompleted:true,sentryAction:true,previousComposerCommentPrefill:true,actorChange:true,previousPostToFeedPrefill:true,commentsCountChange:true},m={maxLines:10,maxLength:1000},n='0',o=[],p={},q={userID:null,actors:{},actorsOptIn:{},appID:null,afterCursor:null,channelURL:null,composerSearchSource:{},deeplinkedCommentID:null,href:'',iframeReferer:null,isMobile:false,isModerator:false,mirroredPage:null,moderateURL:null,targetFBID:null,totalCount:0,user:{id:n},minFeedLength:0,maxCommentLength:0,enablePhoto:false,enableSticker:false,ret:null,threadClosed:false,shouldSwitchAccount:false,fromModTool:false,privacyOptionsList:[]},r=false,s='current_composer',t={},u={},v={},w={},x={ordering:null,ranking_allowed:null},y={},z={},aa={setPostToFeed:true,sort:true,showMoreComments:true,showMoreReplies:true,toggleVisibility:true,setPrivacyOption:true},ba={restorePreviousState:true,setUser:true,edit:true,showReplyComposer:true,cancelEdit:true,cancelReply:true},ca={addComment:true,addReply:true,saveEdit:true};function da(la){ka.hasOwnProperty(la)||h(0);}function ea(){Array.isArray(o)||h(0);p instanceof Object||h(0);}function fa(la){var ma,na=ja.getUser().id,oa=la.action,pa=(ma=ka[la.action]).bind.apply(ma,[ka].concat(la.args));if(ja.isLoggedIn()&&(ja.isPlatformEnabled(na)||ba[oa])||aa[oa]){pa.call();}else{var qa=c('WebStorage').getSessionStorage();if(qa)qa.setItem('previousState',JSON.stringify(ga(la)));new (c('PluginOptin'))('comments').addReturnParams({numposts:Math.min(Math.max(1,q.totalCount),100),order_by:x.ordering}).start();}}function ga(la){var ma='',na='',oa=[],pa={},qa={},ra=r,sa=s,ta=ja.getCreateComposerContent();if(ta)ma=ta.encodedValue;if(!ca[la.action]){na=la.action;oa=la.args;}Object.keys(y).forEach(function(ua){var va=ja.getCreateComposerContent(ua);if(va.encodedValue)pa[ua]=va.encodedValue;});Object.keys(z).forEach(function(ua){var va=ja.getEditComposerContent(ua);if(va.encodedValue)qa[ua]=va.encodedValue;});return {commentBody:ma,action:na,commentIDs:oa,replies:pa,edits:qa,postToFeed:ra,privacyOption:sa};}function ha(la,ma,na){return na.indexOf(la)===ma;}function ia(event,la){if(!q.channelURL)return;la.href=q.href;c('UnverifiedXD').send({data:JSON.stringify(la),event:event,type:'sdk_event'},q.channelURL);}var ja={getCommentIDs:function la(){return o;},getByID:function la(ma){ea();return c('nullthrows')(p)[ma];},isOptimisticComment:function la(ma){return ma.id.startsWith(j);},getCurrentSorting:function la(){return c('nullthrows')(x.ordering);},isRankingAllowed:function la(){return c('nullthrows')(x.ranking_allowed);},getTargetFBID:function la(){return c('nullthrows')(q.targetFBID);},getCommentsCount:function la(){ea();return q.totalCount;},updateCommentsCount:function la(ma){q.totalCount+=ma;this.emit('commentsCountChange');},getUser:function la(){return q.user;},getIframeReferer:function la(){return q.iframeReferer;},getAuthor:function la(ma){return this.getByID(this.getByID(ma).authorID);},getPageSize:function la(){return i;},getCommentBodyTruncationLimits:function la(){return m;},getComposerSearchSource:function la(){return q.composerSearchSource;},getMirroredPage:function la(){return q.mirroredPage;},getMinFeedLength:function la(){return q.minFeedLength+1;},getMaxCommentLength:function la(){return q.maxCommentLength?q.maxCommentLength:Number.MAX_VALUE;},isMirrored:function la(){return this.getMirroredPage()!=null;},isReply:function la(ma){var na=this.getByID(ma);return na.targetID!==this.getTargetFBID();},getPermalink:function la(ma){var na=this.getByID(ma);return new (c('URI'))(na.ogURL).setQueryData({fb_comment_id:ma}).toString();},isOptinReturn:function la(){return !!q.ret;},setActor:function la(ma){q.user=q.actors[ma];},getPrivacyOptionsList:function la(){return q.privacyOptionsList;},getPostToFeed:function la(){return r;},getPrivacyOption:function la(){return s;},setPostToFeed:function la(ma){r=ma;},setPrivacyOption:function la(ma){s=ma;},getEnablePhoto:function la(){return q.enablePhoto;},getEnableSticker:function la(){return q.enableSticker;},isDeeplinkComment:function la(){return !!q.deeplinkedCommentID&&q.fromModTool;},getOriginalLink:function la(){return q.href;},getCreateComposerAttachment:function la(ma){return t[ma||j]||null;},setCreateComposerAttachment:function la(ma,na){t[na||j]=ma;this.emit('composerChange');},getEditComposerAttachment:function la(ma){return u[ma]||null;},setEditComposerAttachment:function la(ma,na){u[na]=ma;this.emit('composerChange');},getLoadingCreateComposerAttachment:function la(ma){return v[ma||j]||false;},setLoadingCreateComposerAttachment:function la(ma,na){v[na||j]=ma;this.emit('composerChange');},getLoadingEditComposerAttachment:function la(ma){return w[ma]||false;},setLoadingEditComposerAttachment:function la(ma,na){w[na]=ma;this.emit('composerChange');},setCreateComposerState:function la(ma,na){y[na||j]=ma;this.emit('composerChange');},getCreateComposerState:function la(ma){return y[ma||j]||null;},getCreateComposerContent:function la(ma){return this._editorStateToComposerPayload(this.getCreateComposerState(ma));},isEmptyCreateComposer:function la(ma){return this.getLoadingCreateComposerAttachment(ma)||this.getCreateComposerContent(ma).visibleValue.trim()===''&&!this.getCreateComposerAttachment(ma);},setEditComposerState:function la(ma,na){z[na]=ma;this.emit('composerChange');},getEditComposerState:function la(ma){return z[ma];},getEditComposerContent:function la(ma){return this._editorStateToComposerPayload(this.getEditComposerState(ma));},isEmptyEditComposer:function la(ma){return this.getLoadingEditComposerAttachment(ma)||this.getEditComposerContent(ma).visibleValue.trim()===''&&!this.getEditComposerAttachment(ma);},hasTextChanged:function la(ma,na){return ma.trim()!==na.trim();},hasAttachmentChanged:function la(ma,na){if(ma){return na?ma.fbid!==na.fbid:true;}else return !!na;},hasCommentChanged:function la(ma,na){var oa=this.getByID(ma);return this.hasTextChanged(na.encodedValue,oa.body.text)||this.hasAttachmentChanged(u[ma],oa.photo_comment||oa.attachment);},_editorStateToComposerPayload:function la(ma){if(!ma)return k;var na=ma.getCurrentContent(),oa=c('getVisibleValueForContentState')(na),pa=c('getMentionsTextForContentState')(na);return {visibleValue:oa,encodedValue:pa};},hasAttachment:function la(){var ma=Object.keys(v);for(var na=0;na<ma.length;na++)if(v[ma[na]]||t[ma[na]])return true;return false;},getActorIDs:function la(){return Object.keys(q.actors);},getModerateURL:function la(){return q.moderateURL;},isLoggedIn:function la(){return q.user.id!==n&&c('CurrentUser').isLoggedInNow();},isPlatformEnabled:function la(ma){return q.actorsOptIn[ma];},isMobile:function la(){return q.isMobile;},useLegacyMentionsInput:function la(){return this.isMobile()||!this.isLoggedIn();},useCustomActorSelector:function la(){return this.isMobile()||document.body.offsetWidth<450;},isViewerModerator:function la(){return q.isModerator;},isThreadClosed:function la(){return q.threadClosed;},shouldSwitchAccount:function la(){return q.shouldSwitchAccount;},hasUnloadedComments:function la(){return !!q.afterCursor;},hasUnloadedReplies:function la(ma){var na=this.getByID(ma).public_replies;if(!na)return false;if(na.afterCursor)return true;if((!na.commentIDs||na.commentIDs.length===0)&&na.totalCount>0)return true;return false;},getUnloadedCommentsCount:function la(){return q.totalCount-o.length;},getDialogWidth:function la(){return Math.min(document.body.offsetWidth-10,this.isMobile()?320:445);},dispatcherIndex:c('DevxFluxDispatcher').register(function(la){da(la.action);fa(la);}),init:function la(ma,na,oa,pa){q=na;this.updateCommentData(ma,oa);Object.keys(q.actors).forEach(function(qa){return p[qa]=q.actors[qa];});this.setActor(q.userID);x.ranking_allowed=pa;},updateCommentData:function la(ma,na){o=ma.commentIDs;Object.assign(p,this.initComments(o,ma.idMap));x.ordering=na;},initComment:function la(ma){ma.collapsed=false;ma.editor=false;ma.composer=false;ma.deleted=false;ma.flagged=false;return ma;},initComments:function la(ma,na){ma.forEach(function(oa){return na[oa]=this.initComment(na[oa]);}.bind(this));return na;},emit:undefined,addListener:undefined,removeCurrentListener:undefined,ActionHandler:undefined};c('mixInEventEmitter')(ja,l);var ka={ban:function la(ma){var na=ja.getByID(ma);na.deleted=true;ja.emit('change');var oa=c('XPluginCommentsBanAuthorAsyncController').getURIBuilder().setString('comment_id',ma).getURI();new (c('AsyncRequest'))(oa).setMethod('POST').setData({ban:true,source:c('DeveloperCommentsModerationSource').URL}).send();},hide:function la(ma){var na=ja.getByID(ma);na.deleted=true;ja.emit('change');var oa=c('XPluginCommentsHideCommentAsyncController').getURIBuilder().setInt('url_id',q.targetFBID).setEnum('action',c('DeveloperCommentsModerationAction').DELETE).setEnum('type',c('DeveloperCommentsModerationType').APPROVED).getURI();new (c('AsyncRequest'))(oa).setData({comment_ids:[ma]}).setMethod('POST').send();},addComment:function la(){var ma=ja.getCreateComposerContent(),na=this._getAttachmentFBID(ja.getCreateComposerAttachment()),oa=c('XPluginCommentsCreateCommentAsyncController').getURIBuilder().setInt('target_id',q.targetFBID).getURI();new (c('AsyncRequest'))(oa).setData({app_id:q.appID,av:ja.getUser().id,text:ma.encodedValue,attached_photo_fbid:na.photoFBID,attached_sticker_fbid:na.stickerFBID,post_to_feed:ja.getPostToFeed(),privacy_option:ja.getPrivacyOption(),iframe_referer:q.iframeReferer}).setMethod('POST').setHandler(function(pa){var qa=pa.payload,ra=qa.commentID;this._prependComment(qa.idMap[ra]);delete y[j];ja.emit('composerCommentAdded',{});ia('comment.create',{commentID:ra,message:ma.visibleValue});if(qa.sentryAction)ja.emit('sentryAction',qa.sentryAction,ra);}.bind(this)).setErrorHandler(function(pa){delete p[j];o.shift();ja.updateCommentsCount(-1);ja.emit('change');ja.emit('postError',pa);}).send();this._prependComment({authorID:q.user.id,targetID:q.targetFBID,body:{text:ma.visibleValue}});ja.updateCommentsCount(1);},addReply:function la(ma){var na=ja.getCreateComposerContent(ma),oa=this._getAttachmentFBID(ja.getCreateComposerAttachment(ma)),pa=c('XPluginCommentsCreateReplyAsyncController').getURIBuilder().setString('parent_comment_id',ma).getURI(),qa=j+c('uniqueID')();new (c('AsyncRequest'))(pa).setData({app_id:q.appID,av:ja.getUser().id,text:na.encodedValue,attached_photo_fbid:oa.photoFBID,attached_sticker_fbid:oa.stickerFBID,iframe_referer:q.iframeReferer,replied_to:ja.getByID(ma).replyToCommentID}).setMethod('POST').setHandler(function(ta){var ua=ja.getByID(ma),va=Object.assign({},ua.public_replies);Object.assign(p,ta.payload.idMap);ua=ja.getByID(ma);ua.public_replies=va;delete p[qa];delete y[ma];o.splice(o.indexOf(qa),1);ua.composer=false;delete ua.replyToCommentID;ua.public_replies.commentIDs.pop();ua.public_replies.commentIDs.push(ta.payload.commentID);ia('comment.create',{commentID:ta.payload.commentID,parentCommentID:ma,message:na.visibleValue});ja.emit('change');}).setErrorHandler(function(ta){delete p[qa];o.splice(o.indexOf(qa),1);ra=ja.getByID(ma);ra.public_replies.commentIDs.pop();ra.public_replies.totalCount--;ra.composer=false;delete ra.replyToCommentID;ja.updateCommentsCount(-1);ja.emit('change');ja.emit('postError',ta);}).send();var ra=ja.getByID(ma),sa=Object.assign({},ra.public_replies);if(!sa.commentIDs)sa.commentIDs=[];if(!sa.totalCount)sa.totalCount=0;sa.totalCount++;sa.commentIDs.push(qa);ra.public_replies=sa;p[qa]={authorID:q.user.id,body:{text:na.visibleValue},targetID:ma,id:qa};o.push(qa);ja.updateCommentsCount(1);ja.emit('change');},_prependComment:function la(ma){if(!ma.id){ma.id=j;}else{o.shift();delete p[j];}o.unshift(ma.id);p[ma.id]=ja.initComment(ma);ja.emit('change');},_getAttachmentFBID:function la(ma){var na=0,oa=0;if(ma)if(ma.attachmentType==='photo'){na=c('nullthrows')(ma.fbid);}else if(ma.attachmentType==='sticker')oa=c('nullthrows')(ma.fbid);return {photoFBID:na,stickerFBID:oa};},edit:function la(ma,na){var oa=ja.getByID(ma);oa.editor=true;oa.prefillText=na;ja.emit('change');},saveEdit:function la(ma){var na=JSON.parse(JSON.stringify(ja.getByID(ma))),oa=c('XPluginCommentsEditCommentAsyncController').getURIBuilder().getURI(),pa=ja.getEditComposerContent(ma),qa=this._getAttachmentFBID(ja.getEditComposerAttachment(ma)),ra=ja.hasCommentChanged(ma,pa);if(ra){new (c('AsyncRequest'))(oa).setMethod('POST').setData({app_id:q.appID,text:pa.encodedValue,comment_id:ma,av:ja.getAuthor(ma).id,attached_photo_fbid:qa.photoFBID,attached_sticker_fbid:qa.stickerFBID,iframe_referer:q.iframeReferer}).setHandler(function(ta){var ua=ta.payload;p[ua.commentID]=ja.initComment(ua.idMap[ua.commentID]);delete z[ma];ja.emit('change');}).setErrorHandler(function(ta){na.editor=false;Object.assign(ja.getByID(ma),na);ja.emit('change');ja.emit('postError',ta);}).send();var sa=ja.getByID(ma);sa.editor=false;sa.body.text=pa.visibleValue;if(qa.photoFBID===0)delete sa.photo_comment;if(qa.stickerFBID===0)delete sa.attachment;delete sa.ranges;ja.emit('change');}else this.cancelEdit(ma);},cancelEdit:function la(ma){var na=ja.getByID(ma);na.editor=false;ja.emit('change');},'delete':function la(ma){var na=ja.getByID(ma);na.deleted=true;var oa=c('XPluginCommentsDeleteCommentAsyncController').getURIBuilder().getURI();new (c('AsyncRequest'))(oa).setData({app_id:q.appID,comment_id:ma,av:ja.getAuthor(ma).id,iframe_referer:q.iframeReferer}).setMethod('POST').setHandler(function(){return (ia('comment.remove',{commentID:ma}));}).setErrorHandler(function(pa){var qa=ja.getByID(ma);qa.deleted=false;ja.updateCommentsCount(1);ja.emit('change');}).send();ja.updateCommentsCount(-1);ja.emit('change');},like:function la(ma){var na=ja.getByID(ma),oa=c('XPluginCommentsLikeCommentAsyncController').getURIBuilder().setBool('action_like',!na.hasLiked).getURI();new (c('AsyncRequest'))(oa).setData({app_id:q.appID,comment_id:na.id,iframe_referer:q.iframeReferer}).setMethod('POST').setHandler(function(pa){var qa=pa.payload;Object.assign(p[qa.commentID],ja.initComment(qa.idMap[qa.commentID]));ja.emit('change');}).setErrorHandler(function(pa){na.likeCount--;na.hasLiked=false;ja.emit('postError',pa);}).send();na.hasLiked=!na.hasLiked;if(na.hasLiked){na.likeCount++;}else if(na.likeCount>0)na.likeCount--;p[na.id]=na;ja.emit('change');},sort:function la(ma){var na=c('XPluginCommentsPagerAsyncController').getURIBuilder().setInt('target_id',q.targetFBID).setEnum('ordering',ma).getURI();new (c('AsyncRequest'))(na).setMethod('POST').setData({app_id:q.appID,limit:ja.getPageSize(),iframe_referer:q.iframeReferer}).setHandler(function(oa){var pa=oa.payload;q.afterCursor=pa.afterCursor;ja.updateCommentData(pa,ma);ja.emit('sortingCompleted');ja.emit('change');}).send();},showMoreComments:function la(){var ma=c('XPluginCommentsPagerAsyncController').getURIBuilder().setInt('target_id',q.targetFBID).setEnum('ordering',ja.getCurrentSorting()).getURI();new (c('AsyncRequest'))(ma).setMethod('POST').setData({app_id:q.appID,after_cursor:q.afterCursor,limit:ja.getPageSize(),deeplinked_comment_id:q.deeplinkedCommentID,iframe_referer:q.iframeReferer}).setHandler(function(na){var oa=na.payload;q.afterCursor=oa.afterCursor;o=o.concat(oa.commentIDs).filter(ha);Object.assign(p,ja.initComments(oa.commentIDs,oa.idMap));ja.emit('moreCommentsCompleted');ja.emit('change');}).setErrorHandler(function(na){ja.emit('postError',na);ja.emit('moreCommentsCompleted');}).send();},setUser:function la(ma){ja.setActor(ma);ja.emit('actorChange');},setPostToFeed:function la(ma){ja.setPostToFeed(ma);},setPrivacyOption:function la(ma){ja.setPrivacyOption(ma);},showMoreReplies:function la(ma){var na=c('XPluginCommentsRepliesPagerAsyncController').getURIBuilder().setString('comment_id',ma).getURI(),oa=ja.getByID(ma).public_replies;new (c('AsyncRequest'))(na).setMethod('POST').setData({app_id:q.appID,after_cursor:oa.afterCursor,limit:ja.getPageSize(),iframe_referer:q.iframeReferer}).setHandler(function(pa){var qa=pa.payload;p=Object.assign(ja.initComments(qa.commentIDs,qa.idMap),p);oa.afterCursor=qa.afterCursor;oa.commentIDs=oa.commentIDs.concat(qa.commentIDs).filter(ha);ja.emit('moreRepliesCompleted',{commentID:ma});ja.emit('change');}).setErrorHandler(function(pa){ja.emit('postError',pa);ja.emit('moreRepliesCompleted',{commentID:ma});}).send();},toggleVisibility:function la(ma){var na=ja.getByID(ma);na.collapsed=!na.collapsed;ja.emit('change');},flag:function la(ma){p[ma].flagged=true;this._sendFlagOrUnflagRequest(ma,'flag');ja.emit('change');},unflag:function la(ma){p[ma].flagged=false;this._sendFlagOrUnflagRequest(ma,'unflag');ja.emit('change');},_sendFlagOrUnflagRequest:function la(ma,na){var oa=c('XPluginCommentsFlagCommentAsyncController').getURIBuilder().getURI();new (c('AsyncRequest'))(oa).setData({app_id:q.appID,comment_id:ma,iframe_referer:q.iframeReferer,unflag:na==='unflag'}).setMethod('POST').setErrorHandler(function(pa){p[ma].flagged=!p[ma].flagged;ja.emit('postError',pa);}).send();},report:function la(ma){window.open(ja.getByID(ma).reportURI,'_blank');},showReplyComposer:function la(ma,na){var oa=ja.getByID(ma);if(ja.isReply(ma)){var pa=ma;oa=ja.getByID(oa.targetID);oa.replyToCommentID=pa;}oa.prefillText=na;oa.composer=true;ja.emit('change');},cancelReply:function la(ma){var na=ja.getByID(ma);na.composer=false;delete na.replyToCommentID;ja.emit('change');},restorePreviousState:function la(){var ma,na=this,oa=c('WebStorage').getSessionStorage();if(oa)(function(){var pa=JSON.parse(oa.getItem('previousState'));oa.clear();var qa=ja.getCommentIDs();if(pa.action){var ra={};ra.action=pa.action;ra.args=pa.commentIDs;fa(ra);}var sa=pa.replies,ta=pa.edits;qa.map(function(ua){if(sa[ua])this.showReplyComposer(ua,sa[ua]);if(ta[ua])this.edit(ua,ta[ua]);}.bind(na));if(pa.commentBody)ja.emit('previousComposerCommentPrefill',{prefillText:pa.commentBody});if(pa.postToFeed){na.setPostToFeed(pa.postToFeed);ja.emit('previousPostToFeedPrefill');}})();},embed:function la(ma){var na=c('XCommentEmbedPluginEmbedAsyncDialogController').getURIBuilder().setString('comment_id',ma).setInt('width',ja.getDialogWidth()).getURI();c('AsyncDialog').send(new (c('AsyncRequest'))(na));}};ja.ActionHandler=ka;f.exports=ja;}),null);
__d('CommentsPluginActions',['CommentsPluginStore','DevxProxyActions'],(function a(b,c,d,e,f,g){'use strict';f.exports=new (c('DevxProxyActions'))(c('CommentsPluginStore'));}),null);
__d('CommentsPluginAction',['fbt'],(function a(b,c,d,e,f,g,h){'use strict';var i={EDIT:'edit',DELETE:'delete',FLAG:'flag',SETUSER:'setUser',BAN:'ban',HIDE:'hide',REPORT:'report',COLLAPSE:'collapse',EMBED:'embed',getLabel:function j(k){switch(k){case i.COLLAPSE:return h._("Collapse comment");case i.EDIT:return h._("Edit comment");case i.DELETE:return h._("Delete comment");case i.FLAG:return h._("Mark as spam");case i.BAN:return h._("Ban user");case i.HIDE:return h._("Hide comment");case i.REPORT:return h._("Report to Facebook");case i.SETUSER:return h._("Switch accounts");case i.EMBED:return h._("Embed");}},getMenuActions:function j(){return [i.COLLAPSE,i.EDIT,i.DELETE,i.FLAG,i.BAN,i.HIDE,i.REPORT,i.EMBED];}};f.exports=i;}),null);
__d('MixinCommentsPluginConfirmAction',['fbt','invariant','CommentsPluginAction','CommentsPluginActions','CommentsPluginStore','React','Set','XUIDialog.react','XUIDialogBody.react','XUIDialogButton.react','XUIDialogCancelButton.react','XUIDialogFooter.react','XUIDialogTitle.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=120,k={componentWillMount:function l(){this.setState({actionConfirmationShown:false,action:null,id:null,pageY:null});},requiresConfirmation:function l(m){var n=new (c('Set'))([c('CommentsPluginAction').DELETE,c('CommentsPluginAction').BAN,c('CommentsPluginAction').HIDE]);return n.has(m);},confirmAction:function l(m,n,o){this.setState({actionConfirmationShown:true,action:m,id:n,pageY:o});},_onActionConfirmed:function l(){c('CommentsPluginActions')[this.state.action](this.state.id);this.setState({actionConfirmationShown:false});},_onActionCancelled:function l(){this.setState({actionConfirmationShown:false});},_getActionMetadata:function l(m){switch(m){case c('CommentsPluginAction').DELETE:return {body:h._("Are you sure you want to delete this comment?"),button_label:h._("Confirm Deletion")};case c('CommentsPluginAction').BAN:return {body:h._("Are you sure you want to ban this user?"),button_label:h._("Confirm Ban")};case c('CommentsPluginAction').HIDE:return {body:h._("Are you sure you want to hide this comment?"),button_label:h._("Confirm Hide")};case c('CommentsPluginAction').SETUSER:return {body:h._("Commenting as another account will clear the attachments you've uploaded."),button_label:h._("Switch accounts")};default:i(0);}},renderActionConfirmationDialog:function l(){var m=this.state.action;if(!m)return null;var n=this._getActionMetadata(m);return (c('React').createElement(c('XUIDialog.react'),{shown:this.state.actionConfirmationShown,fixedTopPosition:this.state.pageY+j<document.body.offsetHeight?this.state.pageY-j/2:null,width:c('CommentsPluginStore').getDialogWidth()},c('React').createElement(c('XUIDialogTitle.react'),{showCloseButton:false},c('CommentsPluginAction').getLabel(m)),c('React').createElement(c('XUIDialogBody.react'),null,n.body),c('React').createElement(c('XUIDialogFooter.react'),null,c('React').createElement(c('XUIDialogCancelButton.react'),{onClick:this._onActionCancelled.bind(this)}),c('React').createElement(c('XUIDialogButton.react'),{use:'confirm',label:n.button_label,onClick:this._onActionConfirmed.bind(this)}))));}};f.exports=k;}),null);
__d('CommentsPluginAuthorSelector.react',['cx','fbt','ActorSelector.react','CommentsPluginAction','CommentsPluginActions','CommentsPluginStore','MixinCommentsPluginConfirmAction','React','ShortProfiles','XUIText.react','classWithMixins','joinClasses','mixin'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('classWithMixins')(c('React').Component,c('mixin')(c('MixinCommentsPluginConfirmAction'))));k=j&&j.prototype;function l(m){k.constructor.call(this,m);this.$CommentsPluginAuthorSelector1=function(n){if(c('CommentsPluginStore').hasAttachment()){this.confirmAction(c('CommentsPluginAction').SETUSER,n);}else c('CommentsPluginActions').setUser(n);}.bind(this);this.actorIDs=c('CommentsPluginStore').getActorIDs();this.state={actorsData:null};}l.prototype.componentWillMount=function(){if(this.actorIDs.length>1&&c('CommentsPluginStore').useCustomActorSelector())c('ShortProfiles').getMulti(this.actorIDs,function(m){this.setState({actorsData:m});}.bind(this));};l.prototype.$CommentsPluginAuthorSelector2=function(m){return i._("Commenting as {actorName}",[i.param('actorName',m)]);};l.prototype.render=function(){var m,n=this;if(this.actorIDs.length<=1)return null;var o=c('CommentsPluginStore').getUser().id;if(c('CommentsPluginStore').useCustomActorSelector()){var m=function(){var p=n.state.actorsData;if(!p)return {v:null};return {v:c('React').createElement('div',{className:"_3-95"},c('React').createElement(c('XUIText.react'),{size:'small',className:"_1y5f _2pih"},i._("Commenting as")),c('React').createElement('select',{value:o,onChange:function(q){return this.$CommentsPluginAuthorSelector1(q.target.value);}.bind(n),className:"_1y5g"},n.actorIDs.map(function(q){return (c('React').createElement('option',{value:q,key:q},p&&p[q].name));})),n.renderActionConfirmationDialog())};}();if(typeof m==="object")return m.v;}return (c('React').createElement('div',{className:c('joinClasses')(this.props.className,'inlineBlock')},c('React').createElement(c('ActorSelector.react'),{actorIDs:this.actorIDs,coverEnabled:false,selectedActorID:o,onChange:function(p){return this.$CommentsPluginAuthorSelector1(p.value);}.bind(this),tooltipConstructor:this.$CommentsPluginAuthorSelector2}),this.renderActionConfirmationDialog()));};f.exports=l;}),null);
__d('CommentsPluginComposerMirroringNotice.react',['cx','fbt','CommentsPluginStore','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;m.prototype.render=function(){var n=c('CommentsPluginStore').getMirroredPage();if(!n)return null;return (c('React').createElement('div',{className:"_5sge _2ph-"},n.name?this.props.isReply?i._("Your reply may also appear on {page name}'s Facebook Page.",[i.param('page name',c('React').createElement('a',{href:n.uri,target:'blank'},n.name))]):i._("Your comment may also appear on {page name}'s Facebook Page.",[i.param('page name',c('React').createElement('a',{href:n.uri,target:'blank'},n.name))]):this.props.isReply?i._("Your reply may also appear on Facebook."):i._("Your comment may also appear on Facebook.")));};function m(){j.apply(this,arguments);}m.propTypes={isReply:l.bool};f.exports=m;}),null);
__d('CommentsPluginProfilePicture.react',['cx','Image.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.render=function(){return (c('React').createElement('a',babelHelpers['extends']({},this.props,{href:this.props.href}),c('React').createElement(c('Image.react'),{className:(!this.props.isReply?"_1ci":'')+(this.props.isReply?' '+"_1cj":''),src:this.props.src})));};function l(){i.apply(this,arguments);}l.propTypes={href:k.string.isRequired,src:k.string.isRequired,isReply:k.bool};f.exports=l;}),null);
__d('CommentsPluginComposer.react',['cx','fbt','ActorURI','AsyncRequest','CommentsPluginStore','CommentsPluginComposerMirroringNotice.react','CommentsPluginConfig','CommentsPluginProfilePicture.react','DraftEntity','EditorState','EmoticonsList','MentionsInput.react','React','UFIAttachMediaSection.react','UFIAttachedMediaPreview.react','UFICommentUtils','UFIImageBlock.react','UFIStickerButton.react','XUINotice.react','XUITypeaheadView.react','createEditorStateWithEntities','getMentionsInputDecorator','getVisibleValueForContentState','insertEmoticonIntoEditorState','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes,m=19,n='/ajax/ufi/sticker_preview/';function o(q){return c('DraftEntity').create('MENTION','IMMUTABLE',{id:q.id});}j=babelHelpers.inherits(p,c('React').Component);k=j&&j.prototype;function p(q,r){k.constructor.call(this,q,r);this.$CommentsPluginComposer10=function(s){this.setState({editorState:s});if(this.props.editCommentID){c('CommentsPluginStore').setEditComposerState(s,this.props.editCommentID);}else c('CommentsPluginStore').setCreateComposerState(s,this.props.parentCommentIDOfNewReply);}.bind(this);this.$CommentsPluginComposer12=function(){this.setState({expanded:true});}.bind(this);this.state=this.$CommentsPluginComposer1();}p.prototype.$CommentsPluginComposer1=function(q){var r=null,s=null,t=q||this.props.prefillText;if(t){r=this.$CommentsPluginComposer2(t);if(this.props.editCommentID){c('CommentsPluginStore').setEditComposerState(r,this.props.editCommentID);}else c('CommentsPluginStore').setCreateComposerState(r,this.props.parentCommentIDOfNewReply);}else{var u=null,v=null;if(this.props.editCommentID){s=c('CommentsPluginStore').getByID(this.props.editCommentID);r=c('createEditorStateWithEntities')({text:s.body.text,ranges:c('UFICommentUtils').shallowCopyRanges(s.ranges).filter(function(y){return !y.entity.external;}),decorator:c('getMentionsInputDecorator')(),entityCreationFn:o});if(s.photo_comment){u=s.photo_comment;u.attachmentType='photo';this.$CommentsPluginComposer3(u);}else if(s.attachment){v=s.attachment;v.attachmentType='sticker';this.$CommentsPluginComposer3(v);}}else if(this.props.parentCommentIDOfNewReply){s=c('CommentsPluginStore').getByID(this.props.parentCommentIDOfNewReply);if(s.replyToCommentID&&c('CommentsPluginStore').getAuthor(s.replyToCommentID).id!==c('CommentsPluginStore').getUser().id){var w=c('CommentsPluginStore').getAuthor(s.replyToCommentID),x={id:w.id,text:w.name,offset:0,length:w.name.length,entity:{id:w.id}};r=c('EditorState').moveFocusToEnd(c('createEditorStateWithEntities')({text:w.name+' ',ranges:[x],decorator:c('getMentionsInputDecorator')(),entityCreationFn:o}));}}if(!r)r=c('EditorState').createEmpty(c('getMentionsInputDecorator')());}return {editorState:r,expanded:t||!!this.props.alwaysExpanded,attachedPhoto:u,attachedSticker:v};};p.prototype.$CommentsPluginComposer2=function(q){return c('createEditorStateWithEntities')({text:q,decorator:c('getMentionsInputDecorator')()});};p.prototype.$CommentsPluginComposer4=function(){return !this.props.editCommentID&&!this.props.parentCommentIDOfNewReply;};p.prototype.$CommentsPluginComposer3=function(q){if(this.props.editCommentID){c('CommentsPluginStore').setEditComposerAttachment(q,this.props.editCommentID);}else c('CommentsPluginStore').setCreateComposerAttachment(q,this.props.parentCommentIDOfNewReply);};p.prototype.$CommentsPluginComposer5=function(q){if(this.props.editCommentID){c('CommentsPluginStore').setLoadingEditComposerAttachment(q,this.props.editCommentID);}else c('CommentsPluginStore').setLoadingCreateComposerAttachment(q,this.props.parentCommentIDOfNewReply);};p.prototype.$CommentsPluginComposer6=function(){if(this.props.editCommentID){return c('CommentsPluginStore').getLoadingEditComposerAttachment(this.props.editCommentID);}else return c('CommentsPluginStore').getLoadingCreateComposerAttachment(this.props.parentCommentIDOfNewReply);};p.prototype.$CommentsPluginComposer7=function(){return this.state.isLoadingAttachment||!!this.state.attachedSticker||!!this.state.attachedPhoto;};p.prototype.getPhotoUploadData=function(){var q=c('CommentsPluginStore').getUser().id,r={profile_id:q,target_id:this.props.targetID,source:m};r[c('ActorURI').PARAMETER_ACTOR]=q;return r;};p.prototype.onPhotoUploadComplete=function(q){if(!this.$CommentsPluginComposer6())return;var r=q.getPayload();if(r&&r.fbid){r.attachmentType='photo';this.$CommentsPluginComposer3(r);this.$CommentsPluginComposer5(false);this.setState({attachedPhoto:r,isLoadingAttachment:false,expanded:true});}else this.resetAttachment(null);};p.prototype.onStickerSelected=function(q){this.$CommentsPluginComposer8();new (c('AsyncRequest'))(n).setData({sticker_id:q}).setErrorHandler(this.resetAttachment.bind(this)).setHandler(this.$CommentsPluginComposer9.bind(this)).send();};p.prototype.$CommentsPluginComposer9=function(q){if(!this.$CommentsPluginComposer6())return;var r=q.getPayload();if(r&&r.fbid){r.attachmentType='sticker';this.$CommentsPluginComposer3(r);this.$CommentsPluginComposer5(false);this.setState({attachedSticker:r,isLoadingAttachment:false,expanded:true});}else this.resetAttachment(null);};p.prototype.insertEmoticonToCommentText=function(q){var r=c('EmoticonsList').symbols[q];if(!r)return;var s=c('insertEmoticonIntoEditorState')(r,this.state.editorState);if(s!==this.state.editorState)this.$CommentsPluginComposer10(s);};p.prototype.resetAttachment=function(event){this.$CommentsPluginComposer3(undefined);this.$CommentsPluginComposer5(false);this.setState({attachedPhoto:null,attachedSticker:null,isLoadingAttachment:false});};p.prototype.$CommentsPluginComposer8=function(){this.$CommentsPluginComposer3(undefined);this.$CommentsPluginComposer5(true);this.setState({attachedSticker:null,attachedPhoto:null,isLoadingAttachment:true});};p.prototype.componentDidMount=function(){c('CommentsPluginStore').addListener('composerCommentAdded',function(event){if(this.$CommentsPluginComposer4()){var q=this.$CommentsPluginComposer1();q.expanded=true;this.setState(q);if(this.refs.composer.style)this.refs.composer.style.cssText='';}}.bind(this));c('CommentsPluginStore').addListener('previousComposerCommentPrefill',function(q){var r=this.$CommentsPluginComposer1(q.prefillText);r.expanded=true;this.setState(r);}.bind(this));if(!this.$CommentsPluginComposer4())this.refs.composer.focus();};p.prototype.$CommentsPluginComposer11=function(){if(this.props.editCommentID)return c('CommentsPluginStore').isReply(this.props.editCommentID);return !!this.props.parentCommentIDOfNewReply;};p.prototype.setFileInput=function(q,r){this.setState({fileInput:q,fileUploader:r});};p.prototype.$CommentsPluginComposer13=function(){return c('getVisibleValueForContentState')(this.state.editorState.getCurrentContent());};p.prototype.$CommentsPluginComposer14=function(q){var r=q.target,s=r.value;r.value='';r.value=s;this.$CommentsPluginComposer12();};p.prototype.$CommentsPluginComposer15=function(q){var r=q.target,s=r.scrollHeight;if(r.offsetHeight<s)r.style.cssText='height:'+s+'px';this.$CommentsPluginComposer10(c('createEditorStateWithEntities')({text:r.value}));};p.prototype.$CommentsPluginComposer16=function(){var q=this.props.placeholder||i._("Add a comment...");if(c('CommentsPluginStore').useLegacyMentionsInput())return (c('React').createElement('textarea',{className:"_1cb"+(' '+"_1u9t")+(this.props.readOnly?' '+"_5pu_":''),placeholder:q,ref:'composer',onFocus:this.$CommentsPluginComposer14.bind(this),onChange:this.$CommentsPluginComposer15.bind(this),readOnly:this.props.readOnly,value:this.$CommentsPluginComposer13()}));return (c('React').createElement(c('MentionsInput.react'),{className:"_1cb"+(this.props.readOnly?' '+"_5pu_":''),editorState:this.state.editorState,mentionsSource:c('CommentsPluginStore').getComposerSearchSource(),onChange:this.$CommentsPluginComposer10,onFocus:this.$CommentsPluginComposer12,placeholder:q,readOnly:this.props.readOnly,typeaheadView:c('XUITypeaheadView.react'),ref:'composer'}));};p.prototype.render=function(){var q=this.props.editCommentID?c('CommentsPluginStore').getAuthor(this.props.editCommentID):c('CommentsPluginStore').getUser(),r=this.$CommentsPluginComposer11();return (c('React').createElement(c('UFIImageBlock.react'),{spacing:'medium',className:c('joinClasses')("_4uyl"+(r?' '+"_1zz6":'')+(!this.state.expanded?' '+"_1zz7":'')+(!!this.state.expanded?' '+"_1zz8":''),this.props.className)},c('CommentsPluginStore').useCustomActorSelector()?c('React').createElement('div',null):c('React').createElement(c('CommentsPluginProfilePicture.react'),{href:q.uri,src:q.thumbSrc,isReply:r,target:'_blank'}),c('React').createElement('div',null,c('React').createElement('div',{className:'UFIInputContainer'},this.$CommentsPluginComposer16(),c('React').createElement('div',{className:"UFICommentAttachmentButtons"+(' '+"clearfix")+(!(c('CommentsPluginStore').isPlatformEnabled(q.id)&&c('CommentsPluginStore').isLoggedIn()&&!this.$CommentsPluginComposer7())?' '+"hidden_elem":'')},this.props.allowPhotoAttachments?c('React').createElement(c('UFIAttachMediaSection.react'),{onPhotoUploadComplete:this.onPhotoUploadComplete.bind(this),getPhotoUploadData:this.getPhotoUploadData.bind(this),prepareForAttachedPhotoPreview:this.$CommentsPluginComposer8.bind(this),setFileInput:this.setFileInput.bind(this),attachment:this.state.attachedPhoto,viewerActorID:c('CommentsPluginStore').getUser().id}):null,this.props.allowStickerAttachments?c('React').createElement(c('UFIStickerButton.react'),{onStickerSelected:this.onStickerSelected.bind(this),onEmoticonSelected:this.insertEmoticonToCommentText.bind(this)}):null)),c('React').createElement(c('UFIAttachedMediaPreview.react'),{attachedPhoto:this.state.attachedPhoto,attachedSticker:this.state.attachedSticker,onRemoveAttachedMediaPreviewClicked:this.resetAttachment.bind(this),onRemoveAttachedStickerPreview:this.resetAttachment.bind(this),isLoadingPhoto:this.state.isLoadingAttachment}),this.props.unableToPost?c('React').createElement(c('XUINotice.react'),{use:'warn'},i._({"*":"Comments must be less than {lengthLimit} characters"},[i.param('lengthLimit',c('CommentsPluginStore').getMaxCommentLength(),[0])])):null,this.state.expanded?c('React').createElement('div',{className:"_4uym"},c('React').createElement(c('CommentsPluginComposerMirroringNotice.react'),{isReply:r}),this.props.children):null)));};p.propTypes={editCommentID:l.string,parentCommentIDOfNewReply:l.string,readOnly:l.bool,placeholder:l.node,alwaysExpanded:l.bool,unableToPost:l.bool,allowStickerAttachments:l.bool,allowPhotoAttachments:l.bool};f.exports=p;}),null);
__d('CommentsPluginPrivacySelector.react',['ix','cx','Image.react','React','XUISelector.react','XUISingleSelector.react','fbglyph'],(function a(b,c,d,e,f,g,h,i){var j,k,l=c('XUISelector.react').Option,m='everyone',n='friends',o='onlyMe';j=babelHelpers.inherits(p,c('React').Component);k=j&&j.prototype;function p(q){'use strict';k.constructor.call(this,q);this.$CommentsPluginPrivacySelector1=function(event){this.props.onChange(event.value);}.bind(this);this.addlPrivacyOptions=q.addlPrivacyOptions;}p.prototype.getSelectedOption=function(){'use strict';return this.state.value;};p.prototype.render=function(){'use strict';var q=c('React').createElement(l,{value:m,icon:c('React').createElement(c('Image.react'),{src:h("\/images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/globe-americas_12_fig-black.png")}),selected:true},'Everyone'),r=c('React').createElement(l,{value:n,icon:c('React').createElement(c('Image.react'),{src:h("\/images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/friend-friends_12_fig-black.png")})},'Friends Only'),s=c('React').createElement(l,{value:o,icon:c('React').createElement(c('Image.react'),{src:h("\/images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/lock_12_fig-black.png")})},'Only Me'),t=this.addlPrivacyOptions.map(function(u){return (c('React').createElement(l,{value:u},u));});return (c('React').createElement('div',{className:"inlineBlock"},c('React').createElement(c('XUISingleSelector.react'),{defaultValue:this.props.privacyOption,onChange:this.$CommentsPluginPrivacySelector1},q,r,s,t)));};f.exports=p;}),null);
__d('CommentsPluginComposerComment.react',['cx','fbt','CommentsPluginActions','CommentsPluginAuthorSelector.react','CommentsPluginComposer.react','CommentsPluginConfig','CommentsPluginStore','Grid.react','InputLabel.react','LeftRight.react','React','XUIButton.react','XUICheckboxInput.react','CommentsPluginPrivacySelector.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('Grid.react').GridItem;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(n){k.constructor.call(this,n);this.$CommentsPluginComposerComment1=function(o){this.setState({privacyOption:o});}.bind(this);this.$CommentsPluginComposerComment2=function(event){var o=!this.state.postToFeed;this.setState({postToFeed:o});c('CommentsPluginActions').setPostToFeed(o);}.bind(this);this.$CommentsPluginComposerComment3=function(){if(c('CommentsPluginStore').isLoggedIn())this.setState({waitingAsyncResponse:true});c('CommentsPluginActions').setPostToFeed(this.state.postToFeed);c('CommentsPluginActions').setPrivacyOption(this.state.privacyOption);c('CommentsPluginActions').addComment();}.bind(this);this.state={selectedActorID:c('CommentsPluginStore').getUser().id,postToFeed:false,ablePostToFeed:false,commentLength:0,waitingAsyncResponse:false,unableToPost:false,privacyOption:'everyone'};}m.prototype.componentDidMount=function(){c('CommentsPluginStore').addListener('composerChange',function(){var n=c('CommentsPluginStore').getCreateComposerContent().visibleValue,o=n.trim().length;this.setState({commentLength:o,ablePostToFeed:o>=c('CommentsPluginStore').getMinFeedLength(),unableToPost:o>c('CommentsPluginStore').getMaxCommentLength()});}.bind(this));c('CommentsPluginStore').addListener('composerCommentAdded',function(){this.setState({waitingAsyncResponse:false});this.refs.composer.resetAttachment();}.bind(this));c('CommentsPluginStore').addListener('login',function(){this.setState({waitingAsyncResponse:false});}.bind(this));c('CommentsPluginStore').addListener('actorChange',function(){this.refs.composer.resetAttachment();this.forceUpdate();}.bind(this));c('CommentsPluginStore').addListener('previousPostToFeedPrefill',function(){this.setState({postToFeed:c('CommentsPluginStore').getPostToFeed()});}.bind(this));};m.prototype.$CommentsPluginComposerComment4=function(){return (this.state.waitingAsyncResponse||this.state.unableToPost||c('CommentsPluginStore').isEmptyCreateComposer());};m.prototype.render=function(){var n=c('CommentsPluginStore').isLoggedIn()?i._("Post"):i._("Log in to post"),o=c('CommentsPluginStore').getMinFeedLength()-this.state.commentLength;return (c('React').createElement(c('CommentsPluginComposer.react'),{allowPhotoAttachments:c('CommentsPluginStore').getEnablePhoto(),allowStickerAttachments:c('CommentsPluginStore').getEnableSticker(),ref:'composer',className:"_2392",readOnly:this.state.waitingAsyncResponse,unableToPost:this.state.unableToPost},c('React').createElement(c('LeftRight.react'),{className:"_5tr6 clearfix _2ph-"},!c('CommentsPluginStore').isMirrored()?c('React').createElement(c('Grid.react'),{cols:1},c('React').createElement(l,null,c('React').createElement(c('InputLabel.react'),{className:"_1u0n"},c('React').createElement(c('XUICheckboxInput.react'),{checked:this.state.postToFeed,onChange:this.$CommentsPluginComposerComment2}),c('React').createElement('label',{className:"_3-99 _2ern _50f8 _5kx5"},i._("Also post on Facebook")))),c('React').createElement(l,null,this.state.postToFeed&&!this.state.ablePostToFeed?i._({"*":{"character":"Write {lengthRemain} more characters in order to post to Facebook","characters":"Write {lengthRemain} more characters to post to Facebook"}},[i.param('lengthRemain',o,[0]),i['enum'](o===1?'character':'characters',{character:'character',characters:'characters'})]):c('React').createElement('span',null))):c('React').createElement('span',null),c('React').createElement('span',null,c('React').createElement(c('CommentsPluginAuthorSelector.react'),null),c('CommentsPluginConfig').commentPrivacy&&this.state.postToFeed?c('React').createElement(c('CommentsPluginPrivacySelector.react'),{privacyOption:this.state.privacyOption,onChange:this.$CommentsPluginComposerComment1,addlPrivacyOptions:c('CommentsPluginStore').getPrivacyOptionsList()}):null,c('React').createElement(c('XUIButton.react'),{disabled:this.$CommentsPluginComposerComment4(),label:n,use:'confirm',className:"rfloat _3-99",onClick:this.$CommentsPluginComposerComment3})))));};f.exports=m;}),null);
__d("XDeveloperDocumentationController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/docs\/{?path1}\/{?path2}\/{?path3}\/{?path4}\/{?path5}\/{?path6}\/",{path:{type:"String"},version:{type:"String"},preview:{type:"Exists",defaultValue:false},revisionid:{type:"Int"},locale:{type:"String"},path1:{type:"String"},path2:{type:"String"},path3:{type:"String"},path4:{type:"String"},path5:{type:"String"},path6:{type:"String"}});}),null);
__d('CommentsPluginFooter.react',['cx','ImageBlock.react','React','XDeveloperDocumentationController'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;k.prototype.render=function(){return (c('React').createElement('div',{className:"_5lm5 _2pi3 _3-8y"},c('React').createElement(c('ImageBlock.react'),null,c('React').createElement('img',{src:'/images/like/icons/fav.png'}),c('React').createElement('a',{target:'_blank',href:c('XDeveloperDocumentationController').getURIBuilder().setString('path1','plugins').setString('path2','comments').getURI().setSubdomain('developers')},'Facebook Comments Plugin'))));};function k(){i.apply(this,arguments);}f.exports=k;}),null);
__d('CommentsPluginHeader.react',['cx','fbt','CommentsPluginActions','CommentsPluginStore','DeveloperCommentsPluginOrdering','LeftRight.react','Link.react','React','XUISelector.react','XUISpinner.react','XUIText.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('XUISelector.react').Option;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(n){k.constructor.call(this,n);this.$CommentsPluginHeader1=function(event){this.setState({sorting:true});c('CommentsPluginStore').addListener('sortingCompleted',function(){this.setState({sorting:false});c('CommentsPluginStore').removeCurrentListener();}.bind(this));c('CommentsPluginActions').sort(event.value);}.bind(this);this.state={sorting:false};}m.prototype.componentDidMount=function(){c('CommentsPluginStore').addListener('commentsCountChange',function(){this.forceUpdate();}.bind(this));};m.prototype.render=function(){var n=null,o=null;if(c('CommentsPluginStore').getModerateURL())n=c('React').createElement('span',null,c('React').createElement('span',{className:"_52bm"},'|'),c('React').createElement(c('Link.react'),{href:c('CommentsPluginStore').getModerateURL(),target:'_blank'},i._("Moderation Tool")));if(c('CommentsPluginStore').isDeeplinkComment())o=c('React').createElement('span',null,c('React').createElement('span',{className:"_52bm"},'|'),c('React').createElement(c('Link.react'),{href:c('CommentsPluginStore').getOriginalLink(),target:'_blank'},i._("Original link")));var p=c('DeveloperCommentsPluginOrdering').__types.filter(function(q){return q!=='social'||c('CommentsPluginStore').isRankingAllowed();});return (c('React').createElement(c('LeftRight.react'),{className:"_491z"},c('React').createElement('span',null,c('React').createElement(c('XUIText.react'),{weight:'bold'},c('CommentsPluginStore').getCommentsCount()!==1?i._("{count} Comments",[i.param('count',c('CommentsPluginStore').getCommentsCount())]):i._("1 Comment")),n,o),c('React').createElement('div',null,this.state.sorting?c('React').createElement(c('XUISpinner.react'),{size:'small',className:"_3-90"}):null,c('React').createElement('span',{className:"_pup"},i._("Sort by")),' ',c('React').createElement(c('XUISelector.react'),{alignh:'right',className:"_3-8_",initialValue:c('CommentsPluginStore').getCurrentSorting(),onChange:this.$CommentsPluginHeader1},p.map(function(q){return (c('React').createElement(l,{value:q,key:q},c('DeveloperCommentsPluginOrdering').__labels[q]));})))));};f.exports=m;}),null);
__d('CommentsPluginCommentActions.react',['cx','fbt','ActionList.react','CommentsPluginAction','CommentsPluginActions','CommentsPluginStore','Image.react','Link.react','MixinCommentsPluginConfirmAction','React','UFICommentMetadata.react','classWithMixins','mixin'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('classWithMixins')(c('React').Component,c('mixin')(c('MixinCommentsPluginConfirmAction'))));k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.$CommentsPluginCommentActions1=function(){c('CommentsPluginActions').like(this.props.commentID);}.bind(this),this.$CommentsPluginCommentActions2=function(){c('CommentsPluginActions').showReplyComposer(this.props.commentID);}.bind(this),this.$CommentsPluginCommentActions3=function(){c('CommentsPluginActions').flag(this.props.commentID);}.bind(this),o;}m.prototype.$CommentsPluginCommentActions4=function(n){if(!n.canLike&&c('CommentsPluginStore').isLoggedIn())return null;return (c('React').createElement(c('Link.react'),{onClick:this.$CommentsPluginCommentActions1},n.hasLiked?i._("Unlike"):i._("Like")));};m.prototype.$CommentsPluginCommentActions5=function(){if(c('CommentsPluginStore').isThreadClosed()||c('CommentsPluginStore').shouldSwitchAccount())return null;return (c('React').createElement(c('Link.react'),{onClick:this.$CommentsPluginCommentActions2},i._("Reply")));};m.prototype.render=function(){var n=c('CommentsPluginStore').getByID(this.props.commentID),o={};return (c('React').createElement(c('ActionList.react'),{className:"_2vq9"},this.$CommentsPluginCommentActions4(n),this.$CommentsPluginCommentActions5(),c('CommentsPluginStore').isMobile()?n.canEdit?c('React').createElement(c('Link.react'),{onClick:this.confirmAction.bind(this,c('CommentsPluginAction').DELETE,this.props.commentID)},i._("Delete")):c('React').createElement(c('Link.react'),{onClick:this.$CommentsPluginCommentActions3},i._("Mark as spam")):null,n.likeCount?c('React').createElement('span',null,c('React').createElement(c('Image.react'),{src:'/images/ufi/fbfeed/like.png',className:"_3-8_ _4iy4"}),n.likeCount):null,c('React').createElement(c('UFICommentMetadata.react'),{comment:n,permalink:c('CommentsPluginStore').getPermalink(this.props.commentID),shortenTimestamp:true,showPermalink:!c('CommentsPluginStore').isReply(this.props.commentID),permalinkTarget:'_blank',contextArgs:o}),c('CommentsPluginStore').isMobile()?this.renderActionConfirmationDialog():null));};m.propTypes={commentID:l.string.isRequired};f.exports=m;}),null);
__d('CommentsPluginComposerEdit.react',['cx','fbt','CommentsPluginActions','CommentsPluginComposer.react','CommentsPluginStore','React','XUIButton.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(n,o){k.constructor.call(this,n,o);this.$CommentsPluginComposerEdit3=function(){this.setState({waitingAsyncResponse:true});c('CommentsPluginActions').saveEdit(this.props.commentID);}.bind(this);this.$CommentsPluginComposerEdit4=function(){this.refs.composer.resetAttachment();c('CommentsPluginActions').cancelEdit(this.props.commentID);}.bind(this);this.state={waitingAsyncResponse:false,unableToPost:false};this.$CommentsPluginComposerEdit1=null;}m.prototype.componentDidMount=function(){this.$CommentsPluginComposerEdit1=c('CommentsPluginStore').addListener('composerChange',function(){var n=c('CommentsPluginStore').getEditComposerContent(this.props.commentID).visibleValue;this.setState({unableToPost:n.trim().length>c('CommentsPluginStore').getMaxCommentLength()});this.forceUpdate();}.bind(this));this.$CommentsPluginComposerEdit2=c('CommentsPluginStore').addListener('actorChange',function(){this.refs.composer.resetAttachment();this.forceUpdate();}.bind(this));};m.prototype.componentWillUnmount=function(){if(this.$CommentsPluginComposerEdit1)this.$CommentsPluginComposerEdit1.remove();if(this.$CommentsPluginComposerEdit2)this.$CommentsPluginComposerEdit2.remove();};m.prototype.$CommentsPluginComposerEdit5=function(){return (this.state.waitingAsyncResponse||this.state.unableToPost||c('CommentsPluginStore').isEmptyEditComposer(this.props.commentID));};m.prototype.render=function(){var n=c('CommentsPluginStore').getByID(this.props.commentID);return (c('React').createElement(c('CommentsPluginComposer.react'),{alwaysExpanded:true,ref:'composer',prefillText:n.prefillText,readOnly:this.state.waitingAsyncResponse,allowPhotoAttachments:c('CommentsPluginStore').getEnablePhoto(),allowStickerAttachments:c('CommentsPluginStore').getEnableSticker(),editCommentID:this.props.commentID,unableToPost:this.state.unableToPost},c('React').createElement('div',{className:"_5tr6 clearfix _2ph_"},c('React').createElement(c('XUIButton.react'),{disabled:this.$CommentsPluginComposerEdit5(),label:i._("Save"),use:'confirm',className:"rfloat _3-99",onClick:this.$CommentsPluginComposerEdit3}),c('React').createElement(c('XUIButton.react'),{disabled:this.state.waitingAsyncResponse,label:i._("Cancel"),use:'default',className:"rfloat _3-99",onClick:this.$CommentsPluginComposerEdit4})),this.props.children));};m.propTypes={commentID:l.string.isRequired};f.exports=m;}),null);
__d('CommentsPluginComposerReply.react',['cx','fbt','CommentsPluginActions','CommentsPluginAuthorSelector.react','CommentsPluginComposer.react','CommentsPluginStore','React','ReactDOM','XUIButton.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(n,o){k.constructor.call(this,n,o);this.$CommentsPluginComposerReply3=function(){this.setState({waitingAsyncResponse:true});c('CommentsPluginActions').addReply(this.props.commentID);this.refs.composer.resetAttachment();}.bind(this);this.$CommentsPluginComposerReply4=function(){this.refs.composer.resetAttachment();c('CommentsPluginActions').cancelReply(this.props.commentID);}.bind(this);this.state={waitingAsyncResponse:false,unableToPost:false};this.$CommentsPluginComposerReply1=null;}m.prototype.componentDidMount=function(){this.$CommentsPluginComposerReply1=c('CommentsPluginStore').addListener('composerChange',function(){var o=c('CommentsPluginStore').getCreateComposerContent(this.props.commentID).visibleValue;this.setState({unableToPost:o.trim().length>c('CommentsPluginStore').getMaxCommentLength()});this.forceUpdate();}.bind(this));this.$CommentsPluginComposerReply2=c('CommentsPluginStore').addListener('actorChange',function(){this.refs.composer.resetAttachment();this.forceUpdate();}.bind(this));var n=c('ReactDOM').findDOMNode(this);if(n.scrollIntoView)n.scrollIntoView();};m.prototype.componentWillUnmount=function(){if(this.$CommentsPluginComposerReply1)this.$CommentsPluginComposerReply1.remove();if(this.$CommentsPluginComposerReply2)this.$CommentsPluginComposerReply2.remove();};m.prototype.$CommentsPluginComposerReply5=function(){return (this.state.waitingAsyncResponse||this.state.unableToPost||c('CommentsPluginStore').isEmptyCreateComposer(this.props.commentID));};m.prototype.render=function(){var n=c('CommentsPluginStore').getByID(this.props.commentID);return (c('React').createElement(c('CommentsPluginComposer.react'),{allowPhotoAttachments:c('CommentsPluginStore').getEnablePhoto(),allowStickerAttachments:c('CommentsPluginStore').getEnableSticker(),ref:'composer',alwaysExpanded:true,prefillText:n.prefillText,readOnly:this.state.waitingAsyncResponse,parentCommentIDOfNewReply:this.props.commentID,unableToPost:this.state.unableToPost,placeholder:i._("Add a reply...")},c('React').createElement('div',{className:"_5tr6 clearfix _2ph_"},c('React').createElement(c('CommentsPluginAuthorSelector.react'),null),c('React').createElement(c('XUIButton.react'),{disabled:this.state.waitingAsyncResponse,label:i._("Cancel"),use:'default',className:"_3-99",onClick:this.$CommentsPluginComposerReply4}),c('React').createElement(c('XUIButton.react'),{disabled:this.$CommentsPluginComposerReply5(),label:i._("Reply"),use:'confirm',className:"_3-99",onClick:this.$CommentsPluginComposerReply3}))));};m.propTypes={commentID:l.string.isRequired};f.exports=m;}),null);
__d('CommentsPluginMenu.react',['fbt','ix','CommentsPluginAction','CommentsPluginActions','CommentsPluginConfig','CommentsPluginStore','Image.react','MixinCommentsPluginConfirmAction','ReactXUIMenu','PopoverMenu.react','React','Tooltip','classWithMixins','mixin'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes,m=c('ReactXUIMenu').Item;j=babelHelpers.inherits(n,c('classWithMixins')(c('React').Component,c('mixin')(c('MixinCommentsPluginConfirmAction'))));k=j&&j.prototype;function n(o,p){k.constructor.call(this,o,p);this.$CommentsPluginMenu1=function(){this.setState({opened:true});}.bind(this);this.$CommentsPluginMenu2=function(){this.setState({opened:false});}.bind(this);this.$CommentsPluginMenu4=function(q,event){var r=event.item.getValue();if(this.requiresConfirmation(r)){this.confirmAction(r,this.props.commentID,event.event.pageY);}else if(r===c('CommentsPluginAction').SHOW||r===c('CommentsPluginAction').COLLAPSE){this.$CommentsPluginMenu3();}else c('CommentsPluginActions')[r](this.props.commentID);}.bind(this);this.state={opened:false};}n.prototype.isOpen=function(){return this.state.opened;};n.prototype.$CommentsPluginMenu3=function(){c('CommentsPluginActions').toggleVisibility(this.props.commentID);};n.prototype.$CommentsPluginMenu5=function(o,p){var q=c('CommentsPluginStore').isReply(p.id),r=c('CommentsPluginStore').getUser().id===c('CommentsPluginStore').getAuthor(p.id).id;switch(o){case c('CommentsPluginAction').DELETE:if(!p.canEdit||!r)return null;break;case c('CommentsPluginAction').EDIT:if(!p.canEdit||c('CommentsPluginStore').isThreadClosed()||!r)return null;break;case c('CommentsPluginAction').FLAG:if(p.canEdit||p.collapsed||p.flagged)return null;break;case c('CommentsPluginAction').COLLAPSE:if(q||p.collapsed||p.flagged)return null;break;case c('CommentsPluginAction').BAN:case c('CommentsPluginAction').HIDE:if(!c('CommentsPluginStore').isViewerModerator())return null;break;case c('CommentsPluginAction').REPORT:if(!p.reportURI||p.canEdit)return null;break;case c('CommentsPluginAction').EMBED:var s=p.canEmbed;if(q){var t=c('CommentsPluginStore').getByID(p.targetID);s=s&&t.canEmbed;}if(p.flagged||!c('CommentsPluginConfig').commentEmbed||!s)return null;break;default:break;}return (c('React').createElement(m,{value:o,key:o},c('CommentsPluginAction').getLabel(o)));};n.prototype.render=function(){var o=c('CommentsPluginStore').getByID(this.props.commentID);return (c('React').createElement('div',null,c('React').createElement(c('PopoverMenu.react'),{alignh:'right',onShow:this.$CommentsPluginMenu1,onHide:this.$CommentsPluginMenu2,menu:c('React').createElement(c('ReactXUIMenu'),{onItemClick:this.$CommentsPluginMenu4},c('CommentsPluginAction').getMenuActions().map(function(p){return this.$CommentsPluginMenu5(p,o);}.bind(this)))},c('React').createElement('a',null,c('React').createElement(c('Image.react'),babelHelpers['extends']({},c('Tooltip').propsFor(h._("Menu")),{src:i('/images/plugins/comments/chevron-down.png')})))),this.renderActionConfirmationDialog()));};n.propTypes={commentID:l.string.isRequired};f.exports=n;}),null);
__d('CommentsPluginComment.react',['cx','fbt','xuiglyph','ActorBio.react','Badge.react','CenteredContainer.react','CommentsPluginActions','CommentsPluginCommentActions.react','CommentsPluginComposerEdit.react','CommentsPluginProfilePicture.react','CommentsPluginMenu.react','CommentsPluginComposerReply.react','CommentsPluginStore','HovercardLinkInterpolator','Link.react','Image.react','React','TruncatedTextWithEntities.react','UFIActor.react','UFICommentAttachment.react','UFICommentUtils','UFIImageBlock.react','XUIGrayText.react','XUISpinner.react','XUIText.react','joinClasses','nullthrows'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m,n,o=c('React').PropTypes;k=babelHelpers.inherits(p,c('React').Component);l=k&&k.prototype;function p(r,s){l.constructor.call(this,r,s);this.$CommentsPluginComment1=function(){this.setState({showMenu:true});}.bind(this);this.$CommentsPluginComment2=function(){if(!this.refs.menu||!this.refs.menu.isOpen())this.setState({showMenu:false});}.bind(this);this.$CommentsPluginComment3=function(){var t=c('nullthrows')(c('CommentsPluginStore').getByID(this.props.commentID));if(t.collapsed){c('CommentsPluginActions').toggleVisibility(this.props.commentID);}else if(t.flagged)c('CommentsPluginActions').unflag(this.props.commentID);}.bind(this);this.state={showMenu:false};}p.prototype.render=function(){var r=c('nullthrows')(c('CommentsPluginStore').getByID(this.props.commentID));if(r.deleted)return null;if(r.editor)return (c('React').createElement('div',{className:"_3-8y"},c('React').createElement(c('CommentsPluginComposerEdit.react'),{commentID:this.props.commentID}),c('React').createElement(q,{commentID:this.props.commentID,className:"_3j_p"})));var s=c('UFICommentUtils').shallowCopyRanges(r.ranges),t=c('UFICommentUtils').getCommentTextWithTruncatedURIs(s,r.body.text),u=null;if(r.collapsed||r.flagged){u=c('React').createElement('div',{className:"_5mlf"},c('React').createElement(c('XUIGrayText.react'),{shade:'light'},i._("This comment is {action}",[i.param('action',r.collapsed?'collapsed. ':'marked as spam. ')]),c('React').createElement(c('Link.react'),{onClick:this.$CommentsPluginComment3},i._("Undo"))));}else{if(r.photoComment){r.photo_comment=r.photoComment;delete r.photoComment;}u=c('React').createElement('div',{className:"_30o4"},t?c('React').createElement(c('TruncatedTextWithEntities.react'),babelHelpers['extends']({className:"_5mdd",text:t,ranges:s,interpolator:function z(aa,ba){return (c('HovercardLinkInterpolator')(aa,ba,'_blank'));}},c('CommentsPluginStore').getCommentBodyTruncationLimits(),{renderEmoticons:true,renderEmoji:true})):null,c('React').createElement(c('UFICommentAttachment.react'),{comment:r,disableTheater:true}));}var v=c('nullthrows')(c('CommentsPluginStore').getByID(r.authorID)),w=c('CommentsPluginStore').isOptimisticComment(r),x=c('CommentsPluginStore').isReply(this.props.commentID),y=c('CommentsPluginStore').isMobile();return (c('React').createElement(c('UFIImageBlock.react'),{className:"_3-8y"+(!x?' '+"_5nz1":''),spacing:'medium',onMouseEnter:this.$CommentsPluginComment1,onMouseLeave:this.$CommentsPluginComment2},c('React').createElement(c('CommentsPluginProfilePicture.react'),{href:v.uri,src:v.thumbSrc,isReply:x,target:'_blank'}),c('React').createElement('div',null,c('React').createElement(c('UFIActor.react'),{author:v,delimiter:y?' ':undefined,key:'author',showHovercard:!y,target:'_blank'},v.isVerified?c('React').createElement(c('Badge.react'),{key:'badge',size:'xsmall',type:'verified'}):null,v.bio?c('React').createElement('div',{className:"_4q1v"},c('React').createElement(c('ActorBio.react'),{target:'_blank',preferredTypes:v.bio.preferredTypes,stats:v.bio.stats})):null),c('React').createElement('div',{className:"_3-8m"},u),w||r.collapsed||r.flagged?null:c('React').createElement(c('CommentsPluginCommentActions.react'),{commentID:this.props.commentID}),c('React').createElement(q,{commentID:this.props.commentID})),c('React').createElement('div',null,this.state.showMenu&&!w&&!y?c('React').createElement(c('CommentsPluginMenu.react'),{ref:'menu',commentID:this.props.commentID}):null)));};p.propTypes={commentID:o.string.isRequired};m=babelHelpers.inherits(q,c('React').Component);n=m&&m.prototype;function q(r,s){n.constructor.call(this,r,s);this.$CommentsPluginCommentReplies1=function(){this.setState({loading:true});c('CommentsPluginStore').addListener('moreRepliesCompleted',function(event){if(this.props.commentID===event.commentID){this.setState({loading:false});c('CommentsPluginStore').removeCurrentListener();}}.bind(this));c('CommentsPluginActions').showMoreReplies(this.props.commentID);}.bind(this);this.state={loading:false};}q.prototype.render=function(){var r=c('CommentsPluginStore').getByID(this.props.commentID),s=r.public_replies;if(s===undefined||r.collapsed===true||r.flagged)return r.composer?c('React').createElement('div',{className:c('joinClasses')("_44ri _2pis _3-8y",this.props.className)},c('React').createElement(c('CommentsPluginComposerReply.react'),{commentID:this.props.commentID})):null;if(!s.commentIDs)s.commentIDs=[];var t=s.totalCount-s.commentIDs.length,u=c('CommentsPluginStore').getPageSize(),v=t<u?t:u;return (c('React').createElement('div',{className:c('joinClasses')("_44ri _2pis",this.props.className)},s.commentIDs.map(function(w){if(w===this.props.commentID)return null;return c('React').createElement(p,{commentID:w,key:w});}.bind(this)),c('CommentsPluginStore').hasUnloadedReplies(this.props.commentID)&&t>0?c('React').createElement('div',{className:"_5yct _3-8y _3-96 _2ph-"},this.state.loading?c('React').createElement(c('CenteredContainer.react'),null,c('React').createElement(c('XUISpinner.react'),{size:'small'})):c('React').createElement(c('Link.react'),{onClick:this.$CommentsPluginCommentReplies1},c('React').createElement(c('XUIText.react'),{size:'small',weight:'bold'},v===1?i._("Show 1 more reply in this thread"):i._("Show {number of replies} more replies in this thread",[i.param('number of replies',v)])),c('React').createElement(c('Image.react'),{src:j({name:'triangle-down'})}))):null,r.composer?c('React').createElement('div',{className:"_3-8y"},c('React').createElement(c('CommentsPluginComposerReply.react'),{commentID:this.props.commentID})):null));};q.propTypes={commentID:o.string.isRequired};f.exports=p;}),null);
__d('CommentsPluginLoadMore.react',['cx','fbt','CenteredContainer.react','CommentsPluginActions','CommentsPluginStore','React','XUIButton.react','XUISpinner.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;function l(m,n){k.constructor.call(this,m,n);this.$CommentsPluginLoadMore1=function(){c('CommentsPluginActions').showMoreComments();this.setState({loading:true});c('CommentsPluginStore').addListener('moreCommentsCompleted',function(){this.setState({loading:false});c('CommentsPluginStore').removeCurrentListener();}.bind(this));}.bind(this);this.state={loading:false};}l.prototype.render=function(){var m=c('CommentsPluginStore').getUnloadedCommentsCount();if(!c('CommentsPluginStore').hasUnloadedComments()||m<1)return null;if(this.state.loading)return (c('React').createElement(c('CenteredContainer.react'),{className:"_ndl"},c('React').createElement(c('XUISpinner.react'),{size:'large'})));var n=c('CommentsPluginStore').getPageSize(),o=m<n?m:n;return (c('React').createElement('div',{className:"_5o4h"},c('React').createElement(c('XUIButton.react'),{className:"_1gl3",role:'button',onClick:this.$CommentsPluginLoadMore1,label:o===1?i._("Load 1 more comment"):i._("Load {pagesize} more comments",[i.param('pagesize',o)])})));};f.exports=l;}),null);
__d('CommentsPluginListing.react',['cx','CommentsPluginComment.react','CommentsPluginLoadMore.react','CommentsPluginStore','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;k.prototype.render=function(){var l=c('CommentsPluginStore').getCommentIDs(),m=l.map(function(n){return c('React').createElement(c('CommentsPluginComment.react'),{commentID:n,key:n});});return (c('React').createElement('div',{className:"_4k-6"},m,c('React').createElement(c('CommentsPluginLoadMore.react'),null)));};function k(){i.apply(this,arguments);}f.exports=k;}),null);
__d('CommentsPluginNotice.react',['fbt','CommentsPluginStore','React','XUINotice.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;k.prototype.render=function(){return (c('CommentsPluginStore').isThreadClosed()?c('React').createElement(c('XUINotice.react'),{use:'notify'},h._("This thread is closed")):c('CommentsPluginStore').shouldSwitchAccount()?c('React').createElement(c('XUINotice.react'),{use:'notify'},h._("Please switch to personal account in order to post comments.")):null);};function k(){i.apply(this,arguments);}f.exports=k;}),null);
__d("XPluginCommentsConfirmPostToFacebookAsyncDialogController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/plugins\/comments\/{comment_id}\/async\/confirm\/publish\/dialog\/",{comment_id:{type:"String",required:true},plugin_width:{type:"Int"},__asyncDialog:{type:"Int"}});}),null);
__d('CommentsPlugin.react',['cx','fbt','AsyncDialog','AsyncRequest','CommentsPluginActions','CommentsPluginComposerComment.react','CommentsPluginFooter.react','CommentsPluginHeader.react','CommentsPluginListing.react','CommentsPluginNotice.react','CommentsPluginStore','XPluginCommentsConfirmPostToFacebookAsyncDialogController','DOMQuery','PluginResize','React','ReactDOM','CommentsPluginSentryAction','SimpleXUIDialog','getElementPosition','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;m.prototype.componentWillMount=function(){c('CommentsPluginStore').init(this.props.comments,this.props.meta,this.props.initialOrdering,this.props.rankingAllowed);c('CommentsPluginStore').addListener('postError',function(n){c('SimpleXUIDialog').show(n.errorSummary||i._("Sorry, something went wrong. Please try again later."),null,null,{width:c('CommentsPluginStore').getDialogWidth()});});c('CommentsPluginStore').addListener('sentryAction',function(n,o){switch(n){case c('CommentsPluginSentryAction').CONFIRM_POST_TO_PROFILE:var p=c('XPluginCommentsConfirmPostToFacebookAsyncDialogController').getURIBuilder().setString('comment_id',o).setInt('plugin_width',document.body.offsetWidth).getURI();c('AsyncDialog').send(new (c('AsyncRequest'))(p).setData({iframe_referer:c('CommentsPluginStore').getIframeReferer(),av:c('CommentsPluginStore').getUser().id,privacy_option:c('CommentsPluginStore').getPrivacyOption()}));break;default:break;}});};m.prototype.componentDidMount=function(){var n=c('ReactDOM').findDOMNode(this);c('PluginResize').autoHeight(null,n);new (c('PluginResize'))(function(){},function(){var o=n.offsetHeight,p=c('DOMQuery').scry(document.body,'.uiLayer:not(.hidden_elem) .uiContextualLayer'),q=c('DOMQuery').scry(document.body,'.captcha_dialog');if(p.length===0&&q.length===0)return o;var r=p.length>0?c('getElementPosition')(p[0]):null,s=q.length>0?c('getElementPosition')(q[0]):null;return Math.max(o,r?r.y+r.height+1:0,s?s.height:0);},'resize.iframe',false).resize().auto();c('CommentsPluginStore').addListener('change',function(){this.forceUpdate();}.bind(this));if(c('CommentsPluginStore').isOptinReturn())c('CommentsPluginActions').restorePreviousState();};m.prototype.$CommentsPlugin1=function(){return c('CommentsPluginStore').isThreadClosed()||c('CommentsPluginStore').shouldSwitchAccount();};m.prototype.render=function(){return (c('React').createElement('div',{className:c('joinClasses')("_56q9",this.props.className)},c('React').createElement('div',{className:"_2pi8"},c('React').createElement(c('CommentsPluginHeader.react'),null),this.$CommentsPlugin1()?c('React').createElement(c('CommentsPluginNotice.react'),null):c('CommentsPluginStore').isDeeplinkComment()?null:c('React').createElement(c('CommentsPluginComposerComment.react'),null),c('React').createElement(c('CommentsPluginListing.react'),null),c('React').createElement(c('CommentsPluginFooter.react'),null))));};function m(){j.apply(this,arguments);}m.propTypes={comments:l.object.isRequired,meta:l.object.isRequired,initialOrdering:l.string.isRequired,rankingAllowed:l.bool};f.exports=m;}),null);
__d('DocumentMentionsRegex',[],(function a(b,c,d,e,f,g){'use strict';var h='\\.,\\+\\*\\?\\$\\@\\|#{}\\(\\)\\^\\-\\[\\]\\\\\/!%\'"~=<>_:;',i='\\b[A-Z][^\\s'+h+']',j={PUNCTUATION:h,NAME:i};f.exports=j;}),null);
__d('AtSignMentionsStrategy',['DocumentMentionsRegex'],(function a(b,c,d,e,f,g){var h=c('DocumentMentionsRegex').PUNCTUATION,i=['@','\\uff20'].join(''),j='[^'+i+h+'\\s]',k='(?:'+'\\.[ |$]|'+' |'+'['+h+']|'+')',l=new RegExp('(?:^|\\s|\\()('+'['+i+']'+'((?:'+j+k+'){0,20})'+')$'),m={name:'AtSignMentionsStrategy',findMentionableString:function n(o){var p=l.exec(o);if(p!==null){var q=p[2];if(q.length)return {matchingString:q,leadOffset:p[1].length};}return null;}};f.exports=m;}),null);
__d('CapitalizedNameMentionsStrategy',['DocumentMentionsRegex'],(function a(b,c,d,e,f,g){'use strict';var h=1,i=new RegExp('(^|[^#])((?:'+c('DocumentMentionsRegex').NAME+'{'+h+',})$)'),j={name:'CapitalizedNameMentionsStrategy',findMentionableString:function k(l){var m=i.exec(l);if(m!==null)return {matchingString:m[2],leadOffset:m[2].length};return null;}};f.exports=j;}),null);
__d('DocumentCompositeMentionsSource',['invariant','emptyFunction','nullthrows'],(function a(b,c,d,e,f,g,h){'use strict';function i(k,l){var m=k.getCharacterList().toSeq().slice(0,l).reverse().takeWhile(function(n){return n.getEntity()===null;}).count();return k.getText().slice(l-m,l);}function j(k){k.length>0||h(0);this.$DocumentCompositeMentionsSource1=k;this.$DocumentCompositeMentionsSource2=false;this.$DocumentCompositeMentionsSource3=null;}j.prototype.bootstrap=function(k){if(this.$DocumentCompositeMentionsSource2)return;this.$DocumentCompositeMentionsSource2=true;k=k||c('emptyFunction');var l=this.$DocumentCompositeMentionsSource1.length;function m(){l--;if(!l)k&&k();}this.$DocumentCompositeMentionsSource1.forEach(function(n){n.bootstrap(m);});};j.prototype.search=function(k,l,m){var n=l.getAnchorKey(),o=k.getBlockForKey(n);this.$DocumentCompositeMentionsSource4(i(o,l.getAnchorOffset()),m);};j.prototype.$DocumentCompositeMentionsSource4=function(k,l){var m=this.$DocumentCompositeMentionsSource1.length,n,o;for(var p=0;p<m;p++){n=this.$DocumentCompositeMentionsSource1[p];o=n.findMatch(k);if(o===null){continue;}else{var q=c('nullthrows')(o).matchingString;this.$DocumentCompositeMentionsSource3=q;n.search(q,function(r,s){if(this.$DocumentCompositeMentionsSource3===s)l(r,o.leadOffset);}.bind(this));return;}}this.$DocumentCompositeMentionsSource3=null;l(null,null);};f.exports=j;}),null);
__d('DocumentMentionsSource',['invariant'],(function a(b,c,d,e,f,g,h){'use strict';function i(j,k){typeof j.findMentionableString==='function'||h(0);this.$DocumentMentionsSource1=j;this.$DocumentMentionsSource2=k;this.$DocumentMentionsSource3=false;}i.prototype.findMatch=function(j){return this.$DocumentMentionsSource1.findMentionableString(j);};i.prototype.bootstrap=function(j){if(!this.$DocumentMentionsSource3){this.$DocumentMentionsSource3=true;this.$DocumentMentionsSource2.bootstrap(j);}};i.prototype.search=function(j,k){this.$DocumentMentionsSource2.search(j,k,{strategyName:this.$DocumentMentionsSource1.name});};f.exports=i;}),null);
__d('FilteredSearchSource',['AbstractSearchSource'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('AbstractSearchSource'));i=h&&h.prototype;function j(k,l){'use strict';i.constructor.call(this);this.$FilteredSearchSource1=k;this.$FilteredSearchSource2=l;}j.prototype.bootstrapImpl=function(k){'use strict';this.$FilteredSearchSource2.bootstrap(k);};j.prototype.searchImpl=function(k,l,m){'use strict';var n=function(o,p){o=this.$FilteredSearchSource3(o,p);l(o,p);}.bind(this);this.$FilteredSearchSource2.search(k,n,m);};j.prototype.$FilteredSearchSource3=function(k,l){'use strict';var m=this.$FilteredSearchSource1;return k.filter(function(n){return m(n,l);});};f.exports=j;}),null);
__d('filterCapitalizedNames',['TokenizeUtil'],(function a(b,c,d,e,f,g){function h(l,m){return i(l)&&(m.length>=5||j(l,m));}function i(l){var m=l.getAuxiliaryData()||k;return !m.disableAutosuggest&&!!(l.getType()==='user'||m.connectedPage);}function j(l,m){return c('TokenizeUtil').isExactMatch(m,l.getTitle());}var k={};f.exports=h;}),null);