if (self.CavalryLogger) { CavalryLogger.start_js(["oK8st"]); }

__d("ActorSelectorNuxTypes",[],(function a(b,c,d,e,f,g){f.exports={COMPOSER:"composer_seen_count",COMPOSER_COVERED:"composer_covered_seen_count",M_COMPOSER:"m_composer_seen_count",M_UFI:"m_ufi_seen_count",UFI:"ufi_seen_count",UFI_TIMELINE:"ufi_timeline_seen_count",UFI_TIMELINE_COVERED:"ufi_timeline_covered_seen_count"};}),null);
__d("PUWSteps",[],(function a(b,c,d,e,f,g){f.exports={CLIENT_FLOW_BEGIN:"client_flow_begin",CLIENT_SELECT_BEGIN:"client_select_begin",CLIENT_SELECT_SUCCESS:"client_select_success",CLIENT_SELECT_CANCEL:"client_select_cancel",CLIENT_SELECT_FAIL:"client_select_fail",CLIENT_FLOW_POST:"client_flow_post",CLIENT_TRANSFER_BATCH_BEGIN:"client_transfer_batch_begin",CLIENT_UPLOAD_BEGIN:"client_upload_begin",CLIENT_ATTACH_PHOTO:"client_attach_photo",CLIENT_PROCESS_BEGIN:"client_process_begin",CLIENT_PROCESS_SUCCESS:"client_process_success",CLIENT_PROCESS_CANCEL:"client_process_cancel",CLIENT_PROCESS_SKIP:"client_process_skip",CLIENT_PROCESS_FAIL:"client_process_fail",CLIENT_PROCESS_UNAVAILABLE:"client_process_unavailable",CLIENT_SPHERICAL_CHECK_SUCCESS:"client_spherical_check_success",CLIENT_SPHERICAL_CHECK_FAIL:"client_spherical_check_fail",CLIENT_SPHERICAL_CHECK_SUCCESS_EXP:"client_spherical_check_success_exp",CLIENT_SPHERICAL_CHECK_FAIL_EXP:"client_spherical_check_fail_exp",CLIENT_TRANSFER_ENQUEUE:"client_transfer_enqueue",CLIENT_TRANSFER_BEGIN:"client_transfer_begin",CLIENT_TRANSFER_SUCCESS:"client_transfer_success",CLIENT_TRANSFER_CANCEL:"client_transfer_cancel",CLIENT_TRANSFER_FAIL:"client_transfer_fail",CLIENT_TRANSFER_MANUAL_RETRY:"client_transfer_manual_retry",CLIENT_UPLOAD_SUCCESS:"client_upload_success",CLIENT_UPLOAD_FAIL:"client_upload_fail",CLIENT_UPLOAD_CANCEL:"client_upload_cancel",CLIENT_UPLOAD_REMOVE:"client_upload_remove",CLIENT_FACEREC_BEGIN:"client_facerec_begin",CLIENT_FACEREC_SUCCESS:"client_facerec_success",CLIENT_FACEREC_FAIL:"client_facerec_fail",CLIENT_PHOTO_PREVIEW_OPEN:"client_photo_preview_open",CLIENT_PHOTO_PREVIEW_CLOSE:"client_photo_preview_close",CLIENT_TRANSFER_BATCH_SUCCESS:"client_transfer_batch_success",CLIENT_TRANSFER_BATCH_CANCEL:"client_transfer_batch_cancel",CLIENT_TRANSFER_BATCH_FAIL:"client_transfer_batch_fail",CLIENT_PUBLISH_ENQUEUE:"client_publish_enqueue",CLIENT_PUBLISH_BEGIN:"client_publish_begin",CLIENT_PUBLISH_SUCCESS:"client_publish_success",CLIENT_PUBLISH_FAIL:"client_publish_fail",CLIENT_ATTEMPT_FAIL:"client_attempt_fail",CLIENT_FLOW_SUCCESS:"client_flow_success",CLIENT_FLOW_FATAL:"client_flow_fatal",CLIENT_FLOW_GIVEUP:"client_flow_giveup",CLIENT_FLOW_CANCEL:"client_flow_cancel",CLIENT_FLOW_FAIL:"client_flow_fail",CLIENT_FLOW_INCOMPLETE:"client_flow_incomplete",CLIENT_ATTEMPT_INCOMPLETE:"client_attempt_incomplete",CLIENT_FLOW_RETRY:"client_flow_retry",CLIENT_ATTEMPT_RETRY:"client_attempt_retry",CLIENT_DIAGNOSTIC:"client_diagnostic",CLIENT_QUALITY_SWITCH:"client_quality_switch",CLIENT_CANCEL_SURVEY:"client_cancel_survey",CLIENT_PHOTO_EDIT_BEGIN:"client_photo_edit_begin",CLIENT_PHOTO_EDIT_SUCCESS:"client_photo_edit_success",SERVER_UPLOAD_BEGIN:"server_upload_begin",SERVER_UPLOAD_SUCCESS:"server_upload_success",SERVER_UPLOAD_FAIL:"server_upload_fail",SERVER_PUBLISH_BEGIN:"server_publish_begin",SERVER_PUBLISH_SUCCESS:"server_publish_success",SERVER_PUBLISH_FAIL:"server_publish_fail",SERVER_RECEIVER_BEGIN:"server_receiver_begin",SERVER_RECEIVER_PUBLISH_BEGIN:"server_receiver_publish_begin",SERVER_SENTRY_RESTRICTION:"server_sentry_restriction"};}),null);
__d("XActorSelectorNuxSeenWriteController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/actor_selector\/nux\/mark_seen\/",{nux_type:{type:"Enum",required:true,enumType:1}});}),null);
__d('UFIActorSelector.react',['csx','fbt','ActorSelector.react','ActorSelectorNuxTypes','Arbiter','AsyncRequest','Parent','React','ReactDOM','SubscriptionsHandler','UFICentralUpdates','UFIFeedbackTargets','UFIUserActions','XActorSelectorNuxSeenWriteController'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes,m='ufi_actor_selector_nux_disabled_event';j=babelHelpers.inherits(n,c('React').Component);k=j&&j.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.state={loading:false,nuxEnabled:!!this.props.nuxEnabled,nuxHoverContext:null,selectedActorID:null},this.$UFIActorSelector7=function(){c('UFIFeedbackTargets').getFeedbackTarget(this.props.ftEntIdentifier,function(t){this.setState({loading:false,selectedActorID:t.actorforpost});}.bind(this));}.bind(this),this.$UFIActorSelector2=function(){return i._("Like, comment or share as yourself or as one of the Pages that you manage.");},this.$UFIActorSelector6=function(t){return i._("Liking and commenting as {actorName}",[i.param('actorName',t)]);},this.$UFIActorSelector3=function(t){this.setState({loading:true});c('UFIUserActions').changeActor(this.props.ftEntIdentifier,t.value);}.bind(this),this.$UFIActorSelector5=function(){var t=this.props.isTimeline?c('ActorSelectorNuxTypes').UFI_TIMELINE:c('ActorSelectorNuxTypes').UFI,u=c('XActorSelectorNuxSeenWriteController').getURIBuilder().setEnum('nux_type',t).getURI();new (c('AsyncRequest'))().setURI(u).send();}.bind(this),this.$UFIActorSelector4=function(){c('Arbiter').inform(m);},p;}n.prototype.render=function(){return c('React').createElement(c('ActorSelector.react'),{actorIDs:this.props.actorIDs,loading:this.props.loading||this.state.loading,nuxBody:this.$UFIActorSelector2(),nuxEnabled:this.state.nuxEnabled,nuxHoverContext:this.state.nuxHoverContext,onChange:this.$UFIActorSelector3,onShowNux:this.$UFIActorSelector4,onCompleteNux:this.$UFIActorSelector5,selectedActorID:this.state.selectedActorID,settingsURI:this.props.settingsURI,tooltipConstructor:this.$UFIActorSelector6});};n.prototype.componentDidMount=function(){this.$UFIActorSelector7();this.$UFIActorSelector1=new (c('SubscriptionsHandler'))();this.$UFIActorSelector1.addSubscriptions(c('UFICentralUpdates').subscribe('feedback-updated',function(p,q){if(this.props.ftEntIdentifier in q.updates)this.$UFIActorSelector7();}.bind(this)),c('Arbiter').subscribe(m,function(){this.setState({nuxEnabled:false});}.bind(this)));var o=c('Parent').bySelector(c('ReactDOM').findDOMNode(this),"._5pcr");if(o)this.setState({nuxHoverContext:o});};n.prototype.componentWillUnmount=function(){this.$UFIActorSelector1.release();};n.propTypes={actorIDs:l.array.isRequired,ftEntIdentifier:l.string.isRequired,isTimeline:l.bool,loading:l.bool,nuxEnabled:l.bool,settingsURI:l.string};f.exports=n;}),null);
__d('FeedImageErrorEventLogger',['csx','Arbiter','BanzaiLogger','Bootloader','DataStore','DOMQuery','Event','Parent','Run','ge','getCrossOriginTransport'],(function a(b,c,d,e,f,g,h){'use strict';var i=2,j=false,k=false,l=false,m=0,n=0,o=0,p=0;function q(v){c('BanzaiLogger').log('WebFeedImageErrorEventLoggerConfig',v);}function r(v){return (v&&v.nodeName==='IMG'&&c('Parent').bySelector(v,"._5jmm"));}function s(v){var w;if(r(v.target)){var w=function(){var x,y=v.target,z=y.src;if(l&&!c('DataStore').get(y,'retry')){(function(){o++;c('DataStore').set(y,'retry',true);var aa=c('Event').listen(y,'load',function(){aa.remove();p++;});y.src=z;})();}else{n++;if(m>=i)return {v:void 0};m++;if(k){c('Bootloader').loadModules(["XHRRequest"],function(aa){if(aa)new aa(z).setTransportBuilder(c('getCrossOriginTransport')).setMethod('GET').setResponseHandler(function(){q({error_type:'SUCCESS',src:z});}).setErrorHandler(function(ba){if(ba){var ca=ba.errorMsg;if(ca.indexOf('id="facebook"')>0)ca='FB ERROR PAGE';q({error_code:ba.errorCode,error_type:ba.errorType,error_message:ca,src:z});}}).setTimeoutHandler(function(ba){q({src:ba,error_type:'TIMEOUT'});}).send();},'FeedImageErrorEventLogger');}else q({src:z});}}();if(typeof w==="object")return w.v;}}function t(){if(n>0||o>0){var v=0,w=c('ge')('mainContainer');if(w)v=c('DOMQuery').scry(w,"._5jmm img").length;q({event_name:'IMAGE_LOAD_ERROR_COUNT',error_count:n,retry_attempt_count:o,retry_success_count:p,total_image_count:v});n=0;o=0;p=0;}}var u={init:function v(w){if(j)return;k=w&&w.getDetail;l=w&&w.allowRetries;j=true;window.addEventListener('error',s,true);c('Run').onUnload(function(){return t();});c('Arbiter').subscribe(['pre_page_transition'],function(x,y){return t();});}};f.exports=u;}),null);
__d('ErrorSignal',['AsyncRequest','AsyncSignal','BanzaiODS','ErrorSignalConfig','SessionName','ScriptPath','SiteData','emptyFunction'],(function a(b,c,d,e,f,g){var h=true;function i(m,n){if(m&&m==='beacon_error'){c('BanzaiODS').bumpEntityKey('js_error_reporting','beacon_error_signal.sent');new (c('AsyncSignal'))(c('ErrorSignalConfig').uri,{c:m,m:n}).send();return;}else if(m&&m==='async_error'){var o=JSON.parse(n),p=o.err_code,q=o.path;if(p in {'1004':1,'12029':1,'12031':1,'12152':1}&&q.indexOf('scribe_endpoint.php')==-1){new (c('AsyncRequest'))().setURI(c('ErrorSignalConfig').uri).setData({c:'async_error',m:n}).setMethod('GET').setReadOnly(true).setOption('suppressEvaluation',true).setOption('suppressErrorAlerts',true).setHandler(c('emptyFunction')).setErrorHandler(c('emptyFunction')).send(true);return;}}if(m==='javascript_error')c('BanzaiODS').bumpEntityKey('js_error_reporting','error_signal.sent');new (c('AsyncSignal'))(c('ErrorSignalConfig').uri,{c:m,m:n}).send();}function j(m,n){n=n||{};n.svn_rev=c('SiteData').revision;n.push_phase=c('SiteData').push_phase;n.script_path=c('ScriptPath').getScriptPath();n.extra=n.extra||{};n.extra.hrm=c('SiteData').be_mode;var o=n.extra.type||'error';if(h&&m==='onerror'&&o==='error'){n.extra.extra.push('first_error');h=false;}var p=(c('SessionName').getName()||'-')+'/-';i('javascript_error',JSON.stringify({c:m,a:p,m:n}));}function k(){var m='beacon_error',n=(c('SessionName').getName()||'-')+'/-',o={};o.error=m;o.svn_rev=c('SiteData').revision;o.push_phase=c('SiteData').push_phase;o.script_path=c('ScriptPath').getScriptPath();o.extra={message:m,type:'info'};i(m,JSON.stringify({c:m,a:n,m:o}));}var l={sendBeaconErrorSignal:k,sendErrorSignal:i,logJSError:j};f.exports=l;b.ErrorSignal=l;}),null);
__d('FeedLoadEventWWWLogger',['Arbiter','BanzaiLogger','ErrorSignal','ErrorUtils','LitestandMessages','PageletEventConstsJS','URI'],(function a(b,c,d,e,f,g){var h=['substream_','more_pager_pagelet_','pagelet_composer','pagelet_navigation','pagelet_rhc_footer'],i=[c('PageletEventConstsJS').ARRIVE_END,c('PageletEventConstsJS').DISPLAY_END,c('PageletEventConstsJS').ONLOAD_END],j=['pre_page_transition','page_transition'],k=[c('LitestandMessages').NEWSFEED_LOAD,c('LitestandMessages').STORIES_REQUESTED,c('LitestandMessages').STORIES_INSERTED,c('LitestandMessages').NEWER_STORIES_REQUESTED,c('LitestandMessages').NEWER_STORIES_INSERTED,c('LitestandMessages').STREAM_LOAD_ERROR,c('LitestandMessages').STREAM_LOAD_RETRY,c('LitestandMessages').DUPLICATE_CURSOR_ERROR],l=false;function m(q){return q&&(q.getPath()==='/'||q.getPath()==='/home.php');}function n(q){c('BanzaiLogger').log('WebFeedLoadLoggerConfig',q);}function o(q){if(!q)return null;if(q.indexOf('more_pager_pagelet_')===0)return 'more_pager_pagelet_n';if(q.indexOf('substream_')===0&&q!=='substream_0'&&q!=='substream_1')return 'substream_n';return q;}var p={init:function q(){if(l)return;c('Arbiter').subscribe('BigPipe/init',function(r,s){if(!s||!s.arbiter)return;s.arbiter.subscribe('pagelet_event',function(t,u){if(u&&i.indexOf(u.event)>=0&&h.some(function(v){return u.id.indexOf(v)===0;})&&m(c('URI').getNextURI()))n({event:'pagelet',pagelet_id:o(u.id),pagelet_event_type:u.event,pagelet_phase:u.phase.toString()});});});c('Arbiter').subscribe(j,function(r,s){if(s){var t=s.to||s.uri;if(m(t))n({event:'page_transition',transition_event_type:r});}});c('Arbiter').subscribe(k,function(r,s){var t=null,u=null;if(r===c('LitestandMessages').STREAM_LOAD_ERROR){t=s;}else if(r===c('LitestandMessages').DUPLICATE_CURSOR_ERROR)u=s;n({event:'stream_load',stream_event_type:r,stream_cursor:u,stream_substream_id:o(s&&s.substream_id),error_name:t&&t.name,error_message:t&&t.message,error_stack:t&&t.stack});});c('ErrorUtils').addListener(function(r){if(r&&m(c('URI').getNextURI())){c('ErrorSignal').logJSError('feedloaderror',{error:r.name||r.message,extra:r});n({event:'js_error',error_name:r.name,error_message:r.message,error_stack:r.stack});}});l=true;}};f.exports=p;}),null);
__d("XPhotosWaterfallBatchLoggingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/photos\/logging\/waterfall\/batch\/",{});}),null);
__d('PhotosUploadWaterfall',['AsyncRequest','AsyncSignal','Banzai','PhotosUploadWaterfallXConfig','XPhotosWaterfallBatchLoggingController','emptyFunction','randomInt','throttle'],(function a(b,c,d,e,f,g){var h=[],i={APP_SIMPLE:'simple',APP_ARCHIVE:'archive',APP_COMPOSER:'composer',APP_MESSENGER:'messenger',APP_HTML5:'html5',APP_CHAT:'chat',INSTALL_CANCEL:1,INSTALL_INSTALL:2,INSTALL_UPDATE:3,INSTALL_REINSTALL:4,INSTALL_PERMA_CANCEL:5,INSTALL_SILENT_SKIP:6,INSTALL_DOWNLOAD:7,CERROR_RESIZING_FAILED:6,CERROR_MARKER_EXTRACTION_FAILED:9,BEGIN:1,UPLOAD_START:4,ALL_UPLOADS_DONE:6,CLIENT_ERROR:7,RECOVERABLE_CLIENT_ERROR:12,IMAGES_SELECTED:9,UPGRADE_REQUIRED:11,VERSION:15,SELECT_START:18,SELECT_CANCELED:19,CANCEL:22,CANCEL_DURING_UPLOAD:83,ONE_RESIZING_START:2,ONE_UPLOAD_START:10,ONE_UPLOAD_DONE:29,ONE_RESIZING_DONE:34,PROGRESS_BAR_STOPPED:44,MISSED_BEAT:45,HEART_ATTACK:46,PUBLISH_SENT:99,PUBLISH_START:100,PUBLISH_SUCCESS:101,PUBLISH_FAILURE:102,CLUSTERING_START:103,CLUSTERING_SUCCESS:104,CLUSTERING_FAILURE:105,POST_BUTTON_CLICKED:110,POST_BUTTON_ERROR:111,PHOTO_DELETED:114,PUBLISH_CLIENT_SUCCESS:115,PHOTO_ROTATED:117,SAVE_DRAFT_BUTTON_CLICKED:123,RECOVERY_START_ON_CLIENT:124,CHANGE_PHOTO_QUALITY_SETTING:126,TAG_ADDED:127,TAG_REMOVED:128,TAB_BUTTON_CLICKED:129,DONE_SPHERICAL_CHECK:131,DONE_SPHERICAL_CHECK_EXPERIMENTAL:132,FAIL_SPHERICAL_CHECK:133,FAIL_SPHERICAL_CHECK_EXPERIMENTAL:134,EDITABLE_PHOTO_FETCH_START:106,EDITABLE_PHOTO_FETCH_SUCCESS:107,EDITABLE_PHOTO_FETCH_FAILURE:108,EDITABLE_PHOTO_FETCH_DELAY:116,CANCEL_INDIVIDUAL_UPLOAD:109,MISSING_OVERLAY_NODE:118,PUBLISH_RETRY_FAILURE:119,MISSING_UPLOAD_STATE:120,SESSION_POSTED:72,POST_PUBLISHED:80,ONE_UPLOAD_CANCELED:81,ONE_UPLOAD_CANCELED_DURING_UPLOAD:82,RESIZER_AVAILABLE:20,OVERLAY_FIRST:61,ASYNC_AVAILABLE:63,FALLBACK_TO_HTML5:130,RETRY_UPLOAD:17,TAGGED_ALL_FACES:14,VAULT_IMAGES_SELECTED:62,VAULT_CREATE_POST_CANCEL:65,VAULT_SEND_IN_MESSAGE_CLICKED:66,VAULT_DELETE_CANCEL:68,VAULT_ADD_TO_ALBUM_CANCEL:74,VAULT_SHARE_IN_AN_ALBUM_CLICKED:76,VAULT_SHARE_OWN_TIMELINE_CLICKED:77,VAULT_SHARE_FRIENDS_TIMELINE_CLICKED:78,VAULT_SHARE_IN_A_GROUP_CLICKED:79,VAULT_SYNCED_PAGED_LINK_CLICKED:84,VAULTBOX:'vaultbox',GRID:'grid',SPOTLIGHT_VAULT_VIEWER:'spotlight_vault_viewer',REF_VAULT_NOTIFICATION:'vault_notification',_checkRequiredFields:function k(l){},sendBanzai:function k(l,m){this._checkRequiredFields(l);var n={};l.scuba_ints=l.scuba_ints||{};l.scuba_ints.client_time=Math.round(Date.now()/1000);if(c('PhotosUploadWaterfallXConfig').retryBanzai){n.retry=true;l.scuba_ints.nonce=c('randomInt')(4294967296);}c('Banzai').post(c('PhotosUploadWaterfallXConfig').deprecatedBanzaiRoute,l,n);if(m)setTimeout(m,0);},sendSignal:function k(l,m){this._checkRequiredFields(l);if(c('PhotosUploadWaterfallXConfig').useBanzai){this.sendBanzai(l,m);}else{var n=new (c('AsyncSignal'))('/ajax/photos/waterfall.php',{data:JSON.stringify(l)}).setHandler(m);if(c('PhotosUploadWaterfallXConfig').timeout)n.setTimeout(10*1000);n.send();}},queueLog:function k(l,m){h.push(l);if(!!m){this.flushQueue(m);}else j();},flushQueue:function k(l){var m=JSON.stringify(h);h=[];var n=c('XPhotosWaterfallBatchLoggingController').getURIBuilder().getURI();new (c('AsyncRequest'))().setURI(n).setData({logs:m}).setFinallyHandler(l||c('emptyFunction')).setTimeoutHandler(10*1000,l||c('emptyFunction')).send();}},j=c('throttle')(i.flushQueue,c('PhotosUploadWaterfallXConfig').batchInterval*1000);f.exports=i;}),null);
__d('AlbumMediaUploadUtils',['VideoUploadConfig'],(function a(b,c,d,e,f,g){var h={isVideoFile:function i(j){var k=j.name,l=c('VideoUploadConfig').videoExtensions,m=k.indexOf('.')!==-1?k.split('.').pop().toLowerCase():'';return l[m];},hasVideos:function i(j){return this._filterVideos(j).length>0;},_filterVideos:function i(j){return this._filterFileOfSupportedType(j,c('VideoUploadConfig').videoExtensions);},_filterFileOfSupportedType:function i(j,k){return j.filter(function(l){var m=l.indexOf('.')!==-1?l.split('.').pop().toLowerCase():'';return k[m];});}};f.exports=h;}),null);
__d('FilePickerEvent',[],(function a(b,c,d,e,f,g){f.exports={BEGIN:'FilePickerEvent/BEGIN',SELECT_START:'FilePickerEvent/SELECT_START',SELECTED:'FilePickerEvent/SELECTED_FILES',ALBUM_LIMIT_EXCEEDED:'FilePickerEvent/ALBUM_LIMIT_EXCEEDED',SESSION_LIMIT_EXCEEDED:'FilePickerEvent/SESSION_LIMIT_EXCEEDED',SELECT_CANCELED:'FilePickerEvent/SELECT_CANCELED',FALLBACK:'FilePickerEvent/FALLBACK'};}),null);
__d('UploadSession',['invariant','AlbumMediaUploadUtils','AsyncRequest','FilePickerEvent','SubscriptionsHandler','PhotosUploadWaterfall','PUWSteps','URI','arrayContains'],(function a(b,c,d,e,f,g,h){var i={};function j(m){'use strict';this._sessionID=m;this._asyncBootstrapped=false;this._controller=null;this._overlay=null;this._pickers=[];this._pendingPhotoFileLists=[];this._pendingVideoFileLists=[];this._beginLogged=false;this._albumLimitWasExceeded=false;this._sessionLimitWasExceeded=false;this._subscriptions=new (c('SubscriptionsHandler'))();}j.prototype.addFilePicker=function(m){'use strict';if(!c('arrayContains')(this._pickers,m)){this._pickers.push(m);if(this._controller&&m.getSwfID&&m.getSwfID())this._controller.preregisterSwf&&this._controller.preregisterSwf(m.getSwfID());this._subscriptions.addSubscriptions(m.subscribe(c('FilePickerEvent').BEGIN,function(n,o){if(!this._beginLogged){this._beginLogged=true;m.logWaterfallStep(c('PhotosUploadWaterfall').BEGIN);m.logStep(c('PUWSteps').CLIENT_FLOW_BEGIN);}}.bind(this)),m.subscribe(c('FilePickerEvent').SELECTED,function(n,o){m.logStep(c('PUWSteps').CLIENT_SELECT_SUCCESS,{volume:o.files.length});var p=[],q=[];o.files.forEach(function(t){if(c('AlbumMediaUploadUtils').isVideoFile(t)){p.push(t);}else q.push(t);});if(this._controller){if(q.length>0)this._controller.uploadFiles(q);if(this._videoController&&p.length>0)this._videoController.uploadFiles(p);}else{if(q.length>0)this._pendingPhotoFileLists.push(q);if(p.length>0)this._pendingVideoFileLists.push(p);}if(this._asyncBootstrapped)return;var r=m._button,s=new (c('URI'))(r.getAttribute('ajaxify'));s.addQueryData('num_selected',o.files.length);c('AsyncRequest').bootstrap(s.toString(),r,true);this._asyncBootstrapped=true;}.bind(this)),m.subscribe(c('FilePickerEvent').SELECT_START,function(){m.logStep(c('PUWSteps').CLIENT_SELECT_BEGIN);}.bind(this)),m.subscribe(c('FilePickerEvent').SELECT_CANCELED,function(){m.logStep(c('PUWSteps').CLIENT_SELECT_CANCEL);if(!this._overlay){m.logStep(c('PUWSteps').CLIENT_FLOW_CANCEL);this._beginLogged=false;}}.bind(this)),m.subscribe(c('FilePickerEvent').ALBUM_LIMIT_EXCEEDED,function(){if(this._controller){this._controller.albumLimitExceeded();}else this._albumLimitWasExceeded=true;}.bind(this)),m.subscribe(c('FilePickerEvent').SESSION_LIMIT_EXCEEDED,function(){if(this._controller){this._controller.sessionLimitExceeded();}else this._sessionLimitWasExceeded=true;}.bind(this)));}};j.prototype.addController=function(m,n){'use strict';this._controller=m;this._videoController=n;this._asyncBootstrapped=true;var o=this._controller.getWaterfallID?this._controller.getWaterfallID():this._controller.getWaterfallConfig().waterfallID,p=this._controller.getUploaderApp?this._controller.getUploaderApp():this._controller.getWaterfallConfig().waterfallApp;if(!this._beginLogged){this._beginLogged=true;c('PhotosUploadWaterfall').sendSignal({qn:o,step:c('PhotosUploadWaterfall').BEGIN,uploader:p});}if(this._pendingPhotoFileLists.length>0||this._pendingVideoFileLists.length>0){var q=[],r=[];this._pendingVideoFileLists.forEach(function(s){r=r.concat(s);});this._pendingPhotoFileLists.forEach(function(s){q=q.concat(s);});if(q.length>0)this._controller.uploadFiles(q);if(r.length>0)this._videoController.uploadFiles(r);}else c('PhotosUploadWaterfall').sendSignal({qn:o,step:c('PhotosUploadWaterfall').OVERLAY_FIRST,uploader:p});if(this._albumLimitWasExceeded)this._controller.albumLimitExceeded();if(this._sessionLimitWasExceeded)this._controller.sessionLimitExceeded();};j.prototype.addOverlay=function(m){'use strict';this._overlay=m;};j.prototype.addOverlayAndController=function(m,n){'use strict';this.addOverlay(m);this.addController(n,null);};j.prototype.getFilePickers=function(){'use strict';return this._pickers;};j.prototype.cleanup=function(){'use strict';this._subscriptions&&this._subscriptions.release();};j.addFilePickerToSession=function(m,n){'use strict';k(m).addFilePicker(n);};j.addControllerToSession=function(m,n,o){'use strict';k(m).addController(n,o);};j.addOverlayToSession=function(m,n){'use strict';k(m).addOverlay(n);};j.addOverlayAndControllerToSession=function(m,n,o){'use strict';k(m).addOverlayAndController(n,o);};j.restartSessionPersistingFilePickers=function(m){'use strict';var n=k(m),o=new j(m);n.getFilePickers().forEach(function(p){o.addFilePicker(p);});l(m,o);};function k(m){if(!i[m])i[m]=new j(m);return i[m];}function l(m,n){i[m]||h(0);i[m].cleanup();delete i[m];i[m]=n;}f.exports=j;}),null);
__d('FeedComposerIDStore',['ReactComposerEvents','Arbiter','SubscriptionsHandler'],(function a(b,c,d,e,f,g){'use strict';var h={_composerID:null,_subscriptions:c('SubscriptionsHandler'),set:function i(j){this._subscriptions=new (c('SubscriptionsHandler'))();this._composerID=j;this._subscribeComposerResetEvent();},get:function i(){if(!this._composerID)throw new Error('ID Store has not yet been initialized via set()');return this._composerID;},_subscribeComposerResetEvent:function i(){if(!this._composerID)throw new Error('Composer ID cannot be null');var j=c('Arbiter').subscribeOnce(c('ReactComposerEvents').COMPOSER_RESET+this._composerID,function(k,l){if(l&&l.newComposerID){this._composerID=l.newComposerID;this._subscribeComposerResetEvent();}}.bind(this));this._subscriptions.addSubscriptions(j);}};f.exports=h;}),null);
__d('ReactComposerDraftTypes',[],(function a(b,c,d,e,f,g){var h={NONE:'none',DIALOG:'dialog',TOGGLE:'toggle',AUTO:'auto',AUTOMSG:'automsg',BUTTON:'button'};f.exports=h;}),null);
__d("XReactFeedComposerXBootloadController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/react_composer\/feedx\/bootload\/",{composer_id:{type:"String",required:true},composer_type:{type:"Enum",required:true,enumType:1},friend_list_id:{type:"String"},section_id:{type:"String"},target_id:{type:"String",required:true}});}),null);
__d('ReactFeedComposerX',['csx','cx','fbt','invariant','ReactComposerAttachmentType','ReactComposerDraftTypes','ReactComposerEvents','ReactComposerFocusInit','ReactComposerLoggingName','ReactComposerLoggingActions','Arbiter','AsyncRequest','Bootloader','ComposerEntryPointRef','CSS','DOM','Event','FeedComposerIDStore','Run','SubscriptionsHandler','XReactComposerLoggingODSController','XReactFeedComposerXBootloadController','$','requestAnimationFrame'],(function a(b,c,d,e,f,g,h,i,j,k){'use strict';function l(m){this.$ReactFeedComposerX1=m.actorID;this.$ReactFeedComposerX8=m.root;this.$ReactFeedComposerX3=m.composerID;this.$ReactFeedComposerX12=m.targetID;this.$ReactFeedComposerX4=m.composerType;this.$ReactFeedComposerX6=m.friendListID;this.$ReactFeedComposerX9=m.sectionID;this.$ReactFeedComposerX7=m.gks;this.$ReactFeedComposerX14=m.largeTextThreshold;this.$ReactFeedComposerX2=false;this.$ReactFeedComposerX5=c('DOM').find(this.$ReactFeedComposerX8,'form');this.$ReactFeedComposerX13=c('DOM').find(this.$ReactFeedComposerX8,"._3en1");this.$ReactFeedComposerX11=new (c('SubscriptionsHandler'))();this.$ReactFeedComposerX11.addSubscriptions(c('Event').listen(this.$ReactFeedComposerX8,'click',this.$ReactFeedComposerX15.bind(this)),c('Event').listen(this.$ReactFeedComposerX13,'focus',this.$ReactFeedComposerX15.bind(this)),c('Event').listen(this.$ReactFeedComposerX5,'success',this.$ReactFeedComposerX16.bind(this)),c('Arbiter').subscribeOnce('ReactFeedComposerXBootloader/bootload/'+this.$ReactFeedComposerX3,this.$ReactFeedComposerX17.bind(this)),c('Arbiter').subscribeOnce('ReactFeedComposerXBootloader/selectcomposer/'+this.$ReactFeedComposerX3,this.$ReactFeedComposerX15.bind(this)),c('Arbiter').subscribe('ReactComposerFocus/reset/'+this.$ReactFeedComposerX3,function(){this.$ReactFeedComposerX13.value='';}.bind(this)),c('Arbiter').subscribe(c('ReactComposerEvents').TEXT_PREFILL_BEFORE_BOOTLOAD+this.$ReactFeedComposerX3,function(p,q){this.$ReactFeedComposerX13.value=q;this.$ReactFeedComposerX13.selectionEnd=0;}.bind(this)));if(this.$ReactFeedComposerX14)this.$ReactFeedComposerX11.addSubscriptions(c('Event').listen(this.$ReactFeedComposerX13,'keydown',this.$ReactFeedComposerX18.bind(this)));if(this.$ReactFeedComposerX7&&!this.$ReactFeedComposerX7.shouldRedirectOnClickingProfilePic)this.$ReactFeedComposerX11.addSubscriptions(c('Arbiter').subscribe(c('ReactComposerEvents').ACTIVATE_ATTACHMENT+this.$ReactFeedComposerX3,function(){this.$ReactFeedComposerX13.focus();}.bind(this)));if(this.$ReactFeedComposerX7&&(this.$ReactFeedComposerX7.draftType===c('ReactComposerDraftTypes').AUTO||this.$ReactFeedComposerX7.draftType===c('ReactComposerDraftTypes').AUTOMSG))c('Bootloader').loadModules(["ReactComposerDraftGet"],function(p){var q=p.getDraft(this.$ReactFeedComposerX1);if(q){this.$ReactFeedComposerX13.value=q.prefillConfig.mentionsInput.textWithEntities.text;this.$ReactFeedComposerX13.placeholder=j._("Continue creating your post...");}}.bind(this),'ReactFeedComposerX');c('FeedComposerIDStore').set(this.$ReactFeedComposerX3);var n=c('DOM').find(this.$ReactFeedComposerX8,"._4d6h"),o=c('DOM').scry(n,'input[name="composer_photo[]"]')[0];if(o){this.$ReactFeedComposerX11.addSubscriptions(c('Event').listen(o,'click',this.$ReactFeedComposerX15.bind(this)),c('Event').listen(o,'change',this.$ReactFeedComposerX15.bind(this)));if(o.files&&o.files.length>0)this.$ReactFeedComposerX15();}this.$ReactFeedComposerX10=c('DOM').scry(this.$ReactFeedComposerX8,"._4-h7");this.$ReactFeedComposerX10.forEach(function(p){return this.$ReactFeedComposerX11.addSubscriptions(c('Event').listen(p,'click',this.$ReactFeedComposerX19.bind(this)));}.bind(this));if(m.jsModules&&m.jsModules.composerFocus&&m.gks&&m.gks.focusExperiment)c('ReactComposerFocusInit').handler(c('$')('feedx_container'),this.$ReactFeedComposerX3,this.$ReactFeedComposerX1,this.$ReactFeedComposerX7,m.jsModules.composerFocus);c('Run').onLeave(this.$ReactFeedComposerX17.bind(this));}l.prototype.$ReactFeedComposerX18=function(m){if(this.$ReactFeedComposerX13.value.length<this.$ReactFeedComposerX14){c('CSS').addClass(this.$ReactFeedComposerX13,"_480e");}else c('CSS').removeClass(this.$ReactFeedComposerX13,"_480e");};l.prototype.$ReactFeedComposerX19=function(m){var n=m.getTarget(),o=null;while(n){if(n.nodeType===1&&n.nodeName==='A'){o=n;break;}n=n.parentNode;}o!==null||k(0);this.$ReactFeedComposerX20(o);var p=c('CSS').hasClass(o,"._5qtn");if(p)return;this.$ReactFeedComposerX10.forEach(function(s){return c('CSS').removeClass(s,"_5qtn");});c('CSS').addClass(o,"_5qtn");var q=c('DOM').find(this.$ReactFeedComposerX8,"._559p"),r=c('DOM').find(this.$ReactFeedComposerX8,"._559q");switch(o.getAttribute('data-attachment-type')){case c('ReactComposerAttachmentType').STATUS:c('CSS').hide(r);c('CSS').show(q);break;case c('ReactComposerAttachmentType').MEDIA:case c('ReactComposerAttachmentType').QANDA:case c('ReactComposerAttachmentType').LIVE_VIDEO:c('CSS').show(r);c('CSS').hide(q);break;}};l.prototype.$ReactFeedComposerX15=function(m){if(this.$ReactFeedComposerX2)return;if(this.$ReactFeedComposerX7&&!this.$ReactFeedComposerX7.shouldRedirectOnClickingProfilePic)c('Arbiter').inform(c('ReactComposerEvents').ACTIVATE_ATTACHMENT+this.$ReactFeedComposerX3);this.$ReactFeedComposerX2=true;this.$ReactFeedComposerX21();var n=c('XReactFeedComposerXBootloadController').getURIBuilder().setString('composer_id',this.$ReactFeedComposerX3).setString('target_id',this.$ReactFeedComposerX12).setEnum('composer_type',this.$ReactFeedComposerX4).setString('friend_list_id',this.$ReactFeedComposerX6).setString('section_id',this.$ReactFeedComposerX9).getURI();new (c('AsyncRequest'))(n).send();var o=c('XReactComposerLoggingODSController').getURIBuilder().setString('event','bootload_start').setEnum('composer_type',c('ComposerEntryPointRef').FEEDX).getURI();new (c('AsyncRequest'))(o).send();};l.prototype.$ReactFeedComposerX20=function(m){var n=c('ReactComposerLoggingName').INLINE_COMPOSER;switch(m.getAttribute('data-attachment-type')){case c('ReactComposerAttachmentType').STATUS:n=c('ReactComposerLoggingName').STATUS_TAB_SELECTOR;break;case c('ReactComposerAttachmentType').MEDIA:n=c('ReactComposerLoggingName').MEDIA_TAB_SELECTOR;break;case c('ReactComposerAttachmentType').LIVE_VIDEO:n=c('ReactComposerLoggingName').LIVE_VIDEO_TAB_SELECTOR;break;case c('ReactComposerAttachmentType').ALBUM:n=c('ReactComposerLoggingName').ALBUM_TAB_SELECTOR;break;case c('ReactComposerAttachmentType').NOTES:n=c('ReactComposerLoggingName').NOTES_TAB_SELECTOR;break;case c('ReactComposerAttachmentType').QANDA:n=c('ReactComposerLoggingName').QANDA_TAB_SELECTOR;break;}c('ReactComposerLoggingActions').composerEntry(this.$ReactFeedComposerX3,n);};l.prototype.$ReactFeedComposerX21=function(){c('ReactComposerLoggingActions').composerEntry(this.$ReactFeedComposerX3,c('ReactComposerLoggingName').INLINE_COMPOSER);};l.prototype.$ReactFeedComposerX17=function(){this.$ReactFeedComposerX11.release();};l.prototype.$ReactFeedComposerX16=function(){this.$ReactFeedComposerX13.value='';c('Arbiter').inform(c('ReactComposerEvents').POST_SUCCEEDED+this.$ReactFeedComposerX3);this.$ReactFeedComposerX17();};f.exports=l;}),null);
__d('ReactComposerFocusScrollLockUtils',['csx','cx','CSS','DOMQuery','ModalLayer','Style','getDocumentScrollElement','getElementRect','getUnboundedScrollPosition','getViewportDimensions','requestAnimationFrame','setTimeoutAcrossTransitions'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=300,k=400,l=84,m={_interval:0,_pageRoot:null,_hasStickyComposer:false,_originalScrollPos:0,enable:function n(o,p){var q=c('getUnboundedScrollPosition')(c('getDocumentScrollElement')());if(c('CSS').matchesSelector(this._getPageRoot(),"._ihc"))return;c('CSS').addClass(this._getPageRoot(),"_ihc");c('ModalLayer').setPageRootAdjusted(true);this._hasStickyComposer=p;if(p){this._originalScrollPos=q.y;var r=Math.min(-this._originalScrollPos+l,0);c('Style').set(this._getPageRoot(),'margin-top',r+'px');}var s=c('getElementRect')(o),t=s.top,u=function(){var v=t+o.offsetHeight+k,w=Math.max(c('getViewportDimensions')().height,v)+this._originalScrollPos+'px';if(c('Style').get(this._getPageRoot(),'height')!==w)c('Style').set(this._getPageRoot(),'height',w);}.bind(this);this._interval=setInterval(u,j);u();c('requestAnimationFrame')(function(){window.scrollTo(q.x,0);});},disable:function n(){var o,p=this;c('CSS').removeClass(this._getPageRoot(),"_ihc");c('ModalLayer').setPageRootAdjusted(false);c('Style').set(this._getPageRoot(),'height',null);if(this._hasStickyComposer)(function(){var q=c('getUnboundedScrollPosition')(c('getDocumentScrollElement')());c('setTimeoutAcrossTransitions')(function(){c('Style').set(this._getPageRoot(),'margin-top',null);window.scrollTo(q.x,this._originalScrollPos);}.bind(p),450);})();clearInterval(this._interval);},_getPageRoot:function n(){if(!this._pageRoot)this._pageRoot=c('DOMQuery').scry(document.body,"._li")[0];return this._pageRoot;}};f.exports=m;}),null);
__d('ReactComposerFocusModal.react',['ReactComposerDraftTypes','ReactComposerFocusScrollLockUtils','ReactComposerFocusWrapperCore.react','ReactComposerLoggingActions','Arbiter','Bootloader','React','ReactDOM'],(function a(b,c,d,e,f,g){var h,i,j=c('React').PropTypes,k=null,l=null,m=null;h=babelHelpers.inherits(n,c('React').PureComponent);i=h&&h.prototype;function n(){var o,p;'use strict';for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=i.constructor).call.apply(o,[this].concat(r)),this.state={focused:false,showDiscardDialog:false},this.$ReactComposerFocusModal2=function(){if(this.props.gks.draftType==c('ReactComposerDraftTypes').DIALOG||this.props.gks.draftType==c('ReactComposerDraftTypes').AUTO||this.props.gks.draftType==c('ReactComposerDraftTypes').AUTOMSG){c('Bootloader').loadModules(["ReactComposerHandleUnsavedChanges","ReactComposerFocusSaveAsDraftDialog.react","ReactComposerInit"],function(t,u,v){m=t;l=u;k=v;},'ReactComposerFocusModal.react');}else c('Bootloader').loadModules(["ReactComposerHandleUnsavedChanges","ReactComposerFocusDiscardDialog.react","ReactComposerInit"],function(t,u,v){m=t;l=u;k=v;},'ReactComposerFocusModal.react');}.bind(this),this.$ReactComposerFocusModal4=function(t){if(t)return this.$ReactComposerFocusModal1();if(l&&m&&m.hasUnsavedChanges(this.$ReactComposerFocusModal6())){this.$ReactComposerFocusModal7();}else this.$ReactComposerFocusModal8();}.bind(this),this.$ReactComposerFocusModal8=function(){c('ReactComposerLoggingActions').composerCancel(this.$ReactComposerFocusModal6());this.$ReactComposerFocusModal9();try{if(k)k.resetComposer(this.$ReactComposerFocusModal6());}catch(t){}c('Arbiter').inform('ReactComposerFocus/reset/'+this.$ReactComposerFocusModal6());this.$ReactComposerFocusModal1();}.bind(this),this.$ReactComposerFocusModal3=function(){var t=c('ReactDOM').findDOMNode(this.refs.focus.getComposer());c('ReactComposerFocusScrollLockUtils').enable(t,this.props.gks.hasStickyComposer);this.setState({focused:true});}.bind(this),this.$ReactComposerFocusModal1=function(){c('ReactComposerFocusScrollLockUtils').disable();this.setState({focused:false});}.bind(this),this.$ReactComposerFocusModal7=function(){this.setState({showDiscardDialog:true});}.bind(this),this.$ReactComposerFocusModal9=function(){this.setState({showDiscardDialog:false});}.bind(this),this.$ReactComposerFocusModal6=function(){return this.refs.focus.getComposerID();}.bind(this),p;}n.prototype.componentWillUnmount=function(){'use strict';this.$ReactComposerFocusModal1();};n.prototype.render=function(){'use strict';return c('React').createElement('div',null,c('React').createElement(c('ReactComposerFocusWrapperCore.react'),{composerID:this.props.composerID,focused:this.state.focused,fixHeight:true,onFirstFocus:this.$ReactComposerFocusModal2,onFocus:this.$ReactComposerFocusModal3,onDismiss:this.$ReactComposerFocusModal4,gks:this.props.gks,ref:'focus'},this.props.children),this.$ReactComposerFocusModal5());};n.prototype.$ReactComposerFocusModal5=function(){'use strict';var o=null;if(this.state.showDiscardDialog&&l)if(this.props.gks.draftType==c('ReactComposerDraftTypes').DIALOG||this.props.gks.draftType==c('ReactComposerDraftTypes').AUTO||this.props.gks.draftType==c('ReactComposerDraftTypes').AUTOMSG){o=c('React').createElement(l,{getComposerID:this.$ReactComposerFocusModal6,actorID:this.props.actorID,gks:this.props.gks,onResetComposer:this.$ReactComposerFocusModal8,onCancel:this.$ReactComposerFocusModal9});}else o=c('React').createElement(l,{onConfirm:this.$ReactComposerFocusModal8,onCancel:this.$ReactComposerFocusModal9});return o;};n.propTypes={composerID:j.string.isRequired,actorID:j.string.isRequired,gks:j.object.isRequired};f.exports=n;}),null);
__d("XFeedEgoImpressionLoggingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ego\/feed\/logging\/impression\/",{ego_id:{type:"Int",required:true},qid:{type:"Int",required:true},mf_story_key:{type:"Int",required:true},uid:{type:"Int"}});}),null);