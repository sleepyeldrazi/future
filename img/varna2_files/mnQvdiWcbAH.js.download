if (self.CavalryLogger) { CavalryLogger.start_js(["kAygF"]); }

__d("IntentClassifierRequestAction",[],(function a(b,c,d,e,f,g){f.exports={REQUEST_MESSAGE_INTENT:"REQUEST_MESSAGE_INTENT",REQUEST_THREAD_INTENT:"REQUEST_THREAD_INTENT"};}),null);
__d("MessageSettingsPreviewTab",[],(function a(b,c,d,e,f,g){f.exports={MESSENGER_CODE:"messenger_code",RESPONSE_ASSISTANT:"response_assistant"};}),null);
__d("MessageThreadViewSource",[],(function a(b,c,d,e,f,g){f.exports={UNSPECIFIED:"unspecified",LEGACY:"legacy",LEGACY_MESSAGES_PREVIEW:"legacy_messages_preview",REFRESH_SPRINGBOARD:"springboard",REFRESH_MESSAGETAB:"message_tab",NEW_MESSAGETAB:"new_message_tab",REFRESH_PERMALINK:"permalink",REFRESH_HIGHLANDER_JEWEL:"highlander_jewel",REFRESH_SEARCH_TYPEAHEAD:"search_typeahead",MTOUCH_MESSAGE_TAB:"mtouch_message_tab",MBASIC_MESSAGE_TAB:"mbasic_message_tab"};}),null);
__d("MNCommerceErrors",[],(function a(b,c,d,e,f,g){f.exports={ALREADY_UNLINKED:1893001};}),null);
__d("MNCommerceReplyTypes",[],(function a(b,c,d,e,f,g){f.exports={COMMERCE_LINK:2,COMMERCE_UNLINK:3};}),null);
__d("NativeBookingRequestStatusUpdateAction",[],(function a(b,c,d,e,f,g){f.exports={ACCEPT:"accept",ADMIN_CANCEL:"admin_cancel",ADMIN_DECLINE:"admin_decline",CREATE:"create",DECLINE:"decline",SCHEDULE:"schedule",USER_CANCEL:"user_cancel",REQUEST:"request"};}),null);
__d("P2PPaymentLogMessageSubtype",[],(function a(b,c,d,e,f,g){f.exports={SENT_IN_GROUP:"sent_in_group",CANCELED_SENDER_RISK:"canceled_sender_risk",CANCELED_DECLINED:"canceled_declined",CANCELED_RECIPIENT_RISK:"canceled_recipient_risk",CANCELED_EXPIRED:"canceled_expired",CANCELED_SAME_CARD:"canceled_same_card",CANCELED_CUSTOMER_SERVICE:"canceled_customer_service",CANCELED_CHARGEBACK:"canceled_chargeback",CANCELED_SYSTEM_FAIL:"canceled_system_fail",REQUEST_CANCELED_BY_REQUESTER:"request_canceled_by_requester",REQUEST_DECLINED_BY_REQUESTEE:"request_declined_by_requestee",REQUEST_EXPIRED:"request_expired"};}),null);
__d("PageCustomTagConsts",[],(function a(b,c,d,e,f,g){f.exports={COLORS:{FF000000:{fill:"FFFFFFFF",border:"FF90949C",darkerFill:"FFBEC2C9"},FF8A73C9:{fill:"FFF4F1FA",border:"FF8A73C9",darkerFill:"FFDDD5F0"},FFF65569:{fill:"FFFEEEF0",border:"FFF65569",darkerFill:"FFFBCCD2"},FF5291FF:{fill:"FFEEF4FF",border:"FF5291FF",darkerFill:"FFC6D9FF"},FFFB9240:{fill:"FFFFF4EC",border:"FFFB9240",darkerFill:"FFFCDEC5"},FF72A737:{fill:"FFF6FAF1",border:"FF72A737",darkerFill:"FFE4F0D5"}}};}),null);
__d("PageProductTransactionOrderStatus",[],(function a(b,c,d,e,f,g){f.exports={AWAITING_PAYMENT_METHOD:"awaiting_payment_method",AWAITING_PAYMENT:"awaiting_payment",PAYMENT_SUBMITTED:"payment_submitted",PAYMENT_EXPIRED:"payment_expired",SHIPPED:"shipped",VOIDED:"voided",PENDING_APPROVAL:"pending_approval",PAYMENT_APPROVED:"payment_approved"};}),null);
__d("PagesAdminToolUIActionType",[],(function a(b,c,d,e,f,g){f.exports={CONTEXT_CARD_CLICK_ADD_NOTE:"context_card_click_add_note",CONTEXT_CARD_CLICK_CONFIRM_ADD_NOTE:"context_card_click_confirm_add_note",CONTEXT_CARD_CLICK_DELETE_NOTE:"context_card_click_delete_note",CONTEXT_CARD_CLICK_CONFIRM_DELETE_NOTE:"context_card_click_confirm_delete_note",CONTEXT_CARD_CLICK_HISTORY:"context_card_click_history",CONTEXT_CARD_CLICK_PROFILE_LINK:"context_card_click_profile_link",CONTEXT_CARD_CLICK_SHARED_MEDIA:"context_card_click_shared_media",CONTEXT_CARD_LOAD_MORE_SHARED_MEDIA:"context_card_load_more_shared_media",CONTEXT_CARD_LOAD_MORE_NOTES:"context_card_load_more_notes",CONTEXT_CARD_LOAD_MORE_HISTORY:"context_card_load_more_history",CONTEXT_CARD_CLICK_SET_CUSTOM_TAG:"context_card_click_set_custom_tag",CONTEXT_CARD_CLICK_UNSET_CUSTOM_TAG:"context_card_click_unset_custom_tag",TAG_MANAGEMENT_CLICK_DELETE_LINK:"tag_management_click_delete_link",TAG_MANAGEMENT_CLICK_CONFIRM_DELETE:"tag_management_click_confirm_delete",TAG_MANAGEMENT_CLICK_COLOR_SELECTOR:"tag_management_click_color_selector",TAG_MANAGEMENT_CLICK_CHANGE_COLOR:"tag_management_click_change_color",TAG_MANAGEMENT_CLICK_ADD_TAG:"tag_management_click_add_tag",TAG_MANAGEMENT_CLICK_MERGE_TAG:"tag_management_click_merge_tag",MESSAGE_INBOX_SWITCH_FOLDER:"message_inbox_switch_folder",MESSAGE_INBOX_TOGGLE_FILTER_PANEL:"message_inbox_toggle_filter_panel",MESSAGE_INBOX_CLICK_MANAGE_TAGS:"message_inbox_click_manage_tags",MESSAGE_INBOX_CLICK_ADD_SEARCH_TAGS:"message_inbox_click_add_search_tags",MESSAGE_INBOX_CLICK_REMOVE_SEARCH_TAGS:"message_inbox_click_remove_search_tags",MESSAGE_INBOX_CLICK_SEARCH_NAMES:"message_inbox_click_search_names",MESSAGE_INBOX_CLICK_SEARCH_MESSAGES:"message_inbox_click_search_messages",MESSAGE_INBOX_CLICK_AWAY_TOGGLE:"message_inbox_click_away_toggle",MESSAGE_INBOX_CLICK_THREAD_BLOCK:"message_inbox_click_thread_block",MESSAGE_INBOX_CLICK_SEND_MESSAGE:"message_inbox_click_send_message",MESSAGE_INBOX_CLICK_MENU_ACTION:"message_inbox_click_menu_action",HOVERCARD_CLICK_EXPAND_FULL_VIEW:"hovercard_click_expand_full_view",HOVERCARD_CLICK_SEND_MESSAGE:"hovercard_click_send_message",HOVERCARD_CLICK_SEE_CONVERSATION:"hovercard_click_see_conversation",HOVERCARD_CLICK_VIEW_PROFILE:"hovercard_click_view_profile"};}),null);
__d("PagesManagerMessagingTabPerfEvents",[],(function a(b,c,d,e,f,g){f.exports={MESSAGE_TAB_WILL_RENDER:"message_tab_will_render",MESSAGE_TAB_APP_DID_RENDER:"message_tab_app_did_render",MESSAGE_TAB_THREAD_LIST_DID_RENDER:"message_tab_thread_list_did_render",MESSAGE_TAB_DETAIL_VIEW_DID_RENDER:"message_tab_detail_view_did_render",OLD_MESSAGE_TAB_WILL_RENDER:"old_message_tab_will_render",OLD_MESSAGE_TAB_DID_RENDER:"old_message_tab_did_render"};}),null);
__d("PagesPlatformNativeBookingStatus",[],(function a(b,c,d,e,f,g){f.exports={CANCELLED:"Cancelled",CONFIRMED:"Confirmed",DECLINED:"Declined",PENDING:"Pending",REQUESTED:"Requested"};}),null);
__d("PagesPlatformNoteUpdateAction",[],(function a(b,c,d,e,f,g){f.exports={ADD:"add",DELETE:"delete",UPDATE:"update"};}),null);
__d("ZipcodeCollectIndicatorFields",[],(function a(b,c,d,e,f,g){f.exports={REQUIRED:"required",HIDDEN:"hidden",OPTIONAL:"optional"};}),null);
__d('CommerceCommonNUXAPI',['AsyncRequest','XCommerceSelfServeMerchantNUXSeenController'],(function a(b,c,d,e,f,g){'use strict';var h={update:function i(j){var k=c('XCommerceSelfServeMerchantNUXSeenController').getURIBuilder().setInt('page_id',j.pageID).setEnum('nux_type',j.nuxType).setEnum('event',j.event).getURI();new (c('AsyncRequest'))(k).send();}};f.exports=h;}),null);
__d('CommerceCommonNUX.react',['BOFSellerLoggerEvent','CommerceCommonNUXAPI','React','XUIAmbientNUX.react'],(function a(b,c,d,e,f,g){var h,i,j=c('React').PropTypes,k=180;h=babelHelpers.inherits(l,c('React').Component);i=h&&h.prototype;function l(m){'use strict';i.constructor.call(this,m);this.$CommerceCommonNUX1=function(){this.setState({shown:false});c('CommerceCommonNUXAPI').update({event:c('BOFSellerLoggerEvent').ACTN_NUX_SEEN,nuxType:this.props.type,pageID:this.props.pageID});}.bind(this);this.state={shown:m.shown};}l.prototype.componentDidMount=function(){'use strict';if(this.state.shown)c('CommerceCommonNUXAPI').update({event:c('BOFSellerLoggerEvent').ACTN_NUX_SHOW,nuxType:this.props.type,pageID:this.props.pageID});};l.prototype.render=function(){'use strict';if(!this.state||!this.state.shown)return null;return (c('React').createElement(c('XUIAmbientNUX.react'),{className:this.props.className,contextRef:this.props.contextRef,customwidth:k,onCloseButtonClick:this.$CommerceCommonNUX1,position:'above',shown:this.state.shown,width:this.props.width},this.props.children));};l.defaultProps={width:'custom'};l.PropTypes={children:j.any,className:j.string,contextRef:j.func.isRequired,pageID:j.string.isRequired,shown:j.bool.isRequired,type:j.string.isRequired,width:j.oneOf(['auto','custom','normal','wide'])};f.exports=l;}),null);
__d('CommerceCurrencyUtil',['ix','fbglyph'],(function a(b,c,d,e,f,g,h){'use strict';var i={BRL:h("\/images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/currency-brl_24_fig-dark-50.png"),EUR:h("\/images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/currency-eur_24_fig-dark-50.png"),GBP:h("\/images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/currency-gbp_24_fig-dark-50.png"),IDR:h("\/images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/currency-idr_24_fig-dark-50.png"),MYR:h("\/images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/currency-myr_24_fig-dark-50.png"),NTD:h("\/images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/currency-ntd_24_fig-dark-50.png"),PHP:h("\/images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/currency-php_24_fig-dark-50.png"),SEK:h("\/images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/currency-sek_24_fig-dark-50.png"),THB:h("\/images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/currency-tbh_24_fig-dark-50.png"),TRY:h("\/images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/currency-try_24_fig-dark-50.png"),VEF:h("\/images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/currency-vef_24_fig-dark-50.png"),VND:h("\/images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/currency-vnd_24_fig-dark-50.png"),YEN:h("\/images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/currency-yen_24_fig-dark-50.png"),USD:h("\/images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/currency-usd_24_fig-dark-50.png")},j='USD',k={getIconSrc:function l(m){if(!m)return i[j];return i[m]||i[j];}};f.exports=k;}),null);
__d('CommerceContactMerchantShippingAddress.react',['fbt','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;function k(l){j.constructor.call(this,l);}k.prototype.render=function(){if(!this.props.address)return null;var l=this.props.address,m=l.care_of,n=l.address_line_one,o=l.address_line_two,p=l.city,q=l.country,r=l.postal_code,s=l.state,t=null;if(o&&r){t=h._("{shipping address address_line_one}, {shipping address address_line_two}, {shipping address city}, {shipping address state}, {shipping address postal code}, {shipping address country}",[h.param('shipping address address_line_one',n),h.param('shipping address address_line_two',o),h.param('shipping address city',p),h.param('shipping address state',s),h.param('shipping address postal code',r),h.param('shipping address country',q)]);}else if(o){t=h._("{shipping address address_line_one}, {shipping address address_line_two}, {shipping address city}, {shipping address state}, {shipping address country}",[h.param('shipping address address_line_one',n),h.param('shipping address address_line_two',o),h.param('shipping address city',p),h.param('shipping address state',s),h.param('shipping address country',q)]);}else if(r){t=h._("{shipping address address_line_one}, {shipping address city}, {shipping address state}, {shipping address postal code}, {shipping address country}",[h.param('shipping address address_line_one',n),h.param('shipping address city',p),h.param('shipping address state',s),h.param('shipping address postal code',r),h.param('shipping address country',q)]);}else t=h._("{shipping address address_line_one}, {shipping address city}, {shipping address state}, {shipping address country}",[h.param('shipping address address_line_one',n),h.param('shipping address city',p),h.param('shipping address state',s),h.param('shipping address country',q)]);return (c('React').createElement('div',{className:this.props.className},c('React').createElement('div',null,m),t));};f.exports=k;}),null);
__d('P2PCheckoutPriceDetails.react',['cx','fbt','LeftRight.react','P2PText.react','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes,m=i._("Address required");j=babelHelpers.inherits(n,c('React').Component);k=j&&j.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.renderLineItemRow=function(t,u,v){return (c('React').createElement('div',{className:"_46ld"},c('React').createElement(c('LeftRight.react'),null,c('React').createElement(c('P2PText.react'),{display:'inline',type:v?'primary':'secondary'},c('React').createElement('span',{className:"_10ba"+(v?' '+"_3a06":'')},t)),c('React').createElement(c('P2PText.react'),{className:"_10ba"+(' '+"_46lf")+(!u?' '+"_46lg":''),display:'inline',type:v?'primary':'secondary'},c('React').createElement('span',{className:v?"_3a06":''},u?u:m)))));},p;}n.prototype.render=function(){return (c('React').createElement('div',{className:"_46lh"},this.props.showSubtotalField?this.renderLineItemRow(i._("Subtotal"),this.props.subtotal):null,this.props.showTaxField?this.renderLineItemRow(i._("Tax"),this.props.tax):null,this.props.showShippingField?this.renderLineItemRow(i._("Delivery"),this.props.shipping):null,this.renderLineItemRow(i._("Total"),this.props.total,true)));};n.propTypes={shipping:l.string,subtotal:l.string,tax:l.string,total:l.string,showShippingField:l.bool,showSubtotalField:l.bool,showTaxField:l.bool};n.defaultProps={showShippingField:true,showSubtotalField:true,showTaxField:true};f.exports=n;}),null);
__d('P2PPlatformContextStore',['Arbiter','ChannelConstants','CurrentUser','EventEmitter','ImmutableObject','Map','MercuryIDs','P2PActions','P2PActionConstants','P2PAPI','P2PChannelType','P2PDispatcher'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=new (c('Map'))(),k=new (c('Map'))(),l=void 0;h=babelHelpers.inherits(m,c('EventEmitter'));i=h&&h.prototype;function m(){i.constructor.call(this);l=c('P2PDispatcher').register(this.onEventDispatched.bind(this));c('Arbiter').subscribe(c('ChannelConstants').getArbiterType(c('P2PChannelType').PLATFORM_CONTEXT_NEW),this.handleChannelUpdated.bind(this));c('Arbiter').subscribe(c('ChannelConstants').getArbiterType(c('P2PChannelType').PLATFORM_CONTEXT_ELIGIBLE_ITEM_UPDATED),this.handleChannelChanged.bind(this));c('Arbiter').subscribe(c('ChannelConstants').getArbiterType(c('P2PChannelType').PLATFORM_CONTEXT_DISMISSED),this.handleChannelChanged.bind(this));}m.prototype.onEventDispatched=function(n){var o=n.type,p=n.data;switch(o){case c('P2PActionConstants').PLATFORM_CONTEXT_ADDED:this.handlePlatformContextAdded(p);this.emit('change');break;case c('P2PActionConstants').PLATFORM_CONTEXT_ADDED_ERROR:this.handlePlatformContextAddedError(p);this.emit('change');break;case c('P2PActionConstants').PLATFORM_CONTEXT_SAVE_ERRORS_CLEARED:this.handlePlatformContextSaveErrorsCleared(p);this.emit('change');break;case c('P2PActionConstants').PLATFORM_CONTEXT_BANNER_DISMISSED:this.handlePlatformContextBannerDisimssed(p);this.emit('change');break;case c('P2PActionConstants').PLATFORM_CONTEXT_PRODUCT_ITEM_SOLD:this.handlePlatformContextProductItemSold(p);this.emit('change');break;case c('P2PActionConstants').PLATFORM_CONTEXT_CHANGED:this.handlePlatformContextChanged(p);this.emit('change');break;}};m.prototype.handleChannelUpdated=function(n,o){var p=o.obj;c('P2PActions').addPlatformContext(p);};m.prototype.handleChannelChanged=function(n,o){var p=o.obj;c('P2PActions').platformContextChanged(p);};m.prototype.handlePlatformContextAdded=function(n){this.setPlatformContext(n);};m.prototype.handlePlatformContextAddedError=function(n){k.set(n.itemID,n.error);};m.prototype.handlePlatformContextSaveErrorsCleared=function(n){k['delete'](n);};m.prototype.handlePlatformContextChanged=function(n){j.forEach(function(o,p){if(o.id===n.id)this.setPlatformContext(n);}.bind(this));};m.prototype.handlePlatformContextBannerDisimssed=function(n){j.forEach(function(o,p){if(o.id===n){if(this.isViewerSellerForPlatformContext(o)){o=c('ImmutableObject').set(o,{banner:c('ImmutableObject').set(o.banner,{shouldShowToSeller:false})});}else if(this.isViewerBuyerForPlatformContext(o))o=c('ImmutableObject').set(o,{banner:c('ImmutableObject').set(o.banner,{shouldShowToBuyer:false})});j.set(p,o);}}.bind(this));};m.prototype.handlePlatformContextProductItemSold=function(n){j.forEach(function(o,p){if(o.id===n){o=c('ImmutableObject').set(o,{product:c('ImmutableObject').set(o.product,{isAvailable:false})});j.set(p,o);}});};m.prototype.setPlatformContext=function(n){var o=new (c('ImmutableObject'))(n);o=c('ImmutableObject').set(o,{product:new (c('ImmutableObject'))(n.product)});o=c('ImmutableObject').set(o,{banner:new (c('ImmutableObject'))(n.banner)});j.set(this.getOtherUserIDForPlatformContext(n),o);};m.prototype.shouldShowBanner=function(n){var o=void 0,p=void 0;if(!n)return false;o=this.getPlatformContextByOtherUserID(n);if(!o){j.set(n,new (c('ImmutableObject'))({}));c('P2PAPI').getPlatformContextByOtherUserID({otherUserID:n});return false;}p=o.banner;return !!(this.isViewerSellerForPlatformContext(o)&&p.shouldShowToSeller||this.isViewerBuyerForPlatformContext(o)&&p.shouldShowToBuyer);};m.prototype.isViewerSellerForPlatformContext=function(n){return n.sellerID===c('CurrentUser').getID();};m.prototype.isViewerBuyerForPlatformContext=function(n){return n.buyerID===c('CurrentUser').getID();};m.prototype.getOtherUserIDForPlatformContext=function(n){return (this.isViewerSellerForPlatformContext(n)?n.buyerID:n.sellerID);};m.prototype.getPlatformContextByOtherUserID=function(n){return j.get(n);};m.prototype.getPlatformContextByID=function(n){for(var o=j.values(),p=Array.isArray(o),q=0,o=p?o:o[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var r;if(p){if(q>=o.length)break;r=o[q++];}else{q=o.next();if(q.done)break;r=q.value;}var s=r;if(s.id===n)return s;}return null;};m.prototype.getThreadIDFromPlatformContext=function(n){var o=this.getOtherUserIDForPlatformContext(n);return c('MercuryIDs').getThreadIDFromUserID(o);};m.prototype.getSaveError=function(n){return k.get(n);};m.prototype.getDispatchToken=function(){return l;};f.exports=new m();}),null);
__d('CommerceContactMerchantReceiptDialog.react',['cx','fbt','CommerceContactMerchantShippingAddress.react','Image.react','P2PActions','P2PAPI','P2PCheckoutPriceDetails.react','P2PDialog.react','P2PDialogBody.react','P2PDialogTitle.react','P2PErrorDialog.react','P2PLoadingMask.react','P2PPlatformContextStore','P2PPlatformProductItemDetails.react','P2PText.react','PageProductTransactionOrderStatus','React','StoreAndPropBasedStateMixin','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes,m=400,n=300,o=c('React').createClass({displayName:'CommerceContactMerchantReceiptDialog',mixins:[c('StoreAndPropBasedStateMixin')(c('P2PPlatformContextStore'))],propTypes:{invoiceID:l.string.isRequired,onDialogToggle:l.func,platformContextID:l.string.isRequired},getInitialState:function q(){return {error:null,invoiceDetails:null,loading:true};},statics:{calculateState:function q(r){return {platformContext:c('P2PPlatformContextStore').getPlatformContextByID(r.platformContextID)};}},componentWillMount:function q(){c('P2PAPI').getCommerceInvoiceDetails({invoiceID:this.props.invoiceID,onError:this.handleGetInvoiceDetailsError,onSuccess:this.handleGetInvoiceDetailsSuccess});c('P2PAPI').getPlatformContextByID({id:this.props.platformContextID});},handleGetInvoiceDetailsSuccess:function q(r){this.setState({invoiceDetails:r,loading:false});},handleGetInvoiceDetailsError:function q(r){this.setState({loading:false,error:r.error});},isUnsuccessfulInvoiceStatus:function q(){var r=this.state.invoiceDetails&&this.state.invoiceDetails.status;if(!r)return false;return (r===c('PageProductTransactionOrderStatus').VOIDED||r===c('PageProductTransactionOrderStatus').PAYMENT_EXPIRED);},renderShippingAddressSection:function q(){var r=this.state.invoiceDetails.ship_to_address;if(!r)return null;var s=c('React').createElement(c('P2PText.react'),{type:'primary'},c('React').createElement(c('CommerceContactMerchantShippingAddress.react'),{address:r})),t=i._("DELIVER TO");return (c('React').createElement(p,{content:s,label:t}));},renderPaymentStatusSection:function q(){var r=this.state.invoiceDetails.payment&&this.state.invoiceDetails.payment.payment_receipt_display_name;if(!r.__html)r={__html:r};var s=c('React').createElement(c('P2PText.react'),{className:this.isUnsuccessfulInvoiceStatus()?"_xed":'',dangerouslySetInnerHTML:r,key:'paymentStatus',type:'primary'}),t=i._("PAYMENT STATUS"),u=this.state.invoiceDetails.payment.payment_data.receipt_photo_url,v=u?c('React').createElement(c('Image.react'),{className:"_3-8z",key:'receiptImage',src:u,width:n}):null;return (c('React').createElement(p,{content:[s,v],label:t}));},renderShippingStatusSection:function q(){var r=this.state.invoiceDetails.shipment_status_display_name;if(!r)return null;if(!r.__html)r={__html:r};var s=c('React').createElement(c('P2PText.react'),{dangerouslySetInnerHTML:r,key:'shippingStatus',type:'primary'}),t=i._("SHIPPING STATUS");return (c('React').createElement(p,{content:s,label:t}));},renderProductDetailsSection:function q(){var r=this.state.platformContext;if(!r||!r.product)return null;var s=c('React').createElement(c('P2PPlatformProductItemDetails.react'),{item:r.product,size:'medium'});return (c('React').createElement(p,{content:s}));},renderProductPriceSection:function q(){var r=this.state.invoiceDetails,s=r.formatted_subtotal,t=r.formatted_shipping_cost,u=r.formatted_total,v=c('React').createElement(c('P2PCheckoutPriceDetails.react'),{shipping:t,subtotal:s,total:u,showTaxField:false});return (c('React').createElement(p,{content:v}));},renderOrderNumberSection:function q(){var r=this.props.invoiceID,s=c('React').createElement(c('P2PText.react'),{type:'secondary'},i._("Order no. {order_number}",[i.param('order_number',r)]));return (c('React').createElement(p,{content:s}));},renderReceipt:function q(){if(!this.state.invoiceDetails)return null;return (c('React').createElement('div',null,this.renderProductDetailsSection(),this.renderProductPriceSection(),this.renderShippingAddressSection(),this.renderPaymentStatusSection(),this.renderShippingStatusSection(),this.renderOrderNumberSection()));},handleClose:function q(){c('P2PActions').hideDialog();},handleToggle:function q(r){!r&&this.handleClose();},render:function q(){if(this.state.error){var r=i._("Problem while fetching your receipt");return (c('React').createElement(c('P2PErrorDialog.react'),{error:this.state.error,onOKClick:this.handleClose,title:r}));}return (c('React').createElement(c('P2PDialog.react'),{onToggle:this.props.onDialogToggle||this.handleToggle,repositionOnUpdate:true,width:m},c('React').createElement(c('P2PDialogTitle.react'),null,i._("Receipt")),c('React').createElement(c('P2PDialogBody.react'),{className:"_3dcf"},c('React').createElement(c('P2PLoadingMask.react'),{visible:this.state.loading}),this.renderReceipt())));}});j=babelHelpers.inherits(p,c('React').Component);k=j&&j.prototype;p.prototype.render=function(){var q=this.props.label?c('React').createElement(c('P2PText.react'),{className:"_3dce",type:'secondary'},this.props.label):null;return (c('React').createElement('div',{className:c('joinClasses')("_3dcd",this.props.className)},q,this.props.content));};function p(){j.apply(this,arguments);}p.propTypes={content:l.node,label:l.node};f.exports=o;}),null);
__d('CommerceInvoiceButtonPUX.react',['fbt','CommerceCommonNUX.react','CommerceSelfServeNUXType','MercuryParticipants','React'],(function a(b,c,d,e,f,g,h){var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(){var m,n;'use strict';for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.$CommerceInvoiceButtonPUX2=function(r){this.setState({recipientName:r&&r.name});}.bind(this),n;}l.prototype.componentDidMount=function(){'use strict';this.$CommerceInvoiceButtonPUX1(this.props);};l.prototype.componentWillReceiveProps=function(m){'use strict';this.$CommerceInvoiceButtonPUX1(m);};l.prototype.$CommerceInvoiceButtonPUX1=function(m){'use strict';c('MercuryParticipants').get('fbid:'+m.recipientID,this.$CommerceInvoiceButtonPUX2);};l.prototype.render=function(){'use strict';if(!this.state||!this.state.recipientName)return null;return (c('React').createElement(c('CommerceCommonNUX.react'),{contextRef:this.props.contextRef,pageID:this.props.pageID,shown:this.props.shown,type:c('CommerceSelfServeNUXType').INVOICE_PAYMENTS_CREATION_PUX},h._("Click here to send {buyer} a payment request",[h.param('buyer',this.state.recipientName)])));};l.PropTypes={contextRef:k.func.isRequired,pageID:k.string.isRequired,recipientID:k.string.isRequired,shown:k.bool.isRequired};f.exports=l;}),null);
__d('CommerceInvoiceCreateDialogHeader.react',['fbt','React','XUIGrayText.react','XUIText.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;function k(l){j.constructor.call(this,l);}k.prototype.$CommerceInvoiceCreateDialogHeader1=function(){var l=this.props.invoiceID;if(!l)return null;return (c('React').createElement(c('XUIText.react'),{display:'block',size:'large'},h._("Order {Part of sentence which is emphasized}",[h.param('Part of sentence which is emphasized',c('React').createElement(c('XUIText.react'),{weight:'bold'},h._("no. {order_number}",[h.param('order_number',l)])))])));};k.prototype.render=function(){return (c('React').createElement('div',{className:this.props.className},this.$CommerceInvoiceCreateDialogHeader1(),c('React').createElement(c('XUIGrayText.react'),{display:'block',shade:'light',size:'medium'},h._("Order status: {statusMessage}",[h.param('statusMessage',this.props.statusMessage)]))));};f.exports=k;}),null);
__d('CommerceInvoiceCreateDialogNoteSection.react',['ix','cx','fbt','FBPaymentsFormField.react','Image.react','LeftRight.react','Link.react','React','XUIGrayText.react','XUIText.react','fbglyph'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=240,n=3;k=babelHelpers.inherits(o,c('React').Component);l=k&&k.prototype;function o(p){l.constructor.call(this,p);this.$CommerceInvoiceCreateDialogNoteSection1=function(){this.setState({isAddingNote:true});}.bind(this);this.$CommerceInvoiceCreateDialogNoteSection2=function(q,r){this.setState({remainingWords:m-r.length});this.props.onNoteChanged(r);}.bind(this);this.state={isAddingNote:false,remainingWords:m};}o.prototype.$CommerceInvoiceCreateDialogNoteSection3=function(){if(this.state.isAddingNote||!this.props.canEdit)return null;return (c('React').createElement('div',null,c('React').createElement(c('Link.react'),{onClick:this.$CommerceInvoiceCreateDialogNoteSection1},c('React').createElement(c('Image.react'),{className:"_4blm",src:h("\/images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/plus_16_fig-blue.png")}),j._("Add a note"))));};o.prototype.$CommerceInvoiceCreateDialogNoteSection4=function(){if(!this.state.isAddingNote)return null;return (c('React').createElement('div',null,c('React').createElement(c('LeftRight.react'),null,c('React').createElement(c('XUIGrayText.react'),{display:'block',shade:'light',size:'small'},j._("Note")),c('React').createElement(c('XUIGrayText.react'),{display:'block',shade:'light',size:'small'},this.state.remainingWords)),c('React').createElement(c('FBPaymentsFormField.react'),{className:"_2pi2",fieldType:'textArea',maxLength:m,name:'editableNote',onChange:this.$CommerceInvoiceCreateDialogNoteSection2,placeholder:j._("Enter a note that both you and the buyer can see."),rows:n,value:this.props.note})));};o.prototype.$CommerceInvoiceCreateDialogNoteSection5=function(){if(this.props.canEdit||!this.props.note)return null;return (c('React').createElement('div',null,c('React').createElement(c('XUIGrayText.react'),{display:'block',shade:'light',size:'medium'},j._("Note")),c('React').createElement(c('XUIText.react'),null,this.props.note)));};o.prototype.render=function(){return (c('React').createElement('div',{className:this.props.className},this.$CommerceInvoiceCreateDialogNoteSection3(),this.$CommerceInvoiceCreateDialogNoteSection4(),this.$CommerceInvoiceCreateDialogNoteSection5()));};f.exports=o;}),null);
__d('CommerceInvoiceCreateDialogProductSelector.react',['ix','cx','CommerceProductItemSearchSelector.react','CurrencyInput.atlas','Image.react','LeftRight.react','Link.react','PECurrency.react','ProfileImageBlockEntry.react','React','fbglyph'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=k.constructor).call.apply(m,[this].concat(p)),this.$CommerceInvoiceCreateDialogProductSelector1=function(r){if(!this.props.selectedProduct)return;this.props.onPriceChange(this.props.selectedProduct.id,r);}.bind(this),this.$CommerceInvoiceCreateDialogProductSelector4=function(){this.props.onProductSelected([]);}.bind(this),n;}l.prototype.$CommerceInvoiceCreateDialogProductSelector2=function(){return c('React').createElement('div',{className:"_3451"+(this.props.selectedProduct?' '+"hidden_elem":'')},c('React').createElement(c('CommerceProductItemSearchSelector.react'),{canCreateProduct:false,showAsDropdownMenu:true,onProductSelected:this.props.onProductSelected,pageID:this.props.pageID,productScrollAreaHeight:this.props.productScrollAreaHeight}));};l.prototype.$CommerceInvoiceCreateDialogProductSelector3=function(){var m=this.props.selectedProduct;if(!m)return null;var n=this.props.isEditable?c('React').createElement(c('Link.react'),{className:"_3452",onClick:this.$CommerceInvoiceCreateDialogProductSelector4},c('React').createElement(c('Image.react'),{src:h("\/images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/cross_20_fig-accent.png")})):null,o=this.props.isEditable?c('React').createElement(c('CurrencyInput.atlas'),{className:"_3x5v _3x5w",currency:this.props.currency,onChange:this.$CommerceInvoiceCreateDialogProductSelector1,value:m.price}):c('React').createElement(c('PECurrency.react'),{code:this.props.currency,value:m.price*100});return c('React').createElement(c('LeftRight.react'),null,c('React').createElement('div',{className:"_3x5v _3x5x"},c('React').createElement(c('ProfileImageBlockEntry.react'),{imgSrc:m.imageURL,title:m.name})),c('React').createElement('div',{className:(!this.props.isEditable?"_5okk":'')+(' '+"_3x5-")+(' '+"_2pis")+(' '+"_2pi2")},o,n));};l.prototype.render=function(){return (c('React').createElement('div',{className:this.props.className},this.$CommerceInvoiceCreateDialogProductSelector3(),this.$CommerceInvoiceCreateDialogProductSelector2()));};f.exports=l;}),null);
__d('CommerceInvoiceCreateDialogTotalRow.react',['cx','fbt','PECurrency.react','Grid.react','React','XUIGrayText.react','XUIText.react','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;function l(m){k.constructor.call(this,m);}l.prototype.render=function(){var m=i._("Buyer to select");this.props.selectedShippingOption;return (c('React').createElement('div',{className:c('joinClasses')(this.props.className,"_5hc4 clearfix")},c('React').createElement(c('Grid.react'),{className:"_5hc7",cols:2,spacing:'padding/left-12'},c('React').createElement('div',{className:"_5hc8"},c('React').createElement(c('XUIGrayText.react'),{size:'medium'},i._("Delivery"))),c('React').createElement('div',{className:"_5hco _2pim"},c('React').createElement(c('XUIGrayText.react'),{size:'medium'},m)),c('React').createElement('div',{className:"_5hc8"},c('React').createElement(c('XUIText.react'),{size:'large'},i._("Total"))),c('React').createElement('div',{className:"_5hco _2pi2"},c('React').createElement(c('XUIText.react'),{size:'large'},c('React').createElement(c('PECurrency.react'),{code:this.props.currency,value:this.props.totalCost}))))));};f.exports=l;}),null);
__d('CommerceInvoiceDetailsEditableList.react',['React','XUIGrayText.react','XUIText.react','intlList'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;k.prototype.render=function(){return (c('React').createElement('div',{className:this.props.className},c('React').createElement(c('XUIGrayText.react'),{display:'block',shade:'light',size:'medium'},this.props.title),c('React').createElement(c('XUIText.react'),{display:'block'},c('intlList')(this.props.listItems.map(this.props.getOptionName),c('intlList').CONJUNCTIONS.NONE))));};function k(){h.apply(this,arguments);}k.propsTypes={className:j.string,getOptionName:j.func.isRequired,listItems:j.array.isRequired,title:j.node.isRequired};f.exports=k;}),null);
__d('CommerceAdminInvoiceDetails.react',['cx','fbt','CommerceContactMerchantShippingAddress.react','CommerceInvoiceCreateDialogHeader.react','CommerceInvoiceCreateDialogNoteSection.react','CommerceInvoiceCreateDialogProductSelector.react','CommerceInvoiceCreateDialogTotalRow.react','CommerceInvoiceDetailsEditableList.react','React','XUIGrayText.react','XUINotice.react','XUIText.react','emptyFunction'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;function l(m){k.constructor.call(this,m);}l.prototype.$CommerceAdminInvoiceDetails1=function(){if(!this.props.selectedShippingOption||!this.props.shippingAddress||!this.props.customerPhoneNumber)return null;return (c('React').createElement(c('XUIText.react'),{className:"_3-8w"},this.props.customerPhoneNumber));};l.prototype.$CommerceAdminInvoiceDetails2=function(){if(!this.props.errorMessage)return null;return (c('React').createElement(c('XUINotice.react'),{use:'warn'},this.props.errorMessage));};l.prototype.$CommerceAdminInvoiceDetails3=function(){return (c('React').createElement(c('CommerceInvoiceCreateDialogHeader.react'),{className:"_4kya",invoiceID:this.props.invoiceID,statusMessage:this.props.invoiceStatus}));};l.prototype.$CommerceAdminInvoiceDetails4=function(){return (c('React').createElement('div',{className:"_4kya"},c('React').createElement(c('CommerceInvoiceCreateDialogProductSelector.react'),{currency:this.props.currency,onPriceChange:this.props.onPriceChange,onProductSelected:this.props.onProductSelected,pageID:this.props.pageID,selectedProduct:this.props.selectedProducts[0],productScrollAreaHeight:this.props.productScrollAreaHeight,isEditable:this.props.canEditProducts})));};l.prototype.$CommerceAdminInvoiceDetails5=function(){return (c('React').createElement(c('CommerceInvoiceCreateDialogNoteSection.react'),{canEdit:this.props.canEditProducts,note:this.props.invoiceNote,onNoteChanged:this.props.onNoteChanged}));};l.prototype.$CommerceAdminInvoiceDetails6=function(){return (c('React').createElement('div',{className:"_30v4"},c('React').createElement(c('CommerceInvoiceDetailsEditableList.react'),{title:i._("Accepted payment methods"),listItems:this.props.paymentOptions,getOptionName:function m(n){return n.name||n.description;}})));};l.prototype.$CommerceAdminInvoiceDetails7=function(){if(!this.props.selectedShippingOption||!this.props.shippingAddress)return null;return (c('React').createElement(c('CommerceContactMerchantShippingAddress.react'),{address:this.props.shippingAddress}));};l.prototype.$CommerceAdminInvoiceDetails8=function(){if(!this.props.invoiceID)return this.$CommerceAdminInvoiceDetails9();return (c('React').createElement('div',{className:"_30v4"},this.$CommerceAdminInvoiceDetails9(),this.$CommerceAdminInvoiceDetails10(),this.$CommerceAdminInvoiceDetails7(),this.$CommerceAdminInvoiceDetails1()));};l.prototype.$CommerceAdminInvoiceDetails9=function(){var m=this.props.shippingOptions,n=i._("Delivery methods offered");if(this.props.selectedShippingOption){m=[this.props.selectedShippingOption];n=i._("Delivery method");}return (c('React').createElement('div',{className:"_30v4"},c('React').createElement(c('CommerceInvoiceDetailsEditableList.react'),{getOptionName:function o(p){return p.name;},listItems:m,title:n})));};l.prototype.$CommerceAdminInvoiceDetails10=function(){if(this.props.isInvoiceFulfilled)return (c('React').createElement(c('XUIGrayText.react'),{display:'block',shade:'light',size:'medium'},i._("Fulfilled")));return (c('React').createElement(c('XUIGrayText.react'),{display:'block',shade:'light',size:'medium'},i._("Not fulfilled")));};l.prototype.$CommerceAdminInvoiceDetails11=function(){return (c('React').createElement('div',{className:"_30v4 _4ebn"},c('React').createElement(c('CommerceInvoiceCreateDialogTotalRow.react'),{currency:this.props.currency,selectedShippingOption:this.props.selectedShippingOption,totalCost:this.props.totalCost})));};l.prototype.render=function(){return (c('React').createElement('span',null,this.$CommerceAdminInvoiceDetails2(),this.$CommerceAdminInvoiceDetails3(),this.$CommerceAdminInvoiceDetails4(),this.$CommerceAdminInvoiceDetails11(),this.$CommerceAdminInvoiceDetails5(),this.$CommerceAdminInvoiceDetails8()));};l.defaultProps={onPriceChange:c('emptyFunction'),onProductSelected:c('emptyFunction')};f.exports=l;}),null);
__d("XCommerceTransactionInvoiceUpdateController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/commerce\/transaction-invoice\/update\/",{});}),null);
__d('CommerceInvoiceAPI',['ActorURI','AsyncRequest','XCommerceTransactionInvoiceUpdateController','emptyFunction'],(function a(b,c,d,e,f,g){'use strict';var h={updateInvoiceStatus:function i(j){var k=c('XCommerceTransactionInvoiceUpdateController').getURIBuilder().getURI();k=c('ActorURI').create(k,j.pageID);var l=j.onSuccess||c('emptyFunction'),m=j.onError||c('emptyFunction'),n={invoice_id:j.invoiceID,transaction_status:j.status,receipt_reject_reason:j.receiptRejectReason,shipment_tracking_no:j.shipmentTrackingNumber};new (c('AsyncRequest'))().setURI(k).setData(n).setMethod('POST').setHandler(function(o){var p=o.getPayload();l(p);}).setErrorHandler(function(o){m();}).send();}};f.exports=h;}),null);
__d('CommerceInvoiceAdminActionsTypes',['keyMirrorRecursive'],(function a(b,c,d,e,f,g){'use strict';var h=c('keyMirrorRecursive')({CREATE_INVOICE_START:'',CREATE_INVOICE_SUCCESS:'',CREATE_INVOICE_FAILURE:'',HIDE_DIALOG:'',SAVE_CONFIG:'',SET_CONFIG:'',SET_INVOICE_DETAILS:'',SET_INVOICE_NOTE:'',SET_PRODUCT_PRICE:'',SET_SELECTED_PRODUCTS:'',SHOW_DIALOG:'',SHOW_MANAGE_INVOICE_DIALOG:'',UPDATE_INVOICE_STATUS_START:'',UPDATE_INVOICE_STATUS_SUCCESS:'',MANAGE_INVOICE_ERROR:'',HIDE_MANAGE_INVOICE_DIALOG:''});f.exports=h;}),null);
__d('CommerceInvoiceAdminDispatcher',['ExplicitRegistrationDispatcher'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('ExplicitRegistrationDispatcher'));i=h&&h.prototype;function j(k){i.constructor.call(this,k);this.dispatch=this.dispatch.bind(this);}f.exports=new j({strict:true});}),null);
__d("XCommerceAdminTransactionInvoiceDetailsController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/messages\/commerce\/admin\/transaction_invoice_details\/",{invoice_id:{type:"FBID",required:true}});}),null);
__d("XCommerceTransactionInvoiceConfigController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/commerce\/transaction\/invoice\/config\/",{});}),null);
__d('CommerceInvoiceAdminActions',['fbt','CommerceInvoiceAdminActionsTypes','ActorURI','AsyncRequest','CommerceInvoiceAPI','CommerceInvoiceAdminDispatcher','XCommerceAdminTransactionInvoiceDetailsController','XCommerceTransactionInvoiceConfigController'],(function a(b,c,d,e,f,g,h){'use strict';var i={setConfig:function j(k){c('CommerceInvoiceAdminDispatcher').dispatch({actionType:c('CommerceInvoiceAdminActionsTypes').SET_CONFIG,config:k});},createInvoiceStart:function j(){c('CommerceInvoiceAdminDispatcher').dispatch({actionType:c('CommerceInvoiceAdminActionsTypes').CREATE_INVOICE_START});},createInvoiceSuccess:function j(){c('CommerceInvoiceAdminDispatcher').dispatch({actionType:c('CommerceInvoiceAdminActionsTypes').CREATE_INVOICE_SUCCESS});},createInvoiceFailure:function j(k){c('CommerceInvoiceAdminDispatcher').dispatch({actionType:c('CommerceInvoiceAdminActionsTypes').CREATE_INVOICE_FAILURE,error:k});},hideDialog:function j(){c('CommerceInvoiceAdminDispatcher').dispatch({actionType:c('CommerceInvoiceAdminActionsTypes').HIDE_DIALOG});},hideManageInvoiceDialog:function j(){c('CommerceInvoiceAdminDispatcher').dispatch({actionType:c('CommerceInvoiceAdminActionsTypes').HIDE_MANAGE_INVOICE_DIALOG});},saveConfiguration:function j(){c('CommerceInvoiceAdminDispatcher').dispatch({actionType:c('CommerceInvoiceAdminActionsTypes').SAVE_CONFIG});},setInvoiceDetails:function j(k,l){c('CommerceInvoiceAdminDispatcher').dispatch({actionType:c('CommerceInvoiceAdminActionsTypes').SET_INVOICE_DETAILS,invoiceID:k,invoiceDetails:l});},setInvoiceNote:function j(k){c('CommerceInvoiceAdminDispatcher').dispatch({actionType:c('CommerceInvoiceAdminActionsTypes').SET_INVOICE_NOTE,invoiceNote:k});},setProductPrice:function j(k,l){c('CommerceInvoiceAdminDispatcher').dispatch({actionType:c('CommerceInvoiceAdminActionsTypes').SET_PRODUCT_PRICE,productID:k,price:l});},setSelectedProducts:function j(k){c('CommerceInvoiceAdminDispatcher').dispatch({actionType:c('CommerceInvoiceAdminActionsTypes').SET_SELECTED_PRODUCTS,products:k});},showDialog:function j(){c('CommerceInvoiceAdminDispatcher').dispatch({actionType:c('CommerceInvoiceAdminActionsTypes').SHOW_DIALOG});},showManageInvoiceDialog:function j(k,l){c('CommerceInvoiceAdminDispatcher').dispatch({actionType:c('CommerceInvoiceAdminActionsTypes').SHOW_MANAGE_INVOICE_DIALOG,invoiceID:k,pageID:l});},updateInvoiceStatusStart:function j(k,l){c('CommerceInvoiceAdminDispatcher').dispatch({actionType:c('CommerceInvoiceAdminActionsTypes').UPDATE_INVOICE_STATUS_START,invoiceID:l,pageID:k});},updateInvoiceStatusSuccess:function j(k,l,m){c('CommerceInvoiceAdminDispatcher').dispatch({actionType:c('CommerceInvoiceAdminActionsTypes').UPDATE_INVOICE_STATUS_SUCCESS,invoiceID:l,pageID:k,status:m});},setManageInvoiceError:function j(k,l){c('CommerceInvoiceAdminDispatcher').dispatch({actionType:c('CommerceInvoiceAdminActionsTypes').MANAGE_INVOICE_ERROR,invoiceID:k,errorMessage:l});},fetchInvoiceDetails:function j(k,l){var m=c('XCommerceAdminTransactionInvoiceDetailsController').getURIBuilder().setFBID('invoice_id',l).getURI(),n=c('ActorURI').create(m,k);new (c('AsyncRequest'))().setURI(n).setHandler(function(o){var p=o.payload,q=p.items[0],r={id:q.product_item_id,imageURL:q.product_image_uri,name:q.product_name,price:q.product_price/100},s={currency:p.currency,id:p.invoice_id,pageID:p.page_id,status:p.status,statusDisplay:p.status_display,totalCost:p.total_cost,products:[r],availableShippingOptions:p.available_shipping_options,selectedShippingOption:p.selected_shipping_option,availablePaymentOptions:p.available_payment_options,selectedPaymentOption:p.selected_payment_option,receiptPhotoURL:p.receipt_photo_url,shippingAddress:p.ship_to_address,note:p.invoice_notes,customerPhoneNumber:p.customer_phone_number};i.setInvoiceDetails(l,s);}).send();},fetchConfig:function j(k){var l=c('XCommerceTransactionInvoiceConfigController').getURIBuilder().getURI(),m=c('ActorURI').create(l,k);new (c('AsyncRequest'))().setURI(m).setHandler(function(n){var o=n.payload,p={isOnboarded:o.isOnboarded,businessEmail:o.merchantSettings.contactEmail,paymentMethods:o.paymentOptions,shippingOptions:o.shippingOptions,merchantSettings:o.merchantSettings};i.setConfig(p);}).send();},updateInvoiceStatus:function j(k,l,m){this.updateInvoiceStatusStart(k,l);c('CommerceInvoiceAPI').updateInvoiceStatus({invoiceID:l,pageID:k,status:m,onSuccess:function(){this.updateInvoiceStatusSuccess(k,l,m);}.bind(this),onError:function(){var n=h._("There was an error with updating the order status");this.setManageInvoiceError(l,n);}.bind(this)});}};f.exports=i;}),null);
__d('CommerceInvoicePaymentOptionCategory',[],(function a(b,c,d,e,f,g){'use strict';var h={BANK_TRANSFER:'BANK_TRANSFER',CUSTOM:'CUSTOM',PAY_ON_DELIVERY:'PAY_ON_DELIVERY'};f.exports=h;}),null);
__d('CommerceInvoiceAdminStore',['invariant','CommerceInvoiceAdminActions','CommerceInvoiceAdminActionsTypes','CommerceInvoiceAdminDispatcher','CommerceInvoicePaymentOptionCategory','FluxStore','immutable','PageProductTransactionOrderStatus','Map'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('immutable').Map;i=babelHelpers.inherits(l,c('FluxStore'));j=i&&i.prototype;function l(m){j.constructor.call(this,m);this.$CommerceInvoiceAdminStore1=true;this.$CommerceInvoiceAdminStore2=false;this.$CommerceInvoiceAdminStore3=false;this.$CommerceInvoiceAdminStore4=k(new (c('Map'))());this.$CommerceInvoiceAdminStore5=false;this.$CommerceInvoiceAdminStore6=k(new (c('Map'))());this.$CommerceInvoiceAdminStore7=false;this.$CommerceInvoiceAdminStore8=null;this.$CommerceInvoiceAdminStore11='Draft';this.$CommerceInvoiceAdminStore12=k(new (c('Map'))());this.$CommerceInvoiceAdminStore13=k(new (c('Map'))());this.$CommerceInvoiceAdminStore14='';this.$CommerceInvoiceAdminStore10=null;this.$CommerceInvoiceAdminStore15();}l.prototype.$CommerceInvoiceAdminStore16=function(m){return {description:m.description,id:m.id,imageURL:m.image_url,name:m.name,permalink:m.permalink,price:m.current_price.amount/100};};l.prototype.$CommerceInvoiceAdminStore15=function(){this.$CommerceInvoiceAdminStore9=k(new (c('Map'))());this.$CommerceInvoiceAdminStore14='';};l.prototype.$CommerceInvoiceAdminStore17=function(){this.$CommerceInvoiceAdminStore8={isOnboarded:true,businessEmail:'test@test.com',paymentMethods:[{type:c('CommerceInvoicePaymentOptionCategory').BANK_TRANSFER,description:'*transfer detaile here*'}],shippingOptions:[{id:'1234',price:2000,currency:'USD',name:'UPS Ground'}],merchantSettings:{id:'1234567',defaultCurrency:'USD'}};};l.prototype.$CommerceInvoiceAdminStore18=function(m){this.$CommerceInvoiceAdminStore2=m;};l.prototype.$CommerceInvoiceAdminStore19=function(m){this.$CommerceInvoiceAdminStore3=m;};l.prototype.$CommerceInvoiceAdminStore20=function(m){this.$CommerceInvoiceAdminStore7=m;};l.prototype.$CommerceInvoiceAdminStore21=function(m){this.$CommerceInvoiceAdminStore14=m;};l.prototype.$CommerceInvoiceAdminStore22=function(m,n){var o=this.$CommerceInvoiceAdminStore9.get(m);o.price=n;this.$CommerceInvoiceAdminStore9=this.$CommerceInvoiceAdminStore9.set(m,Object.assign({},o));};l.prototype.$CommerceInvoiceAdminStore23=function(m){var n=new (c('Map'))();m.map(function(o){return n.set(o.id,this.$CommerceInvoiceAdminStore16(o));}.bind(this));this.$CommerceInvoiceAdminStore9=k(n);};l.prototype.$CommerceInvoiceAdminStore24=function(){this.$CommerceInvoiceAdminStore4=k(new (c('Map'))());this.$CommerceInvoiceAdminStore6=k(new (c('Map'))());this.$CommerceInvoiceAdminStore12=k(new (c('Map'))());};l.prototype.$CommerceInvoiceAdminStore25=function(m,n){var o=new (c('Map'))();o.set(m,n);this.$CommerceInvoiceAdminStore13=k(o);};l.prototype.__onDispatch=function(m){switch(m.actionType){case c('CommerceInvoiceAdminActionsTypes').CREATE_INVOICE_FAILURE:this.$CommerceInvoiceAdminStore20(false);this.$CommerceInvoiceAdminStore19(true);this.__emitChange();break;case c('CommerceInvoiceAdminActionsTypes').CREATE_INVOICE_START:this.$CommerceInvoiceAdminStore20(true);this.__emitChange();break;case c('CommerceInvoiceAdminActionsTypes').CREATE_INVOICE_SUCCESS:this.$CommerceInvoiceAdminStore20(false);this.$CommerceInvoiceAdminStore18(false);this.$CommerceInvoiceAdminStore19(false);this.$CommerceInvoiceAdminStore15();this.__emitChange();break;case c('CommerceInvoiceAdminActionsTypes').HIDE_DIALOG:this.$CommerceInvoiceAdminStore18(false);this.$CommerceInvoiceAdminStore19(false);this.$CommerceInvoiceAdminStore15();this.__emitChange();break;case c('CommerceInvoiceAdminActionsTypes').HIDE_MANAGE_INVOICE_DIALOG:this.$CommerceInvoiceAdminStore24();this.__emitChange();break;case c('CommerceInvoiceAdminActionsTypes').SAVE_CONFIG:this.$CommerceInvoiceAdminStore17();this.__emitChange();break;case c('CommerceInvoiceAdminActionsTypes').SET_CONFIG:this.$CommerceInvoiceAdminStore8=m.config;this.__emitChange();break;case c('CommerceInvoiceAdminActionsTypes').SET_INVOICE_DETAILS:this.$CommerceInvoiceAdminStore25(m.invoiceID,m.invoiceDetails);this.__emitChange();break;case c('CommerceInvoiceAdminActionsTypes').SET_INVOICE_NOTE:this.$CommerceInvoiceAdminStore21(m.invoiceNote);this.__emitChange();break;case c('CommerceInvoiceAdminActionsTypes').SET_PRODUCT_PRICE:this.$CommerceInvoiceAdminStore22(m.productID,m.price);this.__emitChange();break;case c('CommerceInvoiceAdminActionsTypes').SET_SELECTED_PRODUCTS:this.$CommerceInvoiceAdminStore23(m.products);this.__emitChange();break;case c('CommerceInvoiceAdminActionsTypes').SHOW_DIALOG:this.$CommerceInvoiceAdminStore18(true);this.__emitChange();break;case c('CommerceInvoiceAdminActionsTypes').SHOW_MANAGE_INVOICE_DIALOG:var n=new (c('Map'))();n.set(m.invoiceID,true);this.$CommerceInvoiceAdminStore4=k(n);c('CommerceInvoiceAdminActions').fetchInvoiceDetails(m.pageID,m.invoiceID);this.__emitChange();break;case c('CommerceInvoiceAdminActionsTypes').UPDATE_INVOICE_STATUS_START:var o=new (c('Map'))();o.set(m.invoiceID,true);this.$CommerceInvoiceAdminStore6=k(o);this.__emitChange();break;case c('CommerceInvoiceAdminActionsTypes').UPDATE_INVOICE_STATUS_SUCCESS:var p=this.$CommerceInvoiceAdminStore13.get(m.invoiceID);p.status=m.status;this.$CommerceInvoiceAdminStore25(m.invoiceID,p);this.$CommerceInvoiceAdminStore4=k(new (c('Map'))());this.$CommerceInvoiceAdminStore6=k(new (c('Map'))());this.__emitChange();break;case c('CommerceInvoiceAdminActionsTypes').MANAGE_INVOICE_ERROR:var q=new (c('Map'))();q.set(m.invoiceID,m.errorMessage);this.$CommerceInvoiceAdminStore12=k(q);this.$CommerceInvoiceAdminStore6=k(new (c('Map'))());this.__emitChange();break;}};l.prototype.getCanSaveConfig=function(){return this.$CommerceInvoiceAdminStore1;};l.prototype.getCanSendInvoice=function(){return this.$CommerceInvoiceAdminStore9.size>0;};l.prototype.getIsDialogVisible=function(){return this.$CommerceInvoiceAdminStore2;};l.prototype.getIsInvoicePendingApproval=function(m){var n=this.$CommerceInvoiceAdminStore13.get(m);return !!n&&n.status===c('PageProductTransactionOrderStatus').PENDING_APPROVAL;};l.prototype.getIsInvoiceCancelled=function(m){var n=this.$CommerceInvoiceAdminStore13.get(m);return (n&&n.status===c('PageProductTransactionOrderStatus').VOIDED);};l.prototype.getIsInvoiceFulfilled=function(m){var n=this.$CommerceInvoiceAdminStore13.get(m);return (n&&n.status===c('PageProductTransactionOrderStatus').SHIPPED);};l.prototype.getIsInvoicePaid=function(m){var n=this.$CommerceInvoiceAdminStore13.get(m);return (n&&!!n.selectedPaymentOption&&(n.status===c('PageProductTransactionOrderStatus').PAYMENT_SUBMITTED||n.status===c('PageProductTransactionOrderStatus').SHIPPED));};l.prototype.getIsManageInvoiceDialogVisible=function(m){return this.$CommerceInvoiceAdminStore4.get(m)===true;};l.prototype.getIsErrorMessageVisible=function(){return this.$CommerceInvoiceAdminStore3;};l.prototype.getIsSavingConfig=function(){return this.$CommerceInvoiceAdminStore5;};l.prototype.getIsSendingInvoice=function(){return this.$CommerceInvoiceAdminStore7;};l.prototype.getConfig=function(){return this.$CommerceInvoiceAdminStore8;};l.prototype.getInvoiceNote=function(){return this.$CommerceInvoiceAdminStore14;};l.prototype.getProductPrice=function(m){this.$CommerceInvoiceAdminStore9.get(m)||h(0);return this.$CommerceInvoiceAdminStore9.get(m).price;};l.prototype.getSelectedProducts=function(){return this.$CommerceInvoiceAdminStore9.toArray();};l.prototype.getStatusMessage=function(){return this.$CommerceInvoiceAdminStore11;};l.prototype.getManageInvoiceErrorMessage=function(m){return this.$CommerceInvoiceAdminStore12.get(m);};l.prototype.getSelectedShippingOption=function(){return this.$CommerceInvoiceAdminStore10;};l.prototype.getIsManageInvoiceDialogLoading=function(m){var n=this.$CommerceInvoiceAdminStore6.get(m)===true;return (n||this.getInvoiceDetails(m)==null);};l.prototype.getTotalCost=function(){var m=0;this.$CommerceInvoiceAdminStore9.forEach(function(n){return m+=n.price;});return m*100;};l.prototype.getInvoiceDetails=function(m){return this.$CommerceInvoiceAdminStore13.get(m);};f.exports=new l(c('CommerceInvoiceAdminDispatcher'));}),null);
__d('CommerceInvoiceCreateDialog.react',['cx','fbt','CommerceAdminInvoiceDetails.react','LayerFadeOnHide','LayerHideOnBlur','React','XUIDialog.react','XUIDialogBody.react','XUIDialogButton.react','XUIDialogCancelButton.react','XUIDialogFooter.react','XUIDialogTitle.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=556;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(n){k.constructor.call(this,n);}m.prototype.$CommerceInvoiceCreateDialog1=function(){return (c('React').createElement('span',null,i._("New invoice")));};m.prototype.$CommerceInvoiceCreateDialog2=function(){var n=this.props.isErrorMessageVisible?i._("Oops, something went wrong! Your invoice was not sent."):null;return (c('React').createElement('div',{className:"_1_bg"},c('React').createElement(c('CommerceAdminInvoiceDetails.react'),{canEditProducts:true,currency:this.props.currency,customerPhoneNumber:this.props.customerPhoneNumber,invoiceNote:this.props.invoiceNote,invoiceStatus:this.props.invoiceStatus,isInvoiceFulfilled:this.props.isInvoiceFulfilled,errorMessage:n,onNoteChanged:this.props.onNoteChanged,onPriceChange:this.props.onPriceChange,onProductSelected:this.props.onProductSelected,pageID:this.props.pageID,paymentOptions:this.props.paymentOptions,productScrollAreaHeight:this.props.productScrollAreaHeight,selectedProducts:this.props.selectedProducts,selectedShippingOption:this.props.selectedShippingOption,shippingAddress:this.props.shippingAddress,shippingOptions:this.props.shippingOptions,totalCost:this.props.totalCost})));};m.prototype.$CommerceInvoiceCreateDialog3=function(){return (c('React').createElement('div',null,c('React').createElement(c('XUIDialogCancelButton.react'),null),c('React').createElement(c('XUIDialogButton.react'),{action:'confirm',label:i._("Send"),use:'confirm',onClick:this.props.onSend,disabled:this.props.isSendButtonDisabled})));};m.prototype.render=function(){return (c('React').createElement(c('XUIDialog.react'),{shown:this.props.isDialogVisible,behaviors:{LayerFadeOnHide:c('LayerFadeOnHide'),LayerHideOnBlur:c('LayerHideOnBlur')},onToggle:this.props.onToggle,width:l},c('React').createElement(c('XUIDialogTitle.react'),null,this.$CommerceInvoiceCreateDialog1()),c('React').createElement(c('XUIDialogBody.react'),{useCustomPadding:true},this.$CommerceInvoiceCreateDialog2()),c('React').createElement(c('XUIDialogFooter.react'),null,this.$CommerceInvoiceCreateDialog3())));};f.exports=m;}),null);
__d("XCommerceTransactionInvoiceCreateAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/commerce\/transaction-invoice\/create\/",{});}),null);
__d('CommerceInvoiceAdminDialogContainer.react',['invariant','ActorURI','AsyncRequest','CommerceInvoiceAdminActions','CommerceInvoiceAdminDispatcher','CommerceInvoiceAdminStore','CommerceInvoiceCreateDialog.react','FluxContainer','FluxStore','React','XCommerceTransactionInvoiceCreateAsyncController'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=250;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.$CommerceInvoiceAdminDialogContainer2=function(r,s){c('CommerceInvoiceAdminActions').setProductPrice(r,s);},this.$CommerceInvoiceAdminDialogContainer3=function(r){c('CommerceInvoiceAdminActions').setSelectedProducts(r);},this.$CommerceInvoiceAdminDialogContainer4=function(){c('CommerceInvoiceAdminActions').saveConfiguration();},this.$CommerceInvoiceAdminDialogContainer5=function(){c('CommerceInvoiceAdminActions').createInvoiceStart();var r=Math.round(this.state.selectedProducts[0].price*100),s=c('XCommerceTransactionInvoiceCreateAsyncController').getURIBuilder().getURI(),t=c('ActorURI').create(s,this.props.pageID);new (c('AsyncRequest'))().setURI(t).setMethod('POST').setData({page_id:this.props.pageID,customer_id:this.props.recipientID,product_id:this.state.selectedProducts[0].id,product_price:r,notes:this.state.invoiceNote}).setHandler(function(u){if(u.error)return c('CommerceInvoiceAdminActions').createInvoiceFailure(u);return c('CommerceInvoiceAdminActions').createInvoiceSuccess();}).setErrorHandler(function(u){return c('CommerceInvoiceAdminActions').createInvoiceFailure(u);}).send();}.bind(this),this.$CommerceInvoiceAdminDialogContainer6=function(r){if(!this.state.isDialogVisible&&r){c('CommerceInvoiceAdminActions').showDialog();}else if(this.state.isDialogVisible&&!r)c('CommerceInvoiceAdminActions').hideDialog();}.bind(this),n;}l.getStores=function(){return [c('CommerceInvoiceAdminStore')];};l.calculateState=function(m,n){var o=c('CommerceInvoiceAdminStore').getConfig(),p=o===null||o===undefined?null:o.merchantSettings.defaultCurrency;return {canSaveConfig:c('CommerceInvoiceAdminStore').getCanSaveConfig(),canSendInvoice:c('CommerceInvoiceAdminStore').getCanSendInvoice(),config:o,currency:p,invoiceNote:c('CommerceInvoiceAdminStore').getInvoiceNote(),invoiceStatus:c('CommerceInvoiceAdminStore').getStatusMessage(),isDialogVisible:c('CommerceInvoiceAdminStore').getIsDialogVisible(),isErrorMessageVisible:c('CommerceInvoiceAdminStore').getIsErrorMessageVisible(),isSavingConfig:c('CommerceInvoiceAdminStore').getIsSavingConfig(),isSendingInvoice:c('CommerceInvoiceAdminStore').getIsSendingInvoice(),price:0,selectedProducts:c('CommerceInvoiceAdminStore').getSelectedProducts(),selectedShippingOption:c('CommerceInvoiceAdminStore').getSelectedShippingOption(),totalCost:c('CommerceInvoiceAdminStore').getTotalCost()};};l.prototype.componentWillMount=function(){c('CommerceInvoiceAdminDispatcher').explicitlyRegisterStores([c('CommerceInvoiceAdminStore')]);c('CommerceInvoiceAdminActions').fetchConfig(this.props.pageID);};l.prototype.showDialog=function(){c('CommerceInvoiceAdminActions').showDialog();};l.prototype.$CommerceInvoiceAdminDialogContainer1=function(m){c('CommerceInvoiceAdminActions').setInvoiceNote(m);};l.prototype.render=function(){if(!this.state.isDialogVisible)return null;var m=this.state.config&&this.state.config.paymentMethods.length>0&&this.state.config.shippingOptions.length>0;if(!m)return null;this.state.currency!=null||h(0);return (c('React').createElement(c('CommerceInvoiceCreateDialog.react'),{currency:this.state.currency,invoiceNote:this.state.invoiceNote,invoiceStatus:this.state.invoiceStatus,isErrorMessageVisible:this.state.isErrorMessageVisible,isDialogVisible:this.state.isDialogVisible,isSendButtonDisabled:!this.state.canSendInvoice||this.state.isSendingInvoice,onNoteChanged:this.$CommerceInvoiceAdminDialogContainer1,onPriceChange:this.$CommerceInvoiceAdminDialogContainer2,onProductSelected:this.$CommerceInvoiceAdminDialogContainer3,onSend:this.$CommerceInvoiceAdminDialogContainer5,onToggle:this.$CommerceInvoiceAdminDialogContainer6,pageID:this.props.pageID,paymentOptions:this.state.config?this.state.config.paymentMethods:[],price:this.state.price,productScrollAreaHeight:k,selectedProducts:this.state.selectedProducts,selectedShippingOption:this.state.selectedShippingOption,shippingOptions:this.state.config?this.state.config.shippingOptions:[],totalCost:this.state.totalCost}));};f.exports=c('FluxContainer').create(l,{withProps:true});}),null);
__d('FBPaymentsCartFlowContainerBase.react',['FBPaymentsPriceListHelper','React','abstractMethod','emptyFunction','idx','immutable','keyMirror'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes,k=c('keyMirror')({CART_SUMMARY:null,CONFIGURE_ITEM_OPTIONS:null});h=babelHelpers.inherits(l,c('React').Component);i=h&&h.prototype;function l(m){i.constructor.call(this,m);this.$FBPaymentsCartFlowContainerBase3=function(){this.props.onClose();}.bind(this);this.$FBPaymentsCartFlowContainerBase4=function(n){this.setState({configuringCartItem:n,configuringCartItemKey:null,step:k.CONFIGURE_ITEM_OPTIONS});}.bind(this);this.$FBPaymentsCartFlowContainerBase5=function(){this.setState({configuringCartItem:null,configuringCartItemKey:null,step:k.CONFIGURE_ITEM_OPTIONS});}.bind(this);this.$FBPaymentsCartFlowContainerBase6=function(n){var o=this.state.configuringCartItemKey;if(o===null||o===undefined)o=this.$FBPaymentsCartFlowContainerBase2();var p=this.state.itemsInCart.set(o,n);this.setState({configuringCartItem:null,configuringCartItemKey:null,itemsInCart:p,step:k.CART_SUMMARY});}.bind(this);this.$FBPaymentsCartFlowContainerBase7=function(n){var o=this.state.itemsInCart.get(n);this.setState({configuringCartItem:o,configuringCartItemKey:n,step:k.CONFIGURE_ITEM_OPTIONS});}.bind(this);this.$FBPaymentsCartFlowContainerBase8=function(n){var o=this.state.itemsInCart['delete'](n);this.setState({itemsInCart:o});}.bind(this);this.$FBPaymentsCartFlowContainerBase9=function(){this.props.onContinue&&this.props.onContinue(this.state.itemsInCart);}.bind(this);this.state={configuringCartItem:null,configuringCartItemKey:null,itemsInCart:new (c('immutable').List)(),step:k.CART_SUMMARY};}l.prototype.$FBPaymentsCartFlowContainerBase1=function(){return this.props.config&&this.props.config.itemCurrency||'USD';};l.prototype.$FBPaymentsCartFlowContainerBase2=function(){return this.state.itemsInCart.size;};l.prototype.__isCartFull=function(){var m=this.props.config&&this.props.config.maxCartItems;if(m===null||m===undefined||m<0)return false;return this.state.itemsInCart.size>=m;};l.prototype.$FBPaymentsCartFlowContainerBase10=function(){var m=this.state.itemsInCart,n={currency:this.$FBPaymentsCartFlowContainerBase1(),amount:'0'};m.forEach(function(o){n=c('FBPaymentsPriceListHelper').addPrices(n,o.getPrice());});return n;};l.prototype.render=function(){var m=void 0,n=void 0,o=this.props.config;if(o)if(this.state.step===k.CART_SUMMARY){var p=this.__getProductSearchContainer(),q=this.__isCartFull()?undefined:c('React').createElement(p,{canCreateCustomItem:!!o.customItemsConfig,onCartItemSelected:this.$FBPaymentsCartFlowContainerBase4,onCreateCustomItem:this.$FBPaymentsCartFlowContainerBase5,sellerID:this.props.sellerID}),r=this.__getCartSummaryScreen();n=c('React').createElement(r,{cartItems:this.state.itemsInCart,continueButtonLabel:this.props.continueButtonLabel,isContinueButtonDisabled:this.state.itemsInCart.size===0,onContinueButtonClicked:this.$FBPaymentsCartFlowContainerBase9,onEditCartItem:this.$FBPaymentsCartFlowContainerBase7,onRemoveCartItem:this.$FBPaymentsCartFlowContainerBase8,productSearchContainer:q,subtotal:this.$FBPaymentsCartFlowContainerBase10(),title:o.title});}else if(this.state.step===k.CONFIGURE_ITEM_OPTIONS){var s,t,u,v,w,x,y=this.__getCartProductConfigurationContainer(),z=!this.state.configuringCartItem,aa=((s=o)!=null?(t=s.catalogItemsConfig)!=null?t.customizePrice:t:s)&&!z,ba=(u=o)!=null?(v=u.customItemsConfig)!=null?v.itemFields:v:u,ca=(w=o)!=null?(x=w.customItemsConfig)!=null?x.quantityLimit:x:w;m=c('React').createElement(y,{cartItem:this.state.configuringCartItem,cartItemKey:this.state.configuringCartItemKey,customItemFields:ba,customItemMaxQuantity:ca,isCustomItem:z,isPriceEditable:aa,onAddItemToCart:this.$FBPaymentsCartFlowContainerBase6});}var da=this.__getCartFlowView();return (c('React').createElement(da,{cartSummaryScreen:n,isLoading:!o,onDialogClose:this.$FBPaymentsCartFlowContainerBase3,productConfigurationContainer:m,shown:this.props.shown}));};l.prototype.__getCartFlowView=function(){return c('abstractMethod')('FBPaymentsCartFlowContainerBase','__getCartFlowView');};l.prototype.__getCartSummaryScreen=function(){return c('abstractMethod')('FBPaymentsCartFlowContainerBase','__getCartSummaryScreen');};l.prototype.__getCartProductConfigurationContainer=function(){return c('abstractMethod')('FBPaymentsCartFlowContainerBase','__getCartProductConfigurationContainer');};l.prototype.__getProductSearchContainer=function(){return c('abstractMethod')('FBPaymentsCartFlowContainerBase','__getProductSearchContainer');};l.propTypes={continueButtonLabel:j.node,onClose:j.func.isRequired,onContinue:j.func,sellerID:j.string.isRequired,shown:j.bool.isRequired};l.defaultProps={onClose:c('emptyFunction'),shown:true};f.exports=l;}),null);
__d('FBPaymentsCartFlowViewBase.react',['React','abstractMethod'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;k.prototype.__shouldShowLoading=function(){return !!this.props.isLoading;};k.prototype.__shouldShowProductConfiguration=function(){return !!this.props.productConfigurationContainer;};k.prototype.__renderBodyContent=function(){if(this.__shouldShowLoading()){return this.__renderLoading();}else if(this.__shouldShowProductConfiguration()){return this.props.productConfigurationContainer;}else return this.props.cartSummaryScreen;};k.prototype.__renderLoading=function(){return c('abstractMethod')('FBPaymentsCartFlowViewBase','__renderLoading');};function k(){h.apply(this,arguments);}k.propTypes={cartSummaryScreen:j.element,isLoading:j.bool,onDialogClose:j.func.isRequired,productConfigurationContainer:j.element,shown:j.bool.isRequired};f.exports=k;}),null);
__d('FBPaymentsCartFlowView.react',['cx','FBPaymentsCartFlowViewBase.react','FBPaymentsLoadingView.react','React','XUIDialog.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=325;i=babelHelpers.inherits(l,c('FBPaymentsCartFlowViewBase.react'));j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.$FBPaymentsCartFlowView1=function(r){if(!r)this.props.onDialogClose();}.bind(this),n;}l.prototype.__renderLoading=function(){return c('React').createElement(c('FBPaymentsLoadingView.react'),{overlay:true,isVisible:true});};l.prototype.render=function(){var m="_xfh"+(!this.props.shown?' '+"hidden_elem":'');return (c('React').createElement(c('XUIDialog.react'),{layerHideOnBlur:false,onToggle:this.$FBPaymentsCartFlowView1,shown:true,width:k},c('React').createElement('div',{className:m},this.__renderBodyContent())));};f.exports=l;}),null);
__d('FBPaymentsCartProductConfigurationContainerBase.react',['invariant','FBPaymentsCartItem','React','abstractMethod'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(m){j.constructor.call(this,m);this.$FBPaymentsCartProductConfigurationContainerBase2=function(){var o=babelHelpers['extends']({},this.props.cartItem,{quantity:this.state.quantity});if(this.props.isCustomItem){o.quantityLimit=this.props.customItemMaxQuantity;var p=this.state.customItemFormData;for(var q=Object.entries(p),r=Array.isArray(q),s=0,q=r?q:q[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var t;if(r){if(s>=q.length)break;t=q[s++];}else{s=q.next();if(s.done)break;t=s.value;}var u=t,v=u[0],w=u[1],x=this.props.customItemFields.get(v);if(x.type==='currency'){o.unitPrice={currency:x.currency,amount:w};}else o[v]=w;}}else if(this.state.priceAmount)o.unitPrice={currency:this.props.cartItem.unitPrice.currency,amount:this.state.priceAmount};var y=new (c('FBPaymentsCartItem'))(o);this.props.onAddItemToCart(y);}.bind(this);this.$FBPaymentsCartProductConfigurationContainerBase3=function(o,p){if(!this.props.isCustomItem)return;this.setState({customItemFormData:o,isAddButtonEnabled:p});}.bind(this);this.$FBPaymentsCartProductConfigurationContainerBase4=function(o,p){if(!this.props.isPriceEditable)return;this.setState({priceAmount:o.price,isAddButtonEnabled:p});}.bind(this);this.$FBPaymentsCartProductConfigurationContainerBase5=function(o){this.setState({quantity:o});}.bind(this);this.assertValidProps(m);var n=m.cartItem?m.cartItem.quantity:1;this.state={customItemFormData:{},isAddButtonEnabled:true,priceAmount:'',quantity:n};}l.prototype.assertValidProps=function(m){!(m.isCustomItem&&m.isPriceEditable)||h(0);if(m.isCustomItem){!!m.customItemFields||h(0);}else !!m.cartItem||h(0);};l.prototype.$FBPaymentsCartProductConfigurationContainerBase1=function(){var m=this.props.cartItem,n=void 0;if(this.props.isCustomItem){n=this.props.customItemMaxQuantity;}else if(m)n=m.quantityLimit;return n;};l.prototype.__getView=function(){return c('abstractMethod')('FBPaymentsCartProductConfigurationContainerBase','__getView');};l.prototype.render=function(){var m=this.__getView();return (c('React').createElement(m,babelHelpers['extends']({},this.state,{cartItem:this.props.cartItem,customItemFields:this.props.customItemFields,isCustomItem:this.props.isCustomItem,isPriceEditable:this.props.isPriceEditable,maxQuantity:this.$FBPaymentsCartProductConfigurationContainerBase1(),onAddItemToCart:this.$FBPaymentsCartProductConfigurationContainerBase2,onCustomItemFormChange:this.$FBPaymentsCartProductConfigurationContainerBase3,onPriceChange:this.$FBPaymentsCartProductConfigurationContainerBase4,onQuantityChange:this.$FBPaymentsCartProductConfigurationContainerBase5})));};l.propTypes={cartItem:k.object,customItemFields:k.object,customItemMaxQuantity:k.number,isCustomItem:k.bool.isRequired,isPriceEditable:k.bool.isRequired,onAddItemToCart:k.func.isRequired};f.exports=l;}),null);
__d('FBPaymentsCartBodyBase.react',['React'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;function j(){h.apply(this,arguments);}f.exports=j;}),null);
__d('FBPaymentsCartBody.react',['cx','FBPaymentsCartBodyBase.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('FBPaymentsCartBodyBase.react'));j=i&&i.prototype;k.prototype.render=function(){return (c('React').createElement('div',{className:"_222z"},this.props.children));};function k(){i.apply(this,arguments);}f.exports=k;}),null);
__d('FBPaymentsCartFooterBase.react',['React'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;function j(){h.apply(this,arguments);}f.exports=j;}),null);
__d('FBPaymentsCartFooter.react',['cx','FBPaymentsCartFooterBase.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('FBPaymentsCartFooterBase.react'));j=i&&i.prototype;k.prototype.render=function(){return (c('React').createElement('div',{className:"_222q"},this.props.children));};function k(){i.apply(this,arguments);}f.exports=k;}),null);
__d('FBPaymentsCartHeaderBase.react',['React'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;function k(){h.apply(this,arguments);}k.propTypes={title:j.node.isRequired};f.exports=k;}),null);
__d('FBPaymentsCartHeader.react',['cx','FBPaymentsCartHeaderBase.react','React','XUIDialogTitle.react','XUIGrayText.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('FBPaymentsCartHeaderBase.react'));j=i&&i.prototype;k.prototype.render=function(){return (c('React').createElement('div',{className:"_1iw9"},c('React').createElement(c('XUIDialogTitle.react'),{className:"_222x"},c('React').createElement(c('XUIGrayText.react'),{className:"_222y",shade:'dark',size:'small'},this.props.title)),this.props.children));};function k(){i.apply(this,arguments);}f.exports=k;}),null);
__d('FBPaymentsCartProductConfigurationViewBase.react',['fbt','PECurrency','PECurrency.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('PECurrency').DEFAULT_AMOUNT_OFFSET,l=c('React').PropTypes;i=babelHelpers.inherits(m,c('React').Component);j=i&&i.prototype;m.prototype.getFormattedItemPrice=function(n){return (c('React').createElement(c('PECurrency.react'),{code:n.currency,value:k*Number(n.amount)}));};m.prototype.getHeaderTitle=function(){if(this.props.isCustomItem)return h._("Add Custom Item");return h._("Select options");};m.prototype.getAddButtonLabel=function(){return h._("Add");};m.prototype.getQuantityLabel=function(){return h._("Quantity");};m.prototype.shouldRenderPriceField=function(){return !this.props.isCustomItem&&this.props.isPriceEditable;};m.prototype.shouldRenderCustomItemForm=function(){return this.props.isCustomItem&&!!this.props.customItemFields;};function m(){i.apply(this,arguments);}m.propTypes={cartItem:l.object,customItemFields:l.object,isAddButtonEnabled:l.bool.isRequired,isCustomItem:l.bool,isPriceEditable:l.bool.isRequired,maxQuantity:l.number,onAddItemToCart:l.func.isRequired,onCustomItemFormChange:l.func.isRequired,onPriceChange:l.func,onQuantityChange:l.func.isRequired,quantity:l.number.isRequired};m.defaultProps={isAddButtonEnabled:true,isPriceEditable:false};f.exports=m;}),null);
__d('FBPaymentsForm.react',['cx','React','emptyFunction','getOwnObjectValues','joinClasses'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(n){j.constructor.call(this,n);m.call(this);var o={},p=this.getChildren(n);c('React').Children.forEach(p,function(q){if(q.props.name)o[q.props.name]={valid:!q.props.required||!!q.props.value,value:q.props.value};});this.state={fields:o};}l.prototype.componentWillMount=function(){var n=this.state.fields,o=this.validateForm(n),p=this.getFormData(n);this.props.onChange(p,o);};l.prototype.render=function(){var n=this.props.className;return (c('React').createElement('div',{className:c('joinClasses')("_53r8",n)},this.renderFormFields()));};l.propTypes={onChange:k.func.isRequired};l.defaultProps={onChange:c('emptyFunction')};var m=function n(){this.handleFormFieldChange=function(o,p,q){var r,s=babelHelpers['extends']({},this.state.fields,(r={},r[o]={errorMessage:q.errorMessage,valid:q.isValid,value:p},r));this.setState({fields:s});var t=this.validateForm(s),u=this.getFormData(s);this.props.onChange(u,t);}.bind(this);this.getChildren=function(o){return c('React').Children.toArray(this.props.children);}.bind(this);this.getFormData=function(o){var p={};Object.keys(o).forEach(function(q){p[q]=o[q].value;});return p;};this.validateForm=function(o){return c('getOwnObjectValues')(o).every(function(p){return p.valid;});};this.renderFormFields=function(){var o=this.getChildren(this.props),p=c('React').Children.map(o,function(q,r){var s=q.props.name;if(s)q=c('React').cloneElement(q,{errorMessage:this.state.fields[s].errorMessage,key:s,onChange:this.handleFormFieldChange,ref:s,value:this.state.fields[s].value});return q;}.bind(this),this);return p;}.bind(this);};f.exports=l;}),null);
__d('FBPaymentsPriceFormField.react',['fbt','FBPaymentsFormField.react','FBPaymentsFormFieldInputConfigs','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;k.prototype.getPlaceholderText=function(){return h._("Price");};k.prototype.render=function(){return (c('React').createElement(c('FBPaymentsFormField.react'),babelHelpers['extends']({config:c('FBPaymentsFormFieldInputConfigs').PRICE_INPUT_CONFIG,placeholder:this.getPlaceholderText()},this.props)));};function k(){i.apply(this,arguments);}f.exports=k;}),null);
__d('FBPaymentsCustomForm.react',['fbt','FBPaymentsForm.react','FBPaymentsFormField.react','FBPaymentsNormalizers','FBPaymentsPriceFormField.react','FBPaymentsValidators','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes,l='currency';i=babelHelpers.inherits(m,c('React').PureComponent);j=i&&i.prototype;m.prototype.renderCustomItemInfoField=function(n){var o={key:n.identifier,name:n.identifier,placeholder:n.placeholderText,required:!n.optional};if(n.type===l)return (c('React').createElement(c('FBPaymentsPriceFormField.react'),babelHelpers['extends']({},o,{currency:n.currency})));var p=[],q=[];if(n.length)p.push(c('FBPaymentsNormalizers').truncate(n.length));if(!n.optional)q.push({validator:c('FBPaymentsValidators').nonEmpty,errorMessage:h._("Required")});return (c('React').createElement(c('FBPaymentsFormField.react'),babelHelpers['extends']({},o,{config:{normalizeOnChange:true,normalizers:p,validations:q}})));};m.prototype.render=function(){return (c('React').createElement(c('FBPaymentsForm.react'),{onChange:this.props.onChange},this.props.fields.map(this.renderCustomItemInfoField)));};function m(){i.apply(this,arguments);}m.propTypes={fields:k.array.isRequired,onChange:k.func.isRequired};f.exports=m;}),null);
__d('FBPaymentsCartProductConfigurationView.react',['cx','AdsIncrementalNumberInput.react','FBPaymentsCartBody.react','FBPaymentsCartFooter.react','FBPaymentsCartHeader.react','FBPaymentsCartProductConfigurationViewBase.react','FBPaymentsCustomForm.react','FBPaymentsForm.react','FBPaymentsItemSummaryView.react','FBPaymentsPriceFormField.react','React','XUIButton.react','XUIGrayText.react','idx'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=1,l=48;i=babelHelpers.inherits(m,c('FBPaymentsCartProductConfigurationViewBase.react'));j=i&&i.prototype;m.prototype.renderProductHeader=function(){var n=this.props.cartItem;if(this.props.isCustomItem||!n)return null;var o=void 0;if(!this.props.isPriceEditable)o=c('React').createElement('div',{className:"_1i26 _3-9b"},c('React').createElement(c('XUIGrayText.react'),{shade:'dark',size:'small'},this.getFormattedItemPrice(n.unitPrice)));var p=c('React').createElement(c('XUIGrayText.react'),{className:"_222y",display:'block',shade:'dark',size:'small'},n.title),q=c('React').createElement(c('XUIGrayText.react'),{display:'block',shade:'dark',size:'small'},n.subtitle);return (c('React').createElement('div',{className:"_36ny"},c('React').createElement(c('FBPaymentsItemSummaryView.react'),{imageSrc:n.imageURL||'',imageHeight:l,imageWidth:l,rightContent:o},p,q)));};m.prototype.renderCustomItemForm=function(){if(!this.shouldRenderCustomItemForm()||!this.props.customItemFields)return null;return (c('React').createElement(c('FBPaymentsCustomForm.react'),{fields:Array.from(this.props.customItemFields.values()),onChange:this.props.onCustomItemFormChange}));};m.prototype.renderPriceField=function(){var n,o;if(!this.shouldRenderPriceField())return null;var p=(n=this.props.cartItem)!=null?(o=n.unitPrice)!=null?o.amount:o:n;return (c('React').createElement(c('FBPaymentsForm.react'),{onChange:this.props.onPriceChange},c('React').createElement(c('FBPaymentsPriceFormField.react'),{className:"_3-96",name:'price',value:p})));};m.prototype.renderQuantitySelector=function(){var n=c('React').createElement(c('XUIGrayText.react'),{className:"_3-94 _4px8",display:'block',shade:'dark',size:'small'},this.getQuantityLabel());return (c('React').createElement('div',null,n,c('React').createElement(c('AdsIncrementalNumberInput.react'),{arrowStyle:'dark',max:this.props.maxQuantity||undefined,min:k,onChange:this.props.onQuantityChange,showDisabled:true,value:this.props.quantity})));};m.prototype.renderProductConfigurations=function(){return (c('React').createElement('div',null,this.renderPriceField(),this.renderCustomItemForm(),this.renderQuantitySelector()));};m.prototype.render=function(){return (c('React').createElement('div',null,c('React').createElement(c('FBPaymentsCartHeader.react'),{title:this.getHeaderTitle()}),c('React').createElement(c('FBPaymentsCartBody.react'),null,this.renderProductHeader(),c('React').createElement('div',{className:"_2ph_"},this.renderProductConfigurations())),c('React').createElement(c('FBPaymentsCartFooter.react'),null,c('React').createElement(c('XUIButton.react'),{className:"_222r",disabled:!this.props.isAddButtonEnabled,label:this.getAddButtonLabel(),size:'large',onClick:this.props.onAddItemToCart,use:'confirm'}))));};function m(){i.apply(this,arguments);}f.exports=m;}),null);
__d('FBPaymentsCartProductConfigurationContainer.react',['FBPaymentsCartProductConfigurationContainerBase.react','FBPaymentsCartProductConfigurationView.react'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FBPaymentsCartProductConfigurationContainerBase.react'));i=h&&h.prototype;j.prototype.__getView=function(){return c('FBPaymentsCartProductConfigurationView.react');};function j(){h.apply(this,arguments);}f.exports=j;}),null);
__d('FBPaymentsCartProductSearchContainerBase.react',['React','abstractMethod'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;k.prototype.__getView=function(){return c('abstractMethod')('FBPaymentsCartProductSearchContainerBase','__getView');};k.prototype.render=function(){var l=this.__getView();return (c('React').createElement(l,this.props));};function k(){h.apply(this,arguments);}k.propTypes={canCreateCustomItem:j.bool.isRequired,onCartItemSelected:j.func.isRequired,onCreateCustomItem:j.func,sellerID:j.string.isRequired};f.exports=k;}),null);
__d('FBPaymentsCartProductSearchViewBase.react',['React'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;function k(){h.apply(this,arguments);}k.propTypes={canCreateCustomItem:j.bool.isRequired,onCartItemSelected:j.func.isRequired,onCreateCustomItem:j.func,sellerID:j.string.isRequired};f.exports=k;}),null);
__d('FBPaymentsCartProductSearchView.react',['CommerceProductItemSearchSelector.react','FBPaymentsCartItem','FBPaymentsCartProductSearchViewBase.react','React'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FBPaymentsCartProductSearchViewBase.react'));i=h&&h.prototype;function j(){var k,l;for(var m=arguments.length,n=Array(m),o=0;o<m;o++)n[o]=arguments[o];return l=(k=i.constructor).call.apply(k,[this].concat(n)),this.$FBPaymentsCartProductSearchView1=function(p){var q=p[0],r=q.current_price,s=q.description,t=q.id,u=q.image_url,v=q.inventory,w=q.name,x=new (c('FBPaymentsCartItem'))({id:t,imageURL:u,isSelectable:true,quantity:1,quantityLimit:v,subtitle:s,title:w,unitPrice:{amount:r.raw_label,currency:r.currency}});this.props.onCartItemSelected(x);}.bind(this),l;}j.prototype.render=function(){return (c('React').createElement(c('CommerceProductItemSearchSelector.react'),{canCreateProduct:this.props.canCreateCustomItem,onAddProductClick:this.props.onCreateCustomItem,onProductSelected:this.$FBPaymentsCartProductSearchView1,pageID:this.props.sellerID,productScrollAreaHeight:250,showAsDropdownMenu:true}));};f.exports=j;}),null);
__d('FBPaymentsCartProductSearchContainer.react',['FBPaymentsCartProductSearchContainerBase.react','FBPaymentsCartProductSearchView.react'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FBPaymentsCartProductSearchContainerBase.react'));i=h&&h.prototype;j.prototype.__getView=function(){return c('FBPaymentsCartProductSearchView.react');};function j(){h.apply(this,arguments);}f.exports=j;}),null);
__d('FBPaymentsCartItemSummaryBase.react',['fbt','PECurrency','PECurrency.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('PECurrency').DEFAULT_AMOUNT_OFFSET,l=c('React').PropTypes;i=babelHelpers.inherits(m,c('React').Component);j=i&&i.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=j.constructor).call.apply(n,[this].concat(q)),this.PRODUCT_IMAGE_SIZE=48,this.handleEditClick=function(){this.props.onEdit(this.props.cartItemKey);}.bind(this),this.handleRemoveClick=function(){this.props.onRemove(this.props.cartItemKey);}.bind(this),o;}m.prototype.getFormattedPrice=function(n){return (c('React').createElement(c('PECurrency.react'),{code:n.currency,value:k*Number(n.amount)}));};m.prototype.getQuantityDescription=function(){var n=this.props.cartItem;if(n.quantity>1)return h._("Quantity: {quantity} ({unit_price} ea)",[h.param('quantity',n.quantity),h.param('unit_price',this.getFormattedPrice(n.unitPrice))]);return h._("Quantity: {quantity}",[h.param('quantity',n.quantity)]);};m.prototype.getEditLabel=function(){return h._("Edit");};m.prototype.getRemoveLabel=function(){return h._("Remove");};m.propTypes={cartItem:l.object.isRequired,cartItemKey:l.number.isRequired,onEdit:l.func.isRequired,onRemove:l.func.isRequired};f.exports=m;}),null);
__d('FBPaymentsCartItemSummary.react',['cx','FBPaymentsCartItemSummaryBase.react','FBPaymentsItemSummaryView.react','Link.react','React','XUIGrayText.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('FBPaymentsCartItemSummaryBase.react'));j=i&&i.prototype;k.prototype.render=function(){var l=this.props.cartItem,m=c('React').createElement(c('XUIGrayText.react'),{className:"_486y",display:'block',shade:'dark',size:'small'},l.title),n=c('React').createElement(c('XUIGrayText.react'),{display:'block',shade:'dark',size:'small'},this.getQuantityDescription()),o=c('React').createElement(c('XUIGrayText.react'),{className:"_3-9a",shade:'light',size:'small'},this.getFormattedPrice(l.getPrice())),p=c('React').createElement('div',{className:"_3-8w"},c('React').createElement(c('Link.react'),{className:"_3-90",onClick:this.handleEditClick},this.getEditLabel()),c('React').createElement(c('Link.react'),{onClick:this.handleRemoveClick},this.getRemoveLabel()));return (c('React').createElement(c('FBPaymentsItemSummaryView.react'),{className:"_36ny",imageSrc:l.imageURL||'',imageHeight:this.PRODUCT_IMAGE_SIZE,imageWidth:this.PRODUCT_IMAGE_SIZE,rightContent:o},m,n,p));};function k(){i.apply(this,arguments);}f.exports=k;}),null);
__d('FBPaymentsCartSummaryScreenBase.react',['fbt','PECurrency','PECurrency.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('PECurrency').DEFAULT_AMOUNT_OFFSET,l=c('React').PropTypes;i=babelHelpers.inherits(m,c('React').Component);j=i&&i.prototype;m.prototype.shouldShowSearchBar=function(){return !!this.props.productSearchContainer;};m.prototype.getFormattedPrice=function(n){return (c('React').createElement(c('PECurrency.react'),{code:n.currency,value:k*Number(n.amount)}));};m.prototype.getSubtotalLabel=function(){return h._("Subtotal");};m.prototype.getScreenTitle=function(){return this.props.title;};m.prototype.getDisabledButtonText=function(){return h._("No products selected");};m.prototype.getContinueButtonText=function(){return (this.props.continueButtonLabel||h._("Continue"));};m.prototype.getButtonText=function(){return this.props.isContinueButtonDisabled?this.getDisabledButtonText():this.getContinueButtonText();};function m(){i.apply(this,arguments);}m.propTypes={cartItems:l.oneOfType([l.arrayOf(l.shape({id:l.string.isRequired})),l.object.isRequired]),continueButtonLabel:l.node,isContinueButtonDisabled:l.bool.isRequired,onContinueButtonClicked:l.func,onEditCartItem:l.func.isRequired,onRemoveCartItem:l.func.isRequired,productSearchContainer:l.element,subtotal:l.object.isRequired,title:l.node.isRequired};f.exports=m;}),null);
__d('FBPaymentsCartSummaryScreen.react',['cx','FBPaymentsCartBody.react','FBPaymentsCartFooter.react','FBPaymentsCartHeader.react','FBPaymentsCartItemSummary.react','FBPaymentsCartSummaryScreenBase.react','LeftRight.react','React','ScrollableArea.react','XUIButton.react','XUIGrayText.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=304;i=babelHelpers.inherits(l,c('FBPaymentsCartSummaryScreenBase.react'));j=i&&i.prototype;l.prototype.$FBPaymentsCartSummaryScreen1=function(){if(!this.shouldShowSearchBar())return null;return (c('React').createElement('div',{className:"_222p"},this.props.productSearchContainer));};l.prototype.$FBPaymentsCartSummaryScreen2=function(){var m=this.props.cartItems.map(function(n,o){return (c('React').createElement(c('FBPaymentsCartItemSummary.react'),{cartItem:n,cartItemKey:o,key:o,onEdit:this.props.onEditCartItem,onRemove:this.props.onRemoveCartItem}));}.bind(this));return (c('React').createElement(c('ScrollableArea.react'),{fade:true,height:k,shadow:false},m));};l.prototype.render=function(){return (c('React').createElement('div',null,c('React').createElement(c('FBPaymentsCartHeader.react'),{title:this.getScreenTitle()},this.$FBPaymentsCartSummaryScreen1()),c('React').createElement(c('FBPaymentsCartBody.react'),null,this.$FBPaymentsCartSummaryScreen2()),c('React').createElement(c('FBPaymentsCartFooter.react'),null,c('React').createElement(c('LeftRight.react'),{className:"_3-96"},c('React').createElement(c('XUIGrayText.react'),{display:'block',shade:'dark'},this.getSubtotalLabel()),c('React').createElement(c('XUIGrayText.react'),{display:'block',shade:'dark'},this.getFormattedPrice(this.props.subtotal))),c('React').createElement(c('XUIButton.react'),{className:"_222r",disabled:this.props.isContinueButtonDisabled,label:this.getButtonText(),size:'large',onClick:this.props.onContinueButtonClicked,use:'confirm'}))));};function l(){i.apply(this,arguments);}f.exports=l;}),null);
__d('FBPaymentsCartFlowContainer.react',['FBPaymentsCartFlowContainerBase.react','FBPaymentsCartFlowView.react','FBPaymentsCartProductConfigurationContainer.react','FBPaymentsCartProductSearchContainer.react','FBPaymentsCartSummaryScreen.react'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FBPaymentsCartFlowContainerBase.react'));i=h&&h.prototype;j.prototype.__getCartFlowView=function(){return c('FBPaymentsCartFlowView.react');};j.prototype.__getCartSummaryScreen=function(){return c('FBPaymentsCartSummaryScreen.react');};j.prototype.__getCartProductConfigurationContainer=function(){return c('FBPaymentsCartProductConfigurationContainer.react');};j.prototype.__getProductSearchContainer=function(){return c('FBPaymentsCartProductSearchContainer.react');};j.prototype.render=function(){return i.render.call(this);};function j(){h.apply(this,arguments);}j.propTypes=babelHelpers['extends']({},c('FBPaymentsCartFlowContainerBase.react').propTypes);f.exports=j;}),null);
__d('FBPaymentsLoggerConstants',[],(function a(b,c,d,e,f,g){'use strict';var h={LoggerFlowType:{CHECKOUT:'checkout'},LoggerFlowStep:{ADD_CARD:'add_card',CHECKOUT:'checkout',PAYMENT:'payment',SELECT_PAYMENT_METHOD:'select_payment_method'},LoggerEvent:{INIT:'init',SUCCESS:'success',FAIL:'fail',CANCEL:'cancel',SAVE_CLICK:'save_click',TERMS_CLICK:'terms_click'}};f.exports=h;}),null);
__d('FBPaymentsModulesFlowType',[],(function a(b,c,d,e,f,g){'use strict';var h={CART:'cart',CHECKOUT:'checkout',INVOICE:'invoice',RECEIPT:'receipt'};f.exports=h;}),null);
__d('FBPaymentsStringHelper',['React'],(function a(b,c,d,e,f,g){'use strict';var h={stringToMarkup:function i(j){return (c('React').createElement('span',null,j.split('\n').map(function(k,l){return (c('React').createElement('span',{key:l},k,c('React').createElement('br',null)));})));}};f.exports=h;}),null);
__d('FBPaymentsCheckoutFlowContainerBase.react',['invariant','FBPaymentsCheckoutConfigurationTypes','FBPaymentsCheckoutConstants','FBPaymentsContentConfigurationParser','FBPaymentsLinkHelper','FBPaymentsLoggerConstants','FBPaymentsModulesAPIUtils','FBPaymentsModulesFlowType','FBPaymentsPriceListHelper','FBPaymentsStringHelper','Map','React','Set','abstractMethod','guid','idx','keyMirror'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('FBPaymentsCheckoutConfigurationTypes').CheckoutConfigurationPropTypes,l=c('FBPaymentsCheckoutConstants').CollectedDataKey,m=c('FBPaymentsCheckoutConstants').Extensions,n=c('FBPaymentsCheckoutConstants').OrderStatusModelType,o=c('FBPaymentsCheckoutConstants').PaymentAction,p=c('FBPaymentsCheckoutConstants').PaymentCallbackUpdateState,q=c('FBPaymentsLoggerConstants').LoggerFlowType,r=c('FBPaymentsLoggerConstants').LoggerFlowStep,s=c('FBPaymentsLoggerConstants').LoggerEvent,t=c('React').PropTypes,u=c('keyMirror')({INCOMPLETE:null,READY_TO_PAY:null,VERIFICATION:null,PAYMENT_LOADING:null,PAYMENT_LOADING_EXTENDED:null,CONFIRMATION:null});i=babelHelpers.inherits(v,c('React').Component);j=i&&i.prototype;function v(x){var y,z,aa;j.constructor.call(this,x);w.call(this);this.validateProps(x);var ba=x.configuration.contentConfiguration,ca=(y=ba)!=null?y.priceList:y;this.$FBPaymentsCheckoutFlowContainerBase1=ca?ca:[];var da=this.__getLogger();this.$FBPaymentsCheckoutFlowContainerBase3=new da();this.$FBPaymentsCheckoutFlowContainerBase3.setGlobalFields({session_id:c('guid')(),product:x.configuration.paymentInfo.paymentItemType,flow_name:q.CHECKOUT});this.$FBPaymentsCheckoutFlowContainerBase3.setGlobalExtraData(this.props.extraDataForLogging||{});this.$FBPaymentsCheckoutFlowContainerBase3.setFlowStep(r.CHECKOUT).setEventName(s.INIT).log();var ea=new (c('Map'))(),fa=((z=ba)!=null?z.purchaseInfo:z)||[];for(var ga=0;ga<fa.length;ga++){var ha=this.getExtensionName(fa[ga]);ea.set(ha,{extraData:{},ready:false});}this.state={activeExtension:null,activeExtensionForVerification:null,confirmationExtensions:new (c('Map'))(),contentConfiguration:ba,dialogWidth:(aa=ba)!=null?aa.dialogWidth:aa,errors:{},extensions:ea,paymentLoadingMessage:'',step:u.INCOMPLETE};}v.prototype.validateProps=function(x){var y=x.paymentModuleFlowType===c('FBPaymentsModulesFlowType').CHECKOUT;if(y)!x.paymentModuleDialogTitle||h(0);var z=x.configuration,aa=z.orderStatusModel.type;switch(aa){case n.FIXED_AMOUNT:!!z.contentConfiguration||h(0);break;case n.UPDATE_CHECKOUT_API:break;default:h(0);}};v.prototype.getExtensionName=function(x){if(x.identifier==='CUSTOM_EXTENSION')return x.extensionKey;return x.identifier;};v.prototype.getCheckoutConfiguration=function(){return this.props.configuration;};v.prototype.getPaymentInfo=function(){return this.props.configuration.paymentInfo;};v.prototype.getContentConfiguration=function(){return this.state.contentConfiguration;};v.prototype.getPriceList=function(){var x=this.getContentConfiguration();return x&&x.priceList;};v.prototype.getPayActionContent=function(){var x=this.getContentConfiguration();return x&&x.payActionContent;};v.prototype.getConfirmationConfiguration=function(){var x=this.getContentConfiguration();return x&&x.confirmationConfiguration||{};};v.prototype.getSelectedPaymentMethod=function(){var x,y,z=this.state.extensions.get(m.PAYMENT_METHOD);return (x=z)!=null?(y=x.extraData)!=null?y.paymentMethod:y:x;};v.prototype.componentWillMount=function(){this.$FBPaymentsCheckoutFlowContainerBase4();};v.prototype.$FBPaymentsCheckoutFlowContainerBase4=function(){if(this.getCheckoutConfiguration().orderStatusModel.type===n.UPDATE_CHECKOUT_API)this.$FBPaymentsCheckoutFlowContainerBase5();};v.prototype.$FBPaymentsCheckoutFlowContainerBase5=function(){var x,y=this.getPaymentInfo(),z={payment_type:y.paymentItemType,order_id:y.orderId,receiver_id:y.receiverId},aa=y.extraData||{};for(var ba=this.state.extensions.entries(),ca=Array.isArray(ba),da=0,ba=ca?ba:ba[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var ea;if(ca){if(da>=ba.length)break;ea=ba[da++];}else{da=ba.next();if(da.done)break;ea=da.value;}var fa=ea,ga=fa[0],ha=fa[1];switch(ga){case m.PAYMENT_METHOD:var ia=c('FBPaymentsModulesAPIUtils').getPaymentMethodRequestParams(ha.extraData.paymentMethod);z=babelHelpers['extends']({},z,ia);break;case m.SHIPPING_ADDRESS:z.mailing_address_id=ha.extraData.mailingAddressID;break;case m.CUSTOM_OPTIONS:var ja=ha.extraData.collectedDataKey,ka=ha.extraData.optionId;switch(ja){case l.SHIPPING_OPTION:z.shipping_option_id=ka;break;default:aa=babelHelpers['extends']({},aa,(x={},x[ja]=ka,x));}break;}}z.extra_data=JSON.stringify(aa);this.__getAPI().updateCheckout(z,this.$FBPaymentsCheckoutFlowContainerBase6,this.$FBPaymentsCheckoutFlowContainerBase7);};v.prototype.$FBPaymentsCheckoutFlowContainerBase7=function(x){};v.prototype.$FBPaymentsCheckoutFlowContainerBase9=function(x){switch(x){case m.SHIPPING_ADDRESS:case m.PAYMENT_METHOD:return true;default:return false;}};v.prototype.$FBPaymentsCheckoutFlowContainerBase8=function(x){x=x||this.state.extensions;var y=[];for(var z=x.values(),aa=Array.isArray(z),ba=0,z=aa?z:z[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var ca;if(aa){if(ba>=z.length)break;ca=z[ba++];}else{ba=z.next();if(ba.done)break;ca=ba.value;}var da=ca,ea=da.extraData.optionPriceList;if(ea)y.push(ea);}var fa=this.$FBPaymentsCheckoutFlowContainerBase10(this.$FBPaymentsCheckoutFlowContainerBase1,y);return fa;};v.prototype.$FBPaymentsCheckoutFlowContainerBase10=function(x,y){var z=x;y.forEach(function(aa){z=c('FBPaymentsPriceListHelper').merge(z,aa);});return z;};v.prototype.handleExtensionRequestActive=function(x,y){var z={};if(y&&this.state.activeExtension===null){z.activeExtension=x;}else if(this.state.activeExtension===x)z.activeExtension=null;this.setState(z);};v.prototype.handleExtensionRequestActiveForVerification=function(x,y){var z={};z.step=u.READY_TO_PAY;if(y&&this.state.activeExtensionForVerification===null){z.activeExtensionForVerification=x;}else if(this.state.activeExtensionForVerification===x)z.activeExtensionForVerification=null;this.setState(z);};v.prototype.handleExtensionUpdate=function(x,y){var z={extensions:this.state.extensions};z.extensions.set(x,y);switch(this.state.step){case u.INCOMPLETE:case u.READY_TO_PAY:z.step=u.READY_TO_PAY;for(var aa=z.extensions.values(),ba=Array.isArray(aa),ca=0,aa=ba?aa:aa[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var da;if(ba){if(ca>=aa.length)break;da=aa[ca++];}else{ca=aa.next();if(ca.done)break;da=ca.value;}var ea=da;if(!ea.ready){z.step=u.INCOMPLETE;break;}}if(x===m.CUSTOM_OPTIONS)if(!y.extraData.priceModel){var fa=this.$FBPaymentsCheckoutFlowContainerBase8(z.extensions),ga=this.getContentConfiguration();if(ga){ga.priceList=fa;z.contentConfiguration=ga;}}this.setState(z,function(){if(this.$FBPaymentsCheckoutFlowContainerBase9(x))this.$FBPaymentsCheckoutFlowContainerBase4();}.bind(this));break;case u.VERIFICATION:this.$FBPaymentsCheckoutFlowContainerBase2['delete'](x);for(var ha=this.$FBPaymentsCheckoutFlowContainerBase2,ia=Array.isArray(ha),ja=0,ha=ia?ha:ha[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var ka;if(ia){if(ja>=ha.length)break;ka=ha[ja++];}else{ja=ha.next();if(ja.done)break;ka=ja.value;}var la=ka;this.setState({activeExtensionForVerification:la,step:u.VERIFICATION});return;}z.activeExtensionForVerification=null;this.setState(z,function(){this.$FBPaymentsCheckoutFlowContainerBase11();}.bind(this));break;}};v.prototype.$FBPaymentsCheckoutFlowContainerBase16=function(){var x,y=(x=this.getContentConfiguration())!=null?x.checkoutClosedCallback:x;y&&y();var z=this.props.onCheckoutClosed;z&&z();};v.prototype.$FBPaymentsCheckoutFlowContainerBase15=function(x){var y=this.getConfirmationConfiguration().confirmationClosedCallback;y&&y(x,this.state.confirmationExtensions);var z=this.props.onConfirmationClosed;z&&z(x,this.state.confirmationExtensions);};v.prototype.$FBPaymentsCheckoutFlowContainerBase11=function(){var x=this.getPaymentInfo();if(x.action===o.CUSTOM_CALLBACK){x.payCallback!=null||h(0);x.payCallback(this.state.extensions,this.$FBPaymentsCheckoutFlowContainerBase12);}else this.$FBPaymentsCheckoutFlowContainerBase19();this.setState({activeExtension:null,step:u.PAYMENT_LOADING});};v.prototype.$FBPaymentsCheckoutFlowContainerBase19=function(){var x,y,z=this.getPaymentInfo(),aa={action:z.action,payment_type:z.paymentItemType,receiver_id:z.receiverId,order_id:z.orderId},ba=z.extraData||{};for(var ca=this.state.extensions.entries(),da=Array.isArray(ca),ea=0,ca=da?ca:ca[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var fa;if(da){if(ea>=ca.length)break;fa=ca[ea++];}else{ea=ca.next();if(ea.done)break;fa=ea.value;}var ga=fa,ha=ga[0],ia=ga[1];switch(ha){case m.PAYMENT_METHOD:var ja=c('FBPaymentsModulesAPIUtils').getPaymentMethodRequestParams(ia.extraData.paymentMethod);aa=babelHelpers['extends']({},aa,ja);if(ia.verificationData)aa.csc=ia.verificationData.csc;break;case m.CONTACT_NAME:aa.contact_name=ia.extraData.name;break;case m.CONTACT_EMAIL:aa.email_address_id=ia.extraData.id;break;case m.CONTACT_PHONE:aa.contact_number_id=ia.extraData.id;break;case m.PIN_VERIFICATION:if(ia.verificationData)aa.pin=ia.verificationData.pin;break;case m.PRICE_SELECTOR:aa.amount=c('FBPaymentsPriceListHelper').formatStringAmount(Number(ia.extraData.selectedAmount));aa.currency=ia.extraData.currency;break;case m.SHIPPING_ADDRESS:aa.mailing_address_id=ia.extraData.mailingAddressID;break;case m.CUSTOM_OPTIONS:var ka=ia.extraData.collectedDataKey,la=ia.extraData.optionId;switch(ka){case l.SHIPPING_OPTION:aa.shipping_option_id=la;break;default:ba=babelHelpers['extends']({},ba,(x={},x[ka]=la,x));}break;default:ba=babelHelpers['extends']({},ba,(y={},y[ha]=ia.extraData,y));break;}}var ma=this.getPriceList();if(!aa.currency||!aa.amount){!!ma||h(0);var na=c('FBPaymentsPriceListHelper').calculateTotal(ma);aa.currency=na.currency;aa.amount=c('FBPaymentsPriceListHelper').formatStringAmount(na.amount);}aa.extra_data=JSON.stringify(ba);this.$FBPaymentsCheckoutFlowContainerBase3.setFlowStep(r.PAYMENT).setEventName(s.INIT).setPaymentMethodID(aa.credential_id).setMailingAddressID(aa.mailing_address_id).setShippingOptionID(aa.shipping_option_id).setRawAmount(aa.amount).setCurrency(aa.currency).updateExtraData(ba).log();this.__getAPI().completeCheckout(aa,this.$FBPaymentsCheckoutFlowContainerBase20,this.$FBPaymentsCheckoutFlowContainerBase21);};v.prototype.$FBPaymentsCheckoutFlowContainerBase22=function(x,y){var z,aa,ba,ca,da,ea=y||this.getConfirmationConfiguration();ea.receiptUrl=((z=this.props.checkoutExtraProps)!=null?z.receiptUrl:z)||((aa=x)!=null?(ba=aa.extra_data)!=null?ba.receipt_url:ba:aa)||c('FBPaymentsLinkHelper').getPaymentSettingsReceiptURI(x.id).toString();var fa=(ca=x)!=null?(da=ca.extra_data)!=null?da.message_with_email:da:ca;if(fa)ea.confirmationText=c('FBPaymentsStringHelper').stringToMarkup(fa);var ga=this.getContentConfiguration();ga||h(0);ga.confirmationConfiguration=ea;this.setState({contentConfiguration:ga,step:u.CONFIRMATION});};v.prototype.$FBPaymentsCheckoutFlowContainerBase25=function(x,y,z){var aa=this.getExtensionName(x),ba=x.identifier==='CUSTOM_EXTENSION'?x['class']:this.__getExtensionManager().getExtensionContainer(x.identifier);return (c('React').createElement(ba,{checkoutConfiguration:this.getCheckoutConfiguration(),checkoutExtraProps:this.props.checkoutExtraProps,extensionConfiguration:x,extensionState:this.state.extensions.get(aa),isActive:y,isActiveForVerification:z,logger:this.$FBPaymentsCheckoutFlowContainerBase3,onExtensionUpdate:function(ca){this.handleExtensionUpdate(aa,ca);}.bind(this),onExtensionWidthChange:this.$FBPaymentsCheckoutFlowContainerBase24,onRequestActive:function(ca){this.handleExtensionRequestActive(aa,ca);}.bind(this),onRequestActiveForVerification:function(ca){this.handleExtensionRequestActiveForVerification(aa,ca);}.bind(this)}));};v.prototype.render=function(){var x=this.getContentConfiguration(),y=void 0,z=void 0,aa=void 0,ba=void 0,ca=[],da=void 0,ea=false,fa=false,ga=!!x&&x.renderInline;if(!x){var ha=this.__getLoadingContainer();y=c('React').createElement(ha,{loadingText:''});}else{var ia=x.priceList,ja=x.payActionContent,ka=x.entity;if(ka){var la=this.__getEntityHeaderContainer();z=c('React').createElement(la,{entity:ka});}else{var ma=this.__getOrderSummaryContainer();z=c('React').createElement(ma,{configuration:x});}if(ia){var na=this.__getPriceTableContainer();aa=c('React').createElement(na,{configuration:{priceList:ia}});}var oa=this.__getPayActionRowContainer();ba=c('React').createElement(oa,{backButton:ja.backButton,configuration:ja,isLoading:this.state.step===u.PAYMENT_LOADING,onBackButtonClick:this.$FBPaymentsCheckoutFlowContainerBase13,onPayButtonClick:this.$FBPaymentsCheckoutFlowContainerBase18,payButtonEnabled:this.state.step===u.READY_TO_PAY});ea=this.state.activeExtension!==null;fa=this.state.activeExtensionForVerification!==null;var pa=x.purchaseInfo;for(var qa=0;qa<pa.length;qa++){var ra=pa[qa],sa=this.getExtensionName(ra),ta=this.state.activeExtension===sa,ua=this.state.activeExtensionForVerification===sa,va=ea&&!ta||fa&&!ua;ca.push(c('React').createElement('div',{style:{display:va?'none':''},key:sa},this.$FBPaymentsCheckoutFlowContainerBase25(ra,ta,ua)));}if(this.state.step===u.PAYMENT_LOADING_EXTENDED){var wa=this.__getLoadingContainer();y=c('React').createElement(wa,{loadingText:this.state.paymentLoadingMessage});}if(this.state.step===u.CONFIRMATION){var xa=this.__getConfirmationContainer();da=c('React').createElement(xa,{configuration:this.getConfirmationConfiguration(),onConfirmationDoneClick:this.$FBPaymentsCheckoutFlowContainerBase15.bind(this,true),onExtensionsUpdate:this.$FBPaymentsCheckoutFlowContainerBase17});}}var ya=this.__getCheckoutFlowView();return (c('React').createElement(ya,{confirmationContainer:da,dialogTitle:this.props.paymentModuleDialogTitle,dialogWidth:this.state.dialogWidth||undefined,disableClose:this.state.step===u.PAYMENT_LOADING||this.state.step===u.PAYMENT_LOADING_EXTENDED,errorMessage:this.state.errors.global,additionalErrors:this.state.errors.additional,extensionContainers:ca,renderInline:ga,isExtensionActive:ea,isExtensionActiveForVerification:fa,loadingContainer:y,onBackButtonClick:this.$FBPaymentsCheckoutFlowContainerBase13,onDialogClose:this.$FBPaymentsCheckoutFlowContainerBase14,orderSummaryContainer:z,payActionRowContainer:ba,priceTableContainer:aa}));};v.prototype.__getExtensionManager=function(){return c('abstractMethod')('FBPaymentsCheckoutFlowContainerBase','__getExtensionManager');};v.prototype.__getCheckoutFlowView=function(){return c('abstractMethod')('FBPaymentsCheckoutFlowContainerBase','__getCheckoutFlowView');};v.prototype.__getLoadingContainer=function(){return c('abstractMethod')('FBPaymentsCheckoutFlowContainerBase','__getLoadingContainer');};v.prototype.__getConfirmationContainer=function(){return c('abstractMethod')('FBPaymentsCheckoutFlowContainerBase','__getConfirmationContainer');};v.prototype.__getOrderSummaryContainer=function(){return c('abstractMethod')('FBPaymentsCheckoutFlowContainerBase','__getOrderSummaryContainer');};v.prototype.__getEntityHeaderContainer=function(){return c('abstractMethod')('FBPaymentsCheckoutFlowContainerBase','__getEntityHeaderContainer');};v.prototype.__getPayActionRowContainer=function(){return c('abstractMethod')('FBPaymentsCheckoutFlowContainerBase','__getPayActionRowContainer');};v.prototype.__getPriceTableContainer=function(){return c('abstractMethod')('FBPaymentsCheckoutFlowContainerBase','__getPriceTableContainer');};v.prototype.__getAPI=function(){return c('abstractMethod')('FBPaymentsCheckoutFlowContainerBase','__getAPI');};v.prototype.__getLogger=function(){return c('abstractMethod')('FBPaymentsCheckoutFlowContainerBase','__getLogger');};v.propTypes={checkoutExtraProps:t.object,configuration:k.isRequired,extraDataForLogging:t.object,onCheckoutClosed:t.func,onCheckoutSuccessCallback:t.func,onConfirmationClosed:t.func,paymentModuleDialogTitle:t.node,paymentModuleFlowType:t.oneOf(Object.values(c('FBPaymentsModulesFlowType'))).isRequired};v.defaultProps={paymentModuleFlowType:c('FBPaymentsModulesFlowType').CHECKOUT};var w=function x(){this.$FBPaymentsCheckoutFlowContainerBase6=function(y){var z=this.getCheckoutConfiguration().version,aa=c('FBPaymentsContentConfigurationParser').parse(z,y),ba=aa.priceList;if(ba){this.$FBPaymentsCheckoutFlowContainerBase1=ba;var ca=this.$FBPaymentsCheckoutFlowContainerBase8();aa.priceList=ca;}this.setState({contentConfiguration:aa});}.bind(this);this.$FBPaymentsCheckoutFlowContainerBase12=function(y){switch(y.state){case p.LOADING:this.setState({paymentLoadingMessage:y.loadingMessage||'',step:u.PAYMENT_LOADING_EXTENDED});break;case p.DONE:this.$FBPaymentsCheckoutFlowContainerBase3.setFlowStep(r.PAYMENT).setEventName(s.SUCCESS).log();var z={step:u.CONFIRMATION};if(y.confirmationConfiguration){var aa=this.state.contentConfiguration;aa||h(0);aa.confirmationConfiguration=y.confirmationConfiguration;z=babelHelpers['extends']({},z,{contentConfiguration:aa});}this.setState(z);break;case p.ERROR:this.$FBPaymentsCheckoutFlowContainerBase3.setFlowStep(r.PAYMENT).setEventName(s.FAIL).setErrorMessage(y.errorMessage).log();this.setState({errors:{global:y.errorMessage,additional:y.additionalErrors},step:u.READY_TO_PAY});break;default:throw Error('Invalid payment callback state: '+y.state);}}.bind(this);this.$FBPaymentsCheckoutFlowContainerBase13=function(){var y,z=(y=this.getPayActionContent())!=null?y.backButtonCallback:y;z&&z();}.bind(this);this.$FBPaymentsCheckoutFlowContainerBase14=function(){if(this.state.step===u.CONFIRMATION){this.$FBPaymentsCheckoutFlowContainerBase15(false);return;}this.$FBPaymentsCheckoutFlowContainerBase16();}.bind(this);this.$FBPaymentsCheckoutFlowContainerBase17=function(y){this.setState({confirmationExtensions:y});}.bind(this);this.$FBPaymentsCheckoutFlowContainerBase18=function(){this.setState({errors:{},activeExtension:null});var y=new (c('Set'))();for(var z=this.state.extensions.entries(),aa=Array.isArray(z),ba=0,z=aa?z:z[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var ca;if(aa){if(ba>=z.length)break;ca=z[ba++];}else{ba=z.next();if(ba.done)break;ca=ba.value;}var da=ca,ea=da[0],fa=da[1];if(fa.needVerification)y.add(ea);}this.$FBPaymentsCheckoutFlowContainerBase2=y;for(var ga=y,ha=Array.isArray(ga),ia=0,ga=ha?ga:ga[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var ja;if(ha){if(ia>=ga.length)break;ja=ga[ia++];}else{ia=ga.next();if(ia.done)break;ja=ia.value;}var ka=ja;this.setState({activeExtensionForVerification:ka,step:u.VERIFICATION});return;}this.$FBPaymentsCheckoutFlowContainerBase11();}.bind(this);this.$FBPaymentsCheckoutFlowContainerBase20=function(y){this.$FBPaymentsCheckoutFlowContainerBase3.setFlowStep(r.PAYMENT).setEventName(s.SUCCESS).setOrderID(y.id).updateExtraData(y.extra_data||{}).log();var z=this.props.onCheckoutSuccessCallback;if(z){var aa=this.getSelectedPaymentMethod();z(aa,y,this.$FBPaymentsCheckoutFlowContainerBase22.bind(this,y),this.$FBPaymentsCheckoutFlowContainerBase23);}else this.$FBPaymentsCheckoutFlowContainerBase22(y);}.bind(this);this.$FBPaymentsCheckoutFlowContainerBase23=function(){this.setState({step:u.READY_TO_PAY});}.bind(this);this.$FBPaymentsCheckoutFlowContainerBase21=function(y){this.$FBPaymentsCheckoutFlowContainerBase3.setFlowStep(r.PAYMENT).setEventName(s.FAIL).setErrorMessage(y.message).log();this.setState({errors:{global:y.message},step:u.READY_TO_PAY});}.bind(this);this.$FBPaymentsCheckoutFlowContainerBase24=function(y){var z,aa=(z=this.getContentConfiguration())!=null?z.dialogWidth:z;if(this.state.activeExtension!==null||this.state.activeExtensionForVerification!==null)aa=y||aa;if(aa===this.state.dialogWidth)return;this.setState({dialogWidth:aa});}.bind(this);};f.exports=v;}),null);
__d('FBPaymentsCheckoutFlowViewBase.react',['fbt','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes,l=400;i=babelHelpers.inherits(m,c('React').Component);j=i&&i.prototype;m.prototype.__isExtensionActive=function(){return this.props.isExtensionActive;};m.prototype.__isExtensionActiveForVerification=function(){return this.props.isExtensionActiveForVerification;};m.prototype.__isLoading=function(){return !!this.props.loadingContainer;};m.prototype.__isConfirmation=function(){return !!this.props.confirmationContainer;};m.prototype.__shouldShowHeader=function(){return (!this.__isExtensionActive()&&!this.__isExtensionActiveForVerification()&&!this.__isLoading()&&!this.__isConfirmation());};m.prototype.__shouldShowLoading=function(){return this.__isLoading();};m.prototype.__shouldShowConfirmation=function(){return this.__isConfirmation();};m.prototype.__shouldShowOrderSummary=function(){return (!this.__isExtensionActive()&&!this.__isExtensionActiveForVerification()&&!this.__isLoading()&&!this.__isConfirmation());};m.prototype.__shouldShowPriceTable=function(){return (!this.__isExtensionActive()&&!this.__isExtensionActiveForVerification()&&!this.__isLoading()&&!this.__isConfirmation()&&!!this.props.priceTableContainer);};m.prototype.__shouldShowExtensions=function(){return (!this.__isLoading()&&!this.__isConfirmation());};m.prototype.__shouldShowPayActionRow=function(){return (!this.__isExtensionActive()&&!this.__isExtensionActiveForVerification()&&!this.__isLoading()&&!this.__isConfirmation());};m.prototype.getBackButtonText=function(){return h._("Back");};m.prototype.getCheckoutHeader=function(){return (this.props.dialogTitle||h._("Checkout"));};function m(){i.apply(this,arguments);}m.propTypes={confirmationContainer:k.element,dialogTitle:k.node,dialogWidth:k.number.isRequired,disableClose:k.bool.isRequired,errorMessage:k.node,extensionContainers:k.arrayOf(k.element).isRequired,isExtensionActive:k.bool.isRequired,isExtensionActiveForVerification:k.bool.isRequired,loadingContainer:k.element,onBackButtonClick:k.func,onDialogClose:k.func.isRequired,orderSummaryContainer:k.element,payActionRowContainer:k.element,priceTableContainer:k.element,renderInline:k.bool};m.defaultProps={dialogWidth:l};f.exports=m;}),null);
__d('FBPaymentsCheckoutFlowView.react',['cx','FBPaymentsCheckoutFlowViewBase.react','React','XUIDialog.react','XUIDialogBody.react','XUIDialogTitle.react','XUINotice.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('FBPaymentsCheckoutFlowViewBase.react'));j=i&&i.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=j.constructor).call.apply(l,[this].concat(o)),this.$FBPaymentsCheckoutFlowView1=function(q){if(!q)this.props.onDialogClose();}.bind(this),m;}k.prototype.render=function(){var l=void 0;if(this.props.errorMessage)l=c('React').createElement(c('XUINotice.react'),{className:"_q-q",use:'warn'},this.props.errorMessage,this.props.additionalErrors);var m=c('React').createElement('div',null,l,c('React').createElement('div',{className:!this.__shouldShowLoading()?"hidden_elem":''},this.props.loadingContainer),c('React').createElement('div',{className:!this.__shouldShowConfirmation()?"hidden_elem":''},this.props.confirmationContainer),c('React').createElement('div',{className:!this.__shouldShowOrderSummary()?"hidden_elem":''},this.props.orderSummaryContainer),c('React').createElement('div',{className:(!this.__shouldShowPriceTable()?"hidden_elem":'')+(' '+"_qu2")+(' '+"_2ph_")},this.props.priceTableContainer),c('React').createElement('div',{className:(!this.__shouldShowExtensions()?"hidden_elem":'')+(!this.__isExtensionActive()&&!this.__isExtensionActiveForVerification()?' '+"_1j8c":'')},this.props.extensionContainers),c('React').createElement('div',{className:!this.__shouldShowPayActionRow()?"hidden_elem":''},this.props.payActionRowContainer));if(this.props.renderInline)return m;return (c('React').createElement(c('XUIDialog.react'),{layerHideOnBlur:false,onToggle:this.$FBPaymentsCheckoutFlowView1,shown:true,width:this.props.dialogWidth},c('React').createElement(c('XUIDialogTitle.react'),{className:"_qu2 _qu3",showCloseButton:!this.props.disableClose},this.getCheckoutHeader()),c('React').createElement(c('XUIDialogBody.react'),{className:"_qu4"},m)));};k.prototype.__shouldShowOrderSummary=function(){return (!this.__isExtensionActiveForVerification()&&!this.__isLoading()&&!this.__isConfirmation());};f.exports=k;}),null);
__d('FBPaymentsConfirmationContainerBase.react',['FBPaymentsCheckoutConfigurationTypes','React','Map','abstractMethod'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes,k=c('FBPaymentsCheckoutConfigurationTypes').ConfirmationConfigurationPropTypes;h=babelHelpers.inherits(l,c('React').Component);i=h&&h.prototype;function l(m){i.constructor.call(this,m);this.state={extensionData:new (c('Map'))()};}l.prototype.handleConfirmationExtensionUpdate=function(m,n){var o={extensionData:this.state.extensionData};o.extensionData.set(m,n.data);this.setState(o);this.props.onExtensionsUpdate(o.extensionData);};l.prototype.$FBPaymentsConfirmationContainerBase1=function(m){var n=m.identifier,o=m['class'],p=this.__getConfirmationExtensionManager().getConfirmationExtensionContainer(n,o);return (c('React').createElement(p,{extensionConfiguration:m,onConfirmationExtensionUpdate:function(q){this.handleConfirmationExtensionUpdate(n,q);}.bind(this)}));};l.prototype.render=function(){var m=this.__getView(),n=[],o=this.props.configuration.confirmationExtensions;for(var p=0;o&&p<o.length;p++){var q=o[p],r=q.identifier;n.push(c('React').createElement('div',{key:r+p},this.$FBPaymentsConfirmationContainerBase1(q)));}return (c('React').createElement(m,{confirmationText:this.props.configuration.confirmationText,handleConfirmationDone:this.props.onConfirmationDoneClick,merchantLogoUrl:this.props.configuration.merchantLogoUrl,receiptUrl:this.props.configuration.receiptUrl},n));};l.prototype.__getView=function(){return c('abstractMethod')('FBPaymentsConfirmationContainerBase','__getView');};l.prototype.__getConfirmationExtensionManager=function(){return c('abstractMethod')('FBPaymentsConfirmationContainerBase','__getConfirmationExtensionManager');};l.propTypes={configuration:k.isRequired,onConfirmationDoneClick:j.func.isRequired,onExtensionsUpdate:j.func.isRequired};f.exports=l;}),null);
__d('FBPaymentsConfirmationExtensionInterface.react',['FBPaymentsCheckoutConfigurationTypes','React'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes,k=c('FBPaymentsCheckoutConfigurationTypes').ConfirmationExtensionPropTypes;h=babelHelpers.inherits(l,c('React').Component);i=h&&h.prototype;function l(){h.apply(this,arguments);}l.propTypes={extensionConfiguration:k,onConfirmationExtensionUpdate:j.func.isRequired};f.exports=l;}),null);
__d('FBPaymentsConfirmationConstants',['keyMirror'],(function a(b,c,d,e,f,g){'use strict';var h={Extensions:c('keyMirror')({CUSTOM_EXTENSION:null})};f.exports=h;}),null);
__d('FBPaymentsConfirmationExtensionManagerBase',['FBPaymentsConfirmationConstants','FBPaymentsConfirmationExtensionInterface.react','Map','abstractMethod'],(function a(b,c,d,e,f,g){'use strict';var h=c('FBPaymentsConfirmationConstants').Extensions;i.prototype.getConfirmationExtensionContainer=function(j,k){if(!h[j])throw Error('Non-existent payments confirmation extension '+j);var l=j===h.CUSTOM_EXTENSION?k:this.__getConfirmationExtensionMap().get(j);if(!l)throw Error('Unimplemented payments confirmation extension '+j);return l;};i.prototype.__getConfirmationExtensionMap=function(){return c('abstractMethod')('FBPaymentsConfirmationExtensionManagerBase','__getConfirmationExtensionMap');};function i(){}f.exports=i;}),null);
__d('FBPaymentsConfirmationExtensionManager',['FBPaymentsConfirmationExtensionInterface.react','FBPaymentsConfirmationExtensionManagerBase','Map'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FBPaymentsConfirmationExtensionManagerBase'));i=h&&h.prototype;function j(){i.constructor.call(this);this.confirmationExtensionMap=new (c('Map'))();}j.prototype.__getConfirmationExtensionMap=function(){return this.confirmationExtensionMap;};f.exports=new j();}),null);
__d('FBPaymentsConfirmationViewBase.react',['fbt','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.getConfirmationText=function(){return (this.props.confirmationText||c('React').createElement('span',null,h._("Thanks for your purchase!")));};l.prototype.getConfirmationTitle=function(){return h._("Confirmation");};l.prototype.getReceiptText=function(){return h._("See receipt");};l.prototype.getDoneButtonText=function(){return h._("Done");};function l(){i.apply(this,arguments);}l.propTypes={children:k.node,confirmationText:k.node,handleConfirmationDone:k.func,merchantLogoUrl:k.string,receiptUrl:k.string};f.exports=l;}),null);
__d('FBPaymentsConfirmationView.react',['cx','ix','CommerceContactMerchantReceiptDialog.react','CurrentUser','FBPaymentsConfirmationViewBase.react','FBPaymentsDialogActions','FBPaymentsLinkHelper','FBPaymentsReceiptDialog.react','Image.react','React','URI','XUIButton.react','XUIGrayText.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=36;j=babelHelpers.inherits(m,c('FBPaymentsConfirmationViewBase.react'));k=j&&j.prototype;m.prototype.$FBPaymentsConfirmationView1=function(n){var o=new (c('URI'))(n).getProtocol(),p=o!=='http'&&o!=='https'&&o!=='';if(p){var q=c('FBPaymentsLinkHelper').parseInAppUrl(n),r=q.clientType,s=q.productID,t=q.platformContextID;if(r){c('FBPaymentsDialogActions').showDialog(c('FBPaymentsReceiptDialog.react'),{actorID:c('CurrentUser').getAccountID(),onDialogToggle:this.$FBPaymentsConfirmationView2,receiptID:s,receiptClientType:r});}else c('FBPaymentsDialogActions').showDialog(c('CommerceContactMerchantReceiptDialog.react'),{invoiceID:s,onDialogToggle:this.$FBPaymentsConfirmationView2,platformContextID:t});}else window.open(n,'_blank');};m.prototype.$FBPaymentsConfirmationView2=function(n){if(!n)c('FBPaymentsDialogActions').hideDialog();};m.prototype.$FBPaymentsConfirmationView3=function(){var n=this.props.receiptUrl;if(!n)return null;return (c('React').createElement('div',{className:"_2ppt"},c('React').createElement(c('XUIButton.react'),{label:this.getReceiptText(),onClick:function(){return this.$FBPaymentsConfirmationView1(n);}.bind(this),size:'xlarge'})));};m.prototype.render=function(){var n=c('React').createElement(c('Image.react'),{className:"_3fai",src:i('/images/p2p/confirmation-checkmark.png')}),o=c('React').createElement(c('XUIGrayText.react'),{className:"_2ppu"},this.getConfirmationText()),p=this.props.merchantLogoUrl?c('React').createElement(c('Image.react'),{className:"_2ppv",height:l,src:this.props.merchantLogoUrl}):null,q=c('React').createElement(c('XUIButton.react'),{label:this.getDoneButtonText(),onClick:this.props.handleConfirmationDone,size:'xlarge',use:'confirm'});return (c('React').createElement('div',null,c('React').createElement('div',{className:"_2ppw"},c('React').createElement('div',{className:"_2ppx"},n,o,p),c('React').createElement('div',null,this.$FBPaymentsConfirmationView3(),this.props.children)),c('React').createElement('div',{className:"_5kyc _2ph_ _52jw"},q)));};function m(){j.apply(this,arguments);}f.exports=m;}),null);
__d('FBPaymentsConfirmationContainer.react',['FBPaymentsConfirmationContainerBase.react','FBPaymentsConfirmationExtensionManager','FBPaymentsConfirmationView.react','React'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FBPaymentsConfirmationContainerBase.react'));i=h&&h.prototype;j.prototype.__getConfirmationExtensionManager=function(){return c('FBPaymentsConfirmationExtensionManager');};j.prototype.__getView=function(){return c('FBPaymentsConfirmationView.react');};j.prototype.render=function(){return i.render.call(this);};function j(){h.apply(this,arguments);}j.propTypes=c('FBPaymentsConfirmationContainerBase.react').propTypes;f.exports=j;}),null);
__d('FBPaymentsEntityHeaderViewBase.react',['FBPaymentsCheckoutConfigurationTypes','React'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('FBPaymentsCheckoutConfigurationTypes').EntityPropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;k.prototype.getTitle=function(){return this.props.entity.participant.title;};k.prototype.getSubtitle=function(){return this.props.entity.participant.subtitle;};k.prototype.getImageSrc=function(){return this.props.entity.participant.imageURL;};k.prototype.getDescription=function(){return this.props.entity.description;};k.prototype.isLargeTitle=function(){return !this.getSubtitle();};function k(){h.apply(this,arguments);}k.propTypes={entity:j.isRequired};f.exports=k;}),null);
__d('FBPaymentsEntityHeaderView.react',['cx','FBPaymentsEntityHeaderViewBase.react','FBPaymentsItemSummaryView.react','React','XUIGrayText.react','joinClasses'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=36;i=babelHelpers.inherits(l,c('FBPaymentsEntityHeaderViewBase.react'));j=i&&i.prototype;l.prototype.render=function(){var m=this.isLargeTitle()?'large':'medium',n=c('React').createElement(c('XUIGrayText.react'),{className:"_3yoq",display:'block',shade:'dark',size:m},this.getTitle()),o=this.getSubtitle()?c('React').createElement(c('XUIGrayText.react'),{display:'block',shade:'medium',size:'small'},this.getSubtitle()):null,p=this.getDescription()?c('React').createElement(c('XUIGrayText.react'),{className:"_2ph_ _5kyc",display:'block',shade:'medium',size:'small'},this.getDescription()):null;return (c('React').createElement('div',{className:c('joinClasses')("_qu2",this.props.className)},c('React').createElement(c('FBPaymentsItemSummaryView.react'),{imageSrc:this.getImageSrc(),imageHeight:k},n,o),p));};function l(){i.apply(this,arguments);}f.exports=l;}),null);
__d('FBPaymentsLoggerBase',['abstractMethod'],(function a(b,c,d,e,f,g){'use strict';function h(){this.$FBPaymentsLoggerBase2={event_type:'client'};this.$FBPaymentsLoggerBase3={};this.$FBPaymentsLoggerBase1=this.__getLoggerInstance();}h.prototype.log=function(){this.updateData(this.$FBPaymentsLoggerBase2);this.updateExtraData(this.$FBPaymentsLoggerBase3);this.$FBPaymentsLoggerBase1.log();this.$FBPaymentsLoggerBase1.clear();};h.prototype.logVital=function(){this.updateData(this.$FBPaymentsLoggerBase2);this.updateExtraData(this.$FBPaymentsLoggerBase3);this.$FBPaymentsLoggerBase1.logVital();this.$FBPaymentsLoggerBase1.clear();};h.prototype.updateData=function(i){this.$FBPaymentsLoggerBase1.updateData(i);return this;};h.prototype.updateExtraData=function(i){this.$FBPaymentsLoggerBase1.updateExtraData(i);return this;};h.prototype.setGlobalFields=function(i){this.$FBPaymentsLoggerBase2=babelHelpers['extends']({},this.$FBPaymentsLoggerBase2,i);return this;};h.prototype.clearGlobalFields=function(){this.$FBPaymentsLoggerBase2={event_type:'client'};return this;};h.prototype.setGlobalExtraData=function(i){this.$FBPaymentsLoggerBase3=i;return this;};h.prototype.clearGlobalExtraData=function(){this.$FBPaymentsLoggerBase3={};return this;};h.prototype.setContainerModule=function(i){this.$FBPaymentsLoggerBase1.setContainermodule(i);return this;};h.prototype.setContextID=function(i){this.$FBPaymentsLoggerBase1.setContextID(i);return this;};h.prototype.setCurrency=function(i){this.$FBPaymentsLoggerBase1.setCurrency(i);return this;};h.prototype.setErrorMessage=function(i){this.$FBPaymentsLoggerBase1.setErrorMessage(i);return this;};h.prototype.setEventName=function(i){this.$FBPaymentsLoggerBase1.setEventName(i);return this;};h.prototype.setEventType=function(i){this.$FBPaymentsLoggerBase1.setEventType(i);return this;};h.prototype.setFlowName=function(i){this.$FBPaymentsLoggerBase1.setFlowName(i);return this;};h.prototype.setFlowStep=function(i){this.$FBPaymentsLoggerBase1.setFlowStep(i);return this;};h.prototype.setMailingAddressID=function(i){this.$FBPaymentsLoggerBase1.setMailingAddressID(i);return this;};h.prototype.setOrderID=function(i){this.$FBPaymentsLoggerBase1.setOrderID(i);return this;};h.prototype.setOtherProfileID=function(i){this.$FBPaymentsLoggerBase1.setOtherProfileID(i);return this;};h.prototype.setPaymentID=function(i){this.$FBPaymentsLoggerBase1.setPaymentID(i);return this;};h.prototype.setPaymentMethodID=function(i){this.$FBPaymentsLoggerBase1.setPaymentMethodID(i);return this;};h.prototype.setPaymentMethodType=function(i){this.$FBPaymentsLoggerBase1.setPaymentMethodType(i);return this;};h.prototype.setProduct=function(i){this.$FBPaymentsLoggerBase1.setProduct(i);return this;};h.prototype.setProvider=function(i){this.$FBPaymentsLoggerBase1.setProvider(i);return this;};h.prototype.setRawAmount=function(i){this.$FBPaymentsLoggerBase1.setRawAmount(i);return this;};h.prototype.setRequestID=function(i){this.$FBPaymentsLoggerBase1.setRequestID(i);return this;};h.prototype.setSessionID=function(i){this.$FBPaymentsLoggerBase1.setSessionID(i);return this;};h.prototype.setShippingOptionID=function(i){this.$FBPaymentsLoggerBase1.setShippingOptionID(i);return this;};h.prototype.addToExtraData=function(i,j){this.$FBPaymentsLoggerBase1.addToExtraData(i,j);return this;};h.prototype.__getLoggerInstance=function(){return c('abstractMethod')('FBPaymentsLoggerBase','__getLoggerInstance');};f.exports=h;}),null);
__d('FBPaymentsExtensionInterface.react',['FBPaymentsCheckoutConfigurationTypes','FBPaymentsLoggerBase','React','abstractMethod'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes,k=c('FBPaymentsCheckoutConfigurationTypes').CheckoutConfigurationPropTypes,l=c('FBPaymentsCheckoutConfigurationTypes').PurchaseInfoExtensionPropTypes;h=babelHelpers.inherits(m,c('React').Component);i=h&&h.prototype;m.__calculateExtensionState=function(n){return c('abstractMethod')('FBPaymentsExtensionInterface','calculateExtensionState');};m.prototype.__sendExtensionUpdateIfNecessary=function(n,o){var p=this.constructor.__calculateExtensionState(o),q=!this.constructor.__extensionStateEquals(n.extensionState,p);if(q)n.onExtensionUpdate(p);};m.prototype.calculateExtensionStateAndSendUpdateImmediately=function(n){var o=this.constructor.__calculateExtensionState(n);this.props.onExtensionUpdate(o);};m.prototype.componentWillMount=function(){this.__sendExtensionUpdateIfNecessary(this.props,this.state);};m.prototype.componentWillUpdate=function(n,o){this.__sendExtensionUpdateIfNecessary(n,o);};function m(){h.apply(this,arguments);}m.PropTypes={checkoutConfiguration:k.isRequired,checkoutExtraProps:j.object,extensionConfiguration:l.isRequired,extensionState:j.object.isRequired,isActive:j.bool.isRequired,isActiveForVerification:j.bool.isRequired,logger:j.instanceOf(c('FBPaymentsLoggerBase')).isRequired,onExtensionUpdate:j.func.isRequired,onExtensionWidthChange:j.func.isRequired,onRequestActive:j.func.isRequired,onRequestActiveForVerification:j.func.isRequired};m.__extensionStateEquals=function(n,o){return JSON.stringify(n)===JSON.stringify(o);};f.exports=m;}),null);
__d('FBPaymentsContactEmailSelectorContainerBase.react',['FBPaymentsContactInfoTypes','FBPaymentsExtensionInterface.react','React','abstractMethod','immutable'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FBPaymentsExtensionInterface.react'));i=h&&h.prototype;function j(k){i.constructor.call(this,k);this.handleContactEmailClick=function(l){var m=this.state.contactEmails&&this.state.contactEmails.find(function(n){return n.id===l;});this.setState({selectedContactEmail:m});}.bind(this);this.handleNewContactEmailChange=function(l,m,n){this.setState({newContactEmail:m,isNewContactEmailValid:n.isValid,validationErrorMessage:n.errorMessage});}.bind(this);this.handleAddNewContactEmail=function(){this.setState({isSavingNewContactEmail:true,serverErrorMessage:null});var l={user_input_email:this.state.newContactEmail};this.__getAPI().addContactEmail(l,this.handleNewContactEmailAdded,this.handleNewContactEmailAddedError);}.bind(this);this.handleNewContactEmailAdded=function(l){this.setState({isLoading:true,isSavingNewContactEmail:false,selectedContactEmail:null,showForm:false});this.$FBPaymentsContactEmailSelectorContainerBase1();}.bind(this);this.handleNewContactEmailAddedError=function(l){this.setState({isSavingNewContactEmail:false,serverErrorMessage:l.message});}.bind(this);this.handleContactEmailRowClicked=function(){this.props.onRequestActive(true);}.bind(this);this.handleCancelActiveStateClick=function(){this.props.onRequestActive(false);}.bind(this);this.handleShowForm=function(){this.handleToggleShowForm(true);}.bind(this);this.handleHideForm=function(){this.handleToggleShowForm(false);}.bind(this);this.handleClearInput=function(){this.setState({isNewContactEmailValid:false,newContactEmail:'',serverErrorMessage:null,validationErrorMessage:null});}.bind(this);this.state={contactEmails:null,isLoading:false,isNewContactEmailValid:false,isSavingNewContactEmail:false,newContactEmail:'',selectedContactEmail:null,serverErrorMessage:null,showForm:false,validationErrorMessage:null};}j.getStores=function(){return [this.__getContactInfoStore()];};j.calculateState=function(k,l){var m=k||{},n=c('FBPaymentsContactInfoTypes').EMAIL,o=this.__getContactInfoStore().get(n);m.isLoading=o.isLoading();if(o.hasValue()){var p=o.getValueEnforcing();m.contactEmails=p;if(m.newContactEmail){var q=p.find(function(s){return s.normalizedEmailAddress===m.newContactEmail;});if(q){m.selectedContactEmail=q;m.newContactEmail='';}}else if(!m.selectedContactEmail){var r=p.filter(function(s){return s.isDefault;}).first();if(!r)r=p.first();if(r)m.selectedContactEmail=r;}}return m;};j.__calculateExtensionState=function(k){var l=false,m={};if(k.selectedContactEmail){l=true;m={email:k.selectedContactEmail.normalizedEmailAddress,id:k.selectedContactEmail.id};}return {extraData:m,ready:l};};j.__getContactInfoStore=function(){return c('abstractMethod')('FBPaymentsContactEmailSelectorContainerBase','__getContactInfoStore');};j.prototype.$FBPaymentsContactEmailSelectorContainerBase1=function(){var k=c('FBPaymentsContactInfoTypes').EMAIL;this.constructor.__getContactInfoStore().fetch(k);this.setState({isLoading:true});};j.prototype.handleToggleShowForm=function(k){this.setState({showForm:k});this.handleClearInput();};j.prototype.__getView=function(){return c('abstractMethod')('FBPaymentsContactEmailSelectorContainerBase','__getView');};j.prototype.__getAPI=function(){return c('abstractMethod')('FBPaymentsContactEmailSelectorContainerBase','__getAPI');};j.prototype.render=function(){var k=this.__getView();return (c('React').createElement(k,babelHelpers['extends']({},this.state,{isActive:this.props.isActive,onAddNewContactEmail:this.handleAddNewContactEmail,onCancelActiveStateClick:this.handleCancelActiveStateClick,onClearInput:this.handleClearInput,onContactEmailClick:this.handleContactEmailClick,onHideForm:this.handleHideForm,onNewContactEmailChange:this.handleNewContactEmailChange,onRowClicked:this.handleContactEmailRowClicked,onShowForm:this.handleShowForm})));};f.exports=j;}),null);
__d('FBPaymentsContactEmailSelectorViewBase.react',['fbt','FBPaymentsLinkHelper','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.getContactEmailLabel=function(){return h._("Contact email address");};l.prototype.getAddContactEmailText=function(){return h._("Add");};l.prototype.getAddContactEmailNUXText=function(){return h._("Add New Email Address");};l.prototype.getAddContactEmailPlaceholder=function(){return h._("New email address");};l.prototype.getCancelButtonText=function(){return h._("Cancel");};l.prototype.getSaveButtonText=function(){return h._("Save");};l.prototype.getBackButtonText=function(){return h._("Back");};l.prototype.getSecurityMessage=function(){return h._("Updates about your purchase will be sent to this email address. {Link. =Learn more}",[h.param('Link. =Learn more',c('React').createElement('a',{href:c('FBPaymentsLinkHelper').getPayerProtectionURI(),target:'_blank'},h._("Learn more")))]);};function l(){i.apply(this,arguments);}l.propTypes={contactEmails:k.object,isActive:k.bool.isRequired,isLoading:k.bool.isRequired,isNewContactEmailValid:k.bool.isRequired,isSavingNewContactEmail:k.bool.isRequired,newContactEmail:k.string.isRequired,onAddNewContactEmail:k.func.isRequired,onCancelActiveStateClick:k.func.isRequired,onClearInput:k.func.isRequired,onContactEmailClick:k.func.isRequired,onHideForm:k.func.isRequired,onNewContactEmailChange:k.func.isRequired,onRowClicked:k.func.isRequired,onShowForm:k.func.isRequired,selectedContactEmail:k.object,serverErrorMessage:k.oneOfType([k.node,k.string]),showForm:k.bool,validationErrorMessage:k.node};f.exports=l;}),null);
__d('FBPaymentsEmailFormField.react',['fbt','FBPaymentsFormField.react','FBPaymentsFormFieldInputConfigs','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=j.constructor).call.apply(l,[this].concat(o)),this.getPlaceholderText=function(){return h._("Email address");},m;}k.prototype.render=function(){return (c('React').createElement(c('FBPaymentsFormField.react'),babelHelpers['extends']({config:c('FBPaymentsFormFieldInputConfigs').EMAIL_INPUT_CONFIG,placeholder:this.getPlaceholderText()},this.props)));};f.exports=k;}),null);
__d('FBPaymentsRichSelector.react',['ix','cx','invariant','ContextualLayer.react','ContextualLayerAutoFlip','ContextualLayerUpdateOnScroll','Image.react','InlineBlock.react','React','ReactDOM','SubscriptionsHandler','XUIPopoverButton.react','emptyFunction','fbglyph','joinClasses','requestAnimationFrame'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m,n,o=c('React').PropTypes,p={ContextualLayerAutoFlip:c('ContextualLayerAutoFlip'),ContextualLayerUpdateOnScroll:c('ContextualLayerUpdateOnScroll')},q=100;function r(v,w,x){c('React').Children.count(v.children)>0||j(0);var y=null,z=c('React').Children.map(v.children,function(aa){if(!aa)return null;switch(aa.type){case u:return aa;case t:default:if(x==null&&!v.defaultLabel)x=aa.props.value;if(x===aa.props.value){y=aa;w.selected=true;}else w.selected=false;return c('React').cloneElement(aa,w);}});return {items:z,selectedItem:y};}var s=c('React').createClass({displayName:'FBPaymentsRichSelector',childContextTypes:{onChange:o.func},getChildContext:function v(){return {onChange:this.props.onChange};},propTypes:{defaultLabel:o.oneOfType([o.object,o.string]),defaultValue:o.oneOfType([o.object,o.string]),disabled:o.bool,label:o.oneOfType([o.node,o.string]),size:o.string,width:o.number,onChange:o.func,onDropdown:o.func,onToggleLayer:o.func},getDefaultProps:function v(){return {defaultLabel:'',onDropdown:c('emptyFunction')};},getInitialState:function v(){return {preShowLayer:false,showLayer:false,value:this.props.defaultValue||''};},componentDidMount:function v(){this.subscriptions=new (c('SubscriptionsHandler'))();this.subscriptions.addSubscriptions(this.refs.menu.layer.subscribe('blur',this._onBlur),this.refs.menu.layer.subscribe('hide',this._onBlur));},componentWillUnmount:function v(){this.subscriptions.release();},render:function v(){var w=Math.max(this.props.width,q),x={onSelect:this._onSelect},y=this.state.value,z=r(this.props,x,y),aa=z.selectedItem,ba=void 0;if(this.props.label){ba=this.props.label;}else if(aa){ba=aa.props.label;}else ba=this.props.defaultLabel;var ca=this.state.showLayer?h("\/images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/triangle-up_12_fig-white.png"):h("\/images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/triangle-down_12_fig-light-30.png"),da=c('React').createElement(c('Image.react'),{className:"_2vzy",src:ca});return (c('React').createElement('span',null,c('React').createElement(c('InlineBlock.react'),{alignv:'middle',className:c('joinClasses')((this.state.showLayer?"openToggler":'')+(' '+"_4hp4"),this.props.className),style:{width:w}},c('React').createElement(c('XUIPopoverButton.react'),{className:"_2vzz"+(this.state.showLayer?' '+"_2vz-":'')+(!this.props.label&&!aa?' '+"_53q9":''),depressed:this.state.showLayer,disabled:this.props.disabled||false,haschevron:false,imageRight:da,label:ba,onClick:this._toggleSelector,ref:'selectorButton',maxwidth:w})),this.renderLayers()));},_getBehaviors:function v(){return babelHelpers['extends']({},p,this.props.behaviors);},renderLayers:function v(){var w={onSelect:this._onSelect},x=null;if(this.state.showLayer||this.state.preShowLayer){var y=this.state.value;x=r(this.props,w,y).items;}if(this.state.showLayer)this.props.onDropdown();var z=q,aa=c('ReactDOM').findDOMNode(this.refs.selectorButton);if(aa)z=aa.getBoundingClientRect().width;var ba=c('React').createElement('ul',{ref:'menuItems',role:'menu',style:{width:z}},x);return (c('React').createElement(c('ContextualLayer.react'),{behaviors:this._getBehaviors(),contextRef:function(){return this.refs.selectorButton;}.bind(this),position:'below',ref:'menu',shown:this.state.showLayer,key:'menu'},c('React').createElement('div',{className:"_4hp4 _54nq _575t _57di _558b"},c('React').createElement('div',{className:"_4hp1",ref:'menuContainer'},ba))));},_toggleSelector:function v(){if(!this.props.disabled)this._setLayerShownState(true);},_onBlur:function v(){c('requestAnimationFrame')(function(){if(this.isMounted())this._setLayerShownState(false);}.bind(this));},_setLayerShownState:function v(w,x){if(w!==this.state.showLayer)this.props.onToggleLayer&&this.props.onToggleLayer(w);if(w&&w!==this.state.showLayer){this.setState(babelHelpers['extends']({preShowLayer:true},x),function(){this.setState({showLayer:w,preShowLayer:false});}.bind(this));}else this.setState(babelHelpers['extends']({showLayer:w,preShowLayer:false},x));},_onSelect:function v(w){this._setLayerShownState(false,{value:w.value});this.props.onChange&&this.props.onChange(w);}});k=babelHelpers.inherits(t,c('React').Component);l=k&&k.prototype;function t(){var v,w;for(var x=arguments.length,y=Array(x),z=0;z<x;z++)y[z]=arguments[z];return w=(v=l.constructor).call.apply(v,[this].concat(y)),this.state={highlighted:false},this.$FBPaymentsRichSelectorOption1=function(aa){var ba=aa.nativeEvent;if(!ba||!ba.isMiddleClick()&&!ba.getModifiers().any){ba.preventDefault();this.props.onSelect&&this.props.onSelect({label:this.props.label,value:this.props.value});}}.bind(this),this.$FBPaymentsRichSelectorOption2=function(){this.setState({highlighted:true});}.bind(this),this.$FBPaymentsRichSelectorOption3=function(){this.setState({highlighted:false});}.bind(this),w;}t.prototype.render=function(){var v=this.props.children,w=this.props.clickable,x=null,y=null,z=null;if(w){this.props.hasOwnProperty('value')||j(0);x=this.$FBPaymentsRichSelectorOption1;y=this.$FBPaymentsRichSelectorOption2;z=this.$FBPaymentsRichSelectorOption3;v=c('React').createElement('a',{className:"_4hp5 _54nc",ref:'menuItemAnchor',role:'menuitem',tabIndex:'0'},c('React').createElement('div',{className:"_4hp6"}),v);}var aa=this.state.highlighted;return c('React').createElement('li',{className:c('joinClasses')("_4hp2"+(!w?' '+"_4hp3":'')+(w&&this.props.selected?' '+"_4hp7":'')+(w&&aa?' '+"_54ne":'')+(' '+"_54ni"),this.props.className),onClick:x,onMouseEnter:y,onMouseLeave:z},v);};t.propTypes={clickable:o.bool,label:o.oneOfType([o.object,o.string]),onSelect:o.func,selected:o.bool,value:o.oneOfType([o.string,o.number])};t.defaultProps={clickable:true};m=babelHelpers.inherits(u,c('React').Component);n=m&&m.prototype;function u(){var v,w;for(var x=arguments.length,y=Array(x),z=0;z<x;z++)y[z]=arguments[z];return w=(v=n.constructor).call.apply(v,[this].concat(y)),this.$FBPaymentsRichSelectorSeparator1=function(){if(!this.props.label)return null;return (c('React').createElement('h4',{className:"_4hp9"},this.props.label));}.bind(this),w;}u.prototype.render=function(){!(c('React').Children.count(this.props.children)&&this.props.label)||j(0);var v=this.props.children?this.props.children:this.$FBPaymentsRichSelectorSeparator1();return c('React').createElement('li',{className:"_54ak _4hp8"},v);};u.propTypes={label:o.string};s.Option=t;s.Separator=u;f.exports=s;}),null);
__d('FBPaymentsContactEmailSelectorView.react',['cx','fbt','FBPaymentsContactEmailSelectorViewBase.react','FBPaymentsEmailFormField.react','FBPaymentsLoadingView.react','FBPaymentsRichSelector.react','Layout.react','React','XUIButton.react','XUIGrayText.react','XUISpinner.react','XUIText.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('FBPaymentsRichSelector.react').Option,m=c('Layout.react').Column,n=c('Layout.react').FillColumn;j=babelHelpers.inherits(o,c('FBPaymentsContactEmailSelectorViewBase.react'));k=j&&j.prototype;function o(){var p,q;for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=k.constructor).call.apply(p,[this].concat(s)),this.handleSelectorChange=function(u){var v=u.value;this.props.onContactEmailClick(v);}.bind(this),q;}o.prototype.renderContactEmailListItem=function(p){return (c('React').createElement(l,{key:p.id,label:p.normalizedEmailAddress,value:p.id},c('React').createElement(c('XUIGrayText.react'),{shade:'dark'},p.normalizedEmailAddress)));};o.prototype.renderServerErrorMessage=function(){if(!this.props.serverErrorMessage)return null;return (c('React').createElement(c('XUIText.react'),{className:"_14tg",display:'block',size:'small'},this.props.serverErrorMessage));};o.prototype.renderAddContactEmailInputListItem=function(){return (c('React').createElement(l,{className:"_5kyc",clickable:false,key:'add_contact_email_input'},c('React').createElement('div',{className:"_1jnq"},this.renderServerErrorMessage(),c('React').createElement(c('Layout.react'),null,c('React').createElement(n,null,c('React').createElement(c('FBPaymentsEmailFormField.react'),{className:"_3vg0",errorMessage:this.props.validationErrorMessage,name:'email',onChange:this.props.onNewContactEmailChange,placeholder:this.getAddContactEmailPlaceholder(),value:this.props.newContactEmail})),c('React').createElement(m,null,c('React').createElement(c('XUIButton.react'),{className:"_3-9a _3yca",disabled:!this.props.isNewContactEmailValid,label:this.getAddContactEmailText(),onClick:this.props.onAddNewContactEmail,size:'large',use:'confirm'}))),c('React').createElement(c('FBPaymentsLoadingView.react'),{overlay:true,visible:this.props.isSavingNewContactEmail}))));};o.prototype.renderSecurityMessageListItem=function(){return (c('React').createElement(l,{className:"_2y76 _5kyc",clickable:false,key:'security_message'},c('React').createElement(c('XUIGrayText.react'),{display:'block',shade:'light',size:'small'},this.getSecurityMessage())));};o.prototype.renderContactEmailsDropdown=function(){if(this.props.isLoading)return c('React').createElement(c('XUISpinner.react'),null);var p=this.props.contactEmails;if(!p)return null;var q=this.props.selectedContactEmail,r=q&&q.id;return (c('React').createElement(c('FBPaymentsRichSelector.react'),{defaultLabel:this.getAddContactEmailNUXText(),defaultValue:r,name:'contact_email_selector',onChange:this.handleSelectorChange,onToggleLayer:this.props.onClearInput},p.map(this.renderContactEmailListItem),this.renderAddContactEmailInputListItem(),this.renderSecurityMessageListItem()));};o.prototype.getContactEmailLabel=function(){return i._("Confirmation email");};o.prototype.render=function(){return (c('React').createElement('div',{className:"__j9"},c('React').createElement(c('XUIGrayText.react'),{display:'block',size:'small'},this.getContactEmailLabel()),c('React').createElement('div',{className:"_3-8x _52jv"},this.renderContactEmailsDropdown())));};f.exports=o;}),null);
__d('FBPaymentsContactInfoStoreBase',['FBPaymentsContactInfoActions','FBPaymentsContactInfoTypes','FBPaymentsDispatcher','FluxLoadObjectStore','immutable','abstractMethod'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FluxLoadObjectStore'));i=h&&h.prototype;function j(){i.constructor.call(this,c('FBPaymentsDispatcher'));}j.prototype.reduce=function(k,l){var m=l.data;switch(l.type){case c('FBPaymentsContactInfoActions').types.CONTACT_NAME_LOADED:return this.__handleOne(k,c('FBPaymentsContactInfoTypes').NAME,m.contactName);case c('FBPaymentsContactInfoActions').types.CONTACT_NAME_ERROR:return this.__handleOne(k,c('FBPaymentsContactInfoTypes').NAME,m.error);case c('FBPaymentsContactInfoActions').types.CONTACT_EMAILS_LOADED:return this.__handleOne(k,c('FBPaymentsContactInfoTypes').EMAIL,m.contactEmails);case c('FBPaymentsContactInfoActions').types.CONTACT_EMAILS_ERROR:return this.__handleOne(k,c('FBPaymentsContactInfoTypes').EMAIL,m.error);case c('FBPaymentsContactInfoActions').types.CONTACT_PHONE_NUMBERS_LOADED:return this.__handleOne(k,c('FBPaymentsContactInfoTypes').PHONE_NUMBER,m.contactPhoneNumbers);case c('FBPaymentsContactInfoActions').types.CONTACT_PHONE_NUMBERS_ERROR:return this.__handleOne(k,c('FBPaymentsContactInfoTypes').PHONE_NUMBER,m.error);case c('FBPaymentsContactInfoActions').types.MAILING_ADDRESSES_LOADED:return this.__handleOne(k,c('FBPaymentsContactInfoTypes').MAILING_ADDRESS,m.mailingAddresses);case c('FBPaymentsContactInfoActions').types.MAILING_ADDRESSES_ERROR:return this.__handleOne(k,c('FBPaymentsContactInfoTypes').MAILING_ADDRESS,m.error);default:return k;}};j.prototype.fetch=function(k){this.__load(k);};j.prototype.__load=function(k){this.__getAPI().fetchContactInfosByType(k);};j.prototype.__getAPI=function(){return c('abstractMethod')('FBPaymentsContactInfoStoreBase','__getAPI');};f.exports=j;}),null);
__d('FBPaymentsContactInfoStore',['FBPaymentsContactInfoStoreBase','FBPaymentsModulesAPI'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FBPaymentsContactInfoStoreBase'));i=h&&h.prototype;j.prototype.__getAPI=function(){return c('FBPaymentsModulesAPI');};function j(){h.apply(this,arguments);}f.exports=new j();}),null);
__d('FBPaymentsContactEmailSelectorContainer.react',['FBPaymentsContactEmailSelectorContainerBase.react','FBPaymentsContactEmailSelectorView.react','FBPaymentsContactInfoStore','FBPaymentsModulesAPI','FluxContainer'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FBPaymentsContactEmailSelectorContainerBase.react'));i=h&&h.prototype;j.__getContactInfoStore=function(){return c('FBPaymentsContactInfoStore');};j.prototype.__getView=function(){return c('FBPaymentsContactEmailSelectorView.react');};j.prototype.__getAPI=function(){return c('FBPaymentsModulesAPI');};function j(){h.apply(this,arguments);}f.exports=c('FluxContainer').create(j,{withProps:true});}),null);
__d('FBPaymentsContactNameInputContainerBase.react',['FBPaymentsContactInfoTypes','FBPaymentsExtensionInterface.react','React','abstractMethod'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FBPaymentsExtensionInterface.react'));i=h&&h.prototype;function j(k){i.constructor.call(this,k);this.handleContactNameChange=function(l,m,n){this.setState({contactName:m,errorMessage:n.errorMessage});}.bind(this);this.handleNewContactNameChange=function(l,m,n){this.setState({newContactName:m,isNewContactNameValid:n.isValid,errorMessage:n.errorMessage});}.bind(this);this.handleContactNameRowClicked=function(){this.setState({newContactName:this.state.contactName,isNewContactNameValid:true,errorMessage:null});this.props.onRequestActive(true);}.bind(this);this.handleCancelActiveStateClick=function(){this.props.onRequestActive(false);}.bind(this);this.handleUpdateContactName=function(){this.setState({contactName:this.state.newContactName});this.props.onRequestActive(false);}.bind(this);this.state={contactName:'',errorMessage:null,initialFetch:true,isLoading:false,isNewContactNameValid:false,newContactName:''};}j.getStores=function(){return [this.__getContactInfoStore()];};j.calculateState=function(k,l){var m=k||{},n=this.__getContactInfoStore().get(c('FBPaymentsContactInfoTypes').NAME);m.isLoading=n.isLoading();if(n.hasValue()&&m.initialFetch){m.contactName=n.getValueEnforcing().first();m.initialFetch=false;}return m;};j.__calculateExtensionState=function(k){var l=false,m={};if(k.contactName.length>=2){l=true;m={name:k.contactName};}return {extraData:m,ready:l};};j.__getContactInfoStore=function(){return c('abstractMethod')('FBPaymentsContactNameInputContainerBase','__getContactInfoStore');};j.prototype.__getView=function(){return c('abstractMethod')('FBPaymentsContactNameInputContainerBase','__getView');};j.prototype.render=function(){var k=this.__getView();return (c('React').createElement(k,babelHelpers['extends']({},this.state,{isActive:this.props.isActive,isLoading:this.state.isLoading,onCancelActiveStateClick:this.handleCancelActiveStateClick,onContactNameChange:this.handleContactNameChange,onNewContactNameChange:this.handleNewContactNameChange,onRowClicked:this.handleContactNameRowClicked,onUpdateContactName:this.handleUpdateContactName})));};f.exports=j;}),null);
__d('FBPaymentsContactNameInputViewBase.react',['fbt','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.getContactNameLabel=function(){return h._("Name");};l.prototype.getContactNamePlaceholder=function(){return h._("Please enter your name");};l.prototype.getCancelButtonText=function(){return h._("Cancel");};l.prototype.getSaveButtonText=function(){return h._("Save");};function l(){i.apply(this,arguments);}l.propTypes={contactName:k.string,errorMessage:k.node,isActive:k.bool.isRequired,isLoading:k.bool.isRequired,isNewContactNameValid:k.bool.isRequired,newContactName:k.string.isRequired,onCancelActiveStateClick:k.func.isRequired,onContactNameChange:k.func.isRequired,onNewContactNameChange:k.func.isRequired,onRowClicked:k.func.isRequired,onUpdateContactName:k.func.isRequired};f.exports=l;}),null);
__d('FBPaymentsNameFormField.react',['fbt','FBPaymentsFormField.react','FBPaymentsFormFieldInputConfigs','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=j.constructor).call.apply(l,[this].concat(o)),this.getPlaceholderText=function(){return h._("Please enter your name");},m;}k.prototype.render=function(){return (c('React').createElement(c('FBPaymentsFormField.react'),babelHelpers['extends']({config:c('FBPaymentsFormFieldInputConfigs').NAME_INPUT_CONFIG,placeholder:this.getPlaceholderText()},this.props)));};f.exports=k;}),null);
__d('FBPaymentsContactNameInputView.react',['cx','FBPaymentsContactNameInputViewBase.react','FBPaymentsNameFormField.react','React','XUIGrayText.react','XUISpinner.react','XUITextInput.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('FBPaymentsContactNameInputViewBase.react'));j=i&&i.prototype;k.prototype.renderContactNameInput=function(){if(this.props.isLoading)return c('React').createElement(c('XUISpinner.react'),null);return (c('React').createElement(c('FBPaymentsNameFormField.react'),{className:"_3vg0",errorMessage:this.props.errorMessage,height:'tall',name:'name',onChange:this.props.onContactNameChange,value:this.props.contactName}));};k.prototype.render=function(){return (c('React').createElement('div',{className:"__j9"},c('React').createElement(c('XUIGrayText.react'),{display:'block',size:'small'},this.getContactNameLabel()),c('React').createElement('div',{className:"_3-8x _52jv _223u"},this.renderContactNameInput())));};function k(){i.apply(this,arguments);}f.exports=k;}),null);
__d('FBPaymentsContactNameInputContainer.react',['FBPaymentsContactInfoStore','FBPaymentsContactNameInputContainerBase.react','FBPaymentsContactNameInputView.react','FluxContainer'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FBPaymentsContactNameInputContainerBase.react'));i=h&&h.prototype;j.__getContactInfoStore=function(){return c('FBPaymentsContactInfoStore');};j.prototype.__getView=function(){return c('FBPaymentsContactNameInputView.react');};function j(){h.apply(this,arguments);}f.exports=c('FluxContainer').create(j,{withProps:true});}),null);
__d('FBPaymentsContactPhoneNumberSelectorContainerBase.react',['FBPaymentsContactInfoTypes','FBPaymentsExtensionInterface.react','React','abstractMethod','immutable'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FBPaymentsExtensionInterface.react'));i=h&&h.prototype;function j(k){i.constructor.call(this,k);this.handleContactPhoneNumberClick=function(l){var m=this.state.contactPhoneNumbers&&this.state.contactPhoneNumbers.find(function(n){return n.id===l;});this.setState({selectedContactPhoneNumber:m});}.bind(this);this.handleNewContactPhoneNumberChange=function(l,m,n){this.setState({newContactPhoneNumber:m,isNewContactPhoneNumberValid:n.isValid,validationErrorMessage:n.errorMessage});}.bind(this);this.handleAddNewContactPhoneNumber=function(){this.setState({isSavingNewContactPhoneNumber:true,serverErrorMessage:null});var l={raw_input:this.state.newContactPhoneNumber};this.__getAPI().addContactPhoneNumber(l,this.handleNewContactPhoneNumberAdded,this.handleNewContactPhoneNumberAddedError);}.bind(this);this.handleNewContactPhoneNumberAdded=function(l){this.setState({isSavingNewContactPhoneNumber:false,newContactPhoneNumberID:l,selectedContactPhoneNumber:null,showForm:false});this.$FBPaymentsContactPhoneNumberSelectorContainerBase1();}.bind(this);this.handleNewContactPhoneNumberAddedError=function(l){this.setState({isSavingNewContactPhoneNumber:false,serverErrorMessage:l.message});}.bind(this);this.handleContactPhoneNumberRowClicked=function(){this.props.onRequestActive(true);}.bind(this);this.handleCancelActiveStateClick=function(){this.props.onRequestActive(false);}.bind(this);this.handleShowForm=function(){this.handleToggleShowForm(true);}.bind(this);this.handleHideForm=function(){this.handleToggleShowForm(false);}.bind(this);this.handleClearInput=function(){this.setState({isNewContactPhoneNumberValid:false,newContactPhoneNumber:'',serverErrorMessage:null,validationErrorMessage:null});}.bind(this);this.state={contactPhoneNumbers:null,isLoading:false,isNewContactPhoneNumberValid:false,isSavingNewContactPhoneNumber:false,newContactPhoneNumber:'',newContactPhoneNumberID:null,selectedContactPhoneNumber:null,serverErrorMessage:null,showForm:false,validationErrorMessage:null};}j.getStores=function(){return [this.__getContactInfoStore()];};j.calculateState=function(k,l){var m=k||{},n=c('FBPaymentsContactInfoTypes').PHONE_NUMBER,o=this.__getContactInfoStore().get(n);m.isLoading=o.isLoading();if(o.hasValue()){var p=o.getValueEnforcing();m.contactPhoneNumbers=p;if(m.newContactPhoneNumberID){var q=p.find(function(s){return s.id===m.newContactPhoneNumberID;});if(q){m.selectedContactPhoneNumber=q;m.newContactPhoneNumber='';m.newContactPhoneNumberID=null;}}else if(!m.selectedContactPhoneNumber){var r=p.filter(function(s){return s.isDefault;}).first();if(!r)r=p.first();if(r)m.selectedContactPhoneNumber=r;}}return m;};j.__calculateExtensionState=function(k){var l=false,m={};if(k.selectedContactPhoneNumber){l=true;m={phoneNumber:k.selectedContactPhoneNumber.intlNumberWithPlus,id:k.selectedContactPhoneNumber.id};}return {extraData:m,ready:l};};j.__getContactInfoStore=function(){return c('abstractMethod')('FBPaymentsContactPhoneNumberSelectorContainerBase','__getContactInfoStore');};j.prototype.$FBPaymentsContactPhoneNumberSelectorContainerBase1=function(){var k=c('FBPaymentsContactInfoTypes').PHONE_NUMBER;this.constructor.__getContactInfoStore().fetch(k);this.setState({isLoading:true});};j.prototype.handleToggleShowForm=function(k){this.setState({showForm:k});this.handleClearInput();};j.prototype.__getView=function(){return c('abstractMethod')('FBPaymentsContactPhoneNumberSelectorContainerBase','__getView');};j.prototype.__getAPI=function(){return c('abstractMethod')('FBPaymentsContactPhoneNumberSelectorContainerBase','__getAPI');};j.prototype.render=function(){var k=this.__getView();return (c('React').createElement(k,babelHelpers['extends']({},this.state,{isActive:this.props.isActive,onAddNewContactPhoneNumber:this.handleAddNewContactPhoneNumber,onCancelActiveStateClick:this.handleCancelActiveStateClick,onClearInput:this.handleClearInput,onContactPhoneNumberClick:this.handleContactPhoneNumberClick,onHideForm:this.handleHideForm,onNewContactPhoneNumberChange:this.handleNewContactPhoneNumberChange,onRowClicked:this.handleContactPhoneNumberRowClicked,onShowForm:this.handleShowForm})));};f.exports=j;}),null);
__d('FBPaymentsContactPhoneNumberSelectorViewBase.react',['fbt','FBPaymentsLinkHelper','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.getCancelButtonText=function(){return h._("Cancel");};l.prototype.getSaveButtonText=function(){return h._("Save");};l.prototype.getBackButtonText=function(){return h._("Back");};l.prototype.getContactPhoneNumberLabel=function(){return h._("Contact phone number");};l.prototype.getAddContactPhoneNumberText=function(){return h._("Add");};l.prototype.getAddContactPhoneNumberNUXText=function(){return h._("Add New Phone Number");};l.prototype.getAddContactPhoneNumberPlaceholder=function(){return h._("New phone number");};l.prototype.getSecurityMessage=function(){return h._("Your contact phone number is stored securely and only shared with the seller you're purchasing from. {Link. =Learn more}",[h.param('Link. =Learn more',c('React').createElement('a',{href:c('FBPaymentsLinkHelper').getPayerProtectionURI(),target:'_blank'},h._("Learn more")))]);};function l(){i.apply(this,arguments);}l.propTypes={contactPhoneNumbers:k.object,isActive:k.bool.isRequired,isLoading:k.bool.isRequired,isNewContactPhoneNumberValid:k.bool.isRequired,isSavingNewContactPhoneNumber:k.bool.isRequired,newContactPhoneNumber:k.string.isRequired,onAddNewContactPhoneNumber:k.func.isRequired,onCancelActiveStateClick:k.func.isRequired,onClearInput:k.func.isRequired,onContactPhoneNumberClick:k.func.isRequired,onHideForm:k.func.isRequired,onNewContactPhoneNumberChange:k.func.isRequired,onRowClicked:k.func.isRequired,onShowForm:k.func.isRequired,selectedContactPhoneNumber:k.object,serverErrorMessage:k.oneOfType([k.node,k.string]),showForm:k.bool,validationErrorMessage:k.node};f.exports=l;}),null);
__d('FBPaymentsPhoneNumberFormField.react',['fbt','FBPaymentsFormField.react','FBPaymentsFormFieldInputConfigs','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;k.prototype.getPlaceholderText=function(){return h._("Phone number");};k.prototype.render=function(){return (c('React').createElement(c('FBPaymentsFormField.react'),babelHelpers['extends']({config:c('FBPaymentsFormFieldInputConfigs').PHONE_NUMBER_INPUT_CONFIG,placeholder:this.getPlaceholderText()},this.props)));};function k(){i.apply(this,arguments);}k.propTypes=c('FBPaymentsFormField.react').propTypes;f.exports=k;}),null);
__d('FBPaymentsContactPhoneNumberSelectorView.react',['cx','FBPaymentsContactPhoneNumberSelectorViewBase.react','FBPaymentsLoadingView.react','FBPaymentsPhoneNumberFormField.react','FBPaymentsRichSelector.react','Layout.react','React','XUIButton.react','XUIGrayText.react','XUISpinner.react','XUIText.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('FBPaymentsRichSelector.react').Option,l=c('Layout.react').Column,m=c('Layout.react').FillColumn;i=babelHelpers.inherits(n,c('FBPaymentsContactPhoneNumberSelectorViewBase.react'));j=i&&i.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=j.constructor).call.apply(o,[this].concat(r)),this.handleSelectorChange=function(t){var u=t.value;this.props.onContactPhoneNumberClick(u);}.bind(this),p;}n.prototype.renderContactPhoneNumberListItem=function(o){return (c('React').createElement(k,{key:o.id,label:o.intlNumberWithPlus,value:o.id},c('React').createElement(c('XUIGrayText.react'),{shade:'dark'},o.intlNumberWithPlus)));};n.prototype.renderServerErrorMessage=function(){if(!this.props.serverErrorMessage)return null;return (c('React').createElement(c('XUIText.react'),{className:"_14tg",display:'block',size:'small'},this.props.serverErrorMessage));};n.prototype.renderAddContactPhoneNumberInputListItem=function(){return (c('React').createElement(k,{className:"_5kyc",clickable:false,key:'add_contact_phone_number_input'},c('React').createElement('div',{className:"_1jnq"},this.renderServerErrorMessage(),c('React').createElement(c('Layout.react'),null,c('React').createElement(m,null,c('React').createElement(c('FBPaymentsPhoneNumberFormField.react'),{className:"_3vg0",errorMessage:this.props.validationErrorMessage,name:'phoneNumber',onChange:this.props.onNewContactPhoneNumberChange,placeholder:this.getAddContactPhoneNumberPlaceholder(),value:this.props.newContactPhoneNumber})),c('React').createElement(l,null,c('React').createElement(c('XUIButton.react'),{className:"_3-9a _3yca",disabled:!this.props.isNewContactPhoneNumberValid,label:this.getAddContactPhoneNumberText(),onClick:this.props.onAddNewContactPhoneNumber,size:'large',use:'confirm'}))),c('React').createElement(c('FBPaymentsLoadingView.react'),{overlay:true,visible:this.props.isSavingNewContactPhoneNumber}))));};n.prototype.renderSecurityMessageListItem=function(){return (c('React').createElement(k,{className:"_2y76 _5kyc",clickable:false,key:'security_message'},c('React').createElement(c('XUIGrayText.react'),{display:'block',shade:'light',size:'small'},this.getSecurityMessage())));};n.prototype.renderContactPhoneNumbersDropdown=function(){if(this.props.isLoading)return c('React').createElement(c('XUISpinner.react'),null);var o=this.props.contactPhoneNumbers;if(!o)return null;var p=this.props.selectedContactPhoneNumber,q=p&&p.id;return (c('React').createElement(c('FBPaymentsRichSelector.react'),{defaultLabel:this.getAddContactPhoneNumberNUXText(),defaultValue:q,name:'contact_phone_number_selector',onChange:this.handleSelectorChange,onToggleLayer:this.props.onClearInput},o.map(this.renderContactPhoneNumberListItem),this.renderAddContactPhoneNumberInputListItem(),this.renderSecurityMessageListItem()));};n.prototype.render=function(){return (c('React').createElement('div',{className:"__j9"},c('React').createElement(c('XUIGrayText.react'),{display:'block',size:'small'},this.getContactPhoneNumberLabel()),c('React').createElement('div',{className:"_3-8x _52jv"},this.renderContactPhoneNumbersDropdown())));};f.exports=n;}),null);
__d('FBPaymentsContactPhoneNumberSelectorContainer.react',['FBPaymentsContactInfoStore','FBPaymentsContactPhoneNumberSelectorContainerBase.react','FBPaymentsContactPhoneNumberSelectorView.react','FBPaymentsModulesAPI','FluxContainer'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FBPaymentsContactPhoneNumberSelectorContainerBase.react'));i=h&&h.prototype;j.__getContactInfoStore=function(){return c('FBPaymentsContactInfoStore');};j.prototype.__getView=function(){return c('FBPaymentsContactPhoneNumberSelectorView.react');};j.prototype.__getAPI=function(){return c('FBPaymentsModulesAPI');};function j(){h.apply(this,arguments);}f.exports=c('FluxContainer').create(j,{withProps:true});}),null);
__d('FBPaymentsCustomOptionsContainerBase.react',['invariant','FBPaymentsExtensionInterface.react','React','abstractMethod','guid','idx'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k='custom_',l='price';i=babelHelpers.inherits(m,c('FBPaymentsExtensionInterface.react'));j=i&&i.prototype;function m(n){j.constructor.call(this,n);this.handleCustomOptionClick=function(p){this.setState({selectedOptionID:p});}.bind(this);this.handleCustomOptionRowClicked=function(){this.props.onRequestActive(true);}.bind(this);this.handleCancelActiveStateClick=function(){this.props.onRequestActive(false);}.bind(this);this.handleAddCustomOptionClick=function(){this.props.onRequestActive(true);this.setState({showForm:true});}.bind(this);this.handleNewCustomOptionFormDataChange=function(p,q){this.setState({customOptionFormData:p,isCustomOptionFormValid:q});}.bind(this);this.handleSaveNewCustomOption=function(){var p,q,r=this.state.configuration,s=(p=r)!=null?(q=p.customOption)!=null?q.formFields:q:p,t=this.state.customOptionFormData;s&&t||h(0);var u=t.title,v=t.price,w=void 0;if(v){var x=s.get(l);x&&x.currency||h(0);w={currency:x.currency,amount:v};}var y={optionId:k+c('guid')(),optionPrice:w,optionTitle:u};r.options.push(y);this.props.onRequestActive(false);this.setState({configuration:r,customOptionFormData:null,isCustomOptionFormValid:false,selectedOptionID:y.optionId,showForm:false});}.bind(this);var o=this.$FBPaymentsCustomOptionsContainerBase1(n.extensionConfiguration);this.state={configuration:o,customOptionFormData:null,isCustomOptionFormValid:false,selectedOptionID:o.shouldPreSelect?o.options[0].optionId:null,showForm:false};}m.__calculateExtensionState=function(n){var o=false,p={},q=n.selectedOptionID,r=n.configuration.options;if(q){var s=void 0,t=void 0;r.some(function(w){if(w.optionId===q){t=w;s=w.optionPriceList;return true;}return false;});var u=q.startsWith(k),v=u?t:null;o=true;p={collectedDataKey:n.configuration.collectedDataKey,customOption:v,optionId:q,optionPriceList:s,priceModel:n.configuration.priceModel};}return {extraData:p,ready:o};};m.prototype.$FBPaymentsCustomOptionsContainerBase1=function(n){if(n.identifier!=='CUSTOM_OPTIONS')throw Error('Options extension must be supplied proper configuration');return n;};m.prototype.componentWillReceiveProps=function(n){var o=this.$FBPaymentsCustomOptionsContainerBase1(n.extensionConfiguration),p=null;o.options.some(function(q){if(q.optionId===this.state.selectedOptionID){p=q.optionId;return true;}return false;}.bind(this));this.setState({configuration:o,selectedOptionID:p});};m.prototype.__getView=function(){return c('abstractMethod')('FBPaymentsCustomOptionsContainerBase','__getView');};m.prototype.render=function(){var n=this.__getView();return (c('React').createElement(n,babelHelpers['extends']({},this.state,{isActive:this.props.isActive,isCustomOptionFormSaveEnabled:this.state.isCustomOptionFormValid,onAddCustomOptionClick:this.handleAddCustomOptionClick,onCancelActiveStateClick:this.handleCancelActiveStateClick,onCustomOptionClick:this.handleCustomOptionClick,onCustomOptionFormDataChange:this.handleNewCustomOptionFormDataChange,onRowClicked:this.handleCustomOptionRowClicked,onSaveNewCustomOption:this.handleSaveNewCustomOption})));};f.exports=m;}),null);
__d('FBPaymentsCustomOptionsViewBase.react',['fbt','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.ADD_CUSTOM_OPTION_KEY='add_custom_option',n;}l.prototype.getBackButtonText=function(){return h._("Back");};l.prototype.getAddButtonLabel=function(){return h._("Add");};l.propTypes={configuration:k.object.isRequired,isActive:k.bool.isRequired,isCustomOptionFormSaveEnabled:k.bool,onAddCustomOptionClick:k.func.isRequired,onCancelActiveStateClick:k.func.isRequired,onCustomOptionClick:k.func.isRequired,onCustomOptionFormDataChange:k.func.isRequired,onRowClicked:k.func.isRequired,onSaveNewCustomOption:k.func.isRequired,selectedOptionID:k.string,showForm:k.bool};f.exports=l;}),null);
__d('FBPaymentsCustomOptionsView.react',['cx','invariant','FBPaymentsCustomForm.react','FBPaymentsCustomOptionsViewBase.react','FBPaymentsRichSelector.react','React','XUIButton.react','XUIGrayText.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('FBPaymentsRichSelector.react').Option;j=babelHelpers.inherits(m,c('FBPaymentsCustomOptionsViewBase.react'));k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.handleSelectorChange=function(s){if(s.value===this.ADD_CUSTOM_OPTION_KEY){this.props.onAddCustomOptionClick();return;}var t=s.value;this.props.onCustomOptionClick(t);}.bind(this),o;}m.prototype.renderOptionItem=function(n){return (c('React').createElement(l,{key:n.optionId,label:n.optionTitle,value:n.optionId},c('React').createElement(c('XUIGrayText.react'),{shade:'dark'},n.optionTitle)));};m.prototype.renderAddCustomOptionListItem=function(){var n=this.props.configuration.customOption;if(!n)return null;return (c('React').createElement(l,{className:"_5kyc _52jv",key:this.ADD_CUSTOM_OPTION_KEY,label:n.actionableTitle,value:this.ADD_CUSTOM_OPTION_KEY},c('React').createElement(c('XUIGrayText.react'),{className:"_1297"},n.actionableTitle)));};m.prototype.renderCustomOptionForm=function(){var n=this.props.configuration.customOption;n||i(0);return (c('React').createElement('div',null,c('React').createElement('div',{className:"_1j8c _2pie"},c('React').createElement(c('XUIGrayText.react'),{className:"_3yoq _1ghk _3-96",display:'block',shade:'medium',size:'small'},n.title),c('React').createElement(c('FBPaymentsCustomForm.react'),{fields:Array.from(n.formFields.values()),onChange:this.props.onCustomOptionFormDataChange}),c('React').createElement(c('XUIGrayText.react'),{className:"_3yor",display:'block',shade:'light',size:'small'},n.disclaimer)),c('React').createElement('div',{className:"_52jw _2ph_ _5kyc"},c('React').createElement(c('XUIButton.react'),{label:this.getBackButtonText(),onClick:this.props.onCancelActiveStateClick}),c('React').createElement(c('XUIButton.react'),{disabled:!this.props.isCustomOptionFormSaveEnabled,label:this.getAddButtonLabel(),onClick:this.props.onSaveNewCustomOption,use:'confirm'}))));};m.prototype.render=function(){if(this.props.isActive&&this.props.showForm)return this.renderCustomOptionForm();return (c('React').createElement('div',{className:"__j9"},c('React').createElement(c('XUIGrayText.react'),{display:'block',size:'small'},this.props.configuration.title),c('React').createElement('div',{className:"_3-8x _52jv"},c('React').createElement(c('FBPaymentsRichSelector.react'),{defaultLabel:this.props.configuration.actionableTitle,defaultValue:this.props.selectedOptionID,onChange:this.handleSelectorChange},this.props.configuration.options.map(this.renderOptionItem),this.renderAddCustomOptionListItem()))));};f.exports=m;}),null);
__d('FBPaymentsCustomOptionsContainer.react',['FBPaymentsCustomOptionsContainerBase.react','FBPaymentsCustomOptionsView.react'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FBPaymentsCustomOptionsContainerBase.react'));i=h&&h.prototype;j.prototype.__getView=function(){return c('FBPaymentsCustomOptionsView.react');};function j(){h.apply(this,arguments);}f.exports=j;}),null);
__d('FBPaymentsExtensionManagerBase',['FBPaymentsCheckoutConstants','FBPaymentsExtensionInterface.react','Map','abstractMethod'],(function a(b,c,d,e,f,g){'use strict';var h=c('FBPaymentsCheckoutConstants').Extensions;i.prototype.getExtensionContainer=function(j){if(!h[j])throw Error('Non-existent payments extension '+j);var k=this.__getExtensionMap().get(j);if(!k)throw Error('Unimplemented payments extension '+j);return k;};i.prototype.__getExtensionMap=function(){return c('abstractMethod')('FBPaymentsExtensionManagerBase','__getExtensionMap');};function i(){}f.exports=i;}),null);
__d('FBPaymentsMailingAddressSelectorContainerBase.react',['invariant','FBPaymentsContactInfoTypes','FBPaymentsExtensionInterface.react','React','abstractMethod','immutable'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('FBPaymentsContactInfoTypes').MAILING_ADDRESS;i=babelHelpers.inherits(l,c('FBPaymentsExtensionInterface.react'));j=i&&i.prototype;function l(m){j.constructor.call(this,m);this.handleAddMailingAddressClick=function(){this.props.onRequestActive(true);}.bind(this);this.handleMailingAddressClick=function(n){var o=this.state.mailingAddresses&&this.state.mailingAddresses.find(function(p){return p.id===n;});this.setState({selectedAddress:o});}.bind(this);this.handleCancelActiveStateClick=function(){this.setState({saveErrors:null});this.props.onRequestActive(false);}.bind(this);this.handleAddressFormChanged=function(n,o){this.setState({isNewAddressValid:n,newAddress:o});}.bind(this);this.handleSaveNewAddress=function(){var n=this.state.newAddress;n||h(0);this.setState({isSaving:true,saveErrors:null});this.__getAPI().addMailingAddress(n,this.handleSaveNewAddressSuccess,this.handleSaveNewAddressError);}.bind(this);this.handleSaveNewAddressSuccess=function(n){this.setState({isSaving:false,newAddressID:n});this.props.onRequestActive(false);this.$FBPaymentsMailingAddressSelectorContainerBase1();}.bind(this);this.handleSaveNewAddressError=function(n){this.setState({isSaving:false,saveErrors:n});}.bind(this);this.state={isLoading:false,isNewAddressValid:false,isSaving:false,mailingAddresses:null,newAddress:null,newAddressID:null,saveErrors:null,selectedAddress:null,showForm:false};}l.getStores=function(){return [this.__getContactInfoStore()];};l.calculateState=function(m,n){var o=m||{},p=this.__getContactInfoStore().get(k);o.isLoading=p.isLoading();if(p.hasValue()){var q=p.getValueEnforcing();o.mailingAddresses=q;if(o.newAddressID){var r=q.find(function(t){return t.id===o.newAddressID;});if(r){o.selectedAddress=r;o.newAddress=null;o.newAddressID=null;}}else if(!o.selectedAddress){var s=q.filter(function(t){return t.isDefault;}).first();if(!s)s=q.first();if(s)o.selectedAddress=s;}}return o;};l.__calculateExtensionState=function(m){var n=false,o={},p=m.selectedAddress;if(p){n=true;o={mailingAddressID:p.id};}return {extraData:o,ready:n};};l.__getContactInfoStore=function(){return c('abstractMethod')('FBPaymentsMailingAddressSelectorContainerBase','__getContactInfoStore');};l.prototype.$FBPaymentsMailingAddressSelectorContainerBase1=function(){this.constructor.__getContactInfoStore().fetch(k);this.setState({isLoading:true});};l.prototype.__getAPI=function(){return c('abstractMethod')('FBPaymentsMailingAddressSelectorContainerBase','__getAPI');};l.prototype.__getView=function(){return c('abstractMethod')('FBPaymentsMailingAddressSelectorContainerBase','__getView');};l.prototype.render=function(){var m=this.__getView();return (c('React').createElement(m,babelHelpers['extends']({},this.state,{isActive:this.props.isActive,onAddMailingAddressClick:this.handleAddMailingAddressClick,onAddressFormChanged:this.handleAddressFormChanged,onCancelActiveStateClick:this.handleCancelActiveStateClick,onMailingAddressClick:this.handleMailingAddressClick,onSaveNewAddress:this.handleSaveNewAddress})));};f.exports=l;}),null);
__d('FBPaymentsAddButton.react',['ix','cx','Image.react','React','XUIButton.react','fbglyph','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;m.prototype.render=function(){var n=c('React').createElement(c('Image.react'),{className:"_2vzy",src:h("\/images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/plus_12_accent-blue.png")});return (c('React').createElement(c('XUIButton.react'),{className:c('joinClasses')("_2vzz _53q9",this.props.className),imageRight:n,label:this.props.label,onClick:this.props.onClick}));};function m(){j.apply(this,arguments);}m.propTypes={label:l.node.isRequired,onClick:l.func};f.exports=m;}),null);
__d('FBPaymentsAddressCountrySelectorFormField_DEPRECATED.react',['cx','fbt','ix','CreditCardCountries','Image.react','React','XUIError.react','XUISingleSelector.react','XUISingleSelectorButton.react','joinClasses'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('XUISingleSelector.react').Option,n=c('React').PropTypes,o='country_selector_label';k=babelHelpers.inherits(p,c('React').Component);l=k&&k.prototype;function p(){var q,r;for(var s=arguments.length,t=Array(s),u=0;u<s;u++)t[u]=arguments[u];return r=(q=l.constructor).call.apply(q,[this].concat(t)),this.state={errorMessage:null,focused:false,value:this.props.value||o},this.$FBPaymentsAddressCountrySelectorFormField_DEPRECATED1=false,this.handleChange=function(v){var w=v.value;this.setState({value:w});this.triggerChange(w);}.bind(this),this.handleFocus=function(){this.setState({focused:true});this.$FBPaymentsAddressCountrySelectorFormField_DEPRECATED1=true;}.bind(this),this.handleBlur=function(){this.setState({focused:false});}.bind(this),r;}p.prototype.componentDidMount=function(){this.triggerChange(this.state.value);};p.prototype.triggerChange=function(q){var r=q!==o;if(!r&&this.props.required){this.setState({errorMessage:i._("Please select a country")});}else this.setState({errorMessage:null});this.props.onChange&&this.props.onChange(this.props.name,q,r,false);};p.prototype.shouldShowError=function(){return !!this.state.errorMessage&&this.$FBPaymentsAddressCountrySelectorFormField_DEPRECATED1&&!this.state.focused;};p.prototype.renderSelectorLabel=function(){return (c('React').createElement(m,{disabled:'true',value:o},i._("Select a country")));};p.prototype.renderSelectorOptions=function(){return Object.keys(c('CreditCardCountries')).map(function(q){var r=c('CreditCardCountries')[q];return (c('React').createElement(m,{key:q,value:q},r));});};p.prototype.renderCustomButton=function(){var q=this.props.width?{maxwidth:0}:{},r=this.shouldShowError()?c('React').createElement(c('Image.react'),{className:"_3-8s",src:j('/images/p2p/error-solid-red_s.png')}):null,s=c('React').createElement('span',{className:"_11qs"},r,c('React').createElement(c('Image.react'),{src:j('/images/ui/x/selector/chevron.png')}));return (c('React').createElement(c('XUISingleSelectorButton.react'),babelHelpers['extends']({className:"_11qt"+(' '+"_11qu"),haschevron:false,imageRight:s,onBlur:this.handleBlur,onFocus:this.handleFocus,size:this.props.size},q)));};p.prototype.render=function(){var q=void 0;if(this.props.width)q={width:this.props.width+'%'};var r=this.shouldShowError()?this.state.errorMessage:null,s=this.props.showLabel?c('React').createElement('label',{className:"_1js3"},i._("Country")):null;return (c('React').createElement('div',{className:"_11qv",style:q},c('React').createElement('div',{className:this.props.useGutter?"_11qw":''},s,c('React').createElement(c('XUIError.react'),{xuiError:r},c('React').createElement(c('XUISingleSelector.react'),{className:c('joinClasses')(this.props.className,!!this.props.width?"_11qx":''),customButton:this.renderCustomButton(),maxheight:240,name:this.props.name,onChange:this.handleChange,value:this.state.value},this.renderSelectorLabel(),this.renderSelectorOptions())))));};p.propTypes={className:n.string,name:n.string.isRequired,onChange:n.func,required:n.bool,showLabel:n.bool,size:n.oneOf(['large','xlarge']),useGutter:n.bool,value:n.string,width:n.number};p.defaultProps={required:false,showLabel:false,size:'large'};f.exports=p;}),null);
__d('FBPaymentsAddressLabelFormField_DEPRECATED.react',['cx','fbt','React','XUISelector.react','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('XUISelector.react').Option,m=c('React').PropTypes,n=[i._("Home"),i._("Work"),i._("Other")];j=babelHelpers.inherits(o,c('React').Component);k=j&&j.prototype;function o(){var p,q;for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=k.constructor).call.apply(p,[this].concat(s)),this.state={value:n[0].toString()},this.handleChange=function(u){var v=u.value;this.setState({value:v});this.triggerChange(v);}.bind(this),this.triggerChange=function(u){var v=this.props.onChange;if(typeof v==='function')v(this.props.name,u,true,false);}.bind(this),this.renderSelectorOptions=function(){return n.map(function(u,v){return (c('React').createElement(l,{key:v,value:u.toString()},u));});},q;}o.prototype.componentDidMount=function(){this.triggerChange(this.state.value);};o.prototype.render=function(){return (c('React').createElement(c('XUISelector.react'),{className:c('joinClasses')(this.props.className,"_e-n"),onChange:this.handleChange,name:this.props.name,value:this.state.value},this.renderSelectorOptions()));};o.propTypes={onChange:m.func,name:m.string.isRequired};f.exports=o;}),null);
__d('FBPaymentsForm_DEPRECATED.react',['cx','FBPaymentsErrorNotice_DEPRECATED.react','React','getObjectValues'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('React').PropTypes,j=c('React').createClass({displayName:'FBPaymentsForm_DEPRECATED',propTypes:{errorTitle:i.string,onValidation:i.func.isRequired,prefilledFormData:i.object,saveErrors:i.object,showIcons:i.bool,showLabels:i.bool,showPlaceholderOnFocus:i.bool,showSecondaryIcons:i.bool,useGutters:i.bool},getDefaultProps:function k(){return {prefilledFormData:{},saveErrors:null,showIcons:true,showLabels:false,showPlaceholderOnFocus:false,showSecondaryIcons:false,useGutters:false};},getInitialState:function k(){var l=this.props.prefilledFormData,m=c('React').Children.toArray(this.props.children),n={};c('React').Children.forEach(m,function(o,p){n[o.props.name]={valid:!o.props.required,value:l?l[o.props.name]:''};});return {fields:n,isValid:false};},_fieldKeyOrder:[],handleFormValueChange:function k(l,m,n,o){var p=this.state.fields;p[l]={valid:n,value:m};this.validateForm();if(this.props.autoTab===true&&o&&n){var q=this._fieldKeyOrder.indexOf(l);if(q!==-1){var r=this._fieldKeyOrder[q+1];if(r){var s=this.refs[r];s&&s.refs.input.focusInput();}}}},validateForm:function k(){var l=true,m=this.state.fields;l=!c('getObjectValues')(m).some(function(n){return !n.valid;});this.setState({isValid:l});this.props.onValidation(l,this.serializeFormFields());},serializeFormFields:function k(){var l=this.state.fields,m={};for(var n in l)if(l.hasOwnProperty(n))m[n]=l[n].value;return m;},getSaveError:function k(l){var m=void 0,n=this.props.saveErrors;if(n&&n.fields&&n.fields[l]){m=n.fields[l].message;if(m.__html)m=m.__html;}return m;},renderGeneralError:function k(){var l=this.getGeneralError();if(l)return (c('React').createElement(c('FBPaymentsErrorNotice_DEPRECATED.react'),{error:l}));},getGeneralError:function k(){if(this.props.saveErrors&&this.props.saveErrors.general)return this.props.saveErrors.general;return null;},renderFormFields:function k(){var l=[],m=[],n=[],o=0,p=c('React').Children.toArray(this.props.children),q=c('React').Children.count(p),r=[];c('React').Children.forEach(p,function(s,t){var u=t===q-1;if(!s)return null;var v=parseInt(s.props.width||'100',10),w=s.props.name;s=c('React').cloneElement(s,{key:w,onChange:this.handleFormValueChange,saveError:this.getSaveError(w),showIcon:this.props.showIcons,showLabel:this.props.showLabels,showPlaceholderOnFocus:this.props.showPlaceholderOnFocus,showSecondaryIcon:this.props.showSecondaryIcons,useGutter:this.props.useGutters,value:this.state.fields[w].value,ref:w});r.push(w);if(!s.props.ignoreStyling){if(Math.round(o)<100)l.push(s);o+=v;if(Math.round(o)===100||u){m.push(c('React').createElement('div',{className:(this.props.useGutters?"_1pp":'')+(' '+"_1pq")+(l.length>1?' '+"_1pr":'')+(m.length===0?' '+"_1pv":'')+(u?' '+"_1pw":''),key:m.length},l));l=[];o=0;}}else n.push(s);}.bind(this));this._fieldKeyOrder=r;return n.concat(m);},render:function k(){return (c('React').createElement('form',{className:"_1px"},this.renderGeneralError(),this.renderFormFields()));}});f.exports=j;}),null);
__d('FBPaymentsAddressForm_DEPRECATED.react',['cx','fbt','FBPaymentsAddressCountrySelectorFormField_DEPRECATED.react','FBPaymentsAddressLabelFormField_DEPRECATED.react','FBPaymentsForm_DEPRECATED.react','FBPaymentsFormField_DEPRECATED.react','React','emptyFunction'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.state={formData:{},isValid:false},this.handleValidation=function(s,t){this.setState({formData:t,isValid:s});this.props.onValidation(s,t);}.bind(this),o;}m.prototype.render=function(){var n=!!(this.props.prefilledFormData&&this.props.prefilledFormData.care_of),o=this.props.showAddressLabelSelector?c('React').createElement(c('FBPaymentsAddressLabelFormField_DEPRECATED.react'),{className:"_3-96",name:'label',ignoreStyling:true,required:true}):null;return (c('React').createElement(c('FBPaymentsForm_DEPRECATED.react'),{errorTitle:i._("Problem while saving address"),prefilledFormData:this.props.prefilledFormData,onValidation:this.handleValidation,saveErrors:this.props.saveErrors,useGutters:true},o,c('React').createElement(c('FBPaymentsFormField_DEPRECATED.react'),{initiallyFocused:!n,name:'care_of',onChange:c('emptyFunction'),placeholder:i._("Name"),required:true,width:100}),c('React').createElement(c('FBPaymentsFormField_DEPRECATED.react'),{initiallyFocused:n,name:'street1',onChange:c('emptyFunction'),placeholder:i._("Street address"),required:true,width:100}),c('React').createElement(c('FBPaymentsFormField_DEPRECATED.react'),{name:'street2',onChange:c('emptyFunction'),placeholder:i._("Street address continued (optional)"),width:100}),c('React').createElement(c('FBPaymentsFormField_DEPRECATED.react'),{name:'city',onChange:c('emptyFunction'),placeholder:i._("Town\/City"),required:true,width:50}),c('React').createElement(c('FBPaymentsFormField_DEPRECATED.react'),{name:'state',onChange:c('emptyFunction'),placeholder:i._("County\/Region"),required:true,width:50}),c('React').createElement(c('FBPaymentsFormField_DEPRECATED.react'),{name:'zip',onChange:c('emptyFunction'),placeholder:i._("ZIP\/Postcode"),width:50}),c('React').createElement(c('FBPaymentsAddressCountrySelectorFormField_DEPRECATED.react'),{name:'country',onChange:c('emptyFunction'),required:true,size:'xlarge',width:50})));};m.propTypes={onValidation:l.func.isRequired,prefilledFormData:l.object,saveErrors:l.object,showAddressLabelSelector:l.bool};m.defaultProps={onValidation:c('emptyFunction'),prefilledFormData:{},saveErrors:null,showAddressLabelSelector:true};f.exports=m;}),null);
__d('FBPaymentsMailingAddressSelectorViewBase.react',['fbt','FBPaymentsLinkHelper','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.getBackButtonText=function(){return h._("Back");};l.prototype.getCancelButtonText=function(){return h._("Cancel");};l.prototype.getSaveButtonText=function(){return h._("Save");};l.prototype.getMailingAddressLabel=function(){return h._("Delivery Address");};l.prototype.getAddMailingAddressNUXLabel=function(){return h._("Add Delivery Address");};l.prototype.getAddMailingAddressLabel=function(){return h._("Add New Delivery Address");};l.prototype.getAddAddressTitle=function(){return h._("Add a New Address");};l.prototype.getShippingAddressMessage=function(){return h._("Your purchase will be sent to this address. {Link. =Learn more}",[h.param('Link. =Learn more',c('React').createElement('a',{href:c('FBPaymentsLinkHelper').getPayerProtectionURI(),target:'_blank'},h._("Learn more")))]);};function l(){i.apply(this,arguments);}l.propTypes={isActive:k.bool.isRequired,isLoading:k.bool.isRequired,isNewAddressValid:k.bool.isRequired,isSaving:k.bool.isRequired,mailingAddresses:k.object,onAddMailingAddressClick:k.func.isRequired,onAddressFormChanged:k.func.isRequired,onCancelActiveStateClick:k.func.isRequired,onMailingAddressClick:k.func.isRequired,onSaveNewAddress:k.func.isRequired,saveErrors:k.object,selectedAddress:k.object,showForm:k.bool};f.exports=l;}),null);
__d('FBPaymentsMailingAddressSelectorView.react',['cx','FBPaymentsAddButton.react','FBPaymentsAddressForm_DEPRECATED.react','FBPaymentsLoadingView.react','FBPaymentsMailingAddressSelectorViewBase.react','FBPaymentsRichSelector.react','React','XUIButton.react','XUIGrayText.react','XUISpinner.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('FBPaymentsRichSelector.react').Option,l='new_address';i=babelHelpers.inherits(m,c('FBPaymentsMailingAddressSelectorViewBase.react'));j=i&&i.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=j.constructor).call.apply(n,[this].concat(q)),this.handleSelectorChange=function(s){if(s.value===l){this.props.onAddMailingAddressClick();return;}else{var t=s.value;this.props.onMailingAddressClick(t);}}.bind(this),o;}m.prototype.renderAddMailingAddressButton=function(){return (c('React').createElement(c('FBPaymentsAddButton.react'),{label:this.getAddMailingAddressNUXLabel(),onClick:this.props.onAddMailingAddressClick}));};m.prototype.renderMailingAddressListItem=function(n){return (c('React').createElement(k,{key:n.id,label:n.getDisplayLabel(),value:n.id},c('React').createElement(c('XUIGrayText.react'),{display:'block',shade:'dark'},n.label),c('React').createElement(c('XUIGrayText.react'),{display:'block',shade:'light'},n.getSingleLineAddressWithCountry())));};m.prototype.renderAddMailingAddressListItem=function(){return (c('React').createElement(k,{className:"_52jw _5kyc",clickable:false,key:l,label:this.getAddMailingAddressLabel(),value:l},c('React').createElement(c('XUIButton.react'),{label:this.getAddMailingAddressLabel(),onClick:this.props.onAddMailingAddressClick,use:'confirm'})));};m.prototype.renderShippingAddressMessageListItem=function(){return (c('React').createElement(k,{className:"_2y76 _5kyc",clickable:false,key:'security_message'},c('React').createElement(c('XUIGrayText.react'),{display:'block',shade:'light',size:'small'},this.getShippingAddressMessage())));};m.prototype.renderMailingAddressesDropdown=function(){if(this.props.isLoading)return c('React').createElement(c('XUISpinner.react'),null);var n=this.props.mailingAddresses;if(!n||n.size===0)return this.renderAddMailingAddressButton();var o=this.props.selectedAddress?this.props.selectedAddress.id:l;return (c('React').createElement(c('FBPaymentsRichSelector.react'),{defaultValue:o,multiple:false,name:'mailing_address_selector',onChange:this.handleSelectorChange},n.map(this.renderMailingAddressListItem),this.renderAddMailingAddressListItem(),this.renderShippingAddressMessageListItem()));};m.prototype.renderAddMailingAddress=function(){return (c('React').createElement('div',{className:"_1jnq"},c('React').createElement(c('FBPaymentsLoadingView.react'),{overlay:true,visible:this.props.isSaving}),c('React').createElement('div',{className:"_1j8c"},c('React').createElement('div',{className:"_2pi4"},c('React').createElement(c('XUIGrayText.react'),{className:"_3yoq",display:'block',shade:'dark',size:'small'},this.getAddAddressTitle()),c('React').createElement(c('XUIGrayText.react'),{className:"_3-8w",display:'block',shade:'medium',size:'small'},this.getShippingAddressMessage())),c('React').createElement('div',{className:"_3yor"},c('React').createElement(c('FBPaymentsAddressForm_DEPRECATED.react'),{onValidation:this.props.onAddressFormChanged,saveErrors:this.props.saveErrors}))),c('React').createElement('div',{className:"_52jw _2ph_ _5kyc"},c('React').createElement(c('XUIButton.react'),{label:this.getCancelButtonText(),onClick:this.props.onCancelActiveStateClick}),c('React').createElement(c('XUIButton.react'),{disabled:!this.props.isNewAddressValid||this.props.isSaving,label:this.getSaveButtonText(),onClick:this.props.onSaveNewAddress,use:'confirm'}))));};m.prototype.render=function(){if(this.props.isActive)return this.renderAddMailingAddress();return (c('React').createElement('div',{className:"__j9 _2ph_"},c('React').createElement(c('XUIGrayText.react'),{display:'block',size:'small'},this.getMailingAddressLabel()),c('React').createElement('div',{className:"_3-8x _52jv"},this.renderMailingAddressesDropdown())));};f.exports=m;}),null);
__d('FBPaymentsMailingAddressSelectorContainer.react',['FBPaymentsContactInfoStore','FBPaymentsMailingAddressSelectorContainerBase.react','FBPaymentsMailingAddressSelectorView.react','FBPaymentsModulesAPI','FluxContainer'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FBPaymentsMailingAddressSelectorContainerBase.react'));i=h&&h.prototype;j.__getContactInfoStore=function(){return c('FBPaymentsContactInfoStore');};j.prototype.__getAPI=function(){return c('FBPaymentsModulesAPI');};j.prototype.__getView=function(){return c('FBPaymentsMailingAddressSelectorView.react');};function j(){h.apply(this,arguments);}f.exports=c('FluxContainer').create(j,{withProps:true});}),null);
__d('FBPaymentsNoteExtensionBase.react',['fbt','FBPaymentsExtensionInterface.react','FBPaymentsNormalizers','FBPaymentsValidators','idx'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('FBPaymentsExtensionInterface.react'));j=i&&i.prototype;function k(l){var m;j.constructor.call(this,l);this.DEFAULT_NOTE_MAX_LENGTH=500;this.NOTE_FIELD_NAME='note';this.handleAddNoteClick=function(){this.setState({showNoteField:true});}.bind(this);this.handleFormChange=function(o,p){this.setState({note:o[this.NOTE_FIELD_NAME],isNoteValid:p});}.bind(this);var n=(m=this.getExtensionConfig())!=null?m.optional:m;this.state={isNoteValid:!!n,note:null,showNoteField:false};}k.__calculateExtensionState=function(l){return {extraData:{note:l.note},ready:l.isNoteValid};};k.prototype.getExtensionConfig=function(){var l=this.props.extensionConfiguration;if(l.identifier==='NOTE'){return l;}else return null;};k.prototype.getNoteMaxLength=function(){var l;return (((l=this.getExtensionConfig())!=null?l.length:l)||this.DEFAULT_NOTE_MAX_LENGTH);};k.prototype.isNoteOptional=function(){var l;return !!((l=this.getExtensionConfig())!=null?l.optional:l);};k.prototype.getNoteInputConfig=function(){var l=[];if(!this.isNoteOptional())l.push({validator:c('FBPaymentsValidators').nonEmpty,errorMessage:h._("Please enter a note.")});return {normalizeOnChange:true,normalizers:[c('FBPaymentsNormalizers').truncate(this.getNoteMaxLength())],validations:l};};k.prototype.getNoteFieldPlaceholderText=function(){var l;return (l=this.getExtensionConfig())!=null?l.placeholderText:l;};k.prototype.getNoteExtensionLabel=function(){return h._("Note");};k.prototype.getAddNoteButtonLabel=function(){return h._("Add note");};f.exports=k;}),null);
__d('FBPaymentsNoteExtension.react',['cx','FBPaymentsAddButton.react','FBPaymentsForm.react','FBPaymentsFormField.react','FBPaymentsNoteExtensionBase.react','LeftRight.react','React','XUIGrayText.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('FBPaymentsNoteExtensionBase.react'));j=i&&i.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=j.constructor).call.apply(l,[this].concat(o)),this.NOTE_FIELD_ROWS=4,m;}k.prototype.renderNoteField=function(){var l=this.state.note||'';return (c('React').createElement(c('FBPaymentsForm.react'),{onChange:this.handleFormChange},c('React').createElement(c('FBPaymentsFormField.react'),{config:this.getNoteInputConfig(),fieldType:'textArea',name:this.NOTE_FIELD_NAME,placeholder:this.getNoteFieldPlaceholderText(),required:!this.isNoteOptional(),rows:this.NOTE_FIELD_ROWS,value:l})));};k.prototype.renderNoteButton=function(){return (c('React').createElement(c('FBPaymentsAddButton.react'),{label:this.getAddNoteButtonLabel(),onClick:this.handleAddNoteClick}));};k.prototype.renderNoteLength=function(){var l=this.state.note?this.state.note.length:0;return c('React').createElement('span',null,l,'/',this.getNoteMaxLength());};k.prototype.render=function(){var l=this.state.showNoteField?this.renderNoteField():this.renderNoteButton(),m=this.state.showNoteField?this.renderNoteLength():null;return (c('React').createElement('div',{className:"__j9 _2ph_"},c('React').createElement(c('XUIGrayText.react'),{size:'small'},c('React').createElement(c('LeftRight.react'),null,this.getNoteExtensionLabel(),m)),c('React').createElement('div',{className:"_3-8x _52jv"},l)));};f.exports=k;}),null);
__d('FBPaymentsPINStoreBase',['EventEmitter','FBPaymentsDispatcher','FBPaymentsPINActions','abstractMethod'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=false,k=false,l=null,m=void 0;h=babelHelpers.inherits(n,c('EventEmitter'));i=h&&h.prototype;function n(){i.constructor.call(this);m=c('FBPaymentsDispatcher').register(this.onEventDispatched.bind(this));}n.prototype.getDispatchToken=function(){return m;};n.prototype.onEventDispatched=function(o){var p=o.data,q=o.type;switch(q){case c('FBPaymentsPINActions').types.PIN_SETTINGS_UPDATED:this.handlePINSettingsUpdated(p);this.emit('change');break;}};n.prototype.handlePINSettingsUpdated=function(o){j=false;k=true;l=o;};n.prototype.$FBPaymentsPINStoreBase1=function(){if(j||k)return;j=true;this.__getAPI().fetchPINSettings();};n.prototype.hasFetched=function(){return k;};n.prototype.getPINSettings=function(){if(!j&&!k)this.$FBPaymentsPINStoreBase1();return l;};n.prototype.__getAPI=function(){return c('abstractMethod')('FBPaymentsPINStoreBase','__getAPI');};f.exports=n;}),null);
__d('FBPaymentsPINStore',['FBPaymentsModulesAPI','FBPaymentsPINStoreBase'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('FBPaymentsPINStoreBase'));i=h&&h.prototype;j.prototype.__getAPI=function(){'use strict';return c('FBPaymentsModulesAPI');};function j(){'use strict';h.apply(this,arguments);}f.exports=new j();}),null);
__d('FBPaymentsPINVerificationContainerBase.react',['FBPaymentsDispatcher','FBPaymentsExtensionInterface.react','React','abstractMethod'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FBPaymentsExtensionInterface.react'));i=h&&h.prototype;function j(k){i.constructor.call(this,k);this.$FBPaymentsPINVerificationContainerBase1=function(l){var m=this.state;m.verificationData={pin:l};this.setState(m);this.calculateExtensionStateAndSendUpdateImmediately(m);}.bind(this);this.$FBPaymentsPINVerificationContainerBase2=function(){this.props.onRequestActiveForVerification(false);}.bind(this);this.state={needVerification:false,verificationData:null};}j.prototype.componentWillMount=function(){c('FBPaymentsDispatcher').explicitlyRegisterStore(this.constructor.__getPINStore());};j.__calculateExtensionState=function(k){var l=this.__getPINStore().hasFetched(),m=this.__getPINStore().getPINSettings()!==null;return {extraData:{},ready:true,needVerification:l&&m,verificationData:k.verificationData};};j.__getPINStore=function(){return c('abstractMethod')('FBPaymentsPINVerificationContainerBase','__getPINStore');};j.prototype.__getView=function(){return c('abstractMethod')('FBPaymentsPINVerificationContainerBase','__getView');};j.prototype.render=function(){var k=this.__getView();return (c('React').createElement(k,babelHelpers['extends']({},this.state,{isActive:this.props.isActive,isActiveForVerification:this.props.isActiveForVerification,onCancelActiveForVerificationClick:this.$FBPaymentsPINVerificationContainerBase2,onPINEnter:this.$FBPaymentsPINVerificationContainerBase1})));};f.exports=j;}),null);
__d('FBPaymentsPINConstants',['keyMirror'],(function a(b,c,d,e,f,g){'use strict';var h={PIN_FLOW_TYPES:c('keyMirror')({ENABLE_PIN_PROTECTION:'',VALIDATE_PIN:''}),PIN_PROTECTION_REASON:c('keyMirror')({PAYMENTS:'',THREAD:''}),PIN_FLOW_STEPS:c('keyMirror')({UNKNOWN:'',VALIDATE_PIN:'',VALIDATE_PIN_TO_ENABLE:'',CREATE_PIN:'',CREATE_NEW_PIN:'',PIN_CREATED:'',DELETE_PIN_PASSWORD_CONFIRM:''}),PIN_CREATE_FLOW_STEPS:c('keyMirror')({ENTER_PIN:'',ENTER_PIN_AGAIN:''})};f.exports=h;}),null);
__d('FBPaymentsPINCreateViewBase.react',['fbt','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.getTitle=function(){return h._("Create PIN");};function l(){i.apply(this,arguments);}l.propTypes={bodyText:k.node.isRequired,isStepConfirmPIN:k.bool.isRequired,loadingMaskVisible:k.bool.isRequired,onToggleDialog:k.func,pinConfirmField:k.object,pinField:k.object,renderInline:k.bool};f.exports=l;}),null);
__d('FBPaymentsPINInputFieldView.react',['cx','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.render=function(){var m=[];for(var n=0;n<4;n++)m.push(c('React').createElement('span',{key:n,className:"_5mb2"+(n<this.props.digitsLength?' '+"_5mb8":'')}));var o=[];for(var p=0;p<this.props.digitsLength;p++)o.push(c('React').createElement('span',{key:p,className:"_5mba"}));return (c('React').createElement('div',{className:"_5mbb"+(this.props.shake?' '+"_5mbc":'')},c('React').createElement('div',{className:"_5mbd"},o,c('React').createElement('span',{className:"_5mbe"+(this.props.cursorHidden?' '+"_5mbt":'')})),m,this.props.hiddenInput));};function l(){i.apply(this,arguments);}l.propTypes={cursorHidden:k.bool.isRequired,digitsLength:k.number.isRequired,hiddenInput:k.object.isRequired,shake:k.bool.isRequired};f.exports=l;}),null);
__d('FBPaymentsPINInputFieldContainer.react',['cx','AbstractTextInput.react','FBPaymentsPINInputFieldView.react','Keys','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=500,l=c('React').PropTypes;i=babelHelpers.inherits(m,c('React').Component);j=i&&i.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=j.constructor).call.apply(n,[this].concat(q)),this.state={cursorBlinkingState:false,digits:this.props.pin?this.props.pin.split(''):[]},this.intervalID=null,this.toggleCursorVisibility=function(){this.setState({cursorBlinkingState:!this.state.cursorBlinkingState});}.bind(this),this.onKeyDown=function(s){if(this.props.disabled)return;if(s.keyCode===c('Keys').BACKSPACE)s.preventDefault();if(s.repeat)return;var t=this.state.digits.slice(0);if(s.keyCode>=c('Keys').ZERO&&s.keyCode<=c('Keys').ZERO+9||s.keyCode>=c('Keys').NUMPAD_0&&s.keyCode<=c('Keys').NUMPAD_0+9){if(t.length===4)return;t.push(s.keyCode>=c('Keys').NUMPAD_0?s.keyCode-c('Keys').NUMPAD_0:s.keyCode-c('Keys').ZERO);}else if(s.keyCode===c('Keys').BACKSPACE)t.pop();if(this.intervalID!==null)clearInterval(this.intervalID);this.intervalID=setInterval(this.toggleCursorVisibility,k);this.setState({cursorBlinkingState:false,digits:t});if(t.length===4)this.props.onPINEnter(t.join(''));}.bind(this),this.focusHiddenInput=function(){this.refs.hiddenInput.focusInput();}.bind(this),o;}m.prototype.componentWillReceiveProps=function(n){if(n.pin!==null)this.setState({digits:n.pin.split('')});};m.prototype.componentDidMount=function(){window.addEventListener('keydown',this.onKeyDown);this.intervalID=setInterval(this.toggleCursorVisibility,k);this.focusHiddenInput();};m.prototype.componentWillUnmount=function(){window.removeEventListener('keydown',this.onKeyDown);if(this.intervalID!==null)clearInterval(this.intervalID);};m.prototype.render=function(){var n=this.state.digits.length,o=this.props.disabled||this.state.cursorBlinkingState||n===4,p=c('React').createElement(c('AbstractTextInput.react'),{className:"_5mbu",pattern:'\\d*',ref:'hiddenInput',type:'number'}),q=this.props.disabled?null:this.focusHiddenInput;return (c('React').createElement('div',{onClick:q},c('React').createElement(c('FBPaymentsPINInputFieldView.react'),{cursorHidden:o,digitsLength:n,hiddenInput:p,shake:this.props.shake})));};m.propTypes={disabled:l.bool.isRequired,pin:l.string,shake:l.bool.isRequired,onPINEnter:l.func.isRequired};m.defaultProps={pin:null};f.exports=m;}),null);
__d('FBPaymentsPINCreateContainerBase.react',['fbt','FBPaymentsModulesAPIBase','FBPaymentsPINConstants','FBPaymentsPINCreateViewBase.react','FBPaymentsPINInputFieldContainer.react','React','abstractMethod'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes,l=c('FBPaymentsPINConstants').PIN_CREATE_FLOW_STEPS,m=c('FBPaymentsPINConstants').PIN_PROTECTION_REASON,n=500;i=babelHelpers.inherits(o,c('React').Component);j=i&&i.prototype;function o(p){j.constructor.call(this,p);this.onPINCreated=function(q){this.setState({loading:false});this.props.onPINCreate(this.state.pinEntered);}.bind(this);this.onPINCreateError=function(q){this.setState({loading:false,pinEntered:'',shakePINInput:true});setTimeout(function(){this.setState({errorMessage:q.message,shakePINInput:false,step:l.ENTER_PIN,transition:true});setTimeout(function(){this.setState({transition:false});}.bind(this),n);}.bind(this),n);}.bind(this);this.createPIN=function(){var q=true,r={};if(this.props.protectionReason===m.THREAD){q=false;r[this.props.protectedThread]=true;}this.__getAPI().createPIN({pin:this.state.pinEntered,payments_protected:q,thread_profiles_protected:r},this.onPINCreated,this.onPINCreateError);}.bind(this);this.onPINEntered=function(q){if(this.state.step===l.ENTER_PIN){this.setState({confirmFail:false,errorMessage:'',pinEntered:q,step:l.CONFIRM_PIN,transition:true});setTimeout(function(){this.setState({transition:false});}.bind(this),n);}else if(q===this.state.pinEntered){this.createPIN();this.setState({loading:true});}else{this.setState({pinEntered:'',shakePINInput:true});setTimeout(function(){this.setState({confirmFail:true,shakePINInput:false,step:l.ENTER_PIN,transition:true});setTimeout(function(){this.setState({transition:false});}.bind(this),n);}.bind(this),n);}}.bind(this);this.handleDialogToggled=function(q){if(!q)this.props.onCancel();}.bind(this);if(!p.resetPIN&&p.protectionReason===null)throw new Error('If not resetting PIN, protection reason must be specified');if(p.protectionReason===m.THREAD&&p.protectedThread===null)throw new Error('Thread must be specified for thread protection');this.state={confirmFail:false,errorMessage:'',loading:false,pinEntered:'',shakePINInput:false,step:l.ENTER_PIN,transition:false};}o.prototype.render=function(){var p=void 0;switch(this.state.step){case l.ENTER_PIN:if(this.state.errorMessage){p=this.state.errorMessage;}else if(this.state.confirmFail){p=h._("PIN didn't match. Please try again.");}else if(this.props.resetPIN){p=h._("Create a new 4-digit PIN.");}else if(this.props.protectionReason===m.PAYMENTS){p=h._("Create a 4-digit PIN to use whenever you make a payment.");}else if(this.props.protectionReason===m.THREAD)p=h._("Create a 4-digit PIN to use whenever you enter this thread.");break;case l.CONFIRM_PIN:p=h._("Enter your PIN again to confirm.");break;default:throw new Error('Unhandled PIN create flow state!');}var q=void 0,r=void 0;if(this.state.transition||this.state.step===l.ENTER_PIN)q=c('React').createElement(c('FBPaymentsPINInputFieldContainer.react'),{disabled:this.props.loading||this.state.loading,onPINEnter:this.onPINEntered,shake:this.state.shakePINInput});if(this.state.transition||this.state.step===l.CONFIRM_PIN)r=c('React').createElement(c('FBPaymentsPINInputFieldContainer.react'),{disabled:this.props.loading||this.state.loading,onPINEnter:this.onPINEntered,shake:this.state.shakePINInput});var s=this.__getView();return (c('React').createElement(s,{bodyText:p,isStepConfirmPIN:this.state.step===l.CONFIRM_PIN,loadingMaskVisible:this.props.loading||this.state.loading,onToggleDialog:this.handleDialogToggled,pinConfirmField:r,pinField:q,renderInline:this.props.renderInline}));};o.prototype.__getAPI=function(){return c('abstractMethod')('FBPaymentsPINCreateContainerBase','__getAPI');};o.prototype.__getView=function(){return c('abstractMethod')('FBPaymentsPINCreateContainerBase','__getView');};o.propTypes={loading:k.bool.isRequired,onCancel:k.func.isRequired,onPINCreate:k.func.isRequired,protectedThread:k.string,protectionReason:k.oneOf(Object.keys(m)),renderInline:k.bool,resetPIN:k.bool.isRequired};f.exports=o;}),null);
__d('FBPaymentsPINCreateView.react',['cx','FBPaymentsPINCreateViewBase.react','P2PDialog.react','P2PDialogBody.react','P2PDialogTitle.react','P2PLoadingMask.react','P2PText.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('FBPaymentsPINCreateViewBase.react'));j=i&&i.prototype;k.prototype.render=function(){var l=this.getTitle(),m=c('React').createElement('div',null,c('React').createElement(c('P2PText.react'),{size:'medium',type:'primary',className:"_3-8q"},this.props.bodyText),c('React').createElement('div',{className:"_2iqb"},c('React').createElement('div',{className:"_5ku5"+(this.props.isStepConfirmPIN?' '+"_5ku6":'')},c('React').createElement('div',{className:"_2iqc"},this.props.pinField),c('React').createElement('div',{className:"_2iqc"},this.props.pinConfirmField))),c('React').createElement(c('P2PLoadingMask.react'),{visible:this.props.loadingMaskVisible}));if(this.props.renderInline)return (c('React').createElement('div',{className:"_58ba"},m));return (c('React').createElement(c('P2PDialog.react'),{onToggle:this.props.onToggleDialog,repositionOnUpdate:true,shown:true},c('React').createElement(c('P2PDialogTitle.react'),null,l),c('React').createElement(c('P2PDialogBody.react'),{className:"_wjy"},m)));};function k(){i.apply(this,arguments);}f.exports=k;}),null);
__d('FBPaymentsPINCreateContainer.react',['FBPaymentsModulesAPI','FBPaymentsPINCreateContainerBase.react','FBPaymentsPINCreateView.react'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FBPaymentsPINCreateContainerBase.react'));i=h&&h.prototype;j.prototype.__getAPI=function(){return c('FBPaymentsModulesAPI');};j.prototype.__getView=function(){return c('FBPaymentsPINCreateView.react');};function j(){h.apply(this,arguments);}f.exports=j;}),null);
__d('FBPaymentsPINCreatedViewBase.react',['fbt','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.getTitle=function(){return h._("PIN created");};function l(){i.apply(this,arguments);}l.propTypes={bodyText:k.node.isRequired,onConfirm:k.func,onToggleDialog:k.func};f.exports=l;}),null);
__d('FBPaymentsPINCreatedContainerBase.react',['fbt','FBPaymentsPINConstants','FBPaymentsPINCreatedViewBase.react','React','abstractMethod'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes,l=c('FBPaymentsPINConstants').PIN_PROTECTION_REASON;i=babelHelpers.inherits(m,c('React').Component);j=i&&i.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=j.constructor).call.apply(n,[this].concat(q)),this.handleDialogToggled=function(s){if(!s)this.props.onConfirm();}.bind(this),o;}m.prototype.render=function(){var n=void 0;if(this.props.protectionReason===l.PAYMENTS){n=h._("You'll enter your PIN every time you make a payment.");}else if(this.props.protectionReason===l.THREAD)n=h._("You'll enter your PIN every time you enter this thread.");var o=this.__getView();return (c('React').createElement(o,{bodyText:n,onConfirm:this.props.onConfirm,onToggleDialog:this.handleDialogToggled}));};m.prototype.__getView=function(){return c('abstractMethod')('FBPaymentsPINCreatedViewBase','__getView');};m.propTypes={onConfirm:k.func.isRequired,protectionReason:k.oneOf(Object.keys(l)).isRequired};f.exports=m;}),null);
__d('FBPaymentsPINCreatedView.react',['cx','FBPaymentsPINCreatedViewBase.react','P2PButton.react','P2PDialog.react','P2PDialogBody.react','P2PDialogFooter.react','P2PDialogTitle.react','P2PText.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('FBPaymentsPINCreatedViewBase.react'));j=i&&i.prototype;k.prototype.render=function(){var l=this.getTitle(),m=c('React').createElement(c('P2PDialogFooter.react'),null,c('React').createElement(c('P2PButton.react'),{use:'confirm',size:'medium',label:'Continue',onClick:this.props.onConfirm}));return (c('React').createElement(c('P2PDialog.react'),{onToggle:this.props.onToggleDialog,shown:true},c('React').createElement(c('P2PDialogTitle.react'),null,l),c('React').createElement(c('P2PDialogBody.react'),{className:"_wjy"},c('React').createElement(c('P2PText.react'),{size:'medium',type:'primary',className:"_3-8q"},this.props.bodyText)),m));};function k(){i.apply(this,arguments);}f.exports=k;}),null);
__d('FBPaymentsPINCreatedContainer.react',['FBPaymentsPINCreatedContainerBase.react','FBPaymentsPINCreatedView.react'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FBPaymentsPINCreatedContainerBase.react'));i=h&&h.prototype;j.prototype.__getView=function(){return c('FBPaymentsPINCreatedView.react');};function j(){h.apply(this,arguments);}f.exports=j;}),null);
__d('FBPaymentsPINFlowContainerBase.react',['fbt','FBPaymentsDispatcher','FBPaymentsPINConstants','React','abstractMethod'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes,l=c('FBPaymentsPINConstants').PIN_FLOW_STEPS,m=c('FBPaymentsPINConstants').PIN_FLOW_TYPES,n=c('FBPaymentsPINConstants').PIN_PROTECTION_REASON;i=babelHelpers.inherits(o,c('React').Component);j=i&&i.prototype;function o(p){j.constructor.call(this,p);this.pinFetched=function(){if(this.__getPINStore().hasFetched()&&this.__getPINStore().getPINSettings()===null&&this.props.flowType===m.VALIDATE_PIN)this.props.onSuccess('1111');}.bind(this);this.handleStoreChanged=function(){if(!this.state.hasFetched&&this.__getPINStore().hasFetched()){this.setState({flowStep:this.calcInitialFlowStep(),hasFetched:true});this.pinFetched();}}.bind(this);this.handlePINDeleted=function(){this.setState({flowStep:l.CREATE_NEW_PIN});}.bind(this);this.handlePasswordReauthDialogCancelClick=function(){this.passwordCancelSubscribeToken=null;this.setState({flowStep:this.prevFlowStep});}.bind(this);this.handlePINSettingsUpdated=function(){this.props.onSuccess(this.state.pin);}.bind(this);this.handlePINValidated=function(q){if(this.state.flowStep===l.VALIDATE_PIN){this.props.onSuccess(q);return;}this.setState({pin:q,saving:true});var r={old_pin:q,payments_protected:null,thread_profiles_protected:{}};if(this.props.protectionReason===n.PAYMENTS){r.payments_protected=true;}else r.thread_profiles_protected[this.props.protectedThread]=true;this.__getAPI().updatePIN(r,this.handlePINSettingsUpdated);}.bind(this);this.handlePINCreated=function(q){if(this.state.flowStep===l.CREATE_NEW_PIN){this.props.onSuccess(q);return;}this.setState({pin:q,flowStep:l.PIN_CREATED});}.bind(this);this.handlePINCreationConfirmed=function(){this.props.onSuccess(this.state.pin);}.bind(this);this.__handleForgotPIN=function(){return c('abstractMethod')('FBPaymentsPINFlowContainerBase','__handleForgotPIN');};if(this.props.flowType===m.ENABLE_PIN_PROTECTION&&this.props.protectionReason===null)throw new Error('Protection reason must be specified for enable flow');if(this.props.protectionReason===n.THREAD&&this.props.protectedThread===null)throw new Error('Thread must be specified for thread protection');this.passwordCancelSubscribeToken=null;this.prevFlowStep=l.UNKNOWN;this.state={flowStep:this.calcInitialFlowStep(),hasFetched:this.__getPINStore().hasFetched(),pin:'',saving:false};}o.prototype.calcInitialFlowStep=function(){if(this.props.flowType===m.VALIDATE_PIN){return l.VALIDATE_PIN;}else if(this.props.flowType===m.ENABLE_PIN_PROTECTION){if(this.__getPINStore().hasFetched()&&this.__getPINStore().getPINSettings()!==null)return l.VALIDATE_PIN_TO_ENABLE;return l.CREATE_PIN;}return l.UNKNOWN;};o.prototype.componentWillMount=function(){c('FBPaymentsDispatcher').explicitlyRegisterStore(this.__getPINStore());};o.prototype.componentDidMount=function(){this.__getPINStore().addListener('change',this.handleStoreChanged);this.__getPINStore().getPINSettings();this.pinFetched();};o.prototype.__getAPI=function(){return c('abstractMethod')('FBPaymentsPINFlowContainerBase','__getAPI');};o.prototype.__getPINStore=function(){return c('abstractMethod')('FBPaymentsPINFlowContainerBase','__getPINStore');};o.prototype.__getCreateContainer=function(){return c('abstractMethod')('FBPaymentsPINFlowContainerBase','__getCreateContainer');};o.prototype.__getValidateContainer=function(){return c('abstractMethod')('FBPaymentsPINFlowContainerBase','__getValidateContainer');};o.prototype.__getCreatedContainer=function(){return c('abstractMethod')('FBPaymentsPINFlowContainerBase','__getCreatedContainer');};o.prototype.render=function(){switch(this.state.flowStep){case l.CREATE_PIN:case l.CREATE_NEW_PIN:var p=this.__getCreateContainer();return (c('React').createElement(p,{loading:!this.state.hasFetched,onCancel:this.props.onCancel,onPINCreate:this.handlePINCreated,protectedThread:this.props.protectedThread,protectionReason:this.props.protectionReason,renderInline:this.props.renderInline,resetPIN:this.state.flowStep===l.CREATE_NEW_PIN}));case l.VALIDATE_PIN:case l.VALIDATE_PIN_TO_ENABLE:case l.DELETE_PIN_PASSWORD_CONFIRM:var q=h._("For your security, please enter your PIN.");if(this.state.flowStep===l.VALIDATE_PIN_TO_ENABLE)if(this.props.protectionReason===n.PAYMENTS){q=h._("Please verify your PIN to enable payments protection.");}else if(this.props.protectionReason===n.THREAD)q=h._("Please verify your PIN to enable thread protection.");var r=this.__getValidateContainer();return (c('React').createElement(r,{bodyText:q,loading:!this.state.hasFetched||this.state.saving||this.state.flowStep===l.DELETE_PIN_PASSWORD_CONFIRM,onCancel:this.props.onCancel,onForgotPIN:this.__handleForgotPIN,onValidPIN:this.handlePINValidated,renderInline:this.props.renderInline}));case l.PIN_CREATED:var s=this.__getCreatedContainer();return (c('React').createElement(s,{onConfirm:this.handlePINCreationConfirmed,protectionReason:this.props.protectionReason}));default:throw new Error('Unhandled PIN flow state!');}};o.propTypes={flowType:k.oneOf(Object.keys(m)).isRequired,onCancel:k.func.isRequired,onSuccess:k.func.isRequired,protectedThread:k.string,protectionReason:k.oneOf(Object.keys(n)),renderInline:k.bool};f.exports=o;}),null);
__d('FBPaymentsPINValidateViewBase.react',['fbt','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.getTitle=function(){return h._("Enter PIN");};l.prototype.getForgotLinkText=function(){return h._("Forgotten?");};l.prototype.getCancelButtonText=function(){return h._("Cancel");};function l(){i.apply(this,arguments);}l.propTypes={bodyText:k.node.isRequired,loadingMaskVisible:k.bool.isRequired,onCancel:k.func.isRequired,onForgotPIN:k.func.isRequired,onToggleDialog:k.func,pinField:k.object.isRequired,renderInline:k.bool};f.exports=l;}),null);
__d('FBPaymentsPINValidateContainerBase.react',['fbt','FBPaymentsModulesAPIBase','FBPaymentsPINInputFieldContainer.react','FBPaymentsPINValidateViewBase.react','React','abstractMethod'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes,l=500;i=babelHelpers.inherits(m,c('React').Component);j=i&&i.prototype;function m(n){j.constructor.call(this,n);this.handlePINValidated=function(o){if(o.is_valid){this.setState({errorMessage:'',loading:false});this.props.onValidPIN(this.state.pinEntered);}else{var p=o.remain_attempts_count;this.setState({errorMessage:'',loading:false,shakePINInput:true,remainingAttempts:p});setTimeout(function(){this.setState({shakePINInput:false,pinEntered:''});}.bind(this),l);if(p===0)this.props.onForgotPIN();}}.bind(this);this.handlePINValidationError=function(o){this.setState({errorMessage:o.message,loading:false,shakePINInput:true});setTimeout(function(){this.setState({shakePINInput:false,pinEntered:''});}.bind(this),l);}.bind(this);this.onPINEntered=function(o){this.setState({pinEntered:o,loading:true});this.__getAPI().validatePIN({pin:o},this.handlePINValidated,this.handlePINValidationError);}.bind(this);this.handleDialogToggled=function(o){if(!o)this.props.onCancel();}.bind(this);this.state={errorMessage:'',loading:false,pinEntered:'',remainingAttempts:Infinity,shakePINInput:false};}m.prototype.render=function(){var n=this.props.bodyText;if(this.state.errorMessage){n=this.state.errorMessage;}else if(this.state.remainingAttempts<=3)if(this.state.remainingAttempts===0){n=h._("Please enter your password to reset your PIN.");}else n=h._("You have {attempts} more tries.",[h.param('attempts',this.state.remainingAttempts)]);var o=c('React').createElement(c('FBPaymentsPINInputFieldContainer.react'),{disabled:this.props.loading||this.state.loading,onPINEnter:this.onPINEntered,pin:this.state.pinEntered,shake:this.state.shakePINInput}),p=this.__getView();return (c('React').createElement(p,{bodyText:n,loadingMaskVisible:this.props.loading||this.state.loading,onCancel:this.props.onCancel,onForgotPIN:this.props.onForgotPIN,onToggleDialog:this.handleDialogToggled,pinField:o,renderInline:this.props.renderInline}));};m.prototype.__getAPI=function(){return c('abstractMethod')('FBPaymentsPINValidateContainerBase','__getAPI');};m.prototype.__getView=function(){return c('abstractMethod')('FBPaymentsPINValidateContainerBase','__getView');};m.propTypes={bodyText:k.node.isRequired,loading:k.bool.isRequired,onCancel:k.func.isRequired,onForgotPIN:k.func.isRequired,onValidPIN:k.func.isRequired,renderInline:k.bool};f.exports=m;}),null);
__d('FBPaymentsPINValidateView.react',['cx','FBPaymentsPINValidateViewBase.react','P2PDialog.react','P2PDialogBody.react','P2PDialogTitle.react','P2PLoadingMask.react','P2PText.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('FBPaymentsPINValidateViewBase.react'));j=i&&i.prototype;k.prototype.render=function(){var l=this.getTitle(),m=c('React').createElement('div',{className:"_2iqb"},c('React').createElement('div',{className:"_2iqc"},this.props.pinField)),n=c('React').createElement('div',{className:"_3-98"},c('React').createElement('a',{href:'#',onClick:this.props.onForgotPIN},this.getForgotLinkText())),o=c('React').createElement('div',null,c('React').createElement(c('P2PText.react'),{size:'medium',type:'primary',className:"_3-8q"},this.props.bodyText),m,n,c('React').createElement(c('P2PLoadingMask.react'),{visible:this.props.loadingMaskVisible}));if(this.props.renderInline)return (c('React').createElement('div',{className:"_58ba"},o));return (c('React').createElement(c('P2PDialog.react'),{onToggle:this.props.onToggleDialog,repositionOnUpdate:true,shown:true},c('React').createElement('div',null,c('React').createElement(c('P2PDialogTitle.react'),null,l),c('React').createElement(c('P2PDialogBody.react'),{className:"_wjy"},o))));};function k(){i.apply(this,arguments);}f.exports=k;}),null);
__d('FBPaymentsPINValidateContainer.react',['FBPaymentsModulesAPI','FBPaymentsPINValidateContainerBase.react','FBPaymentsPINValidateView.react'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FBPaymentsPINValidateContainerBase.react'));i=h&&h.prototype;j.prototype.__getAPI=function(){return c('FBPaymentsModulesAPI');};j.prototype.__getView=function(){return c('FBPaymentsPINValidateView.react');};function j(){h.apply(this,arguments);}f.exports=j;}),null);
__d('FBPaymentsPINFlowContainer.react',['Arbiter','FBPaymentsModulesAPI','FBPaymentsPINConstants','FBPaymentsPINCreateContainer.react','FBPaymentsPINCreatedContainer.react','FBPaymentsPINFlowContainerBase.react','FBPaymentsPINStore','FBPaymentsPINValidateContainer.react'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('FBPaymentsPINConstants').PIN_FLOW_STEPS;h=babelHelpers.inherits(k,c('FBPaymentsPINFlowContainerBase.react'));i=h&&h.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.__handleForgotPIN=function(){this.prevFlowStep=this.state.flowStep;this.setState({flowStep:j.DELETE_PIN_PASSWORD_CONFIRM});this.passwordCancelSubscribeToken=c('Arbiter').subscribeOnce('PasswordReauthDialogCancelClick',this.handlePasswordReauthDialogCancelClick);this.__getAPI().deletePIN({force_password:true},this.handlePINDeleted);}.bind(this),m;}k.prototype.componentWillUnmount=function(){if(this.passwordCancelSubscribeToken!==null){c('Arbiter').unsubscribe(this.passwordCancelSubscribeToken);this.passwordCancelSubscribeToken=null;}};k.prototype.__getAPI=function(){return c('FBPaymentsModulesAPI');};k.prototype.__getPINStore=function(){return c('FBPaymentsPINStore');};k.prototype.__getCreateContainer=function(){return c('FBPaymentsPINCreateContainer.react');};k.prototype.__getValidateContainer=function(){return c('FBPaymentsPINValidateContainer.react');};k.prototype.__getCreatedContainer=function(){return c('FBPaymentsPINCreatedContainer.react');};f.exports=k;}),null);
__d('FBPaymentsPINVerificationViewBase.react',['fbt','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.getBackButtonText=function(){return h._("Back");};function l(){i.apply(this,arguments);}l.propTypes={isActive:k.bool.isRequired,isActiveForVerification:k.bool.isRequired,onCancelActiveForVerificationClick:k.func.isRequired,onPINEnter:k.func.isRequired};f.exports=l;}),null);
__d('FBPaymentsPINVerificationView.react',['cx','FBPaymentsPINConstants','FBPaymentsPINFlowContainer.react','FBPaymentsPINVerificationViewBase.react','React','XUIButton.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('FBPaymentsPINConstants').PIN_FLOW_TYPES;i=babelHelpers.inherits(l,c('FBPaymentsPINVerificationViewBase.react'));j=i&&i.prototype;l.prototype.render=function(){if(this.props.isActiveForVerification)return (c('React').createElement('div',{className:"_2pi2"},c('React').createElement(c('FBPaymentsPINFlowContainer.react'),{flowType:k.VALIDATE_PIN,onCancel:function m(){},onSuccess:this.props.onPINEnter,renderInline:true}),c('React').createElement('div',{className:"_52ju _2ph_ _5kyc"},c('React').createElement(c('XUIButton.react'),{label:this.getBackButtonText(),onClick:this.props.onCancelActiveForVerificationClick}))));return null;};function l(){i.apply(this,arguments);}f.exports=l;}),null);
__d('FBPaymentsPINVerificationContainer.react',['FBPaymentsPINStore','FBPaymentsPINVerificationContainerBase.react','FBPaymentsPINVerificationView.react'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FBPaymentsPINVerificationContainerBase.react'));i=h&&h.prototype;j.__getPINStore=function(){return c('FBPaymentsPINStore');};j.prototype.__getView=function(){return c('FBPaymentsPINVerificationView.react');};function j(){h.apply(this,arguments);}f.exports=j;}),null);
__d('FBPaymentsPayPalBillingAgreementTypes',[],(function a(b,c,d,e,f,g){'use strict';var h={MIB:'mib',CIB:'cib'};f.exports=h;}),null);
__d('FBPaymentsPaymentMethodSelectorContainerBase.react',['invariant','CreditCardFormParam','FBPaymentsExtensionInterface.react','FBPaymentsLoggerConstants','FBPaymentsNewPaymentOptionTypes','FBPaymentsPaymentMethodActions','FBPaymentsPaymentMethodTypes','FBPaymentsPayPalBillingAgreementTypes','React','abstractMethod','idx'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('FBPaymentsLoggerConstants').LoggerEvent,l=c('FBPaymentsLoggerConstants').LoggerFlowStep;i=babelHelpers.inherits(m,c('FBPaymentsExtensionInterface.react'));j=i&&i.prototype;function m(n){j.constructor.call(this,n);this.handlePaymentMethodRowClicked=function(){this.props.onRequestActive(true);}.bind(this);this.handlePaymentMethodClick=function(o){this.props.logger.setFlowStep(l.SELECT_PAYMENT_METHOD).setEventName(k.INIT).setPaymentMethodID(o.id).setPaymentMethodType(o.type).log();this.setState({needVerification:this.constructor.$FBPaymentsPaymentMethodSelectorContainerBase2(o,this.props),selectedPaymentMethod:o,selectedPaymentMethodID:o.id});}.bind(this);this.handleAddPaymentMethod=function(){switch(this.state.selectedNewPaymentOptionType){case c('FBPaymentsNewPaymentOptionTypes').NEW_CREDIT_CARD:this.props.logger.setFlowStep(l.ADD_CARD).setEventName(k.INIT).log();break;}this.props.onRequestActive(true);}.bind(this);this.handleNewPaymentOptionClick=function(o){switch(o){case c('FBPaymentsNewPaymentOptionTypes').NEW_CREDIT_CARD:this.props.logger.setFlowStep(l.ADD_CARD).setEventName(k.INIT).log();break;}this.setState({selectedNewPaymentOptionType:o});}.bind(this);this.handleNewPaymentOptionFormDataUpdated=function(o){this.setState({newPaymentOptionData:o});}.bind(this);this.handleSaveNewPaymentOption=function(){switch(this.state.selectedNewPaymentOptionType){case c('FBPaymentsNewPaymentOptionTypes').NEW_CREDIT_CARD:var o=this.state.newPaymentOptionData;o||h(0);this.props.logger.setFlowStep(l.ADD_CARD).setEventName(k.SAVE_CLICK).log();var p=o.data;p[c('CreditCardFormParam').COMBINED_PAYMENT_TYPE]=this.props.checkoutConfiguration.paymentInfo.paymentItemType;p[c('CreditCardFormParam').COUNTRY]=this.state.billingCountry;this.__getAPI().addCreditCard(p,this.handleNewPaymentOptionSaved,this.handleNewPaymentOptionSavedError);break;case c('FBPaymentsNewPaymentOptionTypes').NEW_PAYPAL:this.__connectPayPal();break;default:return;}this.setState({isSaving:true,saveErrors:null});}.bind(this);this.handleNewPaymentOptionSaved=function(o){switch(this.state.selectedNewPaymentOptionType){case c('FBPaymentsNewPaymentOptionTypes').NEW_CREDIT_CARD:this.props.logger.setFlowStep(l.ADD_CARD).setEventName(k.SUCCESS).setPaymentMethodID(o).log();break;}var p=this.constructor.$FBPaymentsPaymentMethodSelectorContainerBase1(this.props);c('FBPaymentsPaymentMethodActions').fetchPaymentMethods(p);this.props.onRequestActive(false);this.setState({isSaving:false,newCredentialID:o,newPaymentOptionData:null,selectedPaymentMethod:null,selectedPaymentMethodID:null,showForm:false});}.bind(this);this.handleNewPaymentOptionSavedError=function(o){switch(this.state.selectedNewPaymentOptionType){case c('FBPaymentsNewPaymentOptionTypes').NEW_CREDIT_CARD:this.props.logger.setFlowStep(l.ADD_CARD).setEventName(k.FAIL).updateExtraData({errors:o}).log();break;}this.setState({isSaving:false,saveErrors:o,showForm:true});}.bind(this);this.handleShowCardForm=function(){this.handleToggleShowCardForm(true);}.bind(this);this.handleHideCardForm=function(){this.handleToggleShowCardForm(false);}.bind(this);this.handleCancelActiveStateClick=function(){switch(this.state.selectedNewPaymentOptionType){case c('FBPaymentsNewPaymentOptionTypes').NEW_CREDIT_CARD:this.props.logger.setFlowStep(l.ADD_CARD).setEventName(k.CANCEL).log();break;}this.setState({newPaymentOptionData:null,saveErrors:null});this.props.onRequestActive(false);}.bind(this);this.handleCancelActiveForVerificationClick=function(){this.setState({convertPayPalErrorMessage:null});this.props.onExtensionWidthChange(null);this.props.onRequestActiveForVerification(false);}.bind(this);this.handleConfirmCreditCardVerification=function(o){var p=this.state;p.verificationData=o;this.setState(p,function(){this.calculateExtensionStateAndSendUpdateImmediately(this.state);}.bind(this));}.bind(this);this.handleConvertPayPalBAToCIB=function(o){this.setState({isConvertingPayPal:true,convertPayPalErrorMessage:null});var p={billing_agreement_id:o.id,billing_agreement_type:c('FBPaymentsPayPalBillingAgreementTypes').CIB};this.__getAPI().convertPayPalBAToCIB(p,this.handleConvertPayPalBAToCIBSuccess,this.handleConvertPayPalBAToCIBError);}.bind(this);this.handleConvertPayPalBAToCIBSuccess=function(o){var p={key:this.constructor.$FBPaymentsPaymentMethodSelectorContainerBase1(this.props),payPalBAID:o};c('FBPaymentsPaymentMethodActions').convertPayPalBAToCIB(p);var q=this.state;q.needVerification=false;q.isConvertingPayPal=false;q.convertPayPalErrorMessage=null;this.setState(q);this.calculateExtensionStateAndSendUpdateImmediately(q);this.props.onExtensionWidthChange(null);}.bind(this);this.handleConvertPayPalBAToCIBError=function(o){this.setState({isConvertingPayPal:false,convertPayPalErrorMessage:o.message});}.bind(this);this.state={billingCountry:null,connectPayPalURL:null,convertPayPalErrorMessage:null,isConvertingPayPal:false,isSaving:false,needVerification:false,newCredentialID:null,newPaymentOptionData:null,saveErrors:null,selectedNewPaymentOptionType:null,selectedPaymentMethod:null,selectedPaymentMethodID:null,showForm:false,verificationData:null};}m.getStores=function(){return [this.__getPaymentMethodStore()];};m.$FBPaymentsPaymentMethodSelectorContainerBase1=function(n){var o=n.checkoutConfiguration.paymentInfo;return {paymentType:o.paymentItemType,orderID:o.orderId,receiverID:o.receiverId,extraData:o.extraData};};m.$FBPaymentsPaymentMethodSelectorContainerBase2=function(n,o){var p,q,r=false;switch(n.type){case c('FBPaymentsPaymentMethodTypes').CREDIT_CARD:var s=(p=o)!=null?(q=p.checkoutExtraProps)!=null?q.shouldVerifyCSC:q:p;r=!!s;break;case c('FBPaymentsPaymentMethodTypes').PAYPAL_BILLING_AGREEMENT:r=n.baType===c('FBPaymentsPayPalBillingAgreementTypes').MIB;break;}return r;};m.calculateState=function(n,o){var p=n||{},q=this.$FBPaymentsPaymentMethodSelectorContainerBase1(o),r=this.__getPaymentMethodStore().get(q);p.paymentMethodsInfoLoadObject=r;if(r.getValue()){var s=r.getValueEnforcing(),t=s.paymentMethods,u=s.newPaymentOptions;p.billingCountry=s.billingCountry;var v=u.find(function(z){return z.type===c('FBPaymentsNewPaymentOptionTypes').NEW_PAYPAL;})||{};p.connectPayPalURL=v.url;if(p.newCredentialID){var w=t.filter(function(z){return z.id===p.newCredentialID;}).first();if(w){p.selectedPaymentMethod=w;p.selectedPaymentMethodID=w.id;p.newCredentialID=null;p.needVerification=this.$FBPaymentsPaymentMethodSelectorContainerBase2(w,o);}}else{if(!p.selectedPaymentMethod){var x=t.first();if(x){p.selectedPaymentMethod=x;p.selectedPaymentMethodID=x.id;p.needVerification=this.$FBPaymentsPaymentMethodSelectorContainerBase2(x,o);}}if(!p.selectedNewPaymentOptionType){var y=u.first();if(y)p.selectedNewPaymentOptionType=y.type;}}}return p;};m.__calculateExtensionState=function(n){var o=false,p={};if(!n.isSaving&&n.paymentMethodsInfoLoadObject!=null&&!n.paymentMethodsInfoLoadObject.isLoading()&&n.selectedPaymentMethodID!==null){o=true;p={paymentMethodID:n.selectedPaymentMethodID,paymentMethod:n.selectedPaymentMethod};}return {extraData:p,ready:o,needVerification:n.needVerification,verificationData:n.verificationData};};m.__getPaymentMethodStore=function(){return c('abstractMethod')('FBPaymentsPaymentMethodSelectorContainerBase','__getPaymentMethodStore');};m.prototype.handleToggleShowCardForm=function(n){this.setState({newPaymentOptionData:null,saveErrors:null,showForm:n});};m.prototype.getNewPaymentOptionSaveEnabled=function(){switch(this.state.selectedNewPaymentOptionType){case c('FBPaymentsNewPaymentOptionTypes').NEW_CREDIT_CARD:var n=!!this.state.newPaymentOptionData&&this.state.newPaymentOptionData.isValid;return n&&!this.state.isSaving;default:return true;}};m.prototype.__getView=function(){return c('abstractMethod')('FBPaymentsPaymentMethodSelectorContainerBase','__getView');};m.prototype.__getAPI=function(){return c('abstractMethod')('FBPaymentsPaymentMethodSelectorContainerBase','__getAPI');};m.prototype.__connectPayPal=function(){return c('abstractMethod')('FBPaymentsPaymentMethodSelectorContainerBase','__connectPayPal');};m.prototype.render=function(){var n=this.__getView();return (c('React').createElement(n,babelHelpers['extends']({},this.state,{isActive:this.props.isActive,isActiveForVerification:this.props.isActiveForVerification,logger:this.props.logger,newPaymentOptionSaveEnabled:this.getNewPaymentOptionSaveEnabled(),onAddPaymentMethodClick:this.handleAddPaymentMethod,onCancelActiveForVerificationClick:this.handleCancelActiveForVerificationClick,onCancelActiveStateClick:this.handleCancelActiveStateClick,onConfirmCreditCardVerification:this.handleConfirmCreditCardVerification,onConvertPayPalBAToCIB:this.handleConvertPayPalBAToCIB,onExtensionWidthChange:this.props.onExtensionWidthChange,onHideCardForm:this.handleHideCardForm,onNewPaymentOptionClick:this.handleNewPaymentOptionClick,onNewPaymentOptionFormDataUpdated:this.handleNewPaymentOptionFormDataUpdated,onPaymentMethodClick:this.handlePaymentMethodClick,onRowClicked:this.handlePaymentMethodRowClicked,onSaveNewPaymentOption:this.handleSaveNewPaymentOption,onShowCardForm:this.handleShowCardForm})));};f.exports=m;}),null);
__d('FBPaymentsConsentViewBase.react',['React'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;function k(){h.apply(this,arguments);}k.propTypes={consentContent:j.node.isRequired,logoSrc:j.object,subtitle:j.node,termsAndPoliciesText:j.node.isRequired,title:j.node};f.exports=k;}),null);
__d('FBPaymentsConsentView.react',['cx','FBPaymentsConsentViewBase.react','Image.react','React','XUIGrayText.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('FBPaymentsConsentViewBase.react'));j=i&&i.prototype;k.prototype.render=function(){var l=this.props.logoSrc?c('React').createElement(c('Image.react'),{src:this.props.logoSrc}):null,m=this.props.title?c('React').createElement('div',{className:"_1awf"},this.props.title):null,n=this.props.subtitle?c('React').createElement(c('XUIGrayText.react'),{display:'block',shade:'medium',size:'large',weight:'bold'},this.props.subtitle):null;return (c('React').createElement('div',{className:"_1awe"},c('React').createElement('div',{className:"_52jv"},l,m),n,c('React').createElement(c('XUIGrayText.react'),{className:"_1awg",display:'block',shade:'medium',size:'large'},this.props.consentContent),c('React').createElement(c('XUIGrayText.react'),{display:'block',shade:'medium',size:'large'},this.props.termsAndPoliciesText)));};function k(){i.apply(this,arguments);}f.exports=k;}),null);
__d('FBPaymentsCreditCardExpDateFormField_DEPRECATED.react',['fbt','ix','Image.react','FBPaymentsFormField_DEPRECATED.react','FBPaymentsFormFieldUtils_DEPRECATED','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.state={errorMessage:null},this.getLimit=function(){return 5;},this.formatValue=function(s,t,u){var v=String.fromCharCode(u);s=s.replace(/[^0-9\/]+/g,'');var w=s.split('/'),x=w[0],y=w[1];if(y&&y.length===4)s=x+'/'+y.substr(-2);if(!/^\d+$/.test(v)&&u!==191&&u!==111)return s;s=c('FBPaymentsFormFieldUtils_DEPRECATED').stripNonDigits(s);if(/^\d$/.test(s)&&s!=='0'&&s!=='1'){s='0'+s+'/';}else if(s.length>=2&&s.indexOf('/')===-1)s=s.substr(0,2)+'/'+s.substr(2,2);return s;},this.validate=function(s){var t=s.split('/'),u=new Date(),v=parseInt(u.getFullYear().toString().substring(2),10),w=u.getMonth()+1,x=parseInt(t[0],10),y=parseInt(t[1],10);if(s.length!==5||!x||!y||isNaN(x)||isNaN(y)||x<1||x>12){this.setState({errorMessage:null});return false;}if(y<v||y===v&&x<w){this.setState({errorMessage:h._("Please enter a valid expiry date.")});return false;}this.setState({errorMessage:null});return true;}.bind(this),o;}m.prototype.render=function(){var n=void 0,o=void 0,p=void 0;if(this.props.showLabel)o=h._("Expiry");if(this.props.showPlaceholder)n=h._("MM\/YY");if(this.props.showIcon)p={normal:c('React').createElement(c('Image.react'),{height:12,src:i('/images/p2p/events-grey_s.png'),width:12}),focused:c('React').createElement(c('Image.react'),{height:12,src:i('/images/p2p/events-blue_s.png'),width:12})};return (c('React').createElement(c('FBPaymentsFormField_DEPRECATED.react'),babelHelpers['extends']({autoCompleteName:'cc-exp',errorMessage:this.state.errorMessage,formatValue:this.formatValue,icon:p,label:o,limit:this.getLimit(),placeholder:n,ref:'input',validate:this.validate},this.props)));};m.propTypes={initiallyFocused:l.bool,name:l.string.isRequired,onChange:l.func.isRequired,showIcon:l.bool,showPlaceholder:l.bool};m.defaultProps={showIcon:true,showPlaceholder:true};f.exports=m;}),null);
__d('FBPaymentsCreditCardNumberFormField_DEPRECATED.react',['fbt','ix','Image.react','FBPaymentsFormField_DEPRECATED.react','FBPaymentsFormFieldUtils_DEPRECATED','PaymentMethodUtils','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.state={errorMessage:null},this.calculateLimit=function(s){return (c('PaymentMethodUtils').getCardType(s).digits+(this.getGrouping(s).length-2));}.bind(this),this.getGrouping=function(s){var t=[0,4,8,12,16],u=t;switch(c('PaymentMethodUtils').getCardType(s).name){case 'visa':case 'mc':case 'disc':u=t;break;case 'amex':u=[0,4,10,15];break;case 'diners':u=[0,4,10,14];break;default:u=t;break;}return u;},this.formatValue=function(s,t,u){return c('FBPaymentsFormFieldUtils_DEPRECATED').formatCardNumber(s,t,u,this.getGrouping(s),' ');}.bind(this),this.validate=function(s){var t=this.isValidCardType(s),u=c('PaymentMethodUtils').isValidCCNumber(s),v=null;if(!t&&!this.props.allowCredit){v=h._("Please enter a Visa or MasterCard debit card. Credit cards can't be used.");}else if(!t||!u&&s.length===this.calculateLimit(s))v=h._("Please enter a valid debit or credit card number.");this.setState({errorMessage:v});return !!(u&&t&&!this.props.binError);}.bind(this),this.isValidCardType=function(s){var t=['mc','visa','unknown'];if(this.props.allowCredit)t.push('diners','disc','jcb','amex');var u=c('PaymentMethodUtils').getCardType(s),v=u?u.name:'',w=t.indexOf(v)>=0;return w;}.bind(this),this.getSaveError=function(){return this.props.binError||this.props.saveError;}.bind(this),this.getSecondaryIcon=function(s){var t=void 0,u=void 0;if(!this.props.showSecondaryIcon)return null;u=c('PaymentMethodUtils').getCardType(s).name;switch(u){case 'visa':t=i('/images/payments/icons/modularization/visa-cc.png');break;case 'mc':t=i('/images/payments/icons/modularization/mastercard-cc.png');break;case 'amex':t=i('/images/payments/icons/modularization/amex-cc.png');break;case 'disc':t=i('/images/payments/icons/modularization/discover-cc.png');break;case 'jcb':t=i('/images/payments/icons/modularization/jcb-cc.png');break;default:t=i('/images/payments/icons/modularization/CC.png');break;}return (c('React').createElement(c('Image.react'),{height:20,src:t,width:30}));}.bind(this),o;}m.prototype.render=function(){var n=h._("Card Number"),o=void 0,p=void 0,q=void 0;if(this.props.showLabel){p=n;o='0000 0000 0000 0000';}else if(this.props.showPlaceholder)o=n;if(this.props.showIcon)q={normal:c('React').createElement(c('Image.react'),{height:12,src:i('/images/p2p/card-grey_s.png'),width:12}),focused:c('React').createElement(c('Image.react'),{height:12,src:i('/images/p2p/card-blue_s.png'),width:12})};return (c('React').createElement(c('FBPaymentsFormField_DEPRECATED.react'),babelHelpers['extends']({autoCompleteName:'cc-number',cursorPositionUpdater:c('FBPaymentsFormFieldUtils_DEPRECATED').getUpdatedCursorPosition,errorMessage:this.state.errorMessage,formatValue:this.formatValue,getSecondaryIcon:this.getSecondaryIcon,icon:q,label:p,limit:this.calculateLimit,placeholder:o,ref:'input',validate:this.validate,value:this.props.value},this.props,{saveError:this.getSaveError()})));};m.propTypes={allowCredit:l.bool,disabled:l.bool,shouldValidateBIN:l.bool,initiallyFocused:l.bool,name:l.string.isRequired,onChange:l.func.isRequired,showIcon:l.bool,showPlaceholder:l.bool,showSecondaryIcon:l.bool,value:l.string};m.defaultProps={allowCredit:true,showIcon:true,showPlaceholder:true,showSecondaryIcon:false};f.exports=m;}),null);
__d('FBPaymentsCreditCardForm_DEPRECATED.react',['fbt','CreditCardFormParam','FBPaymentsCreditCardCVCFormField_DEPRECATED.react','FBPaymentsCreditCardExpDateFormField_DEPRECATED.react','FBPaymentsCreditCardNumberFormField_DEPRECATED.react','FBPaymentsCreditCardZipCodeFormField_DEPRECATED.react','FBPaymentsForm_DEPRECATED.react','KappaWrapper','React','emptyFunction'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(m){j.constructor.call(this,m);this.handleValidation=function(n,o){this.setState({formData:o,isValid:n});this.props.onValidation(n,o);}.bind(this);this.state={formData:{},isValid:false};}l.prototype.componentWillMount=function(){c('KappaWrapper').start(6,3,0);};l.prototype.isCreditCardNumberMasked=function(){return this.props.editMode||this.props.verifyCVVMode;};l.prototype.isCreditCardNumberFocused=function(){return !this.props.editMode&&!this.props.verifyCVVMode;};l.prototype.isExpFocused=function(){return this.props.editMode;};l.prototype.isExpDisabled=function(){return this.props.verifyCVVMode;};l.prototype.showExpField=function(){var m=this.props.prefilledFormData[c('CreditCardFormParam').CARD_EXPIRATION];if(this.isExpDisabled()&&!m)return false;return true;};l.prototype.isCVVFocused=function(){return this.props.verifyCVVMode;};l.prototype.getSaveErrors=function(){if(this.props.binError)return {general:{message:this.props.binError}};return this.props.saveErrors;};l.prototype.render=function(){var m=this.props.compactMode,n=this.showExpField()?c('React').createElement(c('FBPaymentsCreditCardExpDateFormField_DEPRECATED.react'),{disabled:this.isExpDisabled(),initiallyFocused:this.isExpFocused(),name:c('CreditCardFormParam').CARD_EXPIRATION,onChange:c('emptyFunction'),required:true,width:m?25:50}):null,o=this.props.showZipCodeField?c('React').createElement(c('FBPaymentsCreditCardZipCodeFormField_DEPRECATED.react'),{name:c('CreditCardFormParam').ZIP,onChange:c('emptyFunction'),required:true,width:m?30:100}):null;return (c('React').createElement(c('FBPaymentsForm_DEPRECATED.react'),{autoTab:this.props.autoTab,errorTitle:h._("Problem with Saving Card"),prefilledFormData:this.props.prefilledFormData,onValidation:this.handleValidation,saveErrors:this.getSaveErrors(),showIcons:this.props.showIcons,showLabels:this.props.showLabels,showPlaceholderOnFocus:this.props.showPlaceholderOnFocus,showSecondaryIcons:this.props.showSecondaryIcons,useGutters:this.props.useGutters},c('React').createElement(c('FBPaymentsCreditCardNumberFormField_DEPRECATED.react'),{allowCredit:this.props.allowCredit,binError:this.props.binError,disabled:this.isCreditCardNumberMasked(),initiallyFocused:this.isCreditCardNumberFocused(),name:c('CreditCardFormParam').CARD_NUMBER,onChange:c('emptyFunction'),required:true,width:m?75:100}),n,c('React').createElement(c('FBPaymentsCreditCardCVCFormField_DEPRECATED.react'),{initiallyFocused:this.isCVVFocused(),creditCardNumber:this.state.formData[c('CreditCardFormParam').CARD_NUMBER],cscMaxLength:this.props.cscMaxLength,name:c('CreditCardFormParam').CSC,onChange:c('emptyFunction'),required:true,width:m?25:50}),o));};l.propTypes={allowCredit:k.bool,autoTab:k.bool,binError:k.string,compactMode:k.bool,cscMaxLength:k.number,editMode:k.bool,onValidation:k.func,prefilledFormData:k.object,saveErrors:k.object,showIcons:k.bool,showLabels:k.bool,showPlaceholderOnFocus:k.bool,showSecondaryIcons:k.bool,showZipCodeField:k.bool,useGutters:k.bool,verifyCVVMode:k.bool};l.defaultProps={autoTab:false,allowCredit:true,binError:'',compactMode:false,editMode:false,onValidation:c('emptyFunction'),prefilledFormData:{},showIcons:true,showSecondaryIcons:false,showLabels:false,showPlaceholderOnFocus:false,showZipCodeField:true,useGutters:false,verifyCVVMode:false};f.exports=l;}),null);
__d('FBPaymentsCreditCardVerificationForm_DEPRECATED.react',['FBPaymentsCreditCardForm_DEPRECATED.react','React'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;k.prototype.render=function(){return (c('React').createElement(c('FBPaymentsCreditCardForm_DEPRECATED.react'),{cscMaxLength:this.props.cscMaxLength,onValidation:this.props.onValidation,prefilledFormData:this.props.prefilledFormData,saveErrors:this.props.saveErrors,showIcons:false,showZipCodeField:false,useGutters:this.props.useGutters,verifyCVVMode:true}));};function k(){h.apply(this,arguments);}k.propTypes={cscMaxLength:j.number,onValidation:j.func.isRequired,prefilledFormData:j.object.isRequired,saveErrors:j.object,useGutters:j.bool};k.defaultProps={cscMaxLength:3,useGutters:true};f.exports=k;}),null);
__d('FBPaymentsPaymentMethodIcon.react',['ix','FBPaymentsMethodType','Image.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes,l={small:[30,20],square:[32,32],normal:[36,24],large:[48,32]},m=h('/images/payments/icons/modularization/CC.png');i=babelHelpers.inherits(n,c('React').Component);j=i&&i.prototype;function n(o){j.constructor.call(this,o);}n.prototype.getImageSrc=function(){switch(this.props.methodType){case c('FBPaymentsMethodType').AMEX:return {small:h('/images/payments/icons/modularization/amex-cc.png'),square:h('/images/payments/icons/amex-sq.png'),normal:h('/images/payments/icons/amex.png'),large:h('/images/payments/icons/amex-lg.png')}[this.props.size];case c('FBPaymentsMethodType').DISC:return {small:h('/images/payments/icons/modularization/discover-cc.png'),square:h('/images/payments/icons/disc-sq.png'),normal:h('/images/payments/icons/disc.png'),large:h('/images/payments/icons/disc-lg.png')}[this.props.size];case c('FBPaymentsMethodType').MC:return {small:h('/images/payments/icons/modularization/mastercard-cc.png'),square:h('/images/payments/icons/mc-sq.png'),normal:h('/images/payments/icons/mc.png'),large:h('/images/payments/icons/mc-lg.png')}[this.props.size];case c('FBPaymentsMethodType').VISA:return {small:h('/images/payments/icons/modularization/visa-cc.png'),square:h('/images/payments/icons/visa-sq.png'),normal:h('/images/payments/icons/visa.png'),large:h('/images/payments/icons/visa-lg.png')}[this.props.size];case c('FBPaymentsMethodType').GENERIC_CARD:return {small:h('/images/payments/icons/modularization/CC.png'),square:m,normal:m,large:m}[this.props.size];case c('FBPaymentsMethodType').JCB:return {small:h('/images/payments/icons/modularization/jcb-cc.png'),square:h('/images/payments/icons/jcb-sq.png'),normal:h('/images/payments/icons/jcb.png'),large:h('/images/payments/icons/jcb-lg.png')}[this.props.size];case c('FBPaymentsMethodType').PAYPAL:return {small:h('/images/payments/icons/modularization/paypal-cc.png'),square:h('/images/payments/icons/paypal-sq.png'),normal:h('/images/payments/icons/paypal.png'),large:h('/images/payments/icons/paypal-lg.png')}[this.props.size];default:return m;}};n.prototype.render=function(){var o=l[this.props.size],p=o[0],q=o[1];return (c('React').createElement(c('Image.react'),{height:q,src:this.getImageSrc(),width:p}));};n.propTypes={methodType:k.oneOf(Object.values(c('FBPaymentsMethodType'))).isRequired,size:k.oneOf(['small','square','normal','large']).isRequired};n.defaultProps={size:'normal'};f.exports=n;}),null);
__d('FBPaymentsPaymentMethodListItemViewBase.react',['FBPaymentsMethodType','React'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;function k(l){i.constructor.call(this,l);}k.propTypes={isSelected:j.bool,onClick:j.func,paymentMethodType:j.oneOf(Object.values(c('FBPaymentsMethodType'))).isRequired,subtitle:j.node,title:j.node.isRequired};f.exports=k;}),null);
__d('FBPaymentsPaymentMethodListItemView.react',['cx','FBPaymentsPaymentMethodIcon.react','FBPaymentsPaymentMethodListItemViewBase.react','Layout.react','React','XUIGrayText.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('Layout.react').Column,l=c('Layout.react').FillColumn;i=babelHelpers.inherits(m,c('FBPaymentsPaymentMethodListItemViewBase.react'));j=i&&i.prototype;m.prototype.getCardIcon=function(){return (c('React').createElement(c('FBPaymentsPaymentMethodIcon.react'),{methodType:this.props.paymentMethodType}));};m.prototype.render=function(){return (c('React').createElement(c('Layout.react'),{className:"_4v_s",onClick:this.props.onClick},c('React').createElement(k,{className:"_3-91"},this.getCardIcon()),c('React').createElement(l,{className:"_4v_t"},c('React').createElement(c('XUIGrayText.react'),{className:"_4v_r",display:'block',shade:'dark'},this.props.title),c('React').createElement(c('XUIGrayText.react'),{display:'block',shade:'light'},this.props.subtitle))));};function m(){i.apply(this,arguments);}f.exports=m;}),null);
__d('FBPaymentsPaymentMethodSelectorViewBase.react',['fbt','invariant','ix','CreditCardFormParam','FBPaymentsLinkHelper','FBPaymentsLoggerBase','FBPaymentsLoggerConstants','FBPaymentsMethodType','FBPaymentsNewPaymentOptionTypes','FBPaymentsPaymentMethodTypes','React','ZipcodeCollectIndicatorFields'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('FBPaymentsLoggerConstants').LoggerEvent,n=c('FBPaymentsLoggerConstants').LoggerFlowStep,o=c('React').PropTypes;k=babelHelpers.inherits(p,c('React').Component);l=k&&k.prototype;function p(q){l.constructor.call(this,q);this.handleCreditCardFormValidation=function(r,s){var t={newPaymentOptionType:c('FBPaymentsNewPaymentOptionTypes').NEW_CREDIT_CARD,data:s,isValid:r};this.props.onNewPaymentOptionFormDataUpdated(t);}.bind(this);this.handleCreditCardVerificationFormValidation=function(r,s){this.setState({creditCardVerificationData:{csc:s[c('CreditCardFormParam').CSC]},isCreditCardVerificationDataValid:r});}.bind(this);this.handleConfirmCreditCardVerificationClick=function(){if(!this.state.isCreditCardVerificationDataValid)return;this.props.onConfirmCreditCardVerification(this.state.creditCardVerificationData);}.bind(this);this.state={creditCardVerificationData:{},isCreditCardVerificationDataValid:false};}p.prototype.getPaymentMethodsInfo=function(){return this.props.paymentMethodsInfoLoadObject.getValue();};p.prototype.getPaymentMethods=function(){var q=this.getPaymentMethodsInfo()||{};return q.paymentMethods;};p.prototype.getNewPaymentOptions=function(){var q=this.getPaymentMethodsInfo()||{};return q.newPaymentOptions;};p.prototype.getPaymentMethodSubtype=function(q){var r=q.type;Object.values(c('FBPaymentsPaymentMethodTypes')).includes(r)||i(0);switch(r){case c('FBPaymentsPaymentMethodTypes').CREDIT_CARD:return q.cardType;case c('FBPaymentsPaymentMethodTypes').PAYPAL_BILLING_AGREEMENT:return c('FBPaymentsMethodType').PAYPAL;case c('FBPaymentsPaymentMethodTypes').MANUAL_TRANSFER:return c('FBPaymentsMethodType').MANUAL_TRANSFER;default:return '';}};p.prototype.getShowZipCodeField=function(){var q=this.getNewPaymentOptions();if(!q)return false;var r=q.find(function(s){return s.type===c('FBPaymentsNewPaymentOptionTypes').NEW_CREDIT_CARD;});if(!r)return false;return r.zipFieldProperty!==c('ZipcodeCollectIndicatorFields').HIDDEN;};p.prototype.getCancelButtonText=function(){return h._("Cancel");};p.prototype.getSaveButtonText=function(){switch(this.props.selectedNewPaymentOptionType){case c('FBPaymentsNewPaymentOptionTypes').NEW_PAYPAL:return h._("Connect");default:return h._("Save");}};p.prototype.getBackButtonText=function(){return h._("Back");};p.prototype.getPayButtonText=function(){return h._("Pay");};p.prototype.getPayPalConfirmButtonText=function(){return h._("Confirm and Pay");};p.prototype.getPaymentMethodLabel=function(){return h._("Payment method");};p.prototype.getAddPaymentMethodLabel=function(){return h._("Add New Payment Method");};p.prototype.getAddPaymentMethodNUXLabel=function(){return h._("Add Payment Method");};p.prototype.getAddCardLabel=function(){return h._("Add credit or debit card");};p.prototype.getAddPaymentMethodHeader=function(){return h._("Add a payment method");};p.prototype.getPayPalLogoSrc=function(){return j('/images/payments/paypal-icon.png');};p.prototype.getPayPalConsentTitle=function(){return h._("Update to your pre-approved payments");};p.prototype.getPayPalConsentSubtitle=function(){return h._("You can now use your pre-approved Facebook payment authorisation wherever PayPal is available when you pay on Facebook.");};p.prototype.getPayPalConsentPoliciesText=function(q){return h._("View {=Paypal Policies} and your payment method rights.",[h.param('=Paypal Policies',c('React').createElement('a',{href:q,target:'_blank'},h._("PayPal policies")))]);};p.prototype.getSecurityMessage=function(){return h._("Your payment information is encrypted and stored with bank-level security. {Link. =Learn more}",[h.param('Link. =Learn more',c('React').createElement('a',{href:c('FBPaymentsLinkHelper').getPayerProtectionURI(),onClick:function(){switch(this.props.selectedNewPaymentOptionType){case c('FBPaymentsNewPaymentOptionTypes').NEW_CREDIT_CARD:this.props.logger.setFlowStep(n.ADD_CARD).setEventName(m.TERMS_CLICK).log();break;}}.bind(this),target:'_blank'},h._("Learn more")))]);};p.prototype.getCSCVerificationMessage=function(q){if(q===4){return h._("Please re-enter your card's four-digit security code.");}else return h._("Please re-enter your card's three-digit security code.");};p.propTypes={convertPayPalErrorMessage:o.node,isActive:o.bool.isRequired,isActiveForVerification:o.bool.isRequired,isConvertingPayPal:o.bool.isRequired,isSaving:o.bool.isRequired,logger:o.instanceOf(c('FBPaymentsLoggerBase')).isRequired,newPaymentOptionSaveEnabled:o.bool.isRequired,onAddPaymentMethodClick:o.func.isRequired,onCancelActiveForVerificationClick:o.func.isRequired,onCancelActiveStateClick:o.func.isRequired,onConfirmCreditCardVerification:o.func.isRequired,onConvertPayPalBAToCIB:o.func.isRequired,onExtensionWidthChange:o.func.isRequired,onHideCardForm:o.func.isRequired,onNewPaymentOptionClick:o.func.isRequired,onNewPaymentOptionFormDataUpdated:o.func,onPaymentMethodClick:o.func.isRequired,onRowClicked:o.func.isRequired,onSaveNewPaymentOption:o.func,onShowCardForm:o.func.isRequired,paymentMethodsInfoLoadObject:o.object.isRequired,saveErrors:o.object,selectedNewPaymentOptionType:o.string,selectedPaymentMethod:o.object,selectedPaymentMethodID:o.string,showForm:o.bool};f.exports=p;}),null);
__d('FBPaymentsPaymentMethodSelectorView.react',['cx','invariant','CreditCardFormParam','FBPaymentsAddButton.react','FBPaymentsConsentView.react','FBPaymentsCreditCardForm_DEPRECATED.react','FBPaymentsCreditCardVerificationForm_DEPRECATED.react','FBPaymentsLoadingView.react','FBPaymentsNewPaymentOptionTypes','FBPaymentsPaymentMethodListItemView.react','FBPaymentsPaymentMethodSelectorViewBase.react','FBPaymentsPaymentMethodTypes','FBPaymentsRichSelector.react','React','XUIButton.react','XUIGrayText.react','XUINotice.react','XUISpinner.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('FBPaymentsRichSelector.react').Option,m='add_payment_method',n=650;j=babelHelpers.inherits(o,c('FBPaymentsPaymentMethodSelectorViewBase.react'));k=j&&j.prototype;function o(){var p,q;for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=k.constructor).call.apply(p,[this].concat(s)),this.handlePaymentMethodSelectorChange=function(u){var v,w=this;if(u.value===m){this.props.onAddPaymentMethodClick();return;}else (function(){var x=u.value,y=w.getPaymentMethods();if(y){var z=y.find(function(aa){return aa.id===x;});w.props.onPaymentMethodClick(z);}})();}.bind(this),this.renderPaymentMethodListItem=function(u){return (c('React').createElement(l,{key:u.id,label:u.getDisplayLabel(),value:u.id},c('React').createElement(c('FBPaymentsPaymentMethodListItemView.react'),{paymentMethodType:this.getPaymentMethodSubtype(u),subtitle:u.getDisplaySubtitle(),title:u.getDisplayTitle()})));}.bind(this),this.handleNewPaymentOptionSelectorChange=function(u){var v=u.value;this.props.onNewPaymentOptionClick(v);}.bind(this),q;}o.prototype.renderAddPaymentMethodButton=function(){return c('React').createElement(c('FBPaymentsAddButton.react'),{label:this.getAddPaymentMethodNUXLabel(),onClick:this.props.onAddPaymentMethodClick});};o.prototype.renderAddPaymentMethodListItem=function(){var p=this.getNewPaymentOptions();if(!p||p.size===0)return null;var q=this.getAddPaymentMethodLabel();return c('React').createElement(l,{className:"_52jw _5kyc",clickable:false,key:m,label:q,value:m},c('React').createElement(c('XUIButton.react'),{label:q,onClick:this.props.onAddPaymentMethodClick,use:'confirm'}));};o.prototype.renderPaymentMethodsDropdown=function(){var p=this.getPaymentMethodsInfo();if(!this.props.paymentMethodsInfoLoadObject.isDone()||!p)return c('React').createElement(c('XUISpinner.react'),null);var q=p.paymentMethods;if(q.size===0)return this.renderAddPaymentMethodButton();var r=this.props.selectedPaymentMethodID?this.props.selectedPaymentMethodID:m;return c('React').createElement(c('FBPaymentsRichSelector.react'),{defaultValue:r,multiple:false,name:'payment_method_selector',onChange:this.handlePaymentMethodSelectorChange},q.map(this.renderPaymentMethodListItem),this.renderAddPaymentMethodListItem(),this.renderSecurityMessageListItem());};o.prototype.renderNewPaymentOptionListItem=function(p){return (c('React').createElement(l,{key:p.type,label:p.getCallToActionTitle(),value:p.type},c('React').createElement(c('XUIGrayText.react'),{shade:'dark'},p.getCallToActionTitle())));};o.prototype.renderNewPaymentOptionView=function(){switch(this.props.selectedNewPaymentOptionType){case c('FBPaymentsNewPaymentOptionTypes').NEW_CREDIT_CARD:return this.renderAddCreditCardForm();case c('FBPaymentsNewPaymentOptionTypes').NEW_PAYPAL:return null;default:return i(false,'Unhandled new payment option type: %s',this.props.selectedNewPaymentOptionType);}};o.prototype.renderNewPaymentOptionsDropdown=function(){var p=this.getNewPaymentOptions();if(!p||p.size===0)return null;return (c('React').createElement(c('FBPaymentsRichSelector.react'),{defaultValue:this.props.selectedNewPaymentOptionType,multiple:false,name:'new_payment_options_selector',onChange:this.handleNewPaymentOptionSelectorChange},p.map(this.renderNewPaymentOptionListItem)));};o.prototype.renderAddPaymentMethod=function(){return (c('React').createElement('div',{className:"_1jnq"},c('React').createElement(c('FBPaymentsLoadingView.react'),{overlay:true,visible:this.props.isSaving}),c('React').createElement('div',{className:"_1j8c"},c('React').createElement('div',{className:"_2pio _1ghk"},c('React').createElement(c('XUIGrayText.react'),{display:'block',shade:'dark',size:'small',weight:'bold'},this.getAddPaymentMethodHeader()),c('React').createElement(c('XUIGrayText.react'),{className:"_1ghk",display:'block',shade:'light',size:'small'},this.getSecurityMessage())),this.renderNewPaymentOptionsDropdown(),c('React').createElement('div',{className:"_3-8y"},this.renderNewPaymentOptionView())),c('React').createElement('div',{className:"_52jw _2ph_ _5kyc"},c('React').createElement(c('XUIButton.react'),{label:this.getCancelButtonText(),onClick:this.props.onCancelActiveStateClick}),c('React').createElement(c('XUIButton.react'),{disabled:!this.props.newPaymentOptionSaveEnabled,label:this.getSaveButtonText(),onClick:this.props.onSaveNewPaymentOption,use:'confirm'}))));};o.prototype.renderSecurityMessageListItem=function(){return (c('React').createElement(l,{className:"_2y76 _5kyc",clickable:false,key:'security_message'},c('React').createElement(c('XUIGrayText.react'),{display:'block',shade:'light',size:'small'},this.getSecurityMessage())));};o.prototype.renderAddCreditCardForm=function(){return (c('React').createElement(c('FBPaymentsCreditCardForm_DEPRECATED.react'),{allowCredit:true,autoTab:true,compactMode:false,editMode:false,onValidation:this.handleCreditCardFormValidation,saveErrors:this.props.saveErrors,showIcons:false,showLabels:true,showPlaceholderOnFocus:false,showSecondaryIcons:true,showZipCodeField:this.getShowZipCodeField(),useGutters:true}));};o.prototype.renderPayPalConsentView=function(p){this.props.onExtensionWidthChange(n);var q=void 0;if(this.props.convertPayPalErrorMessage)q=c('React').createElement(c('XUINotice.react'),{className:"_q-q",use:'warn'},this.props.convertPayPalErrorMessage);return (c('React').createElement('div',{className:"_1jnq"},q,c('React').createElement(c('FBPaymentsLoadingView.react'),{overlay:true,visible:this.props.isConvertingPayPal}),c('React').createElement(c('FBPaymentsConsentView.react'),{consentContent:p.cibConsentText,logoSrc:this.getPayPalLogoSrc(),subtitle:this.getPayPalConsentSubtitle(),termsAndPoliciesText:this.getPayPalConsentPoliciesText(p.cibTermsUrl),title:this.getPayPalConsentTitle()}),c('React').createElement('div',{className:"_52jw _2ph_ _5kyc"},c('React').createElement(c('XUIButton.react'),{label:this.getCancelButtonText(),onClick:this.props.onCancelActiveForVerificationClick,size:'large'}),c('React').createElement(c('XUIButton.react'),{label:this.getPayPalConfirmButtonText(),onClick:function(){this.props.onConvertPayPalBAToCIB(p);}.bind(this),size:'large',use:'confirm'}))));};o.prototype.renderCreditCardCSCVerificationView=function(p){var q={};q[c('CreditCardFormParam').CARD_NUMBER]=p.getCreditCardNumberMask();q[c('CreditCardFormParam').CARD_EXPIRATION]=p.getFormattedExpiration();var r=p.getCscMaxLength();return (c('React').createElement('div',null,c('React').createElement('div',{className:"_2ph_"},c('React').createElement(c('FBPaymentsCreditCardVerificationForm_DEPRECATED.react'),{cscMaxLength:r,onValidation:this.handleCreditCardVerificationFormValidation,prefilledFormData:q}),c('React').createElement(c('XUIGrayText.react'),{className:"_2pie",display:'block',size:'small',shade:'light'},this.getCSCVerificationMessage(r))),c('React').createElement('div',{className:"_52jw _2ph_ _5kyc"},c('React').createElement(c('XUIButton.react'),{label:this.getCancelButtonText(),onClick:this.props.onCancelActiveForVerificationClick,size:'large'}),c('React').createElement(c('XUIButton.react'),{disabled:!this.state.isCreditCardVerificationDataValid,label:this.getPayButtonText(),onClick:this.handleConfirmCreditCardVerificationClick,size:'large',use:'confirm'}))));};o.prototype.render=function(){if(this.props.isActiveForVerification){var p=this.props.selectedPaymentMethod;p||i(0);switch(p.type){case c('FBPaymentsPaymentMethodTypes').CREDIT_CARD:return this.renderCreditCardCSCVerificationView(p);case c('FBPaymentsPaymentMethodTypes').PAYPAL_BILLING_AGREEMENT:return this.renderPayPalConsentView(p);default:return i(false,'Unsupported payment method type for verification: %s',p.type);}}if(this.props.isActive)return this.renderAddPaymentMethod();return (c('React').createElement('div',{className:"__j9 _2ph_"},c('React').createElement(c('XUIGrayText.react'),{display:'block',size:'small'},this.getPaymentMethodLabel()),c('React').createElement('div',{className:"_3-8x _52jv"},this.renderPaymentMethodsDropdown())));};f.exports=o;}),null);
__d('FBPaymentsPaymentMethodStoreBase',['FBPaymentsDispatcher','FBPaymentsPaymentMethodActions','FBPaymentsPaymentMethodsInfo','FBPaymentsPayPalBillingAgreement','FBPaymentsPayPalBillingAgreementTypes','FluxLoadObjectStore','abstractMethod','immutable'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FluxLoadObjectStore'));i=h&&h.prototype;function j(){i.constructor.call(this,c('FBPaymentsDispatcher'));}j.prototype.reduce=function(k,l){var m=l.data,n=void 0;switch(l.type){case c('FBPaymentsPaymentMethodActions').types.FETCH_PAYMENT_METHODS:n=this.makeImmutableKey(m);var o=this.getCached(n);if(o.isEmpty()){this.get(m);return k;}else{this.__load(n);return this.__setUpdating(k,[n]);}case c('FBPaymentsPaymentMethodActions').types.PAYMENT_METHODS_LOADED:n=this.makeImmutableKey(m.requestData);return this.__handleOne(k,n,m.paymentMethodsInfo);case c('FBPaymentsPaymentMethodActions').types.PAYMENT_METHODS_ERROR:n=this.makeImmutableKey(m.requestData);return this.__handleOne(k,n,m.error);case c('FBPaymentsPaymentMethodActions').types.CONVERT_PAYPAL_BA_TO_CIB:n=this.makeImmutableKey(m.key);var p=this.getCached(n),q=p.getValueEnforcing(),r=q.paymentMethods;r=r.update(r.findIndex(function(s){return s.id===m.payPalBAID;}),function(s){return s.set(c('FBPaymentsPayPalBillingAgreement').MutableProperties.BA_TYPE,c('FBPaymentsPayPalBillingAgreementTypes').CIB);});q=q.set(c('FBPaymentsPaymentMethodsInfo').MutableProperties.PAYMENT_METHODS,r);p=p.setValue(q);return k.set(n,p);default:return k;}};j.prototype.makeImmutableKey=function(k){return c('immutable').fromJS(k);};j.prototype.get=function(k){var l=this.makeImmutableKey(k);return i.get.call(this,l);};j.prototype.__load=function(k){var l=k.toJS();this.__getAPI().fetchPaymentMethodsInfo(l);};j.prototype.__getAPI=function(){return c('abstractMethod')('FBPaymentsPaymentMethodStoreBase','__getAPI');};f.exports=j;}),null);
__d('FBPaymentsPaymentMethodStore',['FBPaymentsModulesAPI','FBPaymentsPaymentMethodStoreBase'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FBPaymentsPaymentMethodStoreBase'));i=h&&h.prototype;j.prototype.__getAPI=function(){return c('FBPaymentsModulesAPI');};function j(){h.apply(this,arguments);}f.exports=new j();}),null);
__d('PaypalPopupManager',[],(function a(b,c,d,e,f,g){var h={_instances:{},register:function i(j,k){this._instances.hasOwnProperty(j);this._instances[j]=k;},processPopup:function i(j){var k=j.instance_id;!this._instances.hasOwnProperty(k);var l=this._instances[k];l.close(j);}};f.exports=h;}),null);
__d("XPaymentsPaypalInitController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/payments\/paypal_init\/",{purchase_type:{type:"String"},is_dg_flow:{type:"Bool",defaultValue:false},is_hermes:{type:"Bool",defaultValue:false},use_payment_engine:{type:"Bool",defaultValue:false},item_title:{type:"String"},item_desc:{type:"String"}});}),null);
__d('PaypalPopup',['PopupWindow','URI','guid','PaypalPopupManager','XPaymentsPaypalInitController'],(function a(b,c,d,e,f,g){function h(i){'use strict';this.initData=i;this.pollingInterval=100;this.isDigitalGoodsFlow=true;this.timerID=0;this.width=0;this.height=0;this.secretKey="paypalPopup$"+c('guid')();c('PaypalPopupManager').register(this.secretKey,this);}h.prototype.setPollingInterval=function(i){'use strict';this.pollingInterval=i;return this;};h.prototype.setIsDigitalGoodsFlow=function(i){'use strict';this.isDigitalGoodsFlow=i;return this;};h.prototype.setCancelHandler=function(i){'use strict';this.cancelHandler=i;return this;};h.prototype.setHandler=function(i){'use strict';this.handler=i;return this;};h.prototype.setWidth=function(i){'use strict';this.width=i;return this;};h.prototype.setHeight=function(i){'use strict';this.height=i;return this;};h.prototype.open=function(){'use strict';var i=this.initData;if(i.hasOwnProperty('redirect_data')){i.redirect_data.instance_id=this.secretKey;i.redirect_data.type='rp';}else i.redirect_data={instance_id:this.secretKey,type:'rp'};var j=c('XPaymentsPaypalInitController').getURIBuilder().getURI().setProtocol('https').setSubdomain('secure').setQueryData(i).toString();this.popup=c('PopupWindow').open(j,this.getHeight(),this.getWidth());this.setupPopupOpenCheck();};h.prototype.close=function(i){'use strict';this.closePopup();if(i.cancel){this.cancelHandler(i);}else if(this.handler)this.handler(i);};h.prototype.setupPopupOpenCheck=function(){'use strict';this.timerID=setInterval(function(){if(this.popup&&this.popup.closed){this.closePopup();if(this.cancelHandler)this.cancelHandler();}}.bind(this),this.pollingInterval);};h.prototype.closePopup=function(){'use strict';if(this.timerID!==0){clearInterval(this.timerID);this.timerID=0;}if(this.popup){this.popup.close();this.popup=null;}};h.prototype.getWidth=function(){'use strict';if(this.width)return this.width;if(this.isDigitalGoodsFlow)return 420;return 955;};h.prototype.getHeight=function(){'use strict';if(this.height)return this.height;if(this.isDigitalGoodsFlow)return 600;return 750;};f.exports=h;}),null);
__d('FBPaymentsPaymentMethodSelectorContainer.react',['invariant','FBPaymentsModulesAPI','FBPaymentsPaymentMethodSelectorContainerBase.react','FBPaymentsPaymentMethodSelectorView.react','FBPaymentsPaymentMethodStore','FluxContainer','PaypalPopup','URI'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=100,l=500;i=babelHelpers.inherits(m,c('FBPaymentsPaymentMethodSelectorContainerBase.react'));j=i&&i.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=j.constructor).call.apply(n,[this].concat(q)),this.handleCompletePayPal=function(s){c('FBPaymentsModulesAPI').completePayPal(s,this.handleNewPaymentOptionSaved,this.handleNewPaymentOptionSavedError);}.bind(this),this.handleCancelConnectPayPal=function(){this.setState({isSaving:false});}.bind(this),o;}m.__getPaymentMethodStore=function(){return c('FBPaymentsPaymentMethodStore');};m.prototype.__getView=function(){return c('FBPaymentsPaymentMethodSelectorView.react');};m.prototype.__getAPI=function(){return c('FBPaymentsModulesAPI');};m.prototype.__connectPayPal=function(){var n=this.state.connectPayPalURL;n||h(0);var o=new (c('URI'))(n),p=o.getQueryData();delete p.redirect_url;var q=new (c('PaypalPopup'))(p).setIsDigitalGoodsFlow(false).setWidth(l).setHeight(l).setHandler(this.handleCompletePayPal).setCancelHandler(this.handleCancelConnectPayPal).setPollingInterval(k);q.open();};f.exports=c('FluxContainer').create(m,{withProps:true});}),null);
__d('FBPaymentsPriceSelectorStoreBase',['FBPaymentsDispatcher','FBPaymentsPriceSelectorActions','FBPaymentsPriceSelectorConfiguration','FluxLoadObjectStore','abstractMethod','immutable'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FluxLoadObjectStore'));i=h&&h.prototype;function j(){i.constructor.call(this,c('FBPaymentsDispatcher'));}j.prototype.reduce=function(k,l){var m=l.data,n=void 0;switch(l.type){case c('FBPaymentsPriceSelectorActions').types.PRICE_SELECTOR_LOADED:n=this.makeImmutableKey(m.requestData);return this.__handleOne(k,n,m.priceSelectorConfig);case c('FBPaymentsPriceSelectorActions').types.PRICE_SELECTOR_ERROR:n=this.makeImmutableKey(m.requestData);return this.__handleOne(k,n,m.error);default:return k;}};j.prototype.makeImmutableKey=function(k){return c('immutable').fromJS(k);};j.prototype.get=function(k){var l=this.makeImmutableKey(k);return i.get.call(this,l);};j.prototype.__load=function(k){var l=k.toJS();this.__getAPI().fetchPriceSelectorConfiguration(l);};j.prototype.__getAPI=function(){return c('abstractMethod')('FBPaymentsPriceSelectorStoreBase','__getAPI');};f.exports=j;}),null);
__d('FBPaymentsPriceSelectorViewBase.react',['fbt','FBPaymentsPriceSelectorConfiguration','PECurrency','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.getCustomAmoutInputPlaceHolder=function(){return h._("Other");};l.prototype.getPriceSelectorTitle=function(){var m=this.props.priceSelectorConfiguration;return (m&&m.title||h._("Amount"));};l.prototype.getCurrencySymbol=function(){var m=this.props.priceSelectorConfiguration?c('PECurrency').getCurrencySymbol(this.props.priceSelectorConfiguration.getCurrency()):'';return m;};function l(){i.apply(this,arguments);}l.propTypes={customAmount:k.string.isRequired,customAmountInputErrorMessage:k.node,fetchErrorMessage:k.node,isActive:k.bool.isRequired,isLoading:k.bool.isRequired,onCustomAmountInputChange:k.func.isRequired,onPriceButtonClick:k.func.isRequired,priceSelectorConfiguration:k.object,selectedIndex:k.number.isRequired};f.exports=l;}),null);
__d('FBPaymentsPriceSelectorContainerBase.react',['invariant','FBPaymentsExtensionInterface.react','FBPaymentsPriceSelectorConfiguration','FBPaymentsPriceSelectorStoreBase','FBPaymentsPriceSelectorViewBase.react','React','abstractMethod'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('FBPaymentsExtensionInterface.react'));j=i&&i.prototype;function k(l){j.constructor.call(this,l);this.handleCustomAmountInputChange=function(m,n,o){this.setState({selectedIndex:-1,customAmount:n,customAmountInputErrorMessage:o.errorMessage});}.bind(this);this.handlePriceButtonClick=function(m){this.setState({selectedIndex:m,customAmount:'',customAmountInputErrorMessage:null});}.bind(this);this.state={customAmountInputErrorMessage:null,fetchErrorMessage:null,initialFetch:true,isLoading:false,priceSelectorConfiguration:null,selectedIndex:-1,customAmount:''};}k.getStores=function(){return [this.__getPriceSelectorStore()];};k.$FBPaymentsPriceSelectorContainerBase1=function(l){var m=l.checkoutConfiguration.paymentInfo;return {payment_type:m.paymentItemType,order_id:m.orderId?m.orderId:'',extra_data:JSON.stringify(m.extraData)};};k.calculateState=function(l,m){var n=l||{},o=this.$FBPaymentsPriceSelectorContainerBase1(m),p=this.__getPriceSelectorStore().get(o);n.isLoading=p.isLoading();if(p.hasValue()&&n.initialFetch){var q=p.getValueEnforcing();if(q.message){n.fetchErrorMessage=q.message;}else{n.priceSelectorConfiguration=q;n.selectedIndex=Number.parseInt(q.defaultSelected,10);}n.initialFetch=false;}return n;};k.__calculateExtensionState=function(l){var m=false,n={};if(!l.customAmountInputErrorMessage&&!l.fetchErrorMessage&&l.priceSelectorConfiguration)if(l.customAmount){m=true;n={selectedAmount:l.customAmount,currency:l.priceSelectorConfiguration.getCurrency()};}else if(l.selectedIndex!==-1){m=true;l.priceSelectorConfiguration||h(0);n={currency:l.priceSelectorConfiguration.getCurrency(),selectedAmount:l.priceSelectorConfiguration.getSelectedAmountFromIndex(l.selectedIndex)};}return {extraData:n,ready:m};};k.__getPriceSelectorStore=function(){return c('abstractMethod')('FBPaymentsPriceSelectorContainerBase','__getPriceSelectorStore');};k.prototype.__getView=function(){return c('abstractMethod')('FBPaymentsPriceSelectorContainerBase','__getView');};k.prototype.render=function(){var l=this.__getView();return (c('React').createElement(l,babelHelpers['extends']({},this.state,{isActive:this.props.isActive,isLoading:this.state.isLoading,onCustomAmountInputChange:this.handleCustomAmountInputChange,onPriceButtonClick:this.handlePriceButtonClick})));};f.exports=k;}),null);
__d('FBPaymentsPriceSelectorStore',['FBPaymentsModulesAPI','FBPaymentsPriceSelectorStoreBase'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FBPaymentsPriceSelectorStoreBase'));i=h&&h.prototype;j.prototype.__getAPI=function(){return c('FBPaymentsModulesAPI');};function j(){h.apply(this,arguments);}f.exports=new j();}),null);
__d('FBPaymentsPriceSelectorView.react',['cx','invariant','FBPaymentsFormFieldInputConfigs','FBPaymentsFormField.react','FBPaymentsPriceSelectorConfiguration','FBPaymentsPriceSelectorViewBase.react','Layout.react','React','XUIButton.react','XUIGrayText.react','XUINotice.react','XUIRadioButtonGroup.react','XUISpinner.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('Layout.react').Column,m=c('Layout.react').FillColumn;j=babelHelpers.inherits(n,c('FBPaymentsPriceSelectorViewBase.react'));k=j&&j.prototype;n.prototype.__renderAmountButtonGroup=function(o){var p=o.getButtonLabels(),q=this.props.selectedIndex,r=[];for(var s=0;s<p.size;s++)r.push(c('React').createElement(c('XUIButton.react'),{className:"_t3l",key:s,label:p.get(s),size:'xlarge',type:'button',value:s}));return (c('React').createElement(c('XUIRadioButtonGroup.react'),{className:"_4a6b",onValueChange:this.props.onPriceButtonClick,selectedDepressed:true,selectedValue:q},r));};n.prototype.__renderCustomAmountInput=function(o){var p=c('FBPaymentsFormFieldInputConfigs').getPriceInputConfig(o.getCustomAmountMin(),o.getCustomAmountMax());return (c('React').createElement(c('FBPaymentsFormField.react'),{className:"_4a6e",config:p,errorMessage:this.props.customAmountInputErrorMessage,fieldType:'textInput',inline:true,name:'customAmount',onChange:this.props.onCustomAmountInputChange,placeholder:this.getCustomAmoutInputPlaceHolder(),value:this.props.customAmount}));};n.prototype.render=function(){var o=void 0,p=this.props.priceSelectorConfiguration;if(this.props.fetchErrorMessage){o=c('React').createElement(c('XUINotice.react'),{use:'warn'},this.props.fetchErrorMessage);}else if(this.props.isLoading||!this.props.priceSelectorConfiguration){o=c('React').createElement(c('XUISpinner.react'),null);}else{!!p||i(0);o=c('React').createElement('div',{className:"_1zbe"},c('React').createElement('div',{className:"_4a6f"},this.__renderAmountButtonGroup(p)),c('React').createElement('div',{className:"_4a6c"},c('React').createElement('span',{className:"_4a6d"},this.getCurrencySymbol()),this.__renderCustomAmountInput(p)));}return (c('React').createElement('div',{className:"__j9"},c('React').createElement(c('XUIGrayText.react'),{display:'block',size:'small'},this.getPriceSelectorTitle()),o));};function n(){j.apply(this,arguments);}f.exports=n;}),null);
__d('FBPaymentsPriceSelectorContainer.react',['FBPaymentsModulesAPI','FBPaymentsPriceSelectorContainerBase.react','FBPaymentsPriceSelectorStore','FBPaymentsPriceSelectorView.react','FBPaymentsPriceSelectorViewBase.react','FluxContainer'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FBPaymentsPriceSelectorContainerBase.react'));i=h&&h.prototype;j.__getPriceSelectorStore=function(){return c('FBPaymentsPriceSelectorStore');};j.prototype.__getView=function(){return c('FBPaymentsPriceSelectorView.react');};j.prototype.__getAPI=function(){return c('FBPaymentsModulesAPI');};function j(){h.apply(this,arguments);}f.exports=c('FluxContainer').create(j,{withProps:true});}),null);
__d('FBPaymentsExtensionManager',['FBPaymentsCheckoutConstants','FBPaymentsContactEmailSelectorContainer.react','FBPaymentsContactNameInputContainer.react','FBPaymentsContactPhoneNumberSelectorContainer.react','FBPaymentsCustomOptionsContainer.react','FBPaymentsExtensionInterface.react','FBPaymentsExtensionManagerBase','FBPaymentsMailingAddressSelectorContainer.react','FBPaymentsNoteExtension.react','FBPaymentsPaymentMethodSelectorContainer.react','FBPaymentsPINVerificationContainer.react','FBPaymentsPriceSelectorContainer.react','Map'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('FBPaymentsCheckoutConstants').Extensions;h=babelHelpers.inherits(k,c('FBPaymentsExtensionManagerBase'));i=h&&h.prototype;function k(){i.constructor.call(this);this.extensionMap=new (c('Map'))();this.extensionMap.set(j.CONTACT_NAME,c('FBPaymentsContactNameInputContainer.react'));this.extensionMap.set(j.CONTACT_EMAIL,c('FBPaymentsContactEmailSelectorContainer.react'));this.extensionMap.set(j.CONTACT_PHONE,c('FBPaymentsContactPhoneNumberSelectorContainer.react'));this.extensionMap.set(j.PAYMENT_METHOD,c('FBPaymentsPaymentMethodSelectorContainer.react'));this.extensionMap.set(j.PIN_VERIFICATION,c('FBPaymentsPINVerificationContainer.react'));this.extensionMap.set(j.SHIPPING_ADDRESS,c('FBPaymentsMailingAddressSelectorContainer.react'));this.extensionMap.set(j.CUSTOM_OPTIONS,c('FBPaymentsCustomOptionsContainer.react'));this.extensionMap.set(j.PRICE_SELECTOR,c('FBPaymentsPriceSelectorContainer.react'));this.extensionMap.set(j.NOTE,c('FBPaymentsNoteExtension.react'));}k.prototype.__getExtensionMap=function(){return this.extensionMap;};f.exports=new k();}),null);
__d('FBPaymentsLoadingContainerBase.react',['React','abstractMethod'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;k.prototype.render=function(){var l=this.__getView();return (c('React').createElement(l,{loadingText:this.props.loadingText}));};k.prototype.__getView=function(){return c('abstractMethod')('FBPaymentsLoadingContainerBase','__getView');};function k(){h.apply(this,arguments);}k.propTypes={loadingText:j.node.isRequired};f.exports=k;}),null);
__d('FBPaymentsLoadingContainer.react',['FBPaymentsLoadingContainerBase.react','FBPaymentsLoadingView.react'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FBPaymentsLoadingContainerBase.react'));i=h&&h.prototype;j.prototype.__getView=function(){return c('FBPaymentsLoadingView.react');};function j(){h.apply(this,arguments);}f.exports=j;}),null);
__d('PaymentsFlowsTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear();}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:PaymentsFlowsLoggerConfig',this.$PaymentsFlowsTypedLogger1,c('Banzai').BASIC);};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:PaymentsFlowsLoggerConfig',this.$PaymentsFlowsTypedLogger1,c('Banzai').VITAL);};h.prototype.clear=function(){this.$PaymentsFlowsTypedLogger1={};return this;};h.prototype.updateData=function(j){this.$PaymentsFlowsTypedLogger1=babelHelpers['extends']({},this.$PaymentsFlowsTypedLogger1,j);return this;};h.prototype.setAdAccountID=function(j){this.$PaymentsFlowsTypedLogger1.ad_account_id=j;return this;};h.prototype.setClientTime=function(j){this.$PaymentsFlowsTypedLogger1.client_time=j;return this;};h.prototype.setContainermodule=function(j){this.$PaymentsFlowsTypedLogger1.containermodule=j;return this;};h.prototype.setContextID=function(j){this.$PaymentsFlowsTypedLogger1.context_id=j;return this;};h.prototype.setCurrency=function(j){this.$PaymentsFlowsTypedLogger1.currency=j;return this;};h.prototype.setErrorCategory=function(j){this.$PaymentsFlowsTypedLogger1.error_category=j;return this;};h.prototype.setErrorCode=function(j){this.$PaymentsFlowsTypedLogger1.error_code=j;return this;};h.prototype.setErrorMessage=function(j){this.$PaymentsFlowsTypedLogger1.error_message=j;return this;};h.prototype.setErrorStacktrace=function(j){this.$PaymentsFlowsTypedLogger1.error_stacktrace=j;return this;};h.prototype.setEventName=function(j){this.$PaymentsFlowsTypedLogger1.event_name=j;return this;};h.prototype.setEventType=function(j){this.$PaymentsFlowsTypedLogger1.event_type=j;return this;};h.prototype.setExceptionClass=function(j){this.$PaymentsFlowsTypedLogger1.exception_class=j;return this;};h.prototype.setFlowName=function(j){this.$PaymentsFlowsTypedLogger1.flow_name=j;return this;};h.prototype.setFlowStep=function(j){this.$PaymentsFlowsTypedLogger1.flow_step=j;return this;};h.prototype.setIncomingParams=function(j){this.$PaymentsFlowsTypedLogger1.incoming_params=j;return this;};h.prototype.setIsEmployee=function(j){this.$PaymentsFlowsTypedLogger1.is_employee=j;return this;};h.prototype.setIsOtherProfileTest=function(j){this.$PaymentsFlowsTypedLogger1.is_other_profile_test=j;return this;};h.prototype.setIsTestPayment=function(j){this.$PaymentsFlowsTypedLogger1.is_test_payment=j;return this;};h.prototype.setIsTestUser=function(j){this.$PaymentsFlowsTypedLogger1.is_test_user=j;return this;};h.prototype.setIsUserError=function(j){this.$PaymentsFlowsTypedLogger1.is_user_error=j;return this;};h.prototype.setMailingAddressID=function(j){this.$PaymentsFlowsTypedLogger1.mailing_address_id=j;return this;};h.prototype.setOrderID=function(j){this.$PaymentsFlowsTypedLogger1.order_id=j;return this;};h.prototype.setOtherProfileID=function(j){this.$PaymentsFlowsTypedLogger1.other_profile_id=j;return this;};h.prototype.setOtherProfileName=function(j){this.$PaymentsFlowsTypedLogger1.other_profile_name=j;return this;};h.prototype.setOtherProfileType=function(j){this.$PaymentsFlowsTypedLogger1.other_profile_type=j;return this;};h.prototype.setPaymentID=function(j){this.$PaymentsFlowsTypedLogger1.payment_id=j;return this;};h.prototype.setPaymentMethodID=function(j){this.$PaymentsFlowsTypedLogger1.payment_method_id=j;return this;};h.prototype.setPaymentMethodType=function(j){this.$PaymentsFlowsTypedLogger1.payment_method_type=j;return this;};h.prototype.setProduct=function(j){this.$PaymentsFlowsTypedLogger1.product=j;return this;};h.prototype.setProvider=function(j){this.$PaymentsFlowsTypedLogger1.provider=j;return this;};h.prototype.setRawAmount=function(j){this.$PaymentsFlowsTypedLogger1.raw_amount=j;return this;};h.prototype.setRequestID=function(j){this.$PaymentsFlowsTypedLogger1.request_id=j;return this;};h.prototype.setSessionID=function(j){this.$PaymentsFlowsTypedLogger1.session_id=j;return this;};h.prototype.setShippingOptionID=function(j){this.$PaymentsFlowsTypedLogger1.shipping_option_id=j;return this;};h.prototype.setUserFacingMessage=function(j){this.$PaymentsFlowsTypedLogger1.user_facing_message=j;return this;};h.prototype.updateExtraData=function(j){j=c('nullthrows')(c('GeneratedLoggerUtils').serializeMap(j));c('GeneratedLoggerUtils').checkExtraDataFieldNames(j,i);this.$PaymentsFlowsTypedLogger1=babelHelpers['extends']({},this.$PaymentsFlowsTypedLogger1,j);return this;};h.prototype.addToExtraData=function(j,k){var l={};l[j]=k;return this.updateExtraData(l);};var i={ad_account_id:true,client_time:true,containermodule:true,context_id:true,currency:true,error_category:true,error_code:true,error_message:true,error_stacktrace:true,event_name:true,event_type:true,exception_class:true,flow_name:true,flow_step:true,incoming_params:true,is_employee:true,is_other_profile_test:true,is_test_payment:true,is_test_user:true,is_user_error:true,mailing_address_id:true,order_id:true,other_profile_id:true,other_profile_name:true,other_profile_type:true,payment_id:true,payment_method_id:true,payment_method_type:true,product:true,provider:true,raw_amount:true,request_id:true,session_id:true,shipping_option_id:true,user_facing_message:true};f.exports=h;}),null);
__d('FBPaymentsLogger',['FBPaymentsLoggerBase','PaymentsFlowsTypedLogger'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FBPaymentsLoggerBase'));i=h&&h.prototype;j.prototype.__getLoggerInstance=function(){return new (c('PaymentsFlowsTypedLogger'))();};function j(){h.apply(this,arguments);}f.exports=j;}),null);
__d('FBPaymentsOrderSummaryViewBase.react',['fbt','Image.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.getItemImage=function(m,n){return m?c('React').createElement(c('Image.react'),{src:m,width:n,height:n}):null;};l.prototype.getMerchantText=function(m,n){if(m){return m;}else if(n)return h._("Sold by {merchantName}",[h.param('merchantName',n)]);return null;};function l(){i.apply(this,arguments);}l.propTypes={items:k.arrayOf(k.shape({title:k.string.isRequired,subtitle:k.string,subsubtitle:k.string,merchantName:k.string,merchantText:k.string,itemImageUrl:k.string})).isRequired};f.exports=l;}),null);
__d('FBPaymentsOrderSummaryContainerBase.react',['FBPaymentsCheckoutConfigurationTypes','FBPaymentsOrderSummaryViewBase.react','React','abstractMethod'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('FBPaymentsCheckoutConfigurationTypes').ContentConfigurationPropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;k.prototype.render=function(){var l=this.__getView();return (c('React').createElement(l,this.props.configuration));};k.prototype.__getView=function(){return c('abstractMethod')('FBPaymentsOrderSummaryContainerBase','__getView');};function k(){h.apply(this,arguments);}k.propTypes={configuration:j.isRequired};f.exports=k;}),null);
__d('FBPaymentsOrderSummaryView.react',['cx','FBPaymentsOrderSummaryViewBase.react','ImageBlock.react','InlineBlock.react','React','XUIGrayText.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=72;i=babelHelpers.inherits(l,c('FBPaymentsOrderSummaryViewBase.react'));j=i&&i.prototype;l.prototype.render=function(){var m=this.props.items[0];return (c('React').createElement(c('ImageBlock.react'),{className:"_qu2 _2ph_"},c('React').createElement('div',{className:"_3-91"},this.getItemImage(m.itemImageUrl,k)),c('React').createElement(c('InlineBlock.react'),{alignv:'middle',height:k},c('React').createElement(c('XUIGrayText.react'),{display:'block',shade:'dark',size:'medium',weight:'bold'},m.title),c('React').createElement(c('XUIGrayText.react'),{display:'block',shade:'dark',size:'small'},m.subtitle),c('React').createElement(c('XUIGrayText.react'),{display:'block',shade:'dark',size:'small'},m.subsubtitle),c('React').createElement(c('XUIGrayText.react'),{display:'block',shade:'light',size:'small'},this.getMerchantText(m.merchantText,m.merchantName)))));};function l(){i.apply(this,arguments);}f.exports=l;}),null);
__d('FBPaymentsOrderSummaryContainer.react',['FBPaymentsOrderSummaryContainerBase.react','FBPaymentsOrderSummaryView.react'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FBPaymentsOrderSummaryContainerBase.react'));i=h&&h.prototype;j.prototype.__getView=function(){return c('FBPaymentsOrderSummaryView.react');};function j(){h.apply(this,arguments);}f.exports=j;}),null);
__d('FBPaymentsPayActionRowViewBase.react',['fbt','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.getPayButtonText=function(){return (this.props.actionTitle?this.props.actionTitle:h._("Pay"));};l.prototype.getBackButtonText=function(){return h._("Back");};l.prototype.getDefaultTermsAndPoliciesText=function(){var m=h._("terms and policies"),n=c('React').createElement('a',{href:this.props.termsAndPoliciesUrl,target:'_blank'},m);if(this.props.merchantName&&this.props.processorName){return h._("By clicking {text on action button}, you agree to {merchant name}'s and {processor name}'s {=terms and policies}.",[h.param('text on action button',this.getPayButtonText()),h.param('merchant name',this.props.merchantName),h.param('processor name',this.props.processorName),h.param('=terms and policies',n)]);}else if(this.props.merchantName){return h._("By clicking {text on action button}, you agree to {merchant name}'s {=terms and policies}.",[h.param('text on action button',this.getPayButtonText()),h.param('merchant name',this.props.merchantName),h.param('=terms and policies',n)]);}else return h._("By clicking {text on action button}, you agree to these {=terms and policies}.",[h.param('text on action button',this.getPayButtonText()),h.param('=terms and policies',n)]);};function l(){i.apply(this,arguments);}l.propTypes={actionTitle:k.node,backButton:k.bool,customTermsAndPoliciesText:k.element,isLoading:k.bool.isRequired,merchantName:k.string,onBackButtonClick:k.func.isRequired,onPayButtonClick:k.func.isRequired,payButtonEnabled:k.bool.isRequired,processorName:k.string,termsAndPoliciesUrl:k.string};f.exports=l;}),null);
__d('FBPaymentsPayActionRowContainerBase.react',['FBPaymentsCheckoutConfigurationTypes','FBPaymentsPayActionRowViewBase.react','React','abstractMethod'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes,k=c('FBPaymentsCheckoutConfigurationTypes').PayActionContentPropTypes;h=babelHelpers.inherits(l,c('React').Component);i=h&&h.prototype;l.prototype.render=function(){var m=this.__getView();return (c('React').createElement(m,babelHelpers['extends']({isLoading:this.props.isLoading,onBackButtonClick:this.props.onBackButtonClick,onPayButtonClick:this.props.onPayButtonClick,payButtonEnabled:this.props.payButtonEnabled},this.props.configuration)));};l.prototype.__getView=function(){return c('abstractMethod')('FBPaymentsPayActionRowContainerBase','__getView');};function l(){h.apply(this,arguments);}l.propTypes={configuration:k.isRequired,isLoading:j.bool.isRequired,onBackButtonClick:j.func.isRequired,onPayButtonClick:j.func.isRequired,payButtonEnabled:j.bool.isRequired};f.exports=l;}),null);
__d('FBPaymentsPayActionRowView.react',['cx','FBPaymentsPayActionRowViewBase.react','React','XUIButton.react','XUIGrayText.react','XUISpinner.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('FBPaymentsPayActionRowViewBase.react'));j=i&&i.prototype;k.prototype.render=function(){var l=this.props.customTermsAndPoliciesText?this.props.customTermsAndPoliciesText:this.getDefaultTermsAndPoliciesText(),m=this.props.isLoading?c('React').createElement(c('XUISpinner.react'),{background:'dark',size:'small'}):this.getPayButtonText(),n=void 0;if(this.props.backButton)n=c('React').createElement(c('XUIButton.react'),{className:"_2oqx",disabled:this.props.isLoading,label:this.getBackButtonText(),size:'large',onClick:this.props.onBackButtonClick,use:'default'});return (c('React').createElement('div',{className:"_5kyc _2ph_"},c('React').createElement(c('XUIGrayText.react'),{display:'block',shade:'light',size:'small'},l),c('React').createElement('div',{className:"_39ge"},n,c('React').createElement(c('XUIButton.react'),{className:"_39gi",disabled:!this.props.payButtonEnabled,label:m,size:'large',onClick:this.props.onPayButtonClick,use:'confirm'}))));};function k(){i.apply(this,arguments);}f.exports=k;}),null);
__d('FBPaymentsPayActionRowContainer.react',['FBPaymentsPayActionRowContainerBase.react','FBPaymentsPayActionRowView.react'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FBPaymentsPayActionRowContainerBase.react'));i=h&&h.prototype;j.prototype.__getView=function(){return c('FBPaymentsPayActionRowView.react');};function j(){h.apply(this,arguments);}f.exports=j;}),null);
__d('FBPaymentsPriceTableContainerBase.react',['FBPaymentsCheckoutConfigurationTypes','FBPaymentsPriceTableViewBase.react','abstractMethod','React'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes,k=c('FBPaymentsCheckoutConfigurationTypes').PriceListPropTypes;h=babelHelpers.inherits(l,c('React').Component);i=h&&h.prototype;l.prototype.render=function(){var m=this.__getView();return (c('React').createElement(m,this.props.configuration));};l.prototype.__getView=function(){return c('abstractMethod')('FBPaymentsPriceTableContainerBase','__getView');};function l(){h.apply(this,arguments);}l.propTypes={configuration:j.shape({priceList:k.isRequired}).isRequired};f.exports=l;}),null);
__d('FBPaymentsPriceTableContainer.react',['FBPaymentsPriceTableContainerBase.react','FBPaymentsPriceTableView.react'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FBPaymentsPriceTableContainerBase.react'));i=h&&h.prototype;j.prototype.__getView=function(){return c('FBPaymentsPriceTableView.react');};function j(){h.apply(this,arguments);}f.exports=j;}),null);
__d('FBPaymentsCheckoutFlowContainer.react',['FBPaymentsCheckoutFlowContainerBase.react','FBPaymentsCheckoutFlowView.react','FBPaymentsConfirmationContainer.react','FBPaymentsEntityHeaderView.react','FBPaymentsExtensionManager','FBPaymentsLoadingContainer.react','FBPaymentsLogger','FBPaymentsModulesAPI','FBPaymentsOrderSummaryContainer.react','FBPaymentsPayActionRowContainer.react','FBPaymentsPriceTableContainer.react','React'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FBPaymentsCheckoutFlowContainerBase.react'));i=h&&h.prototype;j.prototype.__getExtensionManager=function(){return c('FBPaymentsExtensionManager');};j.prototype.__getCheckoutFlowView=function(){return c('FBPaymentsCheckoutFlowView.react');};j.prototype.__getLoadingContainer=function(){return c('FBPaymentsLoadingContainer.react');};j.prototype.__getConfirmationContainer=function(){return c('FBPaymentsConfirmationContainer.react');};j.prototype.__getOrderSummaryContainer=function(){return c('FBPaymentsOrderSummaryContainer.react');};j.prototype.__getEntityHeaderContainer=function(){return c('FBPaymentsEntityHeaderView.react');};j.prototype.__getPayActionRowContainer=function(){return c('FBPaymentsPayActionRowContainer.react');};j.prototype.__getPriceTableContainer=function(){return c('FBPaymentsPriceTableContainer.react');};j.prototype.__getAPI=function(){return c('FBPaymentsModulesAPI');};j.prototype.__getLogger=function(){return c('FBPaymentsLogger');};j.prototype.render=function(){return i.render.call(this);};function j(){h.apply(this,arguments);}j.propTypes=babelHelpers['extends']({},c('FBPaymentsCheckoutFlowContainerBase.react').propTypes);f.exports=j;}),null);
__d('FBPaymentsInvoiceFlowContainerBase.react',['fbt','invariant','FBPaymentsCartItem','FBPaymentsCheckoutConstants','FBPaymentsModulesFlowType','FBPaymentsPriceListHelper','PaymentItemTypeFields','React','abstractMethod','idx','keyMirror'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes,m=c('FBPaymentsCheckoutConstants').Extensions,n=c('FBPaymentsCheckoutConstants').OrderStatusModelType,o=c('FBPaymentsCheckoutConstants').PaymentAction,p=c('FBPaymentsCheckoutConstants').PaymentCallbackUpdateState,q=c('keyMirror')({CREATE_CART:null,CREATE_INVOICE:null});j=babelHelpers.inherits(r,c('React').Component);k=j&&j.prototype;function r(s){k.constructor.call(this,s);this.$FBPaymentsInvoiceFlowContainerBase1=function(t){this.setState({invoiceConfig:t});}.bind(this);this.$FBPaymentsInvoiceFlowContainerBase2=function(t){this.setState({buyerProfile:t});}.bind(this);this.$FBPaymentsInvoiceFlowContainerBase3=function(t){this.setState({step:q.CREATE_INVOICE,invoiceItems:t.toArray()});}.bind(this);this.$FBPaymentsInvoiceFlowContainerBase4=function(){};this.$FBPaymentsInvoiceFlowContainerBase5=function(){this.setState({step:q.CREATE_CART});}.bind(this);this.$FBPaymentsInvoiceFlowContainerBase6=function(t,u){var v,w,x=this.state.invoiceItems||[],y=x.map(c('FBPaymentsCartItem').serializeForServer),z=((v=t.get(m.CUSTOM_OPTIONS))!=null?v.extraData:v)||{},aa=z.optionId,ba=z.customOption;aa||ba||i(0);var ca=void 0,da=[];if(ba){da.push({title:ba.optionTitle,currency_amount:ba.optionPrice});}else if(aa)ca=[aa];var ea=((w=t.get(m.NOTE))!=null?w.extraData:w)||{},fa=ea.note;this.__getAPI().createInvoice({client_mutation_id:'13245789',actor_id:this.props.sellerID,client:this.props.client,seller_id:this.props.sellerID,buyer_id:this.props.buyerID,items:y,notes:fa,selected_options:{shipping_options:ca},custom_shipping_options:da},this.$FBPaymentsInvoiceFlowContainerBase7.bind(this,u),this.$FBPaymentsInvoiceFlowContainerBase8.bind(this,u));}.bind(this);this.state={buyerProfile:null,invoiceConfig:null,invoiceItems:null,step:q.CREATE_CART};}r.prototype.componentWillMount=function(){this.__getAPI().fetchInvoiceConfig({buyer_id:this.props.buyerID,seller_id:this.props.sellerID,client:this.props.client},this.$FBPaymentsInvoiceFlowContainerBase1);this.__getAPI().fetchUserBasicProfile({id:this.props.buyerID},this.$FBPaymentsInvoiceFlowContainerBase2);};r.prototype.$FBPaymentsInvoiceFlowContainerBase7=function(s,t){s({state:p.DONE});this.props.onClose&&this.props.onClose();};r.prototype.$FBPaymentsInvoiceFlowContainerBase8=function(s,t){s({state:p.ERROR,errorMessage:t.message});};r.prototype.$FBPaymentsInvoiceFlowContainerBase9=function(){var s=this.state.invoiceConfig;if(!s)return {};var t=s.invoiceContentConfiguration,u=t.priceList,v=t.purchaseInfo,w=this.state.invoiceItems||[],x=w.map(function(ca){return c('FBPaymentsPriceListHelper').newBasePrice(ca.title,ca.getPrice());}),y=[{label:this.$FBPaymentsInvoiceFlowContainerBase10(),priceList:x}],z=c('FBPaymentsPriceListHelper').merge(y,u),aa=this.state.buyerProfile||{},ba={version:'1.0',paymentInfo:{payCallback:this.$FBPaymentsInvoiceFlowContainerBase6,paymentItemType:c('PaymentItemTypeFields').NMOR_PAGES_COMMERCE,action:o.CUSTOM_CALLBACK,receiverId:this.props.sellerID},orderStatusModel:{type:n.FIXED_AMOUNT},contentConfiguration:{entity:{participant:{title:aa.name,imageURL:aa.profilePictureUrl}},items:[],priceList:z,purchaseInfo:v,payActionContent:{actionTitle:this.$FBPaymentsInvoiceFlowContainerBase11(),backButton:true,backButtonCallback:this.$FBPaymentsInvoiceFlowContainerBase5,customTermsAndPoliciesText:c('React').createElement('span',null)}}};return ba;};r.prototype.$FBPaymentsInvoiceFlowContainerBase12=function(){return h._("Payment request");};r.prototype.$FBPaymentsInvoiceFlowContainerBase10=function(){return h._("Subtotal");};r.prototype.$FBPaymentsInvoiceFlowContainerBase13=function(){return h._("Continue to Payment Request");};r.prototype.$FBPaymentsInvoiceFlowContainerBase11=function(){return h._("Request Payment");};r.prototype.render=function(){var s=this.state.invoiceConfig,t=this.__getCartContainer(),u=this.state.step===q.CREATE_CART,v=c('React').createElement(t,{config:s&&s.invoiceCreationConfig,continueButtonLabel:this.$FBPaymentsInvoiceFlowContainerBase13(),onClose:this.props.onClose,onContinue:this.$FBPaymentsInvoiceFlowContainerBase3,sellerID:this.props.sellerID,shown:u}),w=this.__getCheckoutContainer(),x=this.state.step===q.CREATE_INVOICE?c('React').createElement(w,{configuration:this.$FBPaymentsInvoiceFlowContainerBase9(),onCheckoutClosed:this.props.onClose,onConfirmationClosed:this.props.onClose,paymentModuleDialogTitle:this.$FBPaymentsInvoiceFlowContainerBase12(),paymentModuleFlowType:c('FBPaymentsModulesFlowType').INVOICE}):null;return (c('React').createElement('div',null,v,x));};r.prototype.__getCartContainer=function(){return c('abstractMethod')('FBPaymentsInvoiceFlowContainerBase','__getCartContainer');};r.prototype.__getCheckoutContainer=function(){return c('abstractMethod')('FBPaymentsInvoiceFlowContainerBase','__getCheckoutContainer');};r.prototype.__getAPI=function(){return c('abstractMethod')('FBPaymentsInvoiceFlowContainerBase','__getAPI');};r.propTypes={buyerID:l.string.isRequired,client:l.string.isRequired,onClose:l.func,sellerID:l.string.isRequired};f.exports=r;}),null);
__d('FBPaymentsInvoiceFlowContainer.react',['FBPaymentsCartFlowContainer.react','FBPaymentsCheckoutFlowContainer.react','FBPaymentsInvoiceFlowContainerBase.react','FBPaymentsModulesAPI'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FBPaymentsInvoiceFlowContainerBase.react'));i=h&&h.prototype;j.prototype.__getCartContainer=function(){return c('FBPaymentsCartFlowContainer.react');};j.prototype.__getCheckoutContainer=function(){return c('FBPaymentsCheckoutFlowContainer.react');};j.prototype.__getAPI=function(){return c('FBPaymentsModulesAPI');};j.prototype.render=function(){return i.render.call(this);};function j(){h.apply(this,arguments);}j.propTypes=babelHelpers['extends']({},c('FBPaymentsInvoiceFlowContainerBase.react').propTypes);f.exports=j;}),null);
__d('CommerceInvoiceAdminButton.react',['cx','fbt','BOFSellerLoggerEvent','CommerceCommonNUXAPI','CommerceContactMerchantAPI','CommerceCurrencyUtil','CommerceInvoiceAdminActions','CommerceInvoiceAdminDialogContainer.react','CommerceInvoiceAdminDispatcher','CommerceInvoiceAdminStore','CommerceInvoiceButtonNUX.react','CommerceInvoiceButtonPUX.react','CommerceSelfServeNUXType','FBPaymentsInvoiceFlowContainer.react','FluxContainer','Image.react','Link.react','PaymentModulesClient','React','TooltipData','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;function l(m){k.constructor.call(this,m);this.$CommerceInvoiceAdminButton1=function(){return this.refs.invoiceButton;}.bind(this);this.$CommerceInvoiceAdminButton2=function(){if(this.state.isInvoiceSetupComplete){if(this.props.shouldShowPUX)c('CommerceCommonNUXAPI').update({event:c('BOFSellerLoggerEvent').ACTN_NUX_CLICK,nuxType:c('CommerceSelfServeNUXType').INVOICE_PAYMENTS_CREATION_PUX,pageID:this.props.pageID});this.setState({dialogIsVisible:true});this.refs.invoiceDialog&&this.refs.invoiceDialog.showDialog();}else this.setState({nuxShown:true});}.bind(this);this.$CommerceInvoiceAdminButton3=function(){this.setState({dialogIsVisible:false});}.bind(this);this.$CommerceInvoiceAdminButton4=function(){c('CommerceContactMerchantAPI').markInvoicePaymentsInvoiceButtonNUXSeen({pageID:this.props.pageID});this.setState({nuxShown:false});}.bind(this);this.state={dialogIsVisible:false,isInvoiceSetupComplete:false,isShippingOptionsBlocking:false,nuxShown:m.shouldShowNUX};}l.getStores=function(){return [c('CommerceInvoiceAdminStore')];};l.calculateState=function(m,n){var o=c('CommerceInvoiceAdminStore').getConfig()||{},p=o.paymentMethods,q=o.shippingOptions,r=p&&p.length>0,s=q&&q.length>0,t=n.shouldShowShippingNUX&&!s;return {isInvoiceSetupComplete:r&&!t,isShippingOptionsBlocking:r&&t};};l.prototype.componentWillMount=function(){c('CommerceInvoiceAdminDispatcher').explicitlyRegisterStores([c('CommerceInvoiceAdminStore')]);c('CommerceInvoiceAdminActions').fetchConfig(this.props.pageID);};l.prototype.$CommerceInvoiceAdminButton5=function(){if(!this.state.isInvoiceSetupComplete)return (c('React').createElement(c('CommerceInvoiceButtonNUX.react'),{contextRef:this.$CommerceInvoiceAdminButton1,linkRef:'AdminButton',onNUXSeen:this.$CommerceInvoiceAdminButton4,pageID:this.props.pageID,shown:this.state.nuxShown,showSecondaryMessage:this.state.isShippingOptionsBlocking}));if(this.props.shouldShowPUX)return (c('React').createElement(c('CommerceInvoiceButtonPUX.react'),{contextRef:this.$CommerceInvoiceAdminButton1,pageID:this.props.pageID,recipientID:this.props.recipientID,shown:true}));return null;};l.prototype.render=function(){var m=i._("Request payment"),n=c('joinClasses')("_4h_d",this.props.className),o=void 0;if(this.state.dialogIsVisible)o=this.props.shouldOpenNewFlow?c('React').createElement(c('FBPaymentsInvoiceFlowContainer.react'),{buyerID:this.props.recipientID,client:c('PaymentModulesClient').PAGES_COMMERCE,onClose:this.$CommerceInvoiceAdminButton3,sellerID:this.props.pageID}):c('React').createElement(c('CommerceInvoiceAdminDialogContainer.react'),{isVisible:this.state.dialogIsVisible,pageID:this.props.pageID,recipientID:this.props.recipientID,ref:'invoiceDialog'});return (c('React').createElement('div',{className:n},c('React').createElement(c('Link.react'),babelHelpers['extends']({className:"_4h_e",href:'#',onClick:this.$CommerceInvoiceAdminButton2},c('TooltipData').propsFor(m)),c('React').createElement(c('Image.react'),{className:"_4h_f",ref:'invoiceButton',src:c('CommerceCurrencyUtil').getIconSrc(this.props.defaultCurrency)}),this.$CommerceInvoiceAdminButton5()),o));};f.exports=c('FluxContainer').create(l,{withProps:true});}),null);
__d('FacepileRounded.react',['cx','Image.react','React','Tooltip.react','joinClasses'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.render=function(){var m=this.props,n=m.className,o=m.profiles,p=m.message,q=m.numProfilesToDisplay,r=null;if(p)r=c('React').createElement('div',{className:"_4mnt"},p);var s=q?o.slice(0,q).map(function(t,u){return (this.$FacepileRounded1(t,u));}.bind(this)):o.map(function(t,u){return this.$FacepileRounded1(t,u);}.bind(this));return (c('React').createElement('div',{className:c('joinClasses')("_4mnv",n)},c('React').createElement('div',{className:"_4mnw"},s,this.$FacepileRounded2()),r));};l.prototype.$FacepileRounded2=function(){var m=this.props,n=m.direction,o=m.imageSize,p=m.profiles,q=m.remainingProfilesCount,r=m.numProfilesToDisplay;if(!r)return null;var s=q?q:p.length-r;return (s>0?c('React').createElement('span',{className:"_4mnq _34n6",style:{borderRadius:o,height:o,marginLeft:-(o*.3125)+'px',minWidth:o,position:n==='descending'?'relative':null,zIndex:n==='descending'?0:null}},c('React').createElement('span',{className:"_40vg"},'+'+s)):null);};l.prototype.$FacepileRounded1=function(m,n){var o=this.props,p=o.direction,q=o.imageSize,r=o.profiles,s=o.showNames,t={};if(n>0)t.marginLeft=-(q*.3125)+'px';if(p==='descending'){t.position='relative';t.zIndex=r.length-n;}var u=c('React').createElement(c('Image.react'),{className:"_4mnq",height:q,key:n+m.image_src,style:s?null:t,src:m.image_src,width:q});if(s&&m.name)u=c('React').createElement(c('Tooltip.react'),{className:"_4mns",key:n+m.image_src,style:t,tooltip:m.name},u);return u;};function l(){i.apply(this,arguments);}l.defaultProps={direction:'ascending',imageSize:32,showNames:false};l.propTypes={className:k.string,direction:k.string,imageSize:k.number,message:k.string,numProfilesToDisplay:k.number,remainingProfilesCount:k.number,profiles:k.arrayOf(k.shape({image_src:k.any.isRequired,name:k.string})).isRequired,showNames:k.bool};f.exports=l;}),null);
__d('PagesMessengerConfirmCloseThreadDialog.react',['fbt','React','XUIDialog.react','XUIDialogBody.react','XUIDialogButton.react','XUIDialogFooter.react','XUIDialogTitle.react'],(function a(b,c,d,e,f,g,h){var i,j,k=c('React').PropTypes,l=300;i=babelHelpers.inherits(m,c('React').Component);j=i&&i.prototype;function m(n){'use strict';j.constructor.call(this,n);}m.prototype.render=function(){'use strict';return (c('React').createElement(c('XUIDialog.react'),{layerHideOnBlur:false,shown:this.props.shown,width:l},c('React').createElement(c('XUIDialogTitle.react'),{showCloseButton:false},h._("Close Message Thread")),c('React').createElement(c('XUIDialogBody.react'),null,h._("You haven't sent your message yet. Do you want to leave without sending it?")),c('React').createElement(c('XUIDialogFooter.react'),null,c('React').createElement(c('XUIDialogButton.react'),{action:'cancel',label:h._("Continue Writing"),onClick:this.props.onCancel,use:'default'}),c('React').createElement(c('XUIDialogButton.react'),{action:'confirm',label:h._("Leave This Thread"),onClick:this.props.onConfirm,use:'confirm'}))));};m.propTypes={onCancel:k.func.isRequired,onConfirm:k.func.isRequired,shown:k.bool.isRequired};f.exports=m;}),null);
__d('UFICreatorInfo.react',['cx','fbt','HelpLink.react','Image.react','React','URI'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.getCreatorLink=function(){switch(this.props.creatorType){case 'application':case 'gray_account':case 'indirect_admin':return (c('React').createElement('a',{className:'uiLinkSubtle','data-hover':'tooltip','data-tooltip-content':this.getTooltipText()},this.props.creatorName));case 'business_admin':return (c('React').createElement('a',{className:'uiLinkSubtle',href:this.props.profileURI},this.props.creatorName));case 'direct_admin':return this.getProfileLinkWithHovercard();case 'former_admin':return (c('React').createElement('span',{className:'uiLinkSubtle'},c('React').createElement(c('Image.react'),{src:'/images/privacy/cant-see.png',width:9,height:9,className:"_3-8_"}),this.getProfileLinkWithHovercard()));default:return (c('React').createElement('span',{className:'uiLinkSubtle'},this.props.creatorName));}}.bind(this),this.getTooltipText=function(){switch(this.props.creatorType){case 'application':return this.getApplicationText();case 'gray_account':return this.getGrayAccountText();case 'indirect_admin':return this.getIndirectAdminText();}}.bind(this),this.getProfileLinkWithHovercard=function(){if(!this.props.profileURI)return c('React').createElement('span',null,this.props.creatorName);var s=new (c('URI'))('/ajax/hovercard/user.php').setQueryData({id:this.props.creatorID}).addQueryData({type:'page_admin',extragetparams:JSON.stringify({directed_target_id:this.props.pageID})});return (c('React').createElement('a',{className:'uiLinkSubtle','data-hovercard':s,href:this.props.profileURI},this.props.creatorName));}.bind(this),this.getApplicationText=function(){switch(this.props.labelType){case 'commented':return i._("This was commented on by someone using {application}.",[i.param('application',this.props.creatorName)]);case 'edited_comment':return i._("This was edited by someone using {application}.",[i.param('application',this.props.creatorName)]);case 'sent_message':return i._("This was sent by someone using {application}.",[i.param('application',this.props.creatorName)]);case 'page_admin_note':return i._("This was noted by someone using {application}.",[i.param('application',this.props.creatorName)]);}}.bind(this),this.getIndirectAdminText=function(){switch(this.props.labelType){case 'commented':return i._("This was commented on by someone from {page}.",[i.param('page',this.props.creatorName)]);case 'edited_comment':return i._("This was edited by someone from {page}.",[i.param('page',this.props.creatorName)]);case 'sent_message':return i._("This was sent by someone from {page}.",[i.param('page',this.props.creatorName)]);case 'page_admin_note':return i._("This was noted by someone from {page}.",[i.param('page',this.props.creatorName)]);}}.bind(this),this.getGrayAccountText=function(){switch(this.props.labelType){case 'commented':return i._("This was commented on by someone who doesn't have a personal Facebook account.");case 'edited_comment':return i._("This was edited by someone who doesn't have a personal Facebook account.");case 'sent_message':return i._("This was sent by someone who doesn't have a personal Facebook account.");case 'page_admin_note':return i._("This was noted by someone who doesn't have a personal Facebook account.");}}.bind(this),this.getHelpText=function(){switch(this.props.labelType){case 'commented':return i._("Only people who manage this Page can see who posted a comment");case 'edited_comment':return i._("Only people who manage this Page can see who edited a comment");case 'sent_message':return i._("Only people who manage this Page can see who sent a message");case 'page_admin_note':return i._("Only people who manage this Page can see who created a note");}}.bind(this),o;}m.prototype.render=function(){var n=void 0,o=this.getCreatorLink();switch(this.props.labelType){case 'commented':n=i._("Commented on by {creator}",[i.param('creator',o)]);break;case 'edited_comment':n=i._("Edited by {creator}",[i.param('creator',o)]);break;case 'sent_message':n=i._("Sent by {creator}",[i.param('creator',o)]);break;case 'page_admin_note':n=i._("Noted by {creator}",[i.param('creator',o)]);break;default:return;}return c('React').createElement('span',null,n,c('React').createElement(c('HelpLink.react'),{tooltip:this.getHelpText()}));};m.propTypes={creatorID:l.string.isRequired,creatorType:l.string.isRequired,creatorName:l.string.isRequired,labelType:l.string.isRequired,pageID:l.string.isRequired,profileURI:l.string};f.exports=m;}),null);
__d('PagesMessengerCreatorInfo.react',['cx','React','UFICreatorInfo.react','XUIGrayText.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.render=function(){return (c('React').createElement(c('XUIGrayText.react'),{className:"_ajk"+(this.props.isNote?' '+"_45l2":''),display:'inline',shade:'light',size:'small'},c('React').createElement(c('UFICreatorInfo.react'),{creatorID:this.props.creator_info.creatorID,creatorType:this.props.creator_info.creatorType,creatorName:this.props.creator_info.creatorName,labelType:this.props.creator_info.labelType,pageID:this.props.creator_info.pageID,profileURI:this.props.creator_info.profileURI})));};function l(){i.apply(this,arguments);}l.propTypes={creator_info:k.shape({creatorID:k.string.isRequired,creatorName:k.string.isRequired,creatorType:k.string.isRequired,labelType:k.string.isRequired,pageID:k.string.isRequired,profileURI:k.string}).isRequired};f.exports=l;}),null);
__d('ChatFileUploaderMixin',['SubscriptionsHandler','React'],(function a(b,c,d,e,f,g){var h=c('React').PropTypes,i={propTypes:{attachmentsShelf:h.object,onFileUploaderMounted:h.func,onUploadFinished:h.func,onUpdateAttachmentsShelf:h.func,onSubmit:h.func},setUpSubscriptionsHandler:function j(k){this._uploader=k;this._subscriptions=new (c('SubscriptionsHandler'))();this._subscriptions.addSubscriptions(this._uploader.subscribe(['all-uploads-completed','upload-canceled'],this._handleUploadFinished),this._uploader.subscribe('dom-updated',this._handleUpdateAttachmentsShelf),this._uploader.subscribe('submit',this._handleSubmit));this.props.onFileUploaderMounted(this._uploader);},componentWillUnmount:function j(){this._subscriptions&&this._subscriptions.release();if(!this.props.uploaderIsFromHigherLevel)this._uploader&&this._uploader.destroy();},isUploading:function j(){return this._uploader.isUploading();},getAttachments:function j(){return this._uploader.getAttachments();},getImageFiles:function j(){return this._uploader.getImageFiles();},getVideoFiles:function j(){return this._uploader.getVideoFiles();},getAudioFiles:function j(){return this._uploader.getAudioFiles();},getFiles:function j(){return this._uploader.getFiles();},removeAttachments:function j(){return this._uploader.removeAttachments();},_handleUploadFinished:function j(){if(this.props.onUploadFinished){var k;(k=this.props).onUploadFinished.apply(k,arguments);}},_handleUpdateAttachmentsShelf:function j(){if(this.props.onUpdateAttachmentsShelf){var k;(k=this.props).onUpdateAttachmentsShelf.apply(k,arguments);}},_handleSubmit:function j(){if(this.props.onSubmit){var k;(k=this.props).onSubmit.apply(k,arguments);}}};f.exports=i;}),null);
__d('PagesMessengerFileUploader.react',['cx','fbt','ix','ChatFileUploaderMixin','Image.react','InlineBlock.react','Link.react','MercuryConfig','MercuryFileUploader','React','ReactDOM'],(function a(b,c,d,e,f,g,h,i,j){var k=c('React').PropTypes,l=c('React').createClass({displayName:'PagesMessengerFileUploader',mixins:[c('ChatFileUploaderMixin')],propTypes:{actionURI:k.string,iconSize:k.oneOf(['small','large'])},shouldComponentUpdate:function m(n,o){return n.actionURI!=this.props.actionURI;},componentDidMount:function m(){this._fileUploader=new (c('MercuryFileUploader'))(this.props.attachmentsShelf,c('ReactDOM').findDOMNode(this.refs.form),c('ReactDOM').findDOMNode(this.refs.input),c('ReactDOM').findDOMNode(this.refs.attachID));this.setUpSubscriptionsHandler(this._fileUploader);},addFiles:function m(n){this._fileUploader.addDroppedFiles(n);},getDefaultProps:function m(){return {actionURI:c('MercuryConfig').upload_url,iconSize:'small'};},render:function m(){return (c('React').createElement('form',{action:this.props.actionURI,method:'post',ref:'form'},c('React').createElement('input',{type:'hidden',name:'attach_id',ref:'attachID'}),c('React').createElement(c('InlineBlock.react'),{className:"_m _4q60 _3rzn"},c('React').createElement(c('Link.react'),{className:"_4q61"+(this.props.iconSize==='small'?' '+"_509v":'')+(this.props.iconSize==='large'?' '+"_5njm":'')+(' '+"bizOK")},this._renderIcon()),c('React').createElement('input',{type:'file',className:"_n",name:'attachment[]',multiple:'true',ref:'input'}))));},_renderIcon:function m(){if(this.props.iconSize==='small'){return (c('React').createElement(c('Image.react'),{alt:i._("File"),src:j('/images/composer/attachments/paperclip_icon.png')}));}else if(this.props.iconSize==='large')return (c('React').createElement(c('Image.react'),{alt:i._("File"),src:j('/images/pages/pages_manager/messages/composer-attach.png')}));}});f.exports=l;}),null);
__d('MercuryPageMessageActions',['MercuryActionType','MercuryMessageActions','MercuryPageServerRequests','MercuryPayloadSource','MercurySingletonMixin'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('MercuryMessageActions'));i=h&&h.prototype;function j(k){i.constructor.call(this,k);this.__serverRequests=c('MercuryPageServerRequests').getForFBID(k);}j.prototype.createNote=function(k,l,m){this.__dispatcher.handleUpdate(this.__constructClientSingleMessagePayload({action_type:c('MercuryActionType').CREATE_PAGE_ADMIN_NOTE,message_id:m,note:k,thread_id:l},c('MercuryPayloadSource').CLIENT_CREATE_PAGE_ADMIN_NOTE));this.__serverRequests.createNote(k.body.text,m,l);};Object.assign(j,c('MercurySingletonMixin'),{_instances:{}});f.exports=j;}),null);
__d('PagesMessengerTextInput.react',['cx','AbstractTextField.react','React','TextAreaControl','joinClasses'],(function a(b,c,d,e,f,g,h){var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(){var m,n;'use strict';for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.$PagesMessengerTextInput1=null,this.resetHeight=function(){this.$PagesMessengerTextInput1&&this.$PagesMessengerTextInput1.resetHeight();}.bind(this),this.updateHeight=function(){this.$PagesMessengerTextInput1&&this.$PagesMessengerTextInput1.updateHeight();}.bind(this),n;}l.prototype.componentDidMount=function(){'use strict';if(this.refs.input)this.$PagesMessengerTextInput1=new (c('TextAreaControl'))(this.refs.input);};l.prototype.render=function(){'use strict';var m=c('joinClasses')(this.props.className,"_58al"+(' '+"uiTextareaAutogrow"));return (c('React').createElement(c('AbstractTextField.react'),this.props,c('React').createElement('textarea',{type:'text',className:m,tabIndex:this.props.tabIndex,onClick:this.props.onClick,onKeyUp:this.props.onKeyUp,onPaste:this.props.onPaste,onFocus:this.props.onFocus,ref:'input'})));};l.propTypes=babelHelpers['extends']({},c('AbstractTextField.react').propTypes,{onClick:k.func,onKeyUp:k.func,onPaste:k.func,onFocus:k.func});f.exports=l;}),null);
__d('PagesMessengerSimpleMultilineComposer.react',['cx','fbt','MercuryMessageObject','MercurySourceType','MercuryPageMessageActions','PagesEventObserver','PagesEventType','PagesMessengerTextInput.react','React','ReactDOM','XUIButton.react','isEmpty'],(function a(b,c,d,e,f,g,h,i){var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(n){'use strict';k.constructor.call(this,n);this.state={value:''};this.$PagesMessengerSimpleMultilineComposer1=c('MercuryPageMessageActions').getForFBID(this.props.sourceID);this.$PagesMessengerSimpleMultilineComposer2=c('MercuryMessageObject').getForFBID(this.props.sourceID);}m.prototype.hasInput=function(){'use strict';return !!this.state.value;};m.prototype.clearInput=function(){'use strict';this.setState({value:''});};m.prototype.focusInput=function(){'use strict';c('ReactDOM').findDOMNode(this.refs.textInput).focus();};m.prototype.getConfirmButtonLabel=function(){'use strict';return i._("Send");};m.prototype.getTextInputPlaceholder=function(){'use strict';return i._("Write a message");};m.prototype.onTextInputChanged=function(event){'use strict';this.setState({value:event.target.value});};m.prototype.processSend=function(event){'use strict';var n=this.refs.textInput.props.value;if(!n)return;var o=this.$PagesMessengerSimpleMultilineComposer2.constructUserGeneratedMessageObject(n,c('MercurySourceType').TITAN_WEB,this.props.threadID,null,null);c('PagesEventObserver').logData_DEPRECATED({page_id:this.props.sourceID,event_name:c('PagesEventType').MESSAGES_DIALOG_SEND,thread_id:this.props.destinationID},null);event.preventDefault();if(this.props.allowSend()){this.$PagesMessengerSimpleMultilineComposer1.send(o);this.setState({value:''});this.props.afterSend();}};m.prototype.render=function(){'use strict';return (c('React').createElement('div',{className:"_1yn"},c('React').createElement('div',null,c('React').createElement(c('PagesMessengerTextInput.react'),{className:"_1yq"+(' '+"_32wh")+(c('isEmpty')(this.state.value)?' '+"_1yx":''),placeholder:this.getTextInputPlaceholder(),onChange:this.onTextInputChanged.bind(this),onKeyUp:this.props.onKeyUp,value:this.state.value,ref:'textInput'})),c('React').createElement('hr',{className:"_1yy"}),c('React').createElement('div',{className:"_1yz"},c('React').createElement('div',{className:"_1y-"},c('React').createElement(c('XUIButton.react'),{use:'confirm',onClick:this.processSend.bind(this),label:this.getConfirmButtonLabel()})))));};m.propTypes={afterSend:l.func.isRequired,allowSend:l.func.isRequired,destinationID:l.string.isRequired,onKeyUp:l.func.isRequired,sourceID:l.string.isRequired,threadID:l.string.isRequired};f.exports=m;}),null);
__d("XPagesMessagingFindPageController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pages\/messaging\/search\/page_name_typeahead\/",{page_id:{type:"String",required:true},value:{type:"String"}});}),null);
__d('PagesMessengerNewThreadDialog.react',['cx','fbt','Event','Keys','MercuryIDs','MercuryParticipants','PagesEventObserver','PagesEventType','PagesMessengerConfirmCloseThreadDialog.react','PagesMessengerSimpleMultilineComposer.react','React','SearchableEntry','WebAsyncSearchSource','XPagesMessagingFindPageController','XUIDialog.react','XUIDialogBody.react','XUIDialogTitle.react','XUITokenizerRichToken.react','XUITypeahead.react'],(function a(b,c,d,e,f,g,h,i){var j,k,l=c('React').PropTypes,m=445,n=326;j=babelHelpers.inherits(o,c('React').Component);k=j&&j.prototype;function o(p){'use strict';k.constructor.call(this,p);this.state={typeaheadErrorMessage:null,initDialog:false,pageName:'...',query:'',selectedItem:null,showCloseConfirmationDialog:false};this.$PagesMessengerNewThreadDialog1=false;this.$PagesMessengerNewThreadDialog2=false;var q=c('XPagesMessagingFindPageController').getURIBuilder().setString('page_id',this.props.pageID).getURI(),r={uri:q};this.$PagesMessengerNewThreadDialog3=new (c('WebAsyncSearchSource'))({bootstrapRequests:[r],queryRequests:[r],getAllForEmptyQuery:true});}o.prototype.$PagesMessengerNewThreadDialog4=function(p){'use strict';c('PagesEventObserver').notify(c('PagesEventType').MESSAGES_CLOSE_PAGE_MESSAGE_DIALOG,this.props.pageID,{flowID:this.props.flowID,close_state:p});};o.prototype.$PagesMessengerNewThreadDialog5=function(){'use strict';if(this.refs.newThreadComposer.hasInput()){this.setState({showCloseConfirmationDialog:true});this.$PagesMessengerNewThreadDialog4('has_message');}else{this.$PagesMessengerNewThreadDialog6();this.props.onHide();this.$PagesMessengerNewThreadDialog4('no_message');}};o.prototype.$PagesMessengerNewThreadDialog6=function(){'use strict';this.refs.newThreadComposer.clearInput();this.setState({query:'',selectedItem:null,showCloseConfirmationDialog:false});};o.prototype.$PagesMessengerNewThreadDialog7=function(){'use strict';this.$PagesMessengerNewThreadDialog6();this.props.onHide();this.$PagesMessengerNewThreadDialog4('confirm_close');};o.prototype.$PagesMessengerNewThreadDialog8=function(){'use strict';this.setState({showCloseConfirmationDialog:false});};o.prototype.$PagesMessengerNewThreadDialog9=function(p,event){'use strict';if(c('Event').getKeyCode(event)===c('Keys').ESC)setTimeout(this.$PagesMessengerNewThreadDialog5.bind(this),0);};o.prototype.$PagesMessengerNewThreadDialog10=function(event){'use strict';if(c('Event').getKeyCode(event)===c('Keys').ESC)setTimeout(this.$PagesMessengerNewThreadDialog5.bind(this),0);};o.prototype.$PagesMessengerNewThreadDialog11=function(p){'use strict';if(!p&&this.props.shown)this.$PagesMessengerNewThreadDialog5();};o.prototype.subscribeEvents=function(){'use strict';if(this.refs.newPageMessageDialog&&!this.$PagesMessengerNewThreadDialog2){this.refs.newPageMessageDialog.layerSubscribe('key',this.$PagesMessengerNewThreadDialog9.bind(this));this.$PagesMessengerNewThreadDialog2=true;}};o.prototype.loadPageName=function(){'use strict';if(!this.$PagesMessengerNewThreadDialog1){this.$PagesMessengerNewThreadDialog1=true;c('MercuryParticipants').get(c('MercuryIDs').getParticipantIDFromUserID(this.props.pageID),function(p){this.setState({pageName:p.name});}.bind(this));}};o.prototype.componentDidUpdate=function(p,q){'use strict';if(!this.props.shown)return;this.subscribeEvents();this.loadPageName();if(!this.refs.pageTypeahead)return;var r=this.refs.pageTypeahead.getTextFieldDOM();r.style.border='0px';r.style.fontSize='14px';r.style.lineHeight='14px';if(this.props.shown&&!p.shown)this.refs.pageTypeahead.focusInput();};o.prototype.renderFrom=function(){'use strict';return (c('React').createElement('div',{className:"_1vwk"},i._("From: {pageName}",[i.param('pageName',this.state.pageName)])));};o.prototype.renderSelectedResult=function(){'use strict';if(!this.state.selectedItem)return null;return (c('React').createElement('span',{className:"_31d6"},c('React').createElement(c('XUITokenizerRichToken.react'),{entry:this.state.selectedItem,highlighted:false,label:this.state.selectedItem.getTitle(),onRemove:this.$PagesMessengerNewThreadDialog12.bind(this)})));};o.prototype.renderTypeahead=function(){'use strict';if(this.state.selectedItem)return null;return (c('React').createElement(c('XUITypeahead.react'),{className:(!this.state.selectedItem?"_1vwn":'')+(this.state.selectedItem?' '+"_29ez":'')+(' '+"_2pir"),clearable:!!this.state.selectedItem,highlightOnSelect:true,onChange:this.$PagesMessengerNewThreadDialog13.bind(this),onClear:this.$PagesMessengerNewThreadDialog12.bind(this),onSelectAttempt:this.$PagesMessengerNewThreadDialog14.bind(this),queryString:this.state.query,ref:'pageTypeahead',searchSource:this.$PagesMessengerNewThreadDialog3,selectedEntry:this.state.selectedItem,showPhoto:!!this.state.selectedItem,tallInput:false,viewStyle:'rich',xuiError:this.state.typeaheadErrorMessage}));};o.prototype.renderTo=function(){'use strict';return (c('React').createElement('div',{className:"_1vwl"},c('React').createElement('span',{className:"_1vwm"},i._("To:")),this.renderSelectedResult(),this.renderTypeahead(),c('React').createElement('span',{className:"_2f3y"},i._("Pages only"))));};o.prototype.$PagesMessengerNewThreadDialog14=function(p){'use strict';this.refs.newThreadComposer.focusInput();this.setState({typeaheadErrorMessage:null,query:p.getTitle(),selectedItem:p});c('PagesEventObserver').notify(c('PagesEventType').MESSAGES_PAGE_MESSAGE_DIALOG_CHOOSE_RECIPIENT,this.props.pageID,{flowID:this.props.flowID,recipient:p.getUniqueID()});};o.prototype.$PagesMessengerNewThreadDialog13=function(event){'use strict';this.setState({typeaheadErrorMessage:null,query:event.target.value,selectedItem:null});};o.prototype.$PagesMessengerNewThreadDialog12=function(){'use strict';this.setState({typeaheadErrorMessage:null,query:'',selectedItem:null});setTimeout(function(){this.refs.pageTypeahead.focusInput();}.bind(this),0);};o.prototype.$PagesMessengerNewThreadDialog15=function(){'use strict';setTimeout(this.$PagesMessengerNewThreadDialog5.bind(this),0);};o.prototype.$PagesMessengerNewThreadDialog16=function(){'use strict';if(!this.state.selectedItem||this.state.selectedItem.getUniqueID().length==0){var p=i._("Please choose a Page to receive your message");this.refs.pageTypeahead.focusInput();this.setState({typeaheadErrorMessage:p});return false;}c('PagesEventObserver').notify(c('PagesEventType').MESSAGES_PAGE_MESSAGE_DIALOG_SEND,this.props.pageID,{flowID:this.props.flowID,recipient:this.state.selectedItem.getUniqueID()});return true;};o.prototype.renderAttachmentShelf=function(){'use strict';return (c('React').createElement('div',{ref:'newThreadAttachmentsShelf',className:"_jz4"}));};o.prototype.renderComposer=function(){'use strict';var p=this.state.selectedItem?this.state.selectedItem.getUniqueID():'',q='user:'+p;return (c('React').createElement(c('PagesMessengerSimpleMultilineComposer.react'),{afterSend:this.$PagesMessengerNewThreadDialog15.bind(this),allowSend:this.$PagesMessengerNewThreadDialog16.bind(this),destinationID:p,onKeyUp:this.$PagesMessengerNewThreadDialog10.bind(this),ref:'newThreadComposer',sourceID:this.props.pageID,threadID:q}));};o.prototype.componentWillReceiveProps=function(p){'use strict';if(!this.state.initDialog&&p.shown)this.setState({initDialog:true});};o.prototype.renderCloseConfirmationDialog=function(){'use strict';if(!this.state.showCloseConfirmationDialog)return null;return (c('React').createElement(c('PagesMessengerConfirmCloseThreadDialog.react'),{shown:this.state.showCloseConfirmationDialog,onCancel:this.$PagesMessengerNewThreadDialog8.bind(this),onConfirm:this.$PagesMessengerNewThreadDialog7.bind(this)}));};o.prototype.render=function(){'use strict';if(!this.state.initDialog)return null;return (c('React').createElement('div',null,c('React').createElement(c('XUIDialog.react'),{layerHideOnBlur:false,ref:'newPageMessageDialog',shown:this.props.shown,onToggle:this.$PagesMessengerNewThreadDialog11.bind(this),width:m,height:n},c('React').createElement(c('XUIDialogTitle.react'),{className:"_2ga7"},i._("New Message to Page")),c('React').createElement(c('XUIDialogBody.react'),{className:"_1vwv"},this.renderFrom(),this.renderTo(),this.renderAttachmentShelf(),this.renderComposer())),this.renderCloseConfirmationDialog()));};o.propTypes={flowID:l.string,onHide:l.func.isRequired,shown:l.bool.isRequired,pageID:l.string.isRequired};f.exports=o;}),null);
__d('PagesMessengerMessagePageButton.react',['ix','cx','fbt','Image.react','PagesEventObserver','PagesEventType','PagesMessengerNewThreadDialog.react','React','XUIButton.react','fbglyph'],(function a(b,c,d,e,f,g,h,i,j){var k,l,m=c('React').PropTypes;k=babelHelpers.inherits(n,c('React').Component);l=k&&k.prototype;n.getButtonSize=function(o){'use strict';return o.size||'medium';};function n(o){'use strict';l.constructor.call(this,o);this.state={showDialog:false};}n.prototype.$PagesMessengerMessagePageButton1=function(){'use strict';this.setState({showDialog:false});};n.prototype.$PagesMessengerMessagePageButton2=function(){'use strict';if(this.state.showDialog)return;this.setState({showDialog:true});c('PagesEventObserver').notify(c('PagesEventType').MESSAGES_OPEN_PAGE_MESSAGE_DIALOG,this.props.pageID,{flowID:this.props.flowID});};n.prototype.render=function(){'use strict';var o=j._("Message Page");return (c('React').createElement('span',{className:!this.props.pagesCommNewMessagesTab?"_3-9a":''},c('React').createElement(c('XUIButton.react'),{className:this.props.pagesCommNewMessagesTab?"_3kr2":'',image:c('React').createElement(c('Image.react'),{src:h("\/images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/plus_16_bluegray-40.png")}),label:o,onClick:this.$PagesMessengerMessagePageButton2.bind(this),size:this.props.size}),c('React').createElement(c('PagesMessengerNewThreadDialog.react'),{flowID:this.props.flowID,shown:this.state.showDialog,onHide:this.$PagesMessengerMessagePageButton1.bind(this),pageID:this.props.pageID})));};n.propTypes={flowID:m.string,pageID:m.string.isRequired,pagesCommNewMessagesTab:m.bool};f.exports=n;}),null);
__d("XShareScrapeAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/share_scrape\/",{});}),null);
__d('ChatShareLinkUploader',['AsyncRequest','CSS','DOM','URLScraper','MercuryShareLinkUploader','MercuryAttachmentTemplates','XShareScrapeAsyncController','Event'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('MercuryShareLinkUploader'));i=h&&h.prototype;j.prototype.__initialize=function(k,l,m,n,o){'use strict';this.$ChatShareLinkUploader1=k;this.$ChatShareLinkUploader2=l;this.$ChatShareLinkUploader3=m;this.$ChatShareLinkUploader4=false;this.$ChatShareLinkUploader5=null;this.$ChatShareLinkUploader6=n;this.$ChatShareLinkUploader7=o;this.$ChatShareLinkUploader8=false;c('Event').listen(l,'keyup',function(){!this.getInputValue().length&&this.$ChatShareLinkUploader9.enable();}.bind(this));this.$ChatShareLinkUploader9=new (c('URLScraper'))(l,n);this.$ChatShareLinkUploader9.subscribe('match',function(p,q){this.loadShare(q&&q.url);}.bind(this));this.$ChatShareLinkUploader10=1337;this.$ChatShareLinkUploader11=null;};j.prototype.getInputValue=function(){'use strict';return this.$ChatShareLinkUploader6?this.$ChatShareLinkUploader6():this.$ChatShareLinkUploader2.value;};j.prototype.getAttachData=function(){'use strict';return this.loadAttachData(this.$ChatShareLinkUploader4,this.$ChatShareLinkUploader1,this.$ChatShareLinkUploader2,this.$ChatShareLinkUploader6);};j.prototype.getShareData=function(){'use strict';if(!this.$ChatShareLinkUploader4)return null;return this.getShareDataFromStage(this.$ChatShareLinkUploader4,this.$ChatShareLinkUploader1);};j.prototype.close=function(){'use strict';this.$ChatShareLinkUploader12();this.$ChatShareLinkUploader9.disable();this.inform('closed');};j.prototype.clear=function(){'use strict';this.$ChatShareLinkUploader12();this.$ChatShareLinkUploader9.enable();};j.prototype.$ChatShareLinkUploader12=function(){'use strict';var k=this.$ChatShareLinkUploader11;delete this.$ChatShareLinkUploader11;if(k){c('DOM').remove(k);this.inform('dom-updated');}this.$ChatShareLinkUploader13();this.$ChatShareLinkUploader4=false;this.$ChatShareLinkUploader8=false;this.$ChatShareLinkUploader5&&this.$ChatShareLinkUploader5.abort();this.$ChatShareLinkUploader5=null;this.$ChatShareLinkUploader9&&this.$ChatShareLinkUploader9.reset();};j.prototype.loadShareFromParams=function(k,l){'use strict';this.$ChatShareLinkUploader8=true;this.$ChatShareLinkUploader14(new (c('AsyncRequest'))().setMethod('POST').setURI('/ajax/share_params.php').setData({chat:true,share_type:k,share_params:l}));};j.prototype.__getLoadShareURI=function(){'use strict';return c('XShareScrapeAsyncController').getURIBuilder().getURI();};j.prototype.loadShare=function(k,l){'use strict';this.$ChatShareLinkUploader14(new (c('AsyncRequest'))(this.__getLoadShareURI()).setMethod('POST').setData({chat:true,extra_params:JSON.stringify(l),u:k}),k);};j.prototype.loadedFromFeed=function(){'use strict';return this.$ChatShareLinkUploader8;};j.prototype.$ChatShareLinkUploader13=function(){'use strict';return ++this.$ChatShareLinkUploader10;};j.prototype.$ChatShareLinkUploader15=function(){'use strict';return this.$ChatShareLinkUploader10;};j.prototype.$ChatShareLinkUploader14=function(k,l){'use strict';this.$ChatShareLinkUploader5&&this.$ChatShareLinkUploader5.abort();var m=c('MercuryAttachmentTemplates')[':fb:mercury:share-link-row'].build();if(this.$ChatShareLinkUploader11)c('DOM').remove(this.$ChatShareLinkUploader11);this.$ChatShareLinkUploader11=m.getRoot();c('Event').listen(m.getNode('closeFileUpload'),'click',function(event){this.close();event.kill();}.bind(this));c('DOM').appendContent(this.$ChatShareLinkUploader1,this.$ChatShareLinkUploader11);c('CSS').show(this.$ChatShareLinkUploader1);this.inform('dom-updated');var n=this.$ChatShareLinkUploader13();this.$ChatShareLinkUploader5=k.setHandler(function(o){return this.$ChatShareLinkUploader16(n,o,l);}.bind(this));this.$ChatShareLinkUploader5.send();this.inform('link-detected');};j.prototype.$ChatShareLinkUploader16=function(k,l,m){'use strict';if(this.$ChatShareLinkUploader15()!==k)return;this.$ChatShareLinkUploader5=null;c('DOM').appendContent(this.$ChatShareLinkUploader11,l.payload);this.$ChatShareLinkUploader3();this.$ChatShareLinkUploader4=true;this.inform('share-loaded');if(!this.getAttachData()){this.close();if(m&&this.getInputValue().indexOf(m)===-1)this.$ChatShareLinkUploader7(m);return;}c('CSS').addClass(this.$ChatShareLinkUploader11,'done');};function j(){'use strict';h.apply(this,arguments);}f.exports=j;}),null);
__d('PagesMessengerShareLinkUploader',['ActorURI','ChatShareLinkUploader','emptyFunction','SubscriptionsHandler','XShareScrapeAsyncController'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('ChatShareLinkUploader'));i=h&&h.prototype;function j(k,l,m,n,o){'use strict';i.constructor.call(this,k,l,c('emptyFunction'));this.$PagesMessengerShareLinkUploader1=new (c('SubscriptionsHandler'))();this.$PagesMessengerShareLinkUploader1.addSubscriptions(this.subscribe(['all-uploads-completed','upload-canceled'],m),this.subscribe('submit',n));this.actor_id=o;}j.prototype.__getLoadShareURI=function(){'use strict';return new (c('ActorURI').create)(c('XShareScrapeAsyncController').getURIBuilder().getURI(),this.actor_id);};j.prototype.destroy=function(){'use strict';this.$PagesMessengerShareLinkUploader1&&this.$PagesMessengerShareLinkUploader1.release();};f.exports=j;}),null);
__d("XPagesMessagingSuggestedResponseController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pages\/messaging\/suggestedresponse\/",{});}),null);
__d("XPagesMessagingSuggestedResponseFeedbackController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pages\/messaging\/suggestedresponse\/feedback\/",{});}),null);
__d('PagesMessageSuggestedResponseHandler',['invariant','ActorURI','AsyncRequest','XPagesMessagingSuggestedResponseController','XPagesMessagingSuggestedResponseFeedbackController','isEmpty'],(function a(b,c,d,e,f,g,h){function i(j,k){'use strict';this.$PagesMessageSuggestedResponseHandler2=j;this.$PagesMessageSuggestedResponseHandler1=k;this.$PagesMessageSuggestedResponseHandler3=false;this.$PagesMessageSuggestedResponseHandler5=false;}i.prototype.requestSuggestedResponseAsync=function(j,k){'use strict';this.$PagesMessageSuggestedResponseHandler3=true;var l=c('XPagesMessagingSuggestedResponseController').getURIBuilder().getURI();new (c('AsyncRequest'))().setURI(c('ActorURI').create(l,this.$PagesMessageSuggestedResponseHandler1)).setData({message:this.$PagesMessageSuggestedResponseHandler2.body}).setMethod('POST').setHandler(function(m){return this.$PagesMessageSuggestedResponseHandler6(m.payload,j);}.bind(this)).setErrorHandler(k).send();};i.prototype.sendFeedback=function(j){'use strict';this.hasReceviedSuggestedResponse()||h(0);var k=c('XPagesMessagingSuggestedResponseFeedbackController').getURIBuilder().getURI();new (c('AsyncRequest'))().setURI(c('ActorURI').create(k,this.$PagesMessageSuggestedResponseHandler1)).setMethod('POST').setData({message_id:this.$PagesMessageSuggestedResponseHandler4,accepted:j}).send();};i.prototype.$PagesMessageSuggestedResponseHandler6=function(j,k){'use strict';if(j.messageFound)this.$PagesMessageSuggestedResponseHandler4=j.messageID;k(this.$PagesMessageSuggestedResponseHandler2.message_id,j);};i.prototype.shouldBeTreatedAsRejected=function(){'use strict';return !this.getHasBeenAccepted()&&this.hasReceviedSuggestedResponse();};i.prototype.hasReceviedSuggestedResponse=function(){'use strict';return !c('isEmpty')(this.$PagesMessageSuggestedResponseHandler4);};i.prototype.alreadyRequested=function(){'use strict';return this.$PagesMessageSuggestedResponseHandler3;};i.prototype.getMessageID=function(){'use strict';return this.$PagesMessageSuggestedResponseHandler2.message_id;};i.prototype.getHasBeenAccepted=function(){'use strict';return this.$PagesMessageSuggestedResponseHandler5;};f.exports=i;}),null);
__d('PagesMessengerSuggestedResponseView.react',['cx','fbt','LoadingIndicator.react','PagesMessageSuggestedResponseHandler','React','XUIGrayText.react','XUIButton.react'],(function a(b,c,d,e,f,g,h,i){var j=c('React').PropTypes,k=c('React').createClass({displayName:'PagesMessengerSuggestedResponseView',propTypes:{onAccepted:j.func.isRequired,onDeclined:j.func,suggestedResponseHandler:j.instanceOf(c('PagesMessageSuggestedResponseHandler'))},getInitialState:function l(){return {shouldShowResult:false,shouldShowProgress:false,responseMessage:"",witMessageId:""};},_reset:function l(){this.setState(this.getInitialState());},componentWillReceiveProps:function l(m){if(m.suggestedResponseHandler!==this.props.suggestedResponseHandler){this._reset();var n=m.suggestedResponseHandler;if(!n||n.alreadyRequested())return;this.setState({shouldShowProgress:true});n.requestSuggestedResponseAsync(this._onSuggestedResponseReceived,this._onSuggestedResponseError);}},_onSuggestedResponseReceived:function l(m,n){if(!this._isMessageIDCurrent(m))return;this.setState({shouldShowProgress:false});if(!!n.responseMessage&&n.responseMessage.length>0)this.setState({shouldShowResult:true,responseMessage:n.responseMessage,witMessageId:n.message_id});},_onSuggestedResponseError:function l(m){if(!this._isMessageIDCurrent(m))return;this.setState({shouldShowProgress:false,shouldShowResult:false});},_isMessageIDCurrent:function l(m){return !!this.props.suggestedResponseHandler&&m===this.props.suggestedResponseHandler.getMessageID();},render:function l(){return (c('React').createElement('div',{className:"_710"+(' '+"_2ph-")+(!this.state.shouldShowResult&&!this.state.shouldShowProgress?' '+"hidden_elem":'')},this._renderProgressPart(),this._renderSuggestionPart()));},_renderSuggestionPart:function l(){return (c('React').createElement('div',{className:!this.state.shouldShowResult?"hidden_elem":''},c('React').createElement('div',{className:"_3-94"},c('React').createElement(c('XUIGrayText.react'),{shade:'light'},i._("We found a suggested reply:"))),c('React').createElement('div',{className:"_3-94"},c('React').createElement(c('XUIGrayText.react'),{shade:'dark',className:"_711"},this.state.responseMessage)),c('React').createElement('div',{className:"_712"},c('React').createElement(c('XUIGrayText.react'),{shade:'light',className:"_3-90"},i._("Do you want to use this reply?")),c('React').createElement(c('XUIButton.react'),{label:i._("No"),use:'default',className:"_3-8_",onClick:this._onDeclined}),c('React').createElement(c('XUIButton.react'),{label:i._("Yes"),use:'confirm',onClick:this._onAccepted}))));},_renderProgressPart:function l(){return (c('React').createElement('div',{className:(!this.state.shouldShowProgress?"hidden_elem":'')+(' '+"_71d")},c('React').createElement(c('XUIGrayText.react'),{shade:'light'},i._("Looking for suggested responses")),c('React').createElement(c('LoadingIndicator.react'),{size:'small',color:'white',className:"_3-9a"})));},_hide:function l(){this.setState({shouldShowResult:false,shouldShowProgress:false});},_onAccepted:function l(){this._hide();this.props.suggestedResponseHandler&&this.props.suggestedResponseHandler.sendFeedback(true);this.props.onAccepted&&this.props.onAccepted(this.state.responseMessage);},_onDeclined:function l(){this._hide();this.props.suggestedResponseHandler&&this.props.suggestedResponseHandler.sendFeedback(false);this.props.onDeclined&&this.props.onDeclined();}});f.exports=k;}),null);
__d('PagesContextCardCustomTag.react',['cx','Image.react','React','XUICard.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;function k(l){j.constructor.call(this,l);this.$PagesContextCardCustomTag1=function(){if(this.props.onClick)this.props.onClick(this.props.tagData);}.bind(this);this.$PagesContextCardCustomTag2=function(event){event.stopPropagation();if(this.props.hideOnRemove)this.setState({removed:true});if(this.props.onRemove)this.props.onRemove(this.props.tagData.name);}.bind(this);this.state={removed:false};}k.prototype.genDefaultProps=function(){return {textOnly:false};};k.prototype.render=function(){if(this.props.hideOnRemove&&this.state.removed)return null;var l=this.props.tagData,m='/images/pages/context_card/cross/cross_'+l.borderColor+'.png',n={color:'#'+l.color.substring(2),backgroundColor:'none'};if(!this.props.textOnly)n.backgroundColor='#'+l.darkerFill.substring(2);return (c('React').createElement(c('XUICard.react'),{className:"_1pbr"+(this.props.onClick?' '+"_2rj2":'')+(this.props.textOnly?' '+"_49ww":''),style:n,key:l.id,onClick:this.$PagesContextCardCustomTag1},l.name,this.props.canRemove?c('React').createElement(c('Image.react'),{className:"_2rj2 _5t1r",src:m,onClick:this.$PagesContextCardCustomTag2,height:8,width:8}):null));};f.exports=k;}),null);
__d('PagesManagerMessagingNavigationUnitKey',['MercuryFilters','MessagingTag','PageMessageEnumTag'],(function a(b,c,d,e,f,g){'use strict';var h={FILTERS:{ALL:c('MercuryFilters').ALL,UNREAD:c('MercuryFilters').UNREAD,FLAGGED:c('PageMessageEnumTag').FLAG,PRIORITY:c('PageMessageEnumTag').IMPORTANT},FOLDERS:{INBOX:c('MessagingTag').INBOX,ARCHIVED:c('MessagingTag').ACTION_ARCHIVED,SPAM:c('MessagingTag').SPAM}};f.exports=h;}),null);
__d('PagesEnumTag.react',['PagesContextCardCustomTag.react','React','PagesManagerMessagingNavigationUnitKey'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;function j(){var k,l;'use strict';for(var m=arguments.length,n=Array(m),o=0;o<m;o++)n[o]=arguments[o];return l=(k=i.constructor).call.apply(k,[this].concat(n)),this.$PagesEnumTag1=function(){if(this.props.onClick)this.props.onClick(this.props.unit);}.bind(this),this.$PagesEnumTag2=function(){if(this.props.onRemove)this.props.onRemove();}.bind(this),l;}j.prototype.getTagData=function(){'use strict';var k={};if(this.props.unit.getKey()===c('PagesManagerMessagingNavigationUnitKey').FILTERS.FLAGGED||this.props.unit.getKey()===c('PagesManagerMessagingNavigationUnitKey').FILTERS.PRIORITY){k.borderColor='FFFB9240';k.color='FFFB9240';k.fillColor='FFFFF4EC';k.darkerFill='FFFCDEC5';k.id=0;}k.name=this.props.unit.getDisplayTitle();return k;};j.prototype.render=function(){'use strict';var k=this.getTagData();return (c('React').createElement(c('PagesContextCardCustomTag.react'),babelHelpers['extends']({},this.props,{key:k.id,onClick:this.$PagesEnumTag1,onRemove:this.$PagesEnumTag2,tagData:k})));};f.exports=j;}),null);
__d('PagesManagerPerfTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear();}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:PagesManagerPerfLoggerConfig',this.$PagesManagerPerfTypedLogger1,c('Banzai').BASIC);};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:PagesManagerPerfLoggerConfig',this.$PagesManagerPerfTypedLogger1,c('Banzai').VITAL);};h.prototype.clear=function(){this.$PagesManagerPerfTypedLogger1={};return this;};h.prototype.updateData=function(j){this.$PagesManagerPerfTypedLogger1=babelHelpers['extends']({},this.$PagesManagerPerfTypedLogger1,j);return this;};h.prototype.setEventName=function(j){this.$PagesManagerPerfTypedLogger1.event_name=j;return this;};h.prototype.setEventSeriesID=function(j){this.$PagesManagerPerfTypedLogger1.event_series_id=j;return this;};h.prototype.setPageID=function(j){this.$PagesManagerPerfTypedLogger1.page_id=j;return this;};h.prototype.setPerfTime=function(j){this.$PagesManagerPerfTypedLogger1.perf_time=j;return this;};h.prototype.setVC=function(j){this.$PagesManagerPerfTypedLogger1.vc=j;return this;};var i={event_name:true,event_series_id:true,page_id:true,perf_time:true,vc:true};f.exports=h;}),null);
__d('ChatAppointmentUtil',['fbt','DateTime'],(function a(b,c,d,e,f,g,h){'use strict';var i={getAbbreviationMonthText:function j(k){switch(k.getMonth()){case 1:return h._("JAN");case 2:return h._("FEB");case 3:return h._("MAR");case 4:return h._("APR");case 5:return h._("MAY");case 6:return h._("JUN");case 7:return h._("JUL");case 8:return h._("AUG");case 9:return h._("SEP");case 10:return h._("OCT");case 11:return h._("NOV");case 12:return h._("DEC");}return null;},validateAppointment:function j(k){return Boolean(k.product_item&&k.page);},renderDate:function j(k){if(!k)return null;var l=c('DateTime').localCreate(k.start);return l.format('l, M j, Y');},renderTimeRange:function j(k){if(!k)return null;var l=c('DateTime').localCreate(k.start),m=c('DateTime').localCreate(k.end);if(l.equals(m)){return l.format('g:i A');}else return l.format('g:i A')+' - '+m.format('g:i A');},renderDateTimeRange:function j(k){if(!k)return null;var l=i.renderDate(k),m=i.renderTimeRange(k);if(!l||!m)return null;return l+' '+m;}};f.exports=i;}),null);
__d('MessagingFlowerBorderChecker',['MercuryConfig','MercuryMessageCustomizations','MessageBorderType','MessageCustomizationType'],(function a(b,c,d,e,f,g){'use strict';var h={shouldRenderWithFlowerBorder:function i(j){return c('MercuryConfig').WWWMessengerFlowerBorderViewer&&c('MercuryMessageCustomizations').getCustomizationValue(j,c('MessageCustomizationType').BORDER)===c('MessageBorderType').FLOWERS;}};f.exports=h;}),null);
__d('MessengerErrorAttachment.react',['cx','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;function k(l){j.constructor.call(this,l);}k.prototype.render=function(){return (c('React').createElement('div',{className:"_1o12 _52mr"},c('React').createElement('div',{className:"_1o13"},this.props.attachment.error_msg)));};f.exports=k;}),null);
__d('MessengerFileAttachment.react',['cx','Link.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').PureComponent);j=i&&i.prototype;l.prototype.render=function(){return (c('React').createElement(c('Link.react'),{className:"_4pcn _2uf4",target:'_blank',href:this.props.attachment.url},c('React').createElement('div',{className:"_2uf5"}),this.props.attachment.name));};function l(){i.apply(this,arguments);}l.propTypes={attachment:k.object.isRequired};f.exports=l;}),null);
__d('MessengerAttachmentViewer',['Bootloader','MessagesViewer','React','Run','emptyFunction'],(function a(b,c,d,e,f,g){'use strict';var h={renderVideo:function i(j){c('Bootloader').loadModules(["MessagingVideoViewer.react","MessengerForwardAttachmentDialog.react"],function(k,l){c('MessagesViewer').renderVideo(c('React').createElement(k,babelHelpers['extends']({},j,{forwardDialogComponent:l})));},'MessengerAttachmentViewer');},bootstrapWithConfig:function i(j,k){c('Bootloader').loadModules(["SpotlightMessagesViewer","MessengerForwardAttachmentDialog.react"],function(l,m){c('MessagesViewer').renderSpotlight(j,k,l,m);},'MessengerAttachmentViewer');},preload:function i(){c('Run').onAfterLoad(function(){c('Bootloader').loadModules(["MessagingVideoViewer.react","SpotlightMessagesViewer","MessengerForwardAttachmentDialog.react"],c('emptyFunction'),'MessengerAttachmentViewer');});}};f.exports=h;}),null);
__d('MessengerPhoto.react',['cx','Image.react','MercuryAttachmentType','MercuryConfig','MessengerSpinner.react','MessengerWebDriverTestIDs','React','joinClasses'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes,l=206,m=280,n=480,o=1800,p=450;function q(u,v){if(u.metadata){if(u.attach_type===c('MercuryAttachmentType').VIDEO)return v&&u.metadata.large_preview?u.metadata.large_preview:u.metadata.inbox_preview;return v?u.large_preview_url:u.preview_url;}return null;}function r(u){var v=c('MercuryConfig').MessengerLargePreviewImageGK?n:l,w=c('MercuryConfig').MessengerLargePreviewImageGK?m:l,x=c('MercuryConfig').MessengerLargePreviewImageGK&&window.screen.width>o;if(u.preview_uploading)return x&&u.large_preview_url?{height:u.large_preview_height||v,src:u.large_preview_url,width:u.large_preview_width||v,renderLargePreview:true}:{height:u.preview_height||w,src:u.preview_url,width:u.preview_width||w};var y=q(u,x);if(y){var z=x&&u.metadata.large_size?u.metadata.large_size:u.metadata.inbox_size;return babelHelpers['extends']({src:y,renderLargePreview:x},z);}if(u.preview_url)return x&&u.large_preview_url?{height:u.large_preview_height,src:u.large_preview_url,width:u.large_preview_width,renderLargePreview:true}:{height:u.preview_height,src:u.preview_url,width:u.preview_width};if(u.media)return u.media.playable&&u.media.animated_image?babelHelpers['extends']({},u.media.animated_image_size,{src:u.media.animated_image}):babelHelpers['extends']({},u.media.image_size,{src:u.media.image});return null;}function s(u,v){if(u.preview_uploading){var w=c('MercuryConfig').MessengerLargePreviewImageGK?m:l;return u.preview_url?0:w;}var x=u.media?r(u):{height:u.preview_height,width:u.preview_width};return Math.min(x.height*Math.min(1,p/x.width),p);}i=babelHelpers.inherits(t,c('React').Component);j=i&&i.prototype;function t(){var u,v;for(var w=arguments.length,x=Array(w),y=0;y<w;y++)x[y]=arguments[y];return v=(u=j.constructor).call.apply(u,[this].concat(x)),this.$MessengerPhoto2=function(z){z.preventDefault();var aa=this.props.attachment;if(this.props.onClick)this.props.onClick(aa);}.bind(this),v;}t.prototype.componentDidMount=function(){var u=this.props.onAttachmentLoad;u&&u();};t.prototype.render=function(){var u=this.props,v=u.attachment,w=u.isSingle,x=r(v);if(!x)return null;var y=v.attach_type===c('MercuryAttachmentType').ANIMATED_IMAGE,z=!!this.props.attachment.app_attribution,aa=this.$MessengerPhoto1(x,w&&y,(z?"_mxz":'')+(w&&!z?' '+"_52mr":'')),ba={};if(!y||!w){if(x.src)ba.backgroundImage='url('+x.src+')';if(w){var ca=s(v,this.context);if(ca)ba.minHeight=ca;}}var da=void 0;if(v.preview_uploading)da=c('React').createElement(c('MessengerSpinner.react'),null);var ea=y?c('MessengerWebDriverTestIDs').ANIMATED_IMAGE:null;return c('React').createElement('div',{className:c('joinClasses')(this.props.className,"_4tsk"+(z?' '+"_mxz":'')+(w&&!z?' '+"_52mr":'')+(v.preview_uploading&&!x.src?' '+"_3etv":'')),'data-testid':ea,style:ba,onClick:this.$MessengerPhoto2},aa,da,c('React').createElement('a',{className:"_4tsl",href:x.src},this.props.children));};t.prototype.$MessengerPhoto1=function(u,v,w){if(this.props.attachment.preview_uploading&&!u.src)return null;if(this.props.isSingle){var x={width:'100%',maxWidth:'100%'};x.maxHeight=u.renderLargePreview?window.screen.height*.7:window.screen.height*.65;return (c('React').createElement(c('Image.react'),{alt:'',className:c('joinClasses')(w,!v?"_5pf5":''),style:x,src:u.src}));}return null;};t.contextTypes={width:k.number};t.propTypes={attachment:k.object.isRequired,isSingle:k.bool.isRequired,onAttachmentLoad:k.func,onClick:k.func};f.exports=t;}),null);
__d('MessengerTabIndices',[],(function a(b,c,d,e,f,g){'use strict';var h={NEW_MESSAGE_TOKENIZER:9998,COMPOSER_INPUT:9999};f.exports=h;}),null);
__d('MessengerComposeViewHeader.react',['cx','fbt','immutable','MessengerGraphQLTokenizer.react','MessengerTabIndices','React','clearImmediate','joinClasses','setImmediate'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes,m=320;j=babelHelpers.inherits(n,c('React').PureComponent);k=j&&j.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.state={tokenizerContext:null},this.$MessengerComposeViewHeader1=null,this.$MessengerComposeViewHeader2=function(){this.$MessengerComposeViewHeader1=c('setImmediate')(function(){this.refs.tokenizer&&this.refs.tokenizer.focusInput();}.bind(this));}.bind(this),p;}n.prototype.componentDidMount=function(){this.$MessengerComposeViewHeader2();this.setState({tokenizerContext:this.refs.tokenizerContext});};n.prototype.componentDidUpdate=function(o){if(this.props.recipients!==o.recipients)this.props.onResize();};n.prototype.componentWillUnmount=function(){this.$MessengerComposeViewHeader1&&c('clearImmediate')(this.$MessengerComposeViewHeader1);};n.prototype.render=function(){var o={enableMessageSearch:false,excludeGroups:false,excludePages:false,hasHoverState:true,originalEntryIDs:c('immutable').Set(),scrollableViewClassName:"_2y8_",shouldQueryInternalBot:true,shouldQueryVCEndpoint:false,width:m};return c('React').createElement('div',{className:c('joinClasses')("_2y8y _5l-3",this.props.className),onClick:this.$MessengerComposeViewHeader2},c('React').createElement('div',{className:"_2y8z"},i._("To:")),c('React').createElement('div',null,c('React').createElement(c('MessengerGraphQLTokenizer.react'),babelHelpers['extends']({autoFocus:true,className:"_2y8-",context:this.state.tokenizerContext,entries:this.props.recipients,forceHideClearButton:this.props.forceHideClearButton,onAddEntryAttempt:this.props.onAddRecipient,onClear:this.props.onClear,onRemoveEntryAttempt:this.props.onRemoveRecipient,placeholder:i._("Type the name of a person or group"),ref:'tokenizer',tabIndex:c('MessengerTabIndices').NEW_MESSAGE_TOKENIZER,useLayer:true,viewer:this.props.viewer},o)),c('React').createElement('div',{ref:'tokenizerContext'})));};n.propTypes={forceHideClearButton:l.bool.isRequired,onAddRecipient:l.func.isRequired,onClear:l.func,onRemoveRecipient:l.func.isRequired,onResize:l.func.isRequired,recipients:l.instanceOf(c('immutable').List).isRequired,viewer:l.string.isRequired};f.exports=n;}),null);
__d('messengerDialogBodyReact',['cx','bs_array','bs_curry','bs_js_primitive','React','reactRe','utilsRe','joinClasses'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('reactRe').StatelessComponent[0],j=c('reactRe').StatelessComponent[1],k=c('reactRe').StatelessComponent[2],l=c('reactRe').StatelessComponent[3],m=c('reactRe').StatelessComponent[4],n=c('reactRe').StatelessComponent[5];function o(v){var w=v[0];return c('React').createElement("div",{className:c('joinClasses')("_4eb-",c('utilsRe').$pipe$unknown(w[0],""))},c('bs_array').of_list(w[1]));}function p(v){return [c('bs_js_primitive').js_from_nullable_def(v.className),c('reactRe').jsToReasonChildren(v.children)];}var q=c('bs_curry')._8(n,"MessengerDialogBodyReact",i,j,l,k,m,[p],o),r=q[1];function s(v,w,x,y){var z=x?x[0]:0;return c('bs_curry')._4(r,v,w,y,[z,y]);}var t=c('utilsRe').$pipe$unknown,u=q[0];g.getInstanceVariables=i;g.componentDidMount=j;g.componentDidUpdate=k;g.componentWillReceiveProps=l;g.componentWillUnmount=m;g.createClass=n;g.$pipe$unknown=t;g.render=o;g.jsPropsToReasonProps=p;g.comp=u;g.wrapProps=r;g.createElement=s;}),null);
__d('MessengerForwardAttachmentDialog.react',['ix','cx','fbt','AsyncRequest','CurrentUser','Image.react','immutable','LayerFadeOnHide','MessageShareType','MessengerComposeViewHeader.react','MessengerDialog.react','messengerDialogBodyReact','MessengerDialogButton.react','MessengerDialogCancelButton.react','MessengerDialogFooter.react','MessengerDialogHeader.react','MessengerDialogTitle.react','MessengerSpinner.react','React','XMessagingForwardAttachmentController','XMessengerPlatformShareCTAController','emptyFunction','fbglyph'],(function a(b,c,d,e,f,g,h,i,j){var k,l,m=c('messengerDialogBodyReact').comp,n=c('React').PropTypes;k=babelHelpers.inherits(o,c('React').Component);l=k&&k.prototype;function o(){var p,q;'use strict';for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=l.constructor).call.apply(p,[this].concat(s)),this.state={recipients:c('immutable').List(),sendError:null,sending:false,startingThreadingID:Date.now()},this.$MessengerForwardAttachmentDialog3=function(u){this.setState({recipients:this.state.recipients.push(u)});}.bind(this),this.$MessengerForwardAttachmentDialog4=function(u){var v=this.state.recipients;this.setState({recipients:v['delete'](v.indexOf(u))});}.bind(this),this.$MessengerForwardAttachmentDialog2=function(){this.setState({recipients:c('immutable').List()});}.bind(this),this.$MessengerForwardAttachmentDialog5=function(){var u={},v=this.state.startingThreadingID;this.state.recipients.forEach(function(x){u[v++]=x.getUniqueID();});if(this.props.shareType===c('MessageShareType').PLATFORM_SHARE_CTA){var w=c('XMessengerPlatformShareCTAController').getURIBuilder().getURI();new (c('AsyncRequest'))(w).setMethod('POST').setHandler(this.$MessengerForwardAttachmentDialog6).setData({cta_id:this.props.attachmentID,recipient_map:u}).send();}else{w=c('XMessagingForwardAttachmentController').getURIBuilder().getURI();new (c('AsyncRequest'))(w).setMethod('POST').setHandler(this.$MessengerForwardAttachmentDialog6).setData({attachment_id:this.props.attachmentID,recipient_map:u}).send();}this.setState({sending:true,sendError:null});}.bind(this),this.$MessengerForwardAttachmentDialog6=function(u){if(u.payload.success){this.props.onClose&&this.props.onClose();this.setState({recipients:c('immutable').List(),sending:false,startingThreadingID:Date.now()});return;}this.setState({sending:false,sendError:u.payload.error});}.bind(this),this.$MessengerForwardAttachmentDialog1=function(u){if(!u)this.props.onClose&&this.props.onClose();}.bind(this),q;}o.prototype.getDefaultProps=function(){'use strict';return {shareType:c('MessageShareType').IMAGE};};o.prototype.render=function(){'use strict';var p=j._("Send"),q;if(this.state.sending){q=c('React').createElement('div',null,c('React').createElement(c('MessengerSpinner.react'),null),c('React').createElement('span',{className:"_1e1n _3-99"},j._("Sending")));}else if(this.state.sendError){var r=h("\/images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/caution-solid_16_bluegray-40.png");q=c('React').createElement('div',{className:"_1e1n"},c('React').createElement(c('Image.react'),{src:r}),c('React').createElement('span',{className:"_3-99"},this.state.sendError));}return c('React').createElement(c('MessengerDialog.react'),{shown:this.props.shown,behaviors:{LayerFadeOnHide:c('LayerFadeOnHide')},hideOnEscape:true,onToggle:this.$MessengerForwardAttachmentDialog1,width:560},c('React').createElement(c('MessengerDialogHeader.react'),null,c('React').createElement(c('MessengerDialogTitle.react'),null,this.props.title)),c('React').createElement(m,null,c('React').createElement(c('MessengerComposeViewHeader.react'),{className:"_1e1o",forceHideClearButton:false,onClear:this.$MessengerForwardAttachmentDialog2,onAddRecipient:this.$MessengerForwardAttachmentDialog3,onRemoveRecipient:this.$MessengerForwardAttachmentDialog4,onResize:c('emptyFunction'),recipients:this.state.recipients,viewer:c('CurrentUser').getID()})),c('React').createElement(c('MessengerDialogFooter.react'),{leftContent:q},c('React').createElement(c('MessengerDialogCancelButton.react'),{onClick:this.props.onClose}),c('React').createElement(c('MessengerDialogButton.react'),{action:'confirm',disabled:!this.state.recipients.size||this.state.sending,label:p,onClick:this.$MessengerForwardAttachmentDialog5,type:'primary'})));};o.propTypes={attachmentID:n.string.isRequired,onClose:n.func,shown:n.bool.isRequired,title:n.node.isRequired,shareType:n.string};f.exports=o;}),null);
__d('MessengerPhotoForwardButton.react',['cx','fbt','Link.react','MessengerActions','MessengerForwardAttachmentDialog.react','React','TooltipData'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').PureComponent);k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.$MessengerPhotoForwardButton1=function(){var s=i._("Forward in separate messages");c('MessengerActions').showDialog(c('MessengerForwardAttachmentDialog.react'),{attachmentID:this.props.photoIDs[0],onClose:this.$MessengerPhotoForwardButton2,shown:true,title:s});}.bind(this),o;}m.prototype.render=function(){var n=i._("Forward"),o=this.props.isFromViewer?'left':'right',p=Object.assign({'data-tooltip-alignh':o},c('TooltipData').propsFor(n,o));return c('React').createElement(c('Link.react'),babelHelpers['extends']({},this.props,p,{'aria-label':n,onClick:this.$MessengerPhotoForwardButton1,ref:'forwardButton',role:'button',className:"_cks"+(' '+"_2t5q")+(!this.props.isFromViewer?' '+"_2t5r":'')+(this.props.isFromViewer?' '+"_2t5s":'')}),c('React').createElement('div',{className:"_2t5t"}));};m.prototype.$MessengerPhotoForwardButton2=function(){c('MessengerActions').hideDialog();};m.propTypes={photoIDs:l.arrayOf(l.string).isRequired,isFromViewer:l.bool.isRequired};f.exports=m;}),null);
__d('MessengerSharedMediaReducer',['MessengerSharedMediaActions','MessengerThreadSharedMediaHelper','Set'],(function a(b,c,d,e,f,g){'use strict';var h=c('MessengerSharedMediaActions').Types;function i(r,s){switch(s.type){case h.LOAD_CURRENT:var t=r.get('sharedMedia').get(s.threadFBID);if(t){var u=t.edges.find(function(x){return x.node.legacy_attachment_id===s.photoID;});if(u)return r;}var v=r.get('isLoading').get(s.threadFBID);if(!!v&&v.curr)return r;var w=q(r,s.threadFBID,'curr',true);c('MessengerThreadSharedMediaHelper').search(s.threadFBID,s.photoID,function(x){return c('MessengerSharedMediaActions').currentLoaded(x);});return w;}return r;}function j(r,s){switch(s.type){case h.LOAD_MORE_PREVIOUS:var t=r.get('isLoading').get(s.threadFBID);if(!!t&&t.prev)return r;var u=q(r,s.threadFBID,'prev',true);if(u===null)return r;c('MessengerThreadSharedMediaHelper').loadMorePrevious(s.threadFBID,s.afterCursor,s.first,function(v){return c('MessengerSharedMediaActions').previousLoaded(v);});return u;}return r;}function k(r,s){switch(s.type){case h.LOAD_MORE_LATEST:var t=r.get('isLoading').get(s.threadFBID);if(!!t&&t.latest)return r;var u=q(r,s.threadFBID,'latest',true);if(u===null)return r;c('MessengerThreadSharedMediaHelper').loadMoreLatest(s.threadFBID,s.beforeCursor,s.last,function(v){return c('MessengerSharedMediaActions').latestLoaded(v);});return u;}return r;}function l(r,s){switch(s.type){case h.CURRENT_LOADED:var t=s.data,u=Object.keys(t)[0],v=t[u].message_shared_media,w=v.edges.length,x=q(r,u,'curr',false);if(w!==0){var y=p(r.get('sharedMedia').get(u),v,0),z=r.get('sharedMedia').set(u,y);x=x.set('sharedMedia',z);var aa=v.edges[0];c('MessengerThreadSharedMediaHelper').loadMorePrevious(u,aa.cursor,10,function(ba){return c('MessengerSharedMediaActions').previousLoaded(ba);});c('MessengerThreadSharedMediaHelper').loadMoreLatest(u,aa.cursor,10,function(ba){return c('MessengerSharedMediaActions').latestLoaded(ba);});}return x;}return r;}function m(r,s){switch(s.type){case h.PREVIOUS_LOADED:var t=s.data,u=Object.keys(t)[0],v=t[u].message_shared_media,w=q(r,u,'prev',false),x=p(r.get('sharedMedia').get(u),v,1),y=r.get('sharedMedia').set(u,x);w=w.set('sharedMedia',y);return w;}return r;}function n(r,s){switch(s.type){case h.LATEST_LOADED:var t=s.data,u=Object.keys(t)[0],v=t[u].message_shared_media,w=q(r,u,'latest',false),x=p(r.get('sharedMedia').get(u),v,-1),y=r.get('sharedMedia').set(u,x);w=w.set('sharedMedia',y);return w;}return r;}function o(r,s){switch(s.type){case h.DELETE_PHOTOS:var t=s.threadFBID,u=s.photoFBIDs,v=r.get('sharedMedia').get(t),w=new (c('Set'))(u.map(function(z){return z.toString();}));v.edges=v.edges.filter(function(z){return (!w.has(z.node.legacy_attachment_id));});var x=r.get('sharedMedia').set(t,v),y=r.set('sharedMedia',x);return y;}return r;}function p(r,s,t){var u={};u.count=s.count;if(t===1&&r){var v=r.edges;u.has_previous_page=r.has_previous_page;u.has_next_page=s.page_info.has_next_page;if(s.edges.length>0){u.edges=v.concat(s.edges);}else u.edges=v;}else if(t===-1&&r){var w=r.edges;u.has_previous_page=s.page_info.has_previous_page;u.has_next_page=r.has_next_page;if(s.edges.length>0){u.edges=s.edges.concat(w);}else u.edges=w;}else{u.has_previous_page=s.page_info.has_previous_page;u.has_next_page=s.page_info.has_next_page;if(s.edges.length>0)u.edges=s.edges;}return u;}function q(r,s,t,u){var v=r.get('isLoading').get(s);if(v===undefined){v={};v[t]=u;}else v[t]=u;var w=r.set('isLoading',r.get('isLoading').set(s,v));return w;}f.exports={currentLoaded:l,deletePhotos:o,latestLoaded:n,loadCurrent:i,loadMoreLatest:k,loadMorePrevious:j,previousLoaded:m};}),null);
__d('MessengerSharedMediaState',['immutable'],(function a(b,c,d,e,f,g){'use strict';var h,i,j={sharedMedia:c('immutable').Map({}),isLoading:c('immutable').Map({})};h=babelHelpers.inherits(k,c('immutable').Record(j));i=h&&h.prototype;function k(){h.apply(this,arguments);}f.exports=k;}),null);
__d('MessengerSharedMediaStore',['MessengerFluxReduceDispatcher','MessengerSharedMediaActions','MessengerSharedMediaReducer','MessengerSharedMediaState','FluxReduceStore'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=[].concat(Object.values(c('MessengerSharedMediaReducer')));h=babelHelpers.inherits(k,c('FluxReduceStore'));i=h&&h.prototype;k.prototype.getInitialState=function(){return new (c('MessengerSharedMediaState'))();};k.prototype.reduce=function(l,m){if(m.namespace!==c('MessengerSharedMediaActions').Namespace)return l;return j.reduce(function(n,o){return o(n,m);},l);};function k(){h.apply(this,arguments);}f.exports=new k(c('MessengerFluxReduceDispatcher'));}),null);
__d('MessengerSharedPhotosAlbumViewPhoto.react',['React'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.$MessengerSharedPhotosAlbumViewPhoto1=function(){this.props.onClick(this.props.fbid);}.bind(this),m;}k.prototype.render=function(){return (c('React').createElement('a',{className:this.props.className,href:'#',onClick:this.$MessengerSharedPhotosAlbumViewPhoto1,style:{backgroundImage:'url('+this.props.uri+')'}}));};k.propTypes={className:j.string.isRequired,fbid:j.string.isRequired,onClick:j.func.isRequired,uri:j.string.isRequired};f.exports=k;}),null);
__d('MessengerSharedPhotosAlbumViewVScroll.react',['cx','Animation','MessengerSharedPhotosAlbumViewPhoto.react','MessengerSharedMediaActions','React','ReactDOM'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes,l=200,m=48,n=6,o=20,p=70;i=babelHelpers.inherits(q,c('React').Component);j=i&&i.prototype;function q(){var r,s;for(var t=arguments.length,u=Array(t),v=0;v<t;v++)u[v]=arguments[v];return s=(r=j.constructor).call.apply(r,[this].concat(u)),this.$MessengerSharedPhotosAlbumViewVScroll1=null,this.$MessengerSharedPhotosAlbumViewVScroll7=function(w){if(this.refs&&this.refs.childContainer)new (c('Animation'))(this.refs.childContainer).to('scrollTop',w).duration(l).go();}.bind(this),this.$MessengerSharedPhotosAlbumViewVScroll3=function(){var w=this.props.sharedPhotos.length,x=this.props.totalCount;if(this.$MessengerSharedPhotosAlbumViewVScroll8()){if(w<x){var y=Math.min(x-w,m);if(!this.props.isLoading.prev)c('MessengerSharedMediaActions').loadMorePrevious(this.props.threadID,this.props.sharedPhotos[this.props.sharedPhotos.length-1].cursor,m);}}else if(this.$MessengerSharedPhotosAlbumViewVScroll9()&&!this.props.isLoading.latest)c('MessengerSharedMediaActions').loadMoreLatest(this.props.threadID,this.props.sharedPhotos[0].cursor,m);}.bind(this),this.$MessengerSharedPhotosAlbumViewVScroll8=function(){var w=this.refs.childContainer;return w.scrollTop+w.clientHeight>=w.scrollHeight-o;}.bind(this),s;}q.prototype.componentDidMount=function(){this.$MessengerSharedPhotosAlbumViewVScroll2();this.refs.childContainer.addEventListener('scroll',function(event){this.$MessengerSharedPhotosAlbumViewVScroll3();}.bind(this));if(this.$MessengerSharedPhotosAlbumViewVScroll4()===0)this.$MessengerSharedPhotosAlbumViewVScroll1=setInterval(function(){if(this.$MessengerSharedPhotosAlbumViewVScroll4()>0){this.$MessengerSharedPhotosAlbumViewVScroll1&&clearInterval(this.$MessengerSharedPhotosAlbumViewVScroll1);this.$MessengerSharedPhotosAlbumViewVScroll5();}}.bind(this),200);};q.prototype.componentWillUnmount=function(){this.refs.childContainer.removeEventListener('scroll',function(event){this.$MessengerSharedPhotosAlbumViewVScroll3();}.bind(this));this.$MessengerSharedPhotosAlbumViewVScroll1&&clearInterval(this.$MessengerSharedPhotosAlbumViewVScroll1);};q.prototype.render=function(){return c('React').createElement('div',{className:"_3xo8",ref:'childContainer',onscroll:this.$MessengerSharedPhotosAlbumViewVScroll3},c('React').createElement('div',{className:"_3xoa",ref:'scrollable'},this.$MessengerSharedPhotosAlbumViewVScroll6()));};q.prototype.$MessengerSharedPhotosAlbumViewVScroll2=function(){var r=this.props.sharedPhotos.length,s=this.props.totalCount;if(r<m){var t=Math.min(s-r,m-r);c('MessengerSharedMediaActions').loadMorePrevious(this.props.threadID,this.props.sharedPhotos[this.props.sharedPhotos.length-1].cursor,m);}};q.prototype.$MessengerSharedPhotosAlbumViewVScroll6=function(){var r="_3bly",s=this.props.sharedPhotos,t=s.map(function(u){var v=u.node;return c('React').createElement(c('MessengerSharedPhotosAlbumViewPhoto.react'),{ref:v.legacy_attachment_id===this.props.viewedPhoto?'child':'',className:r,fbid:v.legacy_attachment_id,key:v.legacy_attachment_id,onClick:this.props.onClick,uri:v.image1.uri});}.bind(this));return t;};q.prototype.$MessengerSharedPhotosAlbumViewVScroll4=function(){return this.refs.scrollable.clientHeight;};q.prototype.$MessengerSharedPhotosAlbumViewVScroll5=function(){if(this.refs.child)this.$MessengerSharedPhotosAlbumViewVScroll7(c('ReactDOM').findDOMNode(this.refs.child).offsetTop-p);};q.prototype.$MessengerSharedPhotosAlbumViewVScroll9=function(){var r=this.refs.childContainer;return r.scrollTop<=o;};q.propTypes={isLoading:k.object.isRequired,onClick:k.func.isRequired,sharedPhotos:k.arrayOf(k.object).isRequired,threadID:k.string.isRequired,totalCount:k.number.isRequired,viewedPhoto:k.string.isRequired};f.exports=q;}),null);
__d('MessengerSharedPhotosAlbumView.react',['cx','fbt','MessengerSharedPhotosAlbumViewVScroll.react','MessengerPhotoViewCloseLink.react','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.$MessengerSharedPhotosAlbumView2=function(){this.props.onClick(this.props.viewedPhoto);}.bind(this),this.$MessengerSharedPhotosAlbumView1=function(){return (c('React').createElement('div',{className:"_3bm0 _5l-3",ref:'header'},c('React').createElement('div',{className:"_3bm2",onClick:this.$MessengerSharedPhotosAlbumView2},c('React').createElement('div',{className:"_3bm3"}),i._("Back to Photo")),c('React').createElement('div',{className:"_3bm4"},i._("Shared photos")),c('React').createElement(c('MessengerPhotoViewCloseLink.react'),{onClick:this.props.onCloseSharedPhotos})));}.bind(this),o;}m.prototype.render=function(){return c('React').createElement('div',{className:"_3bl- _5l-3",ref:'window'},this.$MessengerSharedPhotosAlbumView1(),c('React').createElement(c('MessengerSharedPhotosAlbumViewVScroll.react'),{isLoading:this.props.isLoading,onClick:this.props.onClick,sharedPhotos:this.props.sharedPhotos,threadID:this.props.threadID,totalCount:this.props.totalCount,viewedPhoto:this.props.viewedPhoto}));};m.propTypes={onClick:l.func.isRequired,onCloseSharedPhotos:l.func.isRequired,sharedPhotos:l.arrayOf(l.object).isRequired,totalCount:l.number.isRequired,viewedPhoto:l.string.isRequired,threadID:l.string.isRequired,isLoading:l.object.isRequired};f.exports=m;}),null);
__d('MessengerSharedPhotosAlbumViewContainer.react',['FluxContainer','MessengerSharedMediaStore','React','MessengerSharedPhotosAlbumView.react'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').PureComponent);i=h&&h.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.state={edges:[],count:0,isLoading:{}},m;}k.getStores=function(){return [c('MessengerSharedMediaStore')];};k.calculateState=function(l,m){var n=c('MessengerSharedMediaStore').getState(),o=n.sharedMedia;return {edges:o.get(m.threadID).edges,count:o.get(m.threadID).count,isLoading:n.isLoading.get(m.threadID)};};k.prototype.render=function(){if(this.state.edges.length===0)return null;return (c('React').createElement(c('MessengerSharedPhotosAlbumView.react'),{onClick:this.props.onClick,onCloseSharedPhotos:this.props.onCloseSharedPhotos,sharedPhotos:this.state.edges,totalCount:this.state.count,viewedPhoto:this.props.viewedPhoto,threadID:this.props.threadID,isLoading:this.state.isLoading}));};k.propTypes={onClick:j.func.isRequired,onCloseSharedPhotos:j.func.isRequired,viewedPhoto:j.string.isRequired,threadID:j.string};f.exports=c('FluxContainer').create(k,{withProps:true});}),null);
__d('MessengerPhotoViewBottomBar.react',['cx','React'],(function a(b,c,d,e,f,g,h){'use strict';var i=function j(k){return (c('React').createElement('div',{className:"_51an _50-m _16zz"},k.children));};f.exports=i;}),null);
__d('MessengerPhotoViewHScroll.react',['cx','Animation','MessengerSharedPhoto.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes,l=200,m=80;i=babelHelpers.inherits(n,c('React').Component);j=i&&i.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=j.constructor).call.apply(o,[this].concat(r)),this.$MessengerPhotoViewHScroll1=null,p;}n.prototype.componentDidMount=function(){this.$MessengerPhotoViewHScroll2();};n.prototype.componentDidUpdate=function(){this.$MessengerPhotoViewHScroll2();};n.prototype.componentWillUnmount=function(){this.$MessengerPhotoViewHScroll1&&this.$MessengerPhotoViewHScroll1.stop();this.$MessengerPhotoViewHScroll1=null;};n.prototype.render=function(){var o=this.props.sharedPhotos,p=o.map(function(r){return (c('React').createElement('div',{className:"_4dy9",key:r.node.legacy_attachment_id},c('React').createElement(c('MessengerSharedPhoto.react'),{className:"_42rl"+(this.props.photoID!==r.node.legacy_attachment_id?' '+"_q1a":''),fbid:r.node.legacy_attachment_id,onClick:this.props.onScroll,uri:r.node.image1.uri})));}.bind(this)),q=(this.props.width-m)/2;return (c('React').createElement('div',{className:"_463g"},c('React').createElement('div',{className:"_463h",ref:'childContainer'},c('React').createElement('div',{className:"_463j",style:{paddingLeft:q,paddingRight:q},ref:'scrollable'},p))));};n.prototype.$MessengerPhotoViewHScroll2=function(){var o=this.refs.childContainer?this.refs.childContainer.scrollLeft:0,p=this.props.sharedPhotos.findIndex(function(r){return r.node.legacy_attachment_id===this.props.photoID;}.bind(this)),q=p*m;if(!this.$MessengerPhotoViewHScroll1)this.$MessengerPhotoViewHScroll1=new (c('Animation'))(this.refs.childContainer);this.$MessengerPhotoViewHScroll1.from('scrollLeft',o).to('scrollLeft',q).duration(l).go();};f.exports=n;}),null);
__d('MessengerPhotoViewHeader.react',['cx','fbt','MessengerActions','MessengerPhotoInfoDialogContainer.react','React','SpotlightViewerBottomBarLink','MessengerPhotoViewCloseLink.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').PureComponent);k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.$MessengerPhotoViewHeader2=function(){return (c('React').createElement(c('MessengerPhotoViewCloseLink.react'),{onClick:this.props.onClose}));}.bind(this),o;}m.prototype.render=function(){return c('React').createElement('div',{className:"_51an _50-m _3c1i _5l-3",role:'banner'},this.$MessengerPhotoViewHeader1(),this.$MessengerPhotoViewHeader2());};m.prototype.$MessengerPhotoViewHeader1=function(){var n=void 0;if(!this.props.disableForward)n=c('React').createElement(c('SpotlightViewerBottomBarLink'),{className:"_3c1o",onClick:this.props.showForwardDialog,ref:'forwardButton'},c('React').createElement('div',{className:"_2msr _3oo2"}),i._("Forward"));return (c('React').createElement('div',{key:'buttonsContainer',ref:'buttons'},c('React').createElement(c('SpotlightViewerBottomBarLink'),{ajaxify:this.props.url,className:"_3c1o",rel:'async'},c('React').createElement('div',{className:"_3ooo _2msr"}),i._("Download")),n,c('React').createElement(c('SpotlightViewerBottomBarLink'),{className:"_3c1o",href:'#',onClick:this.props.openInfo,ref:'moreInfo'},c('React').createElement('div',{className:"_3c1k _2msr"}),i._("Info"))));};m.propTypes={disableForward:l.bool,onClose:l.func,openInfo:l.func,photoID:l.string,showForwardDialog:l.func,url:l.object};f.exports=m;}),null);
__d('SpotlightMessengerSharedMediaViewer.react',['csx','cx','fbt','invariant','ActorURI','MessengerPhotoViewHScroll.react','Event','KeyEventController','MessengerForwardAttachmentDialog.react','MessagingForwardingButtonNUX.react','MessengerPhotoInfoDialogContainer.react','MessengerPhotoViewHeader.react','MessengerSharedMediaActions','MessengerVideoPlayer.react','Parent','PhotoUtils','React','ReactFragment','SpotlightViewer','SpotlightViewerImage','SpotlightMessagesViewerPagers.react','SpotlightViewport','SubscriptionsHandler','Vector','XMessagingPhotoDownloadController','MessengerPhotoViewBottomBar.react'],(function a(b,c,d,e,f,g,h,i,j,k){'use strict';var l,m,n=c('React').PropTypes,o=88,p=80,q=30,r="_4-og";l=babelHelpers.inherits(s,c('React').Component);m=l&&l.prototype;function s(){var t,u;for(var v=arguments.length,w=Array(v),x=0;x<v;x++)w[x]=arguments[x];return u=(t=m.constructor).call.apply(t,[this].concat(w)),this.$SpotlightMessengerSharedMediaViewer1=undefined,this.$SpotlightMessengerSharedMediaViewer2=[],this.state={photoData:null,showForward:false,showInfo:false,stageDimensions:new (c('Vector'))()},this.$SpotlightMessengerSharedMediaViewer14=function(y){if(!this.props.sharedMedia)return;var z=this.props.sharedMedia.findIndex(function(ba){return ba.node.legacy_attachment_id===y;});if(z<0)return;var aa=this.props.sharedMedia[z];this.setState({photoData:aa});this.$SpotlightMessengerSharedMediaViewer17(z);}.bind(this),this.$SpotlightMessengerSharedMediaViewer4=function(y,event){if(this.state.photoData==null)return;var z=this.state.photoData;if(event&&!!c('Parent').bySelector(event.target,"._3tsq"))return;if(event&&event.target instanceof HTMLElement&&event.target.className===r)this.$SpotlightMessengerSharedMediaViewer7();var aa=this.props.sharedMedia.findIndex(function(ca){return ca.node.legacy_attachment_id===z.node.legacy_attachment_id;});if(aa<0||aa===this.props.sharedMedia.length-1&&!this.props.hasNextPage&&y)return;if(aa===0&&!y){c('MessengerSharedMediaActions').loadMoreLatest(this.props.threadID,this.props.sharedMedia[0].cursor,q);return;}var ba=y?this.props.sharedMedia[aa+1]:this.props.sharedMedia[aa-1];this.setState({photoData:ba});this.$SpotlightMessengerSharedMediaViewer17(aa);}.bind(this),this.$SpotlightMessengerSharedMediaViewer7=function(){if(this.props.photoID===null)return;this.setState({photoData:null});this.props.onClosePhotoView();}.bind(this),this.$SpotlightMessengerSharedMediaViewer12=function(){this.setState({showForward:true});this.refs.forwardNUX.close();}.bind(this),this.$SpotlightMessengerSharedMediaViewer15=function(){this.setState({showForward:false});}.bind(this),this.$SpotlightMessengerSharedMediaViewer11=function(){this.setState({showInfo:true});}.bind(this),this.$SpotlightMessengerSharedMediaViewer16=function(){this.setState({showInfo:false});}.bind(this),u;}s.prototype.componentDidMount=function(){var t=this.props.sharedMedia.find(function(u){return u.node.legacy_attachment_id===this.props.photoID;}.bind(this));this.setState({photoData:t,stageDimensions:this.$SpotlightMessengerSharedMediaViewer3()});this.$SpotlightMessengerSharedMediaViewer1=new (c('SubscriptionsHandler'))();this.$SpotlightMessengerSharedMediaViewer1.addSubscriptions(c('Event').listen(window,'resize',function(){this.setState({stageDimensions:this.$SpotlightMessengerSharedMediaViewer3()});}.bind(this)),c('KeyEventController').registerKey('LEFT',function(){this.$SpotlightMessengerSharedMediaViewer4(false);return false;}.bind(this)),c('KeyEventController').registerKey('RIGHT',function(){this.$SpotlightMessengerSharedMediaViewer4(true);return false;}.bind(this)));};s.prototype.componentWillUnmount=function(){this.$SpotlightMessengerSharedMediaViewer1&&this.$SpotlightMessengerSharedMediaViewer1.release();this.$SpotlightMessengerSharedMediaViewer1=null;this.$SpotlightMessengerSharedMediaViewer2.forEach(function(t){return t.abandon();});};s.prototype.render=function(){var t=this.$SpotlightMessengerSharedMediaViewer5(),u=this.state.stageDimensions,v=this.props.useloadingindicator&&!this.state.photoData;if(this.state.photoData==null)return null;var w=this.props.sharedMedia.findIndex(function(y){this.state.photoData!=null||k(0);return y.node.id===this.state.photoData.node.id;}.bind(this)),x=c('React').createElement('div',null,this.$SpotlightMessengerSharedMediaViewer6(),this.props.disablepaging?null:c('React').createElement(c('SpotlightMessagesViewerPagers.react'),{disablePrevArrow:w<=0&&!this.props.hasPrevPage,disableNextArrow:!this.props.hasNextPage&&w>=this.props.sharedMedia.length-1}));return c('React').createElement('span',null,c('React').createElement(c('SpotlightViewer'),{className:"_53vs",onHide:this.$SpotlightMessengerSharedMediaViewer7,open:this.props.photoID!==null,ref:'spotlightViewer',rootClassName:this.props.rootClassName},c('React').createElement(c('SpotlightViewport'),{active:false,fadeInNOut:true,media:t,onClick:this.$SpotlightMessengerSharedMediaViewer4,ref:'viewport',showLoadingIndicator:v,stageDimensions:u,useWidth:true},x),this.$SpotlightMessengerSharedMediaViewer8()),this.$SpotlightMessengerSharedMediaViewer9(),this.$SpotlightMessengerSharedMediaViewer10());};s.prototype.$SpotlightMessengerSharedMediaViewer6=function(){if(!this.state.photoData)return null;var t=this.state.photoData.node.legacy_attachment_id,u=c('XMessagingPhotoDownloadController').getURIBuilder().setString('photo_id',t).getURI();if(this.props.actorid)u=c('ActorURI').create(u,this.props.actorid);return c('React').createElement(c('MessengerPhotoViewHeader.react'),{disableForward:this.props.disableForward,onClose:this.$SpotlightMessengerSharedMediaViewer7,openInfo:this.$SpotlightMessengerSharedMediaViewer11,photoID:this.props.photoID,ref:'photoviewheader',showForwardDialog:this.$SpotlightMessengerSharedMediaViewer12,url:u});};s.prototype.$SpotlightMessengerSharedMediaViewer13=function(t){return t?Math.ceil(t/p):q;};s.prototype.$SpotlightMessengerSharedMediaViewer8=function(){if(!this.state.photoData)return null;var t=this.state.photoData,u=c('React').createElement('button',{className:"_2n5b",onClick:function(){return this.props.openAlbum(t.node.legacy_attachment_id);}.bind(this),type:'button'},c('React').createElement('div',{className:"_3por"}));return c('React').createElement(c('MessengerPhotoViewBottomBar.react'),null,c('React').createElement(c('MessengerPhotoViewHScroll.react'),{onScroll:this.$SpotlightMessengerSharedMediaViewer14,photoID:t.node.legacy_attachment_id,sharedPhotos:this.props.sharedMedia,width:this.state.stageDimensions.x}),u);};s.prototype.$SpotlightMessengerSharedMediaViewer9=function(){if(!this.state.photoData||this.props.disableForward)return null;var t=j._("Forward in separate messages");return c('ReactFragment').create({forwardDialog:c('React').createElement(c('MessengerForwardAttachmentDialog.react'),{attachmentID:this.state.photoData.node.legacy_attachment_id,onClose:this.$SpotlightMessengerSharedMediaViewer15,shown:this.state.showForward,title:t}),forwardButtonNUX:c('React').createElement(c('MessagingForwardingButtonNUX.react'),{contextRef:function(){return this.refs.forwardButton;}.bind(this),ref:'forwardNUX'},j._("Send this image to other people in separate messages."))});};s.prototype.$SpotlightMessengerSharedMediaViewer10=function(){return this.state.showInfo?c('React').createElement(c('MessengerPhotoInfoDialogContainer.react'),{closeInfo:this.$SpotlightMessengerSharedMediaViewer16,infoOpen:this.state.showInfo,photoID:this.state.photoData.node.id}):c('React').createElement('xhp',null);};s.prototype.$SpotlightMessengerSharedMediaViewer17=function(t){var u=this.$SpotlightMessengerSharedMediaViewer13(this.state.stageDimensions.x),v=this.props.sharedMedia;if(t<=u/2){c('MessengerSharedMediaActions').loadMoreLatest(this.props.threadID,v[0].cursor,u);if(v.length<u&&this.props.hasNextPage)c('MessengerSharedMediaActions').loadMorePrevious(this.props.threadID,v[v.length-1].cursor,u);}else if(t>=v.length-u/2&&this.props.hasNextPage)c('MessengerSharedMediaActions').loadMorePrevious(this.props.threadID,v[v.length-1].cursor,u);};s.prototype.$SpotlightMessengerSharedMediaViewer3=function(){var t=new (c('Vector'))(c('Vector').getViewportDimensions().x,c('Vector').getViewportDimensions().y-o);return t;};s.prototype.$SpotlightMessengerSharedMediaViewer5=function(){if(this.state.photoData&&this.state.photoData.node){var t=this.state.photoData.node;if(t.__typename&&t.__typename==='MessageVideo')return this.$SpotlightMessengerSharedMediaViewer18();var u=this.state.stageDimensions,v=this.$SpotlightMessengerSharedMediaViewer19(t,u);if(!v)return null;var w=s.getImageDimensionsForStage(new (c('Vector'))(v.width,v.height),u);return this.$SpotlightMessengerSharedMediaViewer20(v,w);}else return null;};s.prototype.$SpotlightMessengerSharedMediaViewer18=function(){if(this.state.photoData)return (c('React').createElement(c('MessengerVideoPlayer.react'),{isVisible:true,videoData:this.state.photoData.node,stageDimensions:this.state.stageDimensions}));return null;};s.prototype.$SpotlightMessengerSharedMediaViewer20=function(t,u){return (c('React').createElement(c('SpotlightViewerImage'),{dimensions:u,ref:'image',src:t.uri}));};s.prototype.$SpotlightMessengerSharedMediaViewer19=function(t,u){var v=null,w=c('PhotoUtils').getImagesFromData(t);w=w.sort(function(y,z){return z.width-y.width;});if(window.devicePixelRatio&&window.devicePixelRatio>1)u=new (c('Vector'))(u.x*window.devicePixelRatio,u.y*window.devicePixelRatio);for(var x=0;x<w.length;x++)if(!v||w[x].width>=u.x||w[x].height>=u.y)v=w[x];return v;};s.propTypes={disableForward:n.bool,hasPrevPage:n.bool,hasNextPage:n.bool,onClosePhotoView:n.func,openAlbum:n.func,photoID:n.string,rootClassName:n.string,threadID:n.string,sharedMedia:n.arrayOf(n.object)};s.getImageDimensionsForStage=function(t,u){var v=t.x,w=t.y,x=u.x,y=u.y,z=v/w,aa=x/y;if(v>=x||w>=y){if(aa<z){v=x;w=Math.round(x/z);}else if(aa>z){v=Math.round(y*z);w=y;}else{v=x;w=y;}}else if(z<aa){v=Math.round(w*z);}else w=Math.round(v/z);return new (c('Vector'))(v,w);};f.exports=s;}),null);
__d('SpotlightMessengerSharedMediaViewerContainer.react',['FluxContainer','MessengerSharedMediaStore','MessengerSharedMediaActions','React','SpotlightMessengerSharedMediaViewer.react'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').PureComponent);i=h&&h.prototype;j.getStores=function(){return [c('MessengerSharedMediaStore')];};j.calculateState=function(k,l){var m=c('MessengerSharedMediaStore').getState(),n=m.sharedMedia.get(l.threadID),o=m.isLoading.get(l.threadID);return {sharedMedia:n,isLoading:o};};j.prototype.componentDidMount=function(){c('MessengerSharedMediaActions').loadCurrent(this.props.threadID,this.props.photoID);};j.prototype.render=function(){if(!this.state.sharedMedia)return null;var k=this.state.sharedMedia&&this.state.sharedMedia.edges.find(function(l){return l.node.legacy_attachment_id===this.props.photoID;}.bind(this));if(!k)return null;return (c('React').createElement(c('SpotlightMessengerSharedMediaViewer.react'),{disableForward:this.props.disableForward,hasPrevPage:this.state.sharedMedia&&this.state.sharedMedia.has_previous_page,hasNextPage:this.state.sharedMedia&&this.state.sharedMedia.has_next_page,onClosePhotoView:this.props.onClosePhotoView,openAlbum:this.props.openAlbum,photoID:this.props.photoID,rootClassName:this.props.rootClassName,sharedMedia:this.state.sharedMedia&&this.state.sharedMedia.edges,threadID:this.props.threadID}));};function j(){h.apply(this,arguments);}f.exports=c('FluxContainer').create(j,{withProps:true});}),null);
__d('MessengerThreadSharedPhotos.react',['cx','MercuryConfig','MessengerSharedPhotosAlbumViewContainer.react','React','SpotlightViewer','SpotlightMessengerSharedMediaViewerContainer.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.state={photoView:this.props.findFBID,albumView:''},this.$MessengerThreadSharedPhotos3=function(r){this.setState({albumView:r,photoView:''});}.bind(this),this.$MessengerThreadSharedPhotos4=function(){this.setState({albumView:''});}.bind(this),this.$MessengerThreadSharedPhotos5=function(r){this.setState({albumView:'',photoView:r});}.bind(this),this.$MessengerThreadSharedPhotos6=function(){this.setState({photoView:''});}.bind(this),this.$MessengerThreadSharedPhotos7=function(r){this.setState({photoView:r});}.bind(this),n;}l.prototype.componentDidUpdate=function(){!this.state.photoView&&!this.state.albumView&&this.props.onCloseSharedPhotos();};l.prototype.render=function(){var m=c('MercuryConfig').SharedPhotoNewView&&this.state.photoView?this.$MessengerThreadSharedPhotos1():null,n=c('MercuryConfig').SharedPhotoNewView&&this.state.albumView?this.$MessengerThreadSharedPhotos2():null;return c('React').createElement('div',null,n,m);};l.prototype.$MessengerThreadSharedPhotos1=function(){return (c('React').createElement(c('SpotlightMessengerSharedMediaViewerContainer.react'),{disableForward:false,onClosePhotoView:this.$MessengerThreadSharedPhotos6,openAlbum:this.$MessengerThreadSharedPhotos3,photoID:this.state.photoView,rootClassName:'',threadID:this.props.threadFBID}));};l.prototype.$MessengerThreadSharedPhotos2=function(){return (c('React').createElement(c('SpotlightViewer'),{className:"_3ode",onHide:this.$MessengerThreadSharedPhotos4,open:true,ref:'spotlightViewer'},c('React').createElement(c('MessengerSharedPhotosAlbumViewContainer.react'),{onClick:this.$MessengerThreadSharedPhotos5,onCloseSharedPhotos:this.props.onCloseSharedPhotos,threadID:this.props.threadFBID,viewedPhoto:this.state.albumView})));};l.propTypes={findFBID:k.string,onCloseSharedPhotos:k.func,threadFBID:k.string};f.exports=l;}),null);
__d('MessengerVideo.react',['cx','ix','Image.react','MercuryConfig','MessengerPhoto.react','MessengerVideoPlayer.react','React','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes,m=1800;j=babelHelpers.inherits(n,c('React').PureComponent);k=j&&j.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.$MessengerVideo3=function(){var t=void 0;if(!!this.props.attachment.metadata){t=this.props.attachment.metadata.duration;}else if(!!this.props.attachment.media)t=this.props.attachment.media.duration;return !!t?this.$MessengerVideo4(t):null;}.bind(this),this.$MessengerVideo5=function(){this.props.onClick&&this.props.onClick(this.props.attachment);}.bind(this),p;}n.prototype.render=function(){var o=null;if(c('MercuryConfig').MessengerVideoAutoplayControl){var p=this.$MessengerVideo1(this.props.attachment);o=this.$MessengerVideo2(p);}return o?o:c('React').createElement(c('MessengerPhoto.react'),babelHelpers['extends']({},this.props,{className:c('joinClasses')(this.props.className,"_ccq")}),c('React').createElement(c('Image.react'),{className:"_ccr",src:i('/images/chat/chat_play_icon.png')}),c('React').createElement('span',{className:"_ccs"},this.$MessengerVideo3()));};n.prototype.$MessengerVideo2=function(o){if(!o.legacy_attachment_id)return null;return c('React').createElement(c('MessengerVideoPlayer.react'),{attachment:this.props.attachment,videoData:o,isInThread:true,isVisible:this.props.isVisible,onClick:this.$MessengerVideo5,onSelect:this.props.onSelect,className:c('joinClasses')(this.props.className,"_ccq"+(' '+"_4tsk")+(' '+"_3o67")+(this.props.isSingle?' '+"_52mr":''))});};n.prototype.$MessengerVideo1=function(o){var p=null,q=null,r=null;if(o.metadata&&o.metadata.fbid){var s=c('MercuryConfig').MessengerLargePreviewImageGK&&window.screen.width>m&&o.metadata.large_size&&o.metadata.large_preview;p=o.metadata.fbid;var t=s?o.metadata.large_size:o.metadata.inbox_size;q={x:t.width,y:t.height};r=s?o.metadata.large_preview:o.metadata.inbox_preview;}return {legacy_attachment_id:p,original_dimensions:q,start_muted:true,no_autoplay:true,hide_controls_on_finish:true,url:r,is_share:false};};n.prototype.$MessengerVideo4=function(o){var p=o%60;return Math.floor(o/60)+':'+(p<10?'0':'')+p;};n.propTypes={attachment:l.object.isRequired,isSingle:l.bool.isRequired,isVisible:l.bool,onClick:l.func,onSelect:l.func};f.exports=n;}),null);
__d('MessengerXMATextBlock.react',['cx','LineClamp.react','React','joinClasses'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes,l=26;i=babelHelpers.inherits(m,c('React').Component);j=i&&i.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=j.constructor).call.apply(n,[this].concat(q)),this.$MessengerXMATextBlock1=function(){this.props.url&&window.open(this.props.url);}.bind(this),o;}m.prototype.render=function(){if(!this.props)return c('React').createElement('div',{className:"__6j"});var n=this.props.width?{maxWidth:this.props.width-l,textAlign:'left'}:{textAlign:'left'},o={textDecoration:'none'};return c('React').createElement('div',{className:c('joinClasses')(this.props.className,"__6j _43kk"),style:n},c('React').createElement('a',{onClick:this.$MessengerXMATextBlock1,role:'button',style:o,tabIndex:'0'},this.renderTitle(),this.renderDescription(),this.renderSource()));};m.prototype.renderTitle=function(){if(!this.props.title)return null;return c('React').createElement('div',{className:"__6k"},c('React').createElement(c('LineClamp.react'),{lines:2,lineHeight:16},this.props.title));};m.prototype.renderDescription=function(){if(!this.props.description)return null;return c('React').createElement('div',{className:"__6l"},c('React').createElement(c('LineClamp.react'),{lines:2,lineHeight:15},this.props.description));};m.prototype.renderSource=function(){if(!this.props.source)return null;return c('React').createElement('div',{className:"__6m"},c('React').createElement(c('LineClamp.react'),{lines:1,lineHeight:14},this.props.source));};m.propTypes={className:k.string,description:k.string,source:k.string,title:k.string,url:k.string,width:k.number};f.exports=m;}),null);
__d('MessengerVideoXMA.react',['cx','MessengerVideoPlayer.react','MessengerXMATextBlock.react','React','joinClasses'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes,l=640,m=450,n=320,o=1800;i=babelHelpers.inherits(p,c('React').PureComponent);j=i&&i.prototype;p.prototype.render=function(){var q=this.$MessengerVideoXMA1(this.props.attachment),r=this.$MessengerVideoXMA2(q);return (c('React').createElement('div',{className:"_3duc"},r,this.$MessengerVideoXMA3(q&&q.original_dimensions)));};p.prototype.$MessengerVideoXMA2=function(q){return q?c('React').createElement(c('MessengerVideoPlayer.react'),{attachment:this.props.attachment,videoData:q,isInThread:true,isVisible:this.props.isVisible,onSelect:this.props.onSelect,className:c('joinClasses')(this.props.className,"_ccq"+(' '+"_4tsk")+(' '+"_3o67")+(' '+"_52mr"))}):null;};p.prototype.$MessengerVideoXMA1=function(q){if(!q.media||!q.media.image_size||!q.target||!q.target.video_id)return null;var r=q.media.image_size;return {legacy_attachment_id:q.target.video_id,original_dimensions:this.$MessengerVideoXMA4(r),start_muted:true,no_autoplay:true,hide_controls_on_finish:true,url:q.media.image,is_share:true};};p.prototype.$MessengerVideoXMA4=function(q){var r=Math.max(q.width,q.height),s=this.props.renderLargeSize?window.screen.width>o?l:m:n;if(r<=s)return {x:q.width,y:q.height};var t=s/r,u=Math.floor(q.width*t),v=Math.floor(q.height*t);return {x:u,y:v};};p.prototype.$MessengerVideoXMA3=function(q){var r=this.props.attachment;return (c('React').createElement(c('MessengerXMATextBlock.react'),{className:"_2f5n _4br2 _29ew _3dug",description:r.description,source:r.source,title:r.video_title,url:r.uri,width:q&&q.x}));};function p(){i.apply(this,arguments);}p.propTypes={attachment:k.object.isRequired,isVisible:k.bool,renderLargeSize:k.bool,onClick:k.func,onSelect:k.func};f.exports=p;}),null);
__d('MessengerPhotosGroup.react',['cx','ActorURI','ChatSpeakingSticker.react','MercuryAttachment','MercuryAttachmentType','MercuryConfig','MercuryIDs','MessagingGiftWrap.react','MessagingFlowerBorder.react','MessengerAttachmentViewer','MessengerFromViewerUtils','MessengerPhoto.react','MessengerPhotoForwardButton.react','MessengerVideo.react','MessengerVideoXMA.react','MessagesViewerSetID','React','MessengerThreadSharedPhotos.react','URI','Vector','getPageIDFromThreadID','joinClasses'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k='empty-spacer',l=c('React').PropTypes;i=babelHelpers.inherits(m,c('React').PureComponent);j=i&&i.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=j.constructor).call.apply(n,[this].concat(q)),this.state={findID:null},this.$MessengerPhotosGroup5=function(s){this.setState({findID:s});}.bind(this),this.$MessengerPhotosGroup6=function(){this.setState({findID:null});}.bind(this),this.$MessengerPhotosGroup7=function(s){if(s.preview_uploading)return;if(s.attach_type===c('MercuryAttachmentType').VIDEO){c('MessengerAttachmentViewer').renderVideo({pageID:s.metadata.pageid,rootClassName:"_1j1h",videoID:s.metadata.fbid,videoSize:new (c('Vector'))(s.metadata.dimensions.width,s.metadata.dimensions.height),videoURI:s.url});}else if(s.attach_type===c('MercuryAttachmentType').PHOTO||s.attach_type===c('MercuryAttachmentType').THIRDPARTYSTICKER||s.attach_type===c('MercuryAttachmentType').ANIMATED_IMAGE){var t=this.props.attachments.length===1,u=s.url,v=null;if(!this.props.isXMA&&s.attach_type===c('MercuryAttachmentType').PHOTO&&this.props.count){var w=this.props.count,x=this.props.message,y=x&&x.thread_fbid;if(x&&!y)y=c('MercuryIDs').getThreadFBIDFromThreadID(x.thread_id);t=w===1;u=new (c('URI'))('/ajax/messaging/attachments/sharedphotos.php').setQueryData({thread_id:y,image_id:s.metadata.fbid});if(s.metadata.pageid)u=new (c('ActorURI').create)(u,s.metadata.pageid);v=c('MessagesViewerSetID').MESSAGES_VIEW_ALL_IN_THREAD;}c('MessengerAttachmentViewer').bootstrapWithConfig({actorid:s.metadata.pageid,dimensions:s.metadata.dimensions,disableForward:!!s.metadata.pageid,disablePaging:t,endpoint:u,fbid:s.metadata.fbid,rootClassName:"_1j1h",setID:v,snapToPhoto:true,src:s.preview_url});}else if(s.uri)window.open(s.uri);}.bind(this),this.$MessengerPhotosGroup3=function(s){var t=[];s.forEach(function(u){if(u.metadata&&u.metadata.fbid)t.push(u.metadata.fbid.toString());});return t;},o;}m.prototype.componentDidMount=function(){c('MessengerAttachmentViewer').preload();};m.prototype.render=function(){var n=this.props.attachments,o=this.props.message?!!c('getPageIDFromThreadID')(this.props.message.thread_id):false,p=this.$MessengerPhotosGroup1(n,o);if(this.props.isGiftWrapped)p=c('React').createElement('div',null,p);var q=c('MercuryConfig').SharedPhotoNewView&&this.state.findID?this.$MessengerPhotosGroup2():null,r=this.$MessengerPhotosGroup3(n),s=this.props.message?c('MessengerFromViewerUtils').isFromViewer(this.props.message):false,t=c('MercuryConfig').WWWPhotoForwardButtonGK&&r.length===1?c('React').createElement(c('MessengerPhotoForwardButton.react'),{photoIDs:r,isFromViewer:s}):null,u=c('MercuryAttachment').hasAttribution(n[0]),v=!t||u||s?{}:{marginRight:'16px',position:'relative'};return c('React').createElement('div',babelHelpers['extends']({},this.props,{style:v,tabIndex:'0',className:this.$MessengerPhotosGroup4(n)}),q,t,p,this.props.isGiftWrapped?c('React').createElement(c('MessagingGiftWrap.react'),{onUnwrap:this.props.onUnwrap}):null,this.props.hasFlowerBorder?c('React').createElement(c('MessagingFlowerBorder.react'),{offset:-10}):null);};m.prototype.$MessengerPhotosGroup2=function(){var n=this.props.message,o=n&&n.thread_fbid;if(n&&!o)o=c('MercuryIDs').getThreadFBIDFromThreadID(n.thread_id);return c('React').createElement(c('MessengerThreadSharedPhotos.react'),{findFBID:String(this.state.findID.metadata.fbid),backUpClick:this.$MessengerPhotosGroup7,onCloseSharedPhotos:this.$MessengerPhotosGroup6,threadFBID:o});};m.prototype.$MessengerPhotosGroup1=function(n,o){if(n.length===1)return [this.$MessengerPhotosGroup8(n[0],o,true)];var p=3;if(n.length===2||n.length===4)p=2;var q=[];for(var r=0,s=n.length;r<s;r+=p){var t=n.slice(r,r+p),u=p-t.length;while(u>0){t.push({attach_type:k,key:'ghost'+u});u--;}q.push(c('React').createElement('div',{className:"_2n8g",key:r},t.map(function(v){return this.$MessengerPhotosGroup8(v,o);}.bind(this))));}return q;};m.prototype.$MessengerPhotosGroup8=function(n,o,p){var q=void 0;if(n.deduplication_key){q=n.deduplication_key;}else if(n.metadata){q=n.metadata.fbid;}else q=n.upload_id;var r={attachment:n,isSingle:p||false,key:q,onAttachmentLoad:this.props.onAttachmentLoad,onClick:c('MercuryConfig').SharedPhotoNewView&&!o&&n.metadata&&n.metadata.fbid&&!c('MercuryAttachment').hasAttribution(n)?this.$MessengerPhotosGroup5:this.$MessengerPhotosGroup7},s=this.props.attachType||n.attach_type;switch(s){case c('MercuryAttachmentType').PHOTO:case c('MercuryAttachmentType').ANIMATED_IMAGE:case c('MercuryAttachmentType').THIRDPARTYSTICKER:return c('React').createElement(c('MessengerPhoto.react'),r);case c('MercuryAttachmentType').VIDEO:if(n.metadata&&n.metadata.render_as_sticker){return c('React').createElement(c('ChatSpeakingSticker.react'),{videoSize:n.metadata.dimensions,videoURI:n.url});}else if(this.props.isXMA&&c('MercuryConfig').MessengerSharedVideoNewDesign)return c('React').createElement(c('MessengerVideoXMA.react'),babelHelpers['extends']({},r,{isVisible:this.props.isVisible,onSelect:this.props.onSelect,renderLargeSize:c('MercuryConfig').MessengerLargePreviewImageGK}));return c('React').createElement(c('MessengerVideo.react'),babelHelpers['extends']({},r,{isVisible:this.props.isVisible,onSelect:this.props.onSelect}));case k:return c('React').createElement('div',{key:n.key,className:"_4tsk _4rf-"});default:throw new Error(n.attachType+' is not handled by MessengerPhotoGroup');}};m.prototype.$MessengerPhotosGroup4=function(n){var o=n.length===2||n.length===4;return c('joinClasses')(this.props.className,"_2n8h"+(n.length===1?' '+"_2n8i":'')+(o?' '+"_4ksk":'')+(n.length>1&&!o?' '+"_2n8k":'')+(c('MercuryConfig').MessengerLargePreviewImageGK?' '+"_5fk1":''));};m.propTypes={attachments:l.arrayOf(l.object).isRequired,attachType:l.string,count:l.number,hasFlowerBorder:l.bool,isGiftWrapped:l.bool,isXMA:l.bool,isVisible:l.bool,message:l.object,onAttachmentLoad:l.func,onSelect:l.func,onUnwrap:l.func};f.exports=m;}),null);
__d('MessengerStickerUtils',['MercuryAttachmentType'],(function a(b,c,d,e,f,g){'use strict';function h(k){return !!(k&&k.attach_type===c('MercuryAttachmentType').STICKER);}function i(k){var l=k.attachments;return !!(k.is_like_preview||k.sticker_id||l&&l.length===1&&h(l[0]));}function j(k){return k.size===1&&i(k.first());}f.exports={isStickerMessageGroup:j,isStickerMessage:i,isStickerAttachment:h};}),null);
__d('MessengerVoiceClipAttachment.react',['cx','MercuryAttachmentAudioClip.react','MercuryShareAttachmentRenderLocations','MessagingGiftWrap.react','MessagingFlowerBorder.react','React','messengerCustomColorUtils'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').PureComponent);j=i&&i.prototype;l.prototype.render=function(){var m=this.props.attachment,n=m.metadata.duration/1000,o=!!m.app_attribution,p={};if(this.props.customColor)p=c('messengerCustomColorUtils').customBubbleStyle(this.props.customColor,p);var q=this.props.isGiftWrapped?c('React').createElement(c('MessagingGiftWrap.react'),{onUnwrap:this.props.onUnwrap}):null,r=this.props.hasFlowerBorder?c('React').createElement(c('MessagingFlowerBorder.react'),{offset:-10}):null;return (c('React').createElement('div',{className:"_hh7"+(' '+"_s1-")+(!!this.props.customColor?' '+"_5sxi":'')+(!o?' '+"_52mr":'')+(o?' '+"_mxz":'')+(' '+"_1fz8")+(o?' '+"_1-wa":'')+(' '+"_1nqp"),style:p},c('React').createElement(c('MercuryAttachmentAudioClip.react'),{customColor:this.props.customColor,src:m.url,duration:n,key:'audio:'+this.props.message.message_id,showHelp:false,width:200,location:c('MercuryShareAttachmentRenderLocations').MESSENGER,rootClassName:"_3czg"+(o?' '+"_4yjw":'')+(' '+"_2poz")+(' '+"_ui9")}),q,r));};function l(){i.apply(this,arguments);}l.propTypes={attachment:k.object.isRequired,customColor:k.string,isGiftWrapped:k.bool,message:k.object.isRequired,onUnwrap:k.func};f.exports=l;}),null);
__d('isRetina',[],(function a(b,c,d,e,f,g){'use strict';f.exports=function(){return (window.devicePixelRatio||1)>1;};}),null);
__d('MessengerAttachmentRenderer',['cx','EmojiLikeCxData','EmojiLikeUtils','EmojiSticker.react','MercuryAttachment','MercuryAttachmentType','MercuryAudioType','MercuryConfig','MercuryShareAttachment.react','MercuryShareAttachmentRenderLocations','MessagingFlowerBorder.react','MessagingFlowerBorderChecker','MessagingGiftWrap.react','MessagingGiftWrapChecker','MessengerErrorAttachment.react','MessengerFileAttachment.react','MessengerFromViewerUtils','MessengerHotLikePreview.react','MessengerHotLikeUtils','MessengerPhotosGroup.react','MessengerStickerUtils','MessengerVoiceClipAttachment.react','MessengerWebDriverTestIDs','React','Set','Sticker.react','StickerAssetType','StickerConstants','StickerInterfaces','StickersActions','StickersStoreController','StickersPackInTray','StickerUtils','StoryAttachmentStyle','XStickerAssetController','isRetina','wrapNullableForReact'],(function a(b,c,d,e,f,g,h){'use strict';var i=new (c('Set'))([c('MercuryAttachmentType').ANIMATED_IMAGE,c('MercuryAttachmentType').PHOTO,c('MercuryAttachmentType').VIDEO,c('MercuryAttachmentType').THIRDPARTYSTICKER]),j=700,k='sticker:',l='giftwrap:',m='share:',n="_1c_u",o=function q(r){return r===Object(r);},p={getAttachmentsInsideBubble:function q(r,s){var t=c('MercuryAttachment').get(r).filter(o).filter(function(u){return (!this.attachmentShouldAppearOutsideBubble(u));}.bind(this));return this._getAttachmentComponents(t,r,s);},getAttachmentsOutsideBubble:function q(r,s,t){var u=c('MercuryAttachment').get(r).filter(o).filter(function(v){return (this.attachmentShouldAppearOutsideBubble(v));}.bind(this));return this._getAttachmentComponents(u,r,s,t);},_getAttachmentComponents:function q(r,s,t,u){var v=this._getPhotosGroup(r.filter(this.isPhotoAttachment),s,t,u),w=r.filter(function(x){return !this.isPhotoAttachment(x);}.bind(this)).map(function(x){return this._getAttachmentComponent(x,s,t,u);}.bind(this));if(v)w.push(v);return w;},_getAttachmentComponent:function q(r,s,t,u){var v=u&&u.customColor,w=u&&u.onUnwrap,x=u&&u.isVisible,y=u&&u.onSelect;if(c('MessengerStickerUtils').isStickerAttachment(r))return this._getStickerComponent(r,s,v,w);if(this.isEmojiLikeAttachment(r))return this._getEmojiLikeAttachment(r,s,w);if(this.isVoiceClip(r))return this._getVoiceClip(r,s,v,w);if(this.isFileAttchment(r))return this._getFileComponent(r,s);if(this.isP2P(r)||this.isShareAttachment(r))return this._getShareAttachment(r,s,t,x,y);if(this.isErrorAttachment(r))return this._getErrorAttachment(r,s);return null;},_getStickerComponent:function q(r,s,t,u){if(s.is_like_preview)return this._maybeGiftWrapSticker(c('React').createElement(c('MessengerHotLikePreview.react'),{customColor:t,customLike:s.customLike,key:'hlp:'+s.like_preview_since,since:s.like_preview_since}),s,u);var v=r.metadata;if(!v){v=c('MessengerHotLikeUtils').getMetadataForHotLike(s.sticker_id);if(!v){v={};var w=c('StickerUtils').getScaledDimensions(c('StickerConstants').THREAD_SIZE,c('StickerConstants').THREAD_SIZE,c('StickerConstants').THREAD_SIZE),x=w.height,y=w.width;v.height=x;v.width=y;}v.stickerID=s.sticker_id;}var z=c('XStickerAssetController').getURIBuilder().setInt('sticker_id',v.stickerID),aa=null,ba=null;if(c('isRetina')()){aa=v.paddedSpriteURI2x;ba=v.spriteURI2x;}else{aa=v.paddedSpriteURI;ba=v.spriteURI;}var ca=v.stickerID.toString(),da=c('React').createElement(c('Sticker.react'),{className:"_2poz"+(' '+"_ui9")+(c('MessagingGiftWrapChecker').shouldRenderWithGiftWrap(s)&&!!c('MessengerHotLikeUtils').getMetadataForHotLike(ca)?' '+"_4ue_":''),animationTrigger:'hover',customColor:t,frameCount:v.frameCount||1,frameRate:v.frameRate||c('StickerConstants').DEFAULT_FRAME_RATE,framesPerCol:v.framesPerCol||1,framesPerRow:v.framesPerRow||1,key:k+s.message_id,onStickerClick:function ea(fa,ga){c('StickersPackInTray').onIsPackInTray(fa,c('StickerInterfaces').MESSAGES,function(ha){if(ha.in_sticker_tray){c('StickersActions').selectTrayPack(fa);c('StickersActions').showStickerFlyout(s.thread_id);}else c('StickersStoreController').showStore(fa);});},packID:v.packID&&v.packID.toString(),paddedSpriteURI:aa,sourceHeight:v.height,sourceURI:z.setEnum('image_type',c('StickerAssetType').IMAGE).getURI().toString(),sourceWidth:v.width,spriteURI:ba,stickerID:ca,testID:c('MessengerWebDriverTestIDs').STICKER});return this._maybeGiftWrapSticker(da,s,u);},_getEmojiLikeAttachment:function q(r,s,t){var u=c('EmojiLikeCxData').transferSize(r.size),v=c('MercuryConfig').MessengerNewEmojiGK?c('EmojiLikeCxData').getNewEmojiData(s.body,u):null,w=v?v.emoji:undefined,x=null;if(!v){x=c('EmojiLikeUtils').getURI(s.body,u);if(!x)return this._getErrorAttachment(r,s);}var y=c('React').createElement(c('EmojiSticker.react'),{className:"_2poz _ui9",key:k+s.message_id,emoji:s.body,emojiImage:w,sourceURI:x?x:''});return this._maybeGiftWrapSticker(y,s,t);},_getShareAttachment:function q(r,s,t,u,v){var w=null;if(s&&s.platform_xmd)w=JSON.parse(s.platform_xmd);return c('React').createElement(c('MercuryShareAttachment.react'),{attachment:r.share,isSponsored:s.is_sponsored,isVisible:!!u,key:m+s.message_id,location:c('MercuryShareAttachmentRenderLocations').MESSENGER,maxWidth:j,messageID:s.message_id,mnMessageType:w&&w.template_type,onComponentLoaded:t,onSelect:v,pageID:s.author,threadID:s.thread_id});},_getVoiceClip:function q(r,s,t,u){t=c('MessengerFromViewerUtils').isFromViewer(s)?t||undefined:undefined;return (c('React').createElement(c('MessengerVoiceClipAttachment.react'),{attachment:r,customColor:t,isGiftWrapped:c('MessagingGiftWrapChecker').shouldRenderWithGiftWrap(s),hasFlowerBorder:c('MessagingFlowerBorderChecker').shouldRenderWithFlowerBorder(s),key:'audio:'+s.message_id,message:s,onUnwrap:function(v){function w(){return v.apply(this,arguments);}w.toString=function(){return v.toString();};return w;}(function(){u&&u();})}));},_getErrorAttachment:function q(r,s){return (c('React').createElement(c('MessengerErrorAttachment.react'),{attachment:r,key:'error:'+s.message_id}));},_getPhotosGroup:function q(r,s,t,u){if(!r.length)return null;var v=u&&u.onUnwrap,w=u&&u.isVisible,x=u&&u.onSelect,y=c('MessagingFlowerBorderChecker').shouldRenderWithFlowerBorder(s),z=c('MessagingGiftWrapChecker').shouldRenderWithGiftWrap(s)&&this._rendersWithoutAttribution(r);return (c('React').createElement(c('MessengerPhotosGroup.react'),{attachments:r,className:"_2poz _52mr _ui9",count:r.length,hasFlowerBorder:y,isGiftWrapped:z,isVisible:!!w,key:'photos:'+s.message_id,message:s,onSelect:x,onUnwrap:function(aa){function ba(){return aa.apply(this,arguments);}ba.toString=function(){return aa.toString();};return ba;}(function(){v&&v();})}));},getVideoElem:function q(r,s){var t=s.getMessageElement(r);if(!t)return null;var u=t.getElementsByClassName(n);return u&&u.length?u[0]:t;},_rendersWithoutAttribution:function q(r){return r.length!=1||!c('MercuryAttachment').hasAttribution(r[0]);},_getFileComponent:function q(r,s){return (c('React').createElement(c('MessengerFileAttachment.react'),{attachment:r,className:"_2poz",key:'file:'+r.url}));},attachmentShouldAppearOutsideBubble:function q(r){return c('MessengerStickerUtils').isStickerAttachment(r)||this.isPhotoAttachment(r)||this.isShareAttachment(r)||this.isP2P(r)||this.isVoiceClip(r)||this.isErrorAttachment(r)||this.isEmojiLikeAttachment(r);},isPhotoAttachment:function q(r){return i.has(r.attach_type);},isPhotosGroupAttachment:function q(r){var s=r.props.attachments;return !!s&&s.length>1&&s.some(function(t){return !!t&&this.isPhotoAttachment(t);}.bind(this));},isRenderedShareAttachment:function q(r){return !!(r.key&&r.key.startsWith(m));},isFileAttchment:function q(r){return r.attach_type===c('MercuryAttachmentType').FILE;},isShareAttachment:function q(r){return !!(this._isStoryBased(r)&&!this.isP2P(r)&&(r.share.style_list.indexOf(c('StoryAttachmentStyle').SHARE)>-1||r.share.style_list.indexOf(c('StoryAttachmentStyle').FALLBACK)>-1));},isSharedVideoAttachment:function q(r){var s=r.attach_type===c('MercuryAttachmentType').SHARE&&r.share&&r.share.subattachments&&r.share.subattachments[0];return !!(s&&s.target&&s.target.video_id);},isP2P:function q(r){return !!(this._isStoryBased(r)&&r.share.style_list.indexOf(c('StoryAttachmentStyle').ORION)>-1);},_isStoryBased:function q(r){return !!(r.attach_type===c('MercuryAttachmentType').SHARE&&r.share&&r.share.style_list);},isEmojiLikeAttachment:function q(r){return r.attach_type===c('MercuryAttachmentType').EMOJI_LIKE;},isVoiceClip:function q(r){return !!r.metadata&&(r.metadata.type===c('MercuryAudioType').AudioClip||r.metadata.type===c('MercuryAudioType').VoiceMessageWithTranscript);},isVoiceClipAttachment:function q(r){var s=c('MercuryAttachment').get(r).filter(o).filter(function(t){return (this.isVoiceClip(t));}.bind(this));return !!s.length;},isP2PAttachment:function q(r){var s=c('MercuryAttachment').get(r).filter(function(t){return (o(t)&&this.isP2P(t));}.bind(this));return !!s.length;},isSingleVideoAttachment:function q(r){var s=c('MercuryAttachment').get(r).filter(o).filter(function(t){return (c('MercuryAttachment').isVideoAttachment(t));});return s.length===1;},isSharedVideoAttachmentMessage:function q(r){var s=c('MercuryAttachment').get(r).filter(o).filter(function(t){return (this.isSharedVideoAttachment(t)||this.isGenieSharedVideoAttachment(t));}.bind(this));return s.length===1;},isGenieSharedVideoAttachment:function q(r){return !!(r.attach_type===c('MercuryAttachmentType').SHARE&&r.share&&r.share.style_list.indexOf(c('StoryAttachmentStyle').GENIE_MESSAGE)>-1&&r.share.target&&r.share.target.attachment&&this.isSharedVideoAttachment(r.share.target.attachment));},isErrorAttachment:function q(r){return r.attach_type===c('MercuryAttachmentType').ERROR;},_maybeGiftWrapComponentForMessage:function q(r,s,t){var u=c('MessagingGiftWrapChecker').shouldRenderWithGiftWrap(s),v=c('MessagingFlowerBorderChecker').shouldRenderWithFlowerBorder(s);if(!u&&!v)return r;return (c('React').createElement('div',{key:l+s.message_id},r,u?c('React').createElement(c('MessagingGiftWrap.react'),{onUnwrap:c('wrapNullableForReact')(t)}):null,v?c('React').createElement(c('MessagingFlowerBorder.react'),{offset:-10}):null));},_maybeGiftWrapSticker:function q(r,s,t){var u=c('MessagingGiftWrapChecker').shouldRenderWithGiftWrap(s),v=c('MessagingFlowerBorderChecker').shouldRenderWithFlowerBorder(s);if(!u&&!v)return r;return (c('React').createElement('div',{key:l+s.message_id},r,u?c('React').createElement(c('MessagingGiftWrap.react'),{isSticker:true,onUnwrap:c('wrapNullableForReact')(t)}):null,v?c('React').createElement(c('MessagingFlowerBorder.react'),{offset:-10}):null));}};f.exports=p;}),null);
__d('shouldNotRenderSegoe',['MessengerConfig','UserAgent'],(function a(b,c,d,e,f,g){'use strict';var h=new RegExp('[\u0530-\u05f4\u10a0-\u10ff]'),i=c('UserAgent').isBrowser('Chrome')&&c('UserAgent').isPlatform('Windows 10');f.exports=function j(k){return (!c('MessengerConfig').SegoeUIDisabled&&i&&h.test(k));};}),null);
__d('MessengerBubble.react',['cx','EmojiLikeUtils','EmojiOnlyMessage.react','immutable','ImmutableObject','MercuryMessageBody.react','MessengerDecorator','React','joinClasses','messengerCustomColorUtils','shouldNotRenderSegoe'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').PureComponent);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.state={emojis:undefined},n;}l.prototype.componentDidMount=function(){if(!this.props.emojis){var m=this.props.body||'',n=c('EmojiLikeUtils').richContent(m);if(n&&n.length)this.setState({emojis:n});}};l.prototype.render=function(){var m={};if(!this.state.emojis&&this.props.customColor)m=c('messengerCustomColorUtils').customBubbleStyle(this.props.customColor,m);var n=false;if(this.state.emojis){var o=c('EmojiLikeUtils').getSourceURIs(this.state.emojis),p=c('React').createElement(c('EmojiOnlyMessage.react'),{sourceURIs:o});}else{n=true;p=c('React').createElement(c('MercuryMessageBody.react'),{body:this.props.body,className:"_3oh-"+(c('shouldNotRenderSegoe')(this.props.body||'')?' '+"_2por":'')+(' '+"_58nk"),threadCustomColor:this.props.threadCustomColor,isFromViewer:this.props.isFromViewer,ranges:this.props.ranges,metaRanges:this.props.metaRanges,threadID:this.props.threadID,customLike:this.props.customLike});}var q=[],r=[],s=this.props.message,t=!!this.props.isFromViewer;if(s){c('MessengerDecorator').getAfterDecorators().forEach(function(v){if(v.check(s)){q.push(v.render(s,t));r.push(v.getAdditionalClassNames());}});c('MessengerDecorator').getBeforeDecorators().forEach(function(v){if(v.check(s))r.push(v.getAdditionalClassNames());});}var u=r.join(' ');return (c('React').createElement('div',babelHelpers['extends']({},this.props,{style:m,className:c('joinClasses')(u,this.props.className,"_hh7"+(' '+"_s1-")+(' '+"_52mr")+(this.props.isP2PAttachment?' '+"_4z55":'')+(!!this.state.emojis?' '+"_2f5r":'')+(!!this.state.emojis?' '+"_581a":'')+(n?' '+"_3oh-":''))}),p,this.props.attachments,q));};l.propTypes={attachments:k.instanceOf(c('immutable').List),body:k.string,customColor:k.string,customLike:k.object,isFromViewer:k.bool,message:k.instanceOf(c('ImmutableObject')),metaRanges:k.array,onUnwrap:k.func,ranges:k.array,threadID:k.string,threadCustomColor:k.string};f.exports=l;}),null);
__d('MessengerCodePasteUtils',['cx','BanzaiODS','MessengerBubble.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i=/`{3,}/;function j(l){return !!(l&&l.search(i)!==-1&&l.split('\n').length>1);}function k(l,m,n,o){var p=l.split(i),q=[];for(var r=0;r<p.length;r+=2){var s=p[r].trim();if(s&&s.length>0)q.push(c('React').createElement(c('MessengerBubble.react'),{key:r,body:s,customColor:o||undefined,className:"clearfix _3058 _ui9",ranges:m,threadID:n}));if(r+1<p.length&&p[r+1]){var t=p[r+1].split('\n'),u=t[0].replace(/[^a-zA-Z]+/g,''),v=t.slice(1).join('\n');c('BanzaiODS').bumpEntityKey('messenger_code_paste','render_bubble');q.push(c('React').createElement('div',{key:r+1,className:"_3058 _wu0 _52mr"},c('React').createElement('div',{ref:'syntaxTarget'+r,className:'language-'+u},v)));}}return q;}f.exports={containsCodeBlock:j,getCodeAndMessageBubbles:k};}),null);
__d('MessengerAttachmentAttribution.react',['cx','ImmutableObject','MercuryAttachmentAttribution.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.render=function(){return (c('React').createElement(c('MercuryAttachmentAttribution.react'),{attachment:this.props.attachment,className:"_2f5n _4br2"}));};function l(){i.apply(this,arguments);}l.propTypes={attachment:k.instanceOf(c('ImmutableObject'))};f.exports=l;}),null);
__d('MessengerBubbleBlock.react',['cx','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;k.prototype.render=function(){return (c('React').createElement('div',{className:"_52mr _4h13 _3058"},this.props.children));};function k(){i.apply(this,arguments);}f.exports=k;}),null);
__d('MessengerCodeBubble.react',['Bootloader','immutable','MessengerCodePasteUtils','React','ReactDOM'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').PureComponent);i=h&&h.prototype;k.prototype.componentDidMount=function(){c('Bootloader').loadModules(["Prism.Complete"],function(l){for(var m in this.refs){var n=c('ReactDOM').findDOMNode(this.refs[m]);l.highlightElement(n);}}.bind(this),'MessengerCodeBubble.react');};k.prototype.render=function(){var l=c('MessengerCodePasteUtils').getCodeAndMessageBubbles(this.props.body,this.props.ranges,this.props.threadID,this.props.customColor);return c('React').createElement('div',{className:this.props.className},l);};function k(){h.apply(this,arguments);}k.propTypes={attachments:j.instanceOf(c('immutable').List),body:j.string.isRequired,customColor:j.string,ranges:j.array.isRequired,threadID:j.string.isRequired};f.exports=k;}),null);
__d('MessengerCollapsedLogMessageGroup.react',['cx','fbt','Link.react','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').PureComponent);k=j&&j.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=k.constructor).call.apply(m,[this].concat(p)),this.state={collapsed:true},n;}l.prototype.render=function(){var m=i._("See more"),n=i._("See less");return (c('React').createElement('div',{className:"_497p"},i._("New Activities in the Room."),' ',c('React').createElement(c('Link.react'),{className:"_4ea1",onClick:function(){return this.setState({collapsed:!this.state.collapsed});}.bind(this)},this.state.collapsed?m:n),!this.state.collapsed?c('React').createElement('div',null,c('React').createElement('div',{className:"_4ea2"}),this.props.children,c('React').createElement('div',{className:"_4ea2"})):null));};f.exports=l;}),null);
__d('MessengerDateBreak.react',['cx','React','formatDate','joinClasses'],(function a(b,c,d,e,f,g,h){var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.shouldComponentUpdate=function(m){'use strict';return this.props.date.getTime()!==m.date.getTime();};l.prototype.render=function(){'use strict';var m=c('formatDate')(this.props.date,{today:'g:ia',withinWeek:'D g:ia',thisYear:'M jS, g:ia',older:'m/d/Y g:ia'});return (c('React').createElement('h4',{className:c('joinClasses')(this.props.className,"_497p _2lpt")},c('React').createElement('time',{className:"_3oh-"},m)));};function l(){'use strict';i.apply(this,arguments);}l.propTypes={date:k.instanceOf(Date).isRequired};f.exports=l;}),null);
__d('MessengerDeleteMessageDialog.react',['fbt','MercuryConfig','MessengerDialog.react','messengerDialogBodyReact','MessengerDialogButton.react','MessengerDialogCancelButton.react','MessengerDialogFooter.react','MessengerDialogHeader.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('messengerDialogBodyReact').comp,l=c('React').PropTypes;i=babelHelpers.inherits(m,c('React').PureComponent);j=i&&i.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=j.constructor).call.apply(n,[this].concat(q)),this.$MessengerDeleteMessageDialog1=function(){if(c('MercuryConfig').MessengerGlobalDeleteGK)if(this.props.isFromViewer){return h._("Delete message?");}else return h._("Hide message?");return h._("Delete message");}.bind(this),this.$MessengerDeleteMessageDialog2=function(){if(c('MercuryConfig').MessengerGlobalDeleteGK)if(this.props.isFromViewer){return h._("If you delete this message, no one in this conversation will be able to see it any longer and this can't be undone.");}else return h._("If you hide your copy of this message, you won't be able to get it back. The other person in the conversation may still be able to see it.");return h._("Are you sure you want to delete this message?");}.bind(this),this.$MessengerDeleteMessageDialog4=function(){if(!this.props.isFromViewer&&c('MercuryConfig').MessengerGlobalDeleteGK)return h._("Hide");return h._("Delete");}.bind(this),this.$MessengerDeleteMessageDialog5=function(){this.props.onToggle&&this.props.onToggle(false);this.props.onDelete&&this.props.onDelete();}.bind(this),this.$MessengerDeleteMessageDialog3=function(){this.props.onCancel&&this.props.onCancel();}.bind(this),o;}m.prototype.render=function(){return c('React').createElement(c('MessengerDialog.react'),{onToggle:this.props.onToggle},c('React').createElement(c('MessengerDialogHeader.react'),null,this.$MessengerDeleteMessageDialog1()),c('React').createElement(k,null,this.$MessengerDeleteMessageDialog2()),c('React').createElement(c('MessengerDialogFooter.react'),null,c('React').createElement(c('MessengerDialogCancelButton.react'),{onClick:this.$MessengerDeleteMessageDialog3}),c('React').createElement(c('MessengerDialogButton.react'),{label:this.$MessengerDeleteMessageDialog4(),onClick:this.$MessengerDeleteMessageDialog5,type:'primary',use:'danger'})));};m.propTypes={isFromViewer:l.bool,onDelete:l.func,onToggle:l.func};f.exports=m;}),null);
__d('MessengerHorizontalScroll.react',['ix','cx','fbt','Animation','Image.react','Link.react','React','ReactComponentWithPureRenderMixin','fbglyph'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k=c('React').PropTypes,l=250,m='left',n='right',o=c('React').createClass({displayName:'MessengerHorizontalScroll',_rightArrowBoundOnClick:Function,_leftArrowBoundOnClick:Function,mixins:[c('ReactComponentWithPureRenderMixin')],propTypes:{batchScroll:k.bool.isRequired,childPadding:k.number.isRequired,childWidth:k.number.isRequired,freeScroll:k.bool.isRequired,leftOffset:k.number.isRequired,numChildrenVisible:k.number.isRequired,width:k.number.isRequired},getInitialState:function p(){var q=this._calculateState();return babelHelpers['extends']({index:0,scrollLeft:0},q);},getDefaultProps:function p(){return {batchScroll:false,childPadding:0,freeScroll:false,leftOffset:0,numChildrenVisible:1};},componentWillMount:function p(){this._rightArrowBoundOnClick=this._updatePosition.bind(this,n);this._leftArrowBoundOnClick=this._updatePosition.bind(this,m);},componentWillReceiveProps:function p(q){this.setState(this._calculateState(q));},render:function p(){var q=this.props;if(this.refs&&this.refs.childContainer&&!q.freeScroll)new (c('Animation'))(this.refs.childContainer).to('scrollLeft',this.state.scrollLeft).duration(l).go();var r=this._calculateVisibleWidth(),s=this.state.scrollLeft===0||q.freeScroll||r<q.width,t=this.state.scrollLeft===this.state.maxScrollLeft||q.freeScroll||r<q.width,u=q.freeScroll?'scroll':'hidden',v={overflow:u,width:q.width};return (c('React').createElement('div',{className:"_5agf",style:{width:q.width}},c('React').createElement(c('Link.react'),{'aria-label':j._("See more results from the left"),className:(s?"hidden_elem":'')+(' '+"_5agg"),onClick:this._leftArrowBoundOnClick,role:'button'},c('React').createElement(c('Image.react'),{className:"_5agh",src:h("\/images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/chevron-left_20_bluegray-40.png")})),c('React').createElement(c('Link.react'),{'aria-label':j._("See more results from the right"),className:(t?"hidden_elem":'')+(' '+"_5agi"),onClick:this._rightArrowBoundOnClick,role:'button'},c('React').createElement(c('Image.react'),{className:"_5agh",src:h("\/images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/chevron-right_20_bluegray-40.png")})),c('React').createElement('div',{className:"_5agj",ref:'childContainer',style:v},c('React').createElement('div',{className:"_5agk"},this._renderChildren()))));},_calculateState:function p(q){if(!q||q.children!==this.props.children)var r=c('React').Children.map(this.props.children,function(s,t){return this._onChildClick.bind(null,t);}.bind(this));return {maxScrollLeft:this._getMaxScrollLeft(),boundChildOnClicks:r||this.state.boundChildOnClicks};},_updatePosition:function p(q){var r=c('React').Children.count(this.props.children)-this.props.numChildrenVisible,s=this.state.scrollLeft,t=s,u=this.state.index;switch(q){case n:if(this.props.batchScroll){u+=this.props.numChildrenVisible;if(u>r)u=r;}else u+=1;t=Math.min(this._getNextScrollLeft(u),this.state.maxScrollLeft);break;case m:if(this.props.batchScroll){u-=this.props.numChildrenVisible;if(u<0)u=0;}else u-=1;t=Math.max(0,this._getNextScrollLeft(u));break;}this.setState({scrollLeft:t,index:u});},_onChildClick:function p(q){if(this._isVisibleChild(q))return;var r=q<this.state.index?m:n;this._updatePosition(r);},_getNextScrollLeft:function p(q){if(q===0)return 0;var r=this.props,s=r.width,t=r.childWidth,u=r.childPadding,v=r.leftOffset,w=r.numChildrenVisible,x=t*w,y=u*(w-1),z=(s-(x+y))/2,aa=q*(u+t)-z;return aa+v;},_calculateVisibleWidth:function p(){var q=this.props,r=c('React').Children.count(q.children);return (q.childWidth*r+q.childPadding*(r-1)+q.leftOffset);},_getMaxScrollLeft:function p(){var q=this._calculateVisibleWidth();return q-this.props.width;},_renderChildren:function p(){var q=this.props,r=c('React').Children.count(q.children);return c('React').Children.map(q.children,function(s,t){var u={};u.width=q.childWidth;if(t<r-1)u.paddingRight=q.childPadding;if(t===0&&q.leftOffset)u.paddingLeft=q.leftOffset;var v=this._isVisibleChild(t),w=q.freeScroll?null:this.state.boundChildOnClicks[t];return (c('React').createElement('div',{className:"_5agl"+(v||q.freeScroll?' '+"_5agm":''),key:t,onClick:w,style:u},s));}.bind(this));},_isVisibleChild:function p(q){var r=this.props,s=r.children,t=r.numChildrenVisible,u=c('React').Children.count(s),v=this.state.index,w=v===u-1,x=w?v:v+t-1,y=w?v-(t-1):v;return q<=x&&q>=y;}});f.exports=o;}),null);
__d('MNCommerceLoggingConstants',[],(function a(b,c,d,e,f,g){var h={DIALOG_SURFACE:{CHECKOUT_ORDER_CONFIG:'checkout_order_config',SHIPMENT:'shipment',RECEIPT:'receipt',UNLINK:'unlink',UNLINK_ERROR:'unlink_error',MANAGE:'manage'}};f.exports=h;}),null);
__d('MNCommerceUnlinkDialog.react',['fbt','MNCommerceButton.react','MNCommerceDialog.react','MNCommerceDialogBody.react','MNCommerceDialogFooter.react','MNCommerceDialogTitle.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.render=function(){var m=h._("Cancel"),n=h._("Turn Off");return (c('React').createElement(c('MNCommerceDialog.react'),{onToggle:this.props.onToggle,shown:this.props.shown},c('React').createElement(c('MNCommerceDialogTitle.react'),{showCloseButton:false},h._("Unlink account?")),c('React').createElement(c('MNCommerceDialogBody.react'),null,c('React').createElement('div',null,h._("You can turn off updates if you haven't signed up or just no longer want to get them."))),c('React').createElement(c('MNCommerceDialogFooter.react'),null,c('React').createElement(c('MNCommerceButton.react'),{label:m,onClick:this.props.onCancelButtonClick,use:'default'}),c('React').createElement(c('MNCommerceButton.react'),{label:n,onClick:this.props.onTurnOffButtonClick,use:'confirm'}))));};function l(){i.apply(this,arguments);}l.propTypes={onCancelButtonClick:k.func,onTurnOffButtonClick:k.func};f.exports=l;}),null);
__d('MNCommerceUnlinkErrorDialog.react',['fbt','MNCommerceAttachmentConstants','MNCommerceErrors','React','MNCommerceButton.react','MNCommerceDialog.react','MNCommerceDialogBody.react','MNCommerceDialogFooter.react','MNCommerceDialogTitle.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.render=function(){var m=h._("OK"),n=null,o=null;switch(this.props.errorType){case c('MNCommerceErrors').ALREADY_UNLINKED:o=c('React').createElement('div',null,h._("Updates are already off"));n=c('React').createElement('div',null,h._("You aren't getting updates in Messenger."));break;default:o=c('React').createElement('div',null,h._("Couldn't turn off updates"));n=c('React').createElement('div',null,h._("Sorry, something went wrong. Please try again."));break;}return (c('React').createElement(c('MNCommerceDialog.react'),{onToggle:this.props.onToggle,shown:this.props.shown,width:c('MNCommerceAttachmentConstants').UNLINK_ERROR_DIALOG.WIDTH},c('React').createElement(c('MNCommerceDialogTitle.react'),null,o),c('React').createElement(c('MNCommerceDialogBody.react'),null,n),c('React').createElement(c('MNCommerceDialogFooter.react'),null,c('React').createElement(c('MNCommerceButton.react'),{label:m,onClick:this.props.onOkayButtonClick,use:'confirm'}))));};function l(){i.apply(this,arguments);}l.propTypes={errorType:k.number,onOkayButtonClick:k.func};f.exports=l;}),null);
__d('MNCommerceUnlinkDialogContainer.react',['BanzaiLogger','MNCommerceDialogStateActions','MNCommerceDialogStateStore','MNCommerceLoggingConstants','MNCommerceLoggerEvents','MNCommerceUnlinkDialog.react','MNCommerceUnlinkErrorDialog.react','React'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;function j(){var k,l;for(var m=arguments.length,n=Array(m),o=0;o<m;o++)n[o]=arguments[o];return l=(k=i.constructor).call.apply(k,[this].concat(n)),this.$MNCommerceUnlinkDialogContainer1=function(p){if(!p)this.$MNCommerceUnlinkDialogContainer2();}.bind(this),this.$MNCommerceUnlinkDialogContainer2=function(){c('MNCommerceDialogStateActions').hideDialog();},l;}j.prototype.render=function(){var k=c('MNCommerceDialogStateStore').getState();if(k&&k.errorType){c('BanzaiLogger').log('MessengerCommerceLoggerConfig',{event:c('MNCommerceLoggerEvents').DIALOG_LOAD_SUCCESS,debug_data:JSON.stringify({dialog_surface:c('MNCommerceLoggingConstants').DIALOG_SURFACE.UNLINK_ERROR})});return c('React').createElement(c('MNCommerceUnlinkErrorDialog.react'),{onToggle:this.$MNCommerceUnlinkDialogContainer1,shown:!!k,errorType:k.errorType,onOkayButtonClick:this.$MNCommerceUnlinkDialogContainer2});}else{c('BanzaiLogger').log('MessengerCommerceLoggerConfig',{event:c('MNCommerceLoggerEvents').DIALOG_LOAD_SUCCESS,debug_data:JSON.stringify({dialog_surface:c('MNCommerceLoggingConstants').DIALOG_SURFACE.UNLINK})});return c('React').createElement(c('MNCommerceUnlinkDialog.react'),{onToggle:this.$MNCommerceUnlinkDialogContainer1,shown:!!k,onCancelButtonClick:this.$MNCommerceUnlinkDialogContainer2,onTurnOffButtonClick:k&&k.onTurnOffButtonClick});}};f.exports=j;}),null);
__d("XMNCommerceUnlinkController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/messages\/commerce\/unlink\/",{page_id:{type:"String",required:true},user_id:{type:"String",required:true}});}),null);
__d('MNCommerceUnlinkDataManager',['AsyncRequest','MNCommerceDialogStateActions','MNCommerceUnlinkDialogContainer.react','XMNCommerceUnlinkController'],(function a(b,c,d,e,f,g){'use strict';h.prototype.unlink=function(i,j){var k=c('XMNCommerceUnlinkController').getURIBuilder().setString('page_id',i).setString('user_id',j).getURI();new (c('AsyncRequest'))().setURI(k).setErrorHandler(this.$MNCommerceUnlinkDataManager1).send();};h.prototype.$MNCommerceUnlinkDataManager1=function(i){c('MNCommerceDialogStateActions').showDialog(c('MNCommerceUnlinkDialogContainer.react'),{errorType:i.error});};function h(){}f.exports=new h();}),null);
__d('MNCommerceLogMessageUtils',['cx','fbt','invariant','BanzaiLogger','Link.react','MercuryConfig','MercuryIDs','MercuryThreads','MNCommerceLoggingConstants','MNCommerceLoggerEvents','MNCommerceDialogStateActions','MNCommerceReplyTypes','MNCommercePromotionBlockDataManager','MNCommercePromotionManageBlockDialogContainer.react','MNCommerceUnlinkDataManager','MNCommerceUnlinkDialogContainer.react','React'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k=c('MercuryThreads').get();l.prototype.isCommercePageAdminMessage=function(m){return !!(m&&m.log_message_data&&(m.log_message_data.replyType===c('MNCommerceReplyTypes').COMMERCE_LINK||m.log_message_data.replyType===c('MNCommerceReplyTypes').COMMERCE_UNLINK));};l.prototype.getCommercePageManage=function(m,n){var o=null;if(c('MercuryConfig').WWWMessengerManageAdminGK){var p=function r(){var s=c('MercuryIDs').getUserIDFromParticipantID(m.author),t=function u(v,w){return c('MNCommercePromotionBlockDataManager').block(v,w);};c('MNCommerceDialogStateActions').showDialog(c('MNCommercePromotionManageBlockDialogContainer.react'),{pageID:s,onConfirmButtonClick:t});c('BanzaiLogger').log('MessengerCommerceLoggerConfig',{event:c('MNCommerceLoggerEvents').DIALOG_OPENED,debug_data:JSON.stringify({dialog_surface:c('MNCommerceLoggingConstants').DIALOG_SURFACE.MANAGE})});};o=c('React').createElement(c('Link.react'),{className:(!n?"_2w2m":'')+(n?' '+"_1jvn":''),onClick:p},i._("Manage"));}else if(m.log_message_data.replyType===c('MNCommerceReplyTypes').COMMERCE_LINK){var q=function r(){var s=c('MercuryIDs').getUserIDFromParticipantID(m.author),t=k.getThreadMetaNow(m.thread_id);t||j(0);var u=null;t.participants.every(function(w){if(w!==m.author){u=c('MercuryIDs').getUserIDFromParticipantID(w);return false;}return true;});var v=function w(){c('MNCommerceDialogStateActions').hideDialog();c('MNCommerceUnlinkDataManager').unlink(s,u);};c('MNCommerceDialogStateActions').showDialog(c('MNCommerceUnlinkDialogContainer.react'),{onTurnOffButtonClick:v});c('BanzaiLogger').log('MessengerCommerceLoggerConfig',{event:c('MNCommerceLoggerEvents').DIALOG_OPENED,debug_data:JSON.stringify({dialog_surface:c('MNCommerceLoggingConstants').DIALOG_SURFACE.UNLINK})});};o=c('React').createElement(c('Link.react'),{className:(!n?"_2w2m":'')+(n?' '+"_1jvn":''),onClick:q},i._("Turn off"));}return (c('React').createElement('span',null,m.log_message_body,' ',o));};function l(){}f.exports=new l();}),null);
__d('MessengerGameAdminMessageRoute',['RelayQL','RelayRoute'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('RelayRoute'));i=h&&h.prototype;function j(){h.apply(this,arguments);}j.routeName='MessengerGameAdminMessageRoute';j.queries={adminMessageText:function k(l){return function(m){return {calls:[{kind:'Call',metadata:{type:'MessageData!'},name:'thread_and_message_id',value:{kind:'CallVariable',callVariableName:'messageData'}}],children:[].concat.apply([],[{fieldName:'__typename',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'String'},c('RelayQL').__frag(m)]),fieldName:'message',kind:'Query',metadata:{isAbstract:true,identifyingArgName:'thread_and_message_id',identifyingArgType:'MessageData!'},name:'MessengerGameAdminMessageRoute',type:'Message'};}(l.getFragment('adminMessageText'));}};j.paramDefinitions={messageData:{type:'MessageData!',required:true}};f.exports=j;}),null);
__d('MessengerResponsiveBlock.react',['React','shallowEqual'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes,k={bottom:0,left:0,overflow:'hidden',position:'absolute',right:0,top:0,visibility:'hidden',zIndex:-1},l={left:0,position:'absolute',top:0,transition:'0s'},m={height:'200%',left:0,position:'absolute',top:0,transition:'0s',width:'200%'};h=babelHelpers.inherits(n,c('React').Component);i=h&&h.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=i.constructor).call.apply(o,[this].concat(r)),this.dirty=false,this.lastWidth=null,this.lastHeight=null,this.lastBreakpointsToggles=null,this.setupWeirdScrollTracking=function(){this.refs.expandChild.style.width='10000px';this.refs.expandChild.style.height='10000px';this.refs.expand.scrollLeft=100000;this.refs.expand.scrollTop=100000;this.refs.shrink.scrollLeft=100000;this.refs.shrink.scrollTop=100000;}.bind(this),this.onScroll=function(){var t=this.refs.outer.offsetWidth,u=this.refs.outer.offsetHeight;if(t!=this.lastWidth||u!=this.lastHeight)if(!this.dirty){this.dirty=true;this.lastWidth=t;this.lastHeight=u;var v=this.props.breakpointsToggles(t,u);if(c('shallowEqual')(this.lastBreakpointsToggles,v)){this.dirty=false;}else this.forceUpdate(function(){this.dirty=false;}.bind(this));this.lastBreakpointsToggles=v;}this.setupWeirdScrollTracking();}.bind(this),p;}n.prototype.componentDidMount=function(){this.setupWeirdScrollTracking();};n.prototype.render=function(){return (c('React').createElement('div',{ref:'outer'},this.props.children(this.props.breakpointsToggles(this.lastWidth,this.lastHeight)),c('React').createElement('div',{style:k,onScroll:this.onScroll,ref:'expand'},c('React').createElement('div',{style:l,ref:'expandChild'})),c('React').createElement('div',{style:k,onScroll:this.onScroll,ref:'shrink'},c('React').createElement('div',{style:m}))));};n.propTypes={children:j.func.isRequired,breakpointsToggles:j.func.isRequired};f.exports=n;}),null);
__d('MessengerGamesHorizontalLeaderboard.react',['cx','MessengerContactImage.react','MessengerHorizontalScroll.react','MessengerResponsiveBlock.react','Middot.react','React','Relay','RelayQL'],(function a(b,c,d,e,f,g,h){'use strict';var i=10,j=150,k=function o(p){var q=p.score,r=p.position;return (c('React').createElement('div',null,c('React').createElement('span',{className:"_4u4-"},'#',r),c('React').createElement(c('Middot.react'),null),q));},l=function o(p){var q=p.name,r=p.score,s=p.position;return (c('React').createElement('div',{className:"_4u4_"},c('React').createElement('h3',null,q),c('React').createElement(k,{position:s,score:r})));},m=function o(p,q){return (c('React').createElement('div',{className:"_4u50",key:q},c('React').createElement(c('MessengerContactImage.react'),{size:40,src:p.user.profile_picture.uri}),c('React').createElement(l,{name:p.user.short_name,position:q+1,score:p.score})));},n=function o(p){var q=p.leaderboard.leaderboard_entries;return (c('React').createElement(c('MessengerResponsiveBlock.react'),{breakpointsToggles:function r(s){return [s];}},function(r){var s=r[0];return (c('React').createElement(c('MessengerHorizontalScroll.react'),{batchScroll:true,childPadding:i,childWidth:j,numChildrenVisible:Math.floor(s/(j+i)),width:s||0},q.map(m)));}));};f.exports=c('Relay').createContainer(n,{fragments:{leaderboard:function o(){return function(){return {children:[{calls:[{kind:'Call',metadata:{},name:'scores_only',value:{kind:'CallValue',callValue:true}}],children:[{fieldName:'score',kind:'Field',metadata:{},type:'String'},{children:[{fieldName:'short_name',kind:'Field',metadata:{},type:'String'},{children:[{fieldName:'uri',kind:'Field',metadata:{},type:'Url'}],fieldName:'profile_picture',kind:'Field',metadata:{canHaveSubselections:true},type:'Image'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],fieldName:'user',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id'},type:'User'}],fieldName:'leaderboard_entries',kind:'Field',metadata:{canHaveSubselections:true,isPlural:true},type:'InstantGameLeaderboardEntry'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{},name:'MessengerGamesHorizontalLeaderboard_react_LeaderboardRelayQL',type:'InstantGameLeaderboard'};}();}}});}),null);
__d('MessengerGamesExpandedAdmin.react',['cx','fbt','MessengerButton.react','MessengerContactImage.react','MessengerGamesHorizontalLeaderboard.react','Link.react','React','Relay','RelayQL','idx'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=function n(o){var p=o.name,q=o.uri;return (c('React').createElement('div',{className:"_261_"},c('React').createElement(c('MessengerContactImage.react'),{size:25,src:q}),c('React').createElement('h2',{className:"_2620"},p)));};j=babelHelpers.inherits(m,c('React').PureComponent);k=j&&j.prototype;m.prototype.componentDidMount=function(){this.props.onLoad&&this.props.onLoad();};m.prototype.render=function(){var n,o,p,q,r,s=this.$MessengerGamesExpandedAdmin1(),t=this.$MessengerGamesExpandedAdmin2();if(!t||!s)return null;var u=(n=t)!=null?(o=n.game)!=null?o.name:o:n,v=(p=t)!=null?(q=p.game)!=null?(r=q.instant_game_info)!=null?r.icon_uri:r:q:p;return (c('React').createElement('div',null,c('React').createElement('div',{className:"_4ea2 _2kar"}),c('React').createElement(c('Link.react'),{className:"_fy2 _2621",'aria-haspopup':'true','aria-label':i._("View Less"),href:'#',onClick:this.props.hideAdmin,role:'button'}),c('React').createElement(l,{name:u,uri:v}),c('React').createElement('div',{className:"_2622"},t.expanded_text),c('React').createElement(c('MessengerGamesHorizontalLeaderboard.react'),{leaderboard:s}),c('React').createElement(c('MessengerButton.react'),{className:"_fy2 _2623",label:i._("Play Now"),onClick:this.props.playGame,type:'primary',use:'default'}),c('React').createElement('div',{className:"_4ea2 _2kar"})));};m.prototype.$MessengerGamesExpandedAdmin1=function(){var n;return (n=this.$MessengerGamesExpandedAdmin2())!=null?n.leaderboard:n;};m.prototype.$MessengerGamesExpandedAdmin2=function(){var n,o;return (n=this.props)!=null?(o=n.adminMessageText)!=null?o.extensible_message_admin_text:o:n;};function m(){j.apply(this,arguments);}f.exports=c('Relay').createContainer(m,{fragments:{adminMessageText:function n(){return function(o){return {children:[{fieldName:'__typename',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'String'},{children:[{children:[{fieldName:'__typename',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'String'},{children:[{children:[{fieldName:'name',kind:'Field',metadata:{},type:'String'},{children:[{fieldName:'icon_uri',kind:'Field',metadata:{},type:'Url'}],fieldName:'instant_game_info',kind:'Field',metadata:{canHaveSubselections:true},type:'GamesInstantPlayStyleInfo'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],fieldName:'game',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id'},type:'Application'},{fieldName:'expanded_text',kind:'Field',metadata:{},type:'String'},{children:[].concat.apply([],[{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'},c('RelayQL').__frag(o)]),fieldName:'leaderboard',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id'},type:'InstantGameLeaderboard'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{},name:'InstantGameUpdateExtensibleMessageAdminText',type:'InstantGameUpdateExtensibleMessageAdminText'}],fieldName:'extensible_message_admin_text',kind:'Field',metadata:{canHaveSubselections:true,isAbstract:true},type:'ExtensibleMessageAdminText'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{},name:'GenericAdminTextMessage',type:'GenericAdminTextMessage'},{children:[{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'},{fieldName:'__typename',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'String'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{isAbstract:true},name:'IdFragment',type:'Node'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{isAbstract:true},name:'MessengerGamesExpandedAdmin_react_AdminMessageTextRelayQL',type:'Message'};}(c('MessengerGamesHorizontalLeaderboard.react').getFragment('leaderboard'));}}});}),null);
__d('MessengerGamesExpandedAdminContainer.react',['fbt','MessengerGameAdminMessageRoute','MessengerGamesExpandedAdmin.react','React','Relay'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('Relay').RootContainer;i=babelHelpers.inherits(l,c('React').PureComponent);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.renderLoaded=function(r){var s=this.props,t=s.gameID,u=s.hideAdmin,v=s.playGame,w=s.threadFBID;return (c('React').createElement(c('MessengerGamesExpandedAdmin.react'),babelHelpers['extends']({},r,{gameID:t,hideAdmin:u,onLoad:this.props.onLoad,playGame:v,threadFBID:w})));}.bind(this),n;}l.prototype.render=function(){var m=this.props,n=m.messageID,o=m.threadFBID;return c('React').createElement(k,{Component:c('MessengerGamesExpandedAdmin.react'),route:new (c('MessengerGameAdminMessageRoute'))({messageData:{message_id:n,thread_id:o}}),renderLoading:this.renderLoading,renderFetched:this.renderLoaded,renderFailure:this.renderFailure});};l.prototype.renderLoading=function(){return null;};l.prototype.renderFailure=function(){return h._("Failed to load");};f.exports=l;}),null);
__d('MessengerGameAdminMessage.react',['cx','fbt','BootloadOnRender.react','ImmutableObject','JSResource','LazyComponent.react','Link.react','MercuryIDs','MessengerGamesExpandedAdminContainer.react','MessengerSpinner.react','QuicksilverConstants','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.state=this.$MessengerGameAdminMessage1(),this.$MessengerGameAdminMessage5=function(){this.setState({playerOpen:false});}.bind(this),this.$MessengerGameAdminMessage3=function(){this.setState({playerOpen:true});}.bind(this),this.$MessengerGameAdminMessage4=function(){this.setState({isExpanded:true});}.bind(this),this.$MessengerGameAdminMessage2=function(){this.setState({isExpanded:false});}.bind(this),o;}m.prototype.$MessengerGameAdminMessage1=function(){return {isExpanded:this.props.isLastOfType,playerOpen:false};};m.prototype.componentDidMount=function(){this.props.onLoad&&this.props.onLoad();};m.prototype.componentWillReceiveProps=function(n){if(this.props.isLastOfType!==n.isLastOfType)this.setState({isExpanded:n.isLastOfType});};m.prototype.getXMATData=function(){return this.props.message.log_message_data&&this.props.message.log_message_data.untypedData?new (c('ImmutableObject'))(this.props.message.log_message_data.untypedData):new (c('ImmutableObject'))();};m.prototype.render=function(){var n=this.getXMATData(),o=this.renderGame(n.game_id);switch(n.update_type){case 'game_score':return this.state.isExpanded?c('React').createElement('span',null,c('React').createElement(c('MessengerGamesExpandedAdminContainer.react'),{hideAdmin:this.$MessengerGameAdminMessage2,gameID:n.game_id,messageID:this.props.message.message_id,playGame:this.$MessengerGameAdminMessage3,threadFBID:c('MercuryIDs').getThreadFBIDFromThreadID(this.props.message.thread_id),onLoad:this.props.onLoad}),o):c('React').createElement('span',null,c('React').createElement('span',null,this.props.text,' '),c('React').createElement(c('Link.react'),{className:"_fy2",onClick:this.state.isExpanded?this.$MessengerGameAdminMessage2:this.$MessengerGameAdminMessage4},i._("View")),o);default:return c('React').createElement('span',null,this.props.text);}};m.prototype.renderGame=function(n){return this.state.playerOpen?c('React').createElement('div',{key:n},c('React').createElement(c('BootloadOnRender.react'),{loader:c('JSResource')('MessengerGamesQuicksilverPlayerContainer.react').__setRef('MessengerGameAdminMessage.react'),placeholder:c('React').createElement(c('MessengerSpinner.react'),null),component:c('React').createElement(c('LazyComponent.react'),{gameID:n,onHide:this.$MessengerGameAdminMessage5,source:c('QuicksilverConstants').FUNNEL_SOURCE_MESSENGER_ADMIN_MESSAGE,threadID:c('MercuryIDs').getThreadFBIDFromThreadID(this.props.message.thread_id)})})):null;};m.propTypes={message:l.instanceOf(c('ImmutableObject')).isRequired,text:l.string.isRequired,isLastOfType:l.bool.isRequired};f.exports=m;}),null);
__d("MessengerGroupPollingAllOptionsWebGraphQLQuery",["WebGraphQLQueryHelper"],(function a(b,c,d,e,f,g){'use strict';f.exports=c("WebGraphQLQueryHelper").getExports({docID:"894878613980595",queryID:"894878673980589"});}),null);
__d('MessengerGroupPollingUtils',['ix','CurrentUser','EditorState','FacepileRounded.react','MercuryConfig','MercuryIDs','MercuryParticipants','MessengerTextWithEntities.react','React','TextWithEntities.react','getVisibleValueForContentState','getVisibleValueForContentStateWithMessengerEmoji'],(function a(b,c,d,e,f,g,h){'use strict';var i=2,j={renderEmojiText:function k(l){if(c('MercuryConfig').MessengerNewEmojiGK){return (c('React').createElement(c('MessengerTextWithEntities.react'),{renderEmoji:true,renderEmoticons:true,text:l}));}else return (c('React').createElement(c('TextWithEntities.react'),{renderEmoji:true,renderEmoticons:true,text:l}));},getEmojiText:function k(l){var m=l.getCurrentContent();return c('MercuryConfig').MessengerNewEmojiGK?c('getVisibleValueForContentStateWithMessengerEmoji')(m):c('getVisibleValueForContentState')(m);},renderVoterFacepiles:function k(l,m,n,o,p){return (c('React').createElement(c('FacepileRounded.react'),{className:l,imageSize:m,direction:'descending',numProfilesToDisplay:i,remainingProfilesCount:n-i,profiles:this._getProfilePictures(o,p),showNames:true}));},_getProfilePictures:function k(l,m){if(m===true){var n=c('CurrentUser').getID(),o=l.indexOf(n);if(o!==-1){var p=l[o];l[o]=l[0];l[0]=p;}}var q=l.slice(0,i).map(function(s){var t=c('MercuryIDs').getParticipantIDFromUserID(s),u=c('MercuryParticipants').getOrFetch(t);return {image_src:u&&u.image_src||h('/images/silhouettes/person_50x50.png'),name:u&&u.name||'Facebook User'};}),r=l.slice(i,l.length).map(function(s){return {image_src:s,name:''};});return q.concat(r);}};f.exports=j;}),null);
__d('MessengerGroupPollingAdminMessage.react',['cx','fbt','ix','AsyncRequest','BootloadOnRender.react','Image.react','ImmutableObject','JSResource','Keys','LazyComponent.react','MessengerConfig','MessengerContextualDialog.react','MessengerEnvironment','MessengerGroupPollingAllOptionsWebGraphQLQuery','MessengerGroupPollingUtils','MessengerSpinner.react','React','idx'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('React').PropTypes,n=16,o=24,p=j('/images/mercury/clients/messenger/group_polling/group-polling-icon.png'),q=j('/images/mercury/clients/messenger/group_polling/group-polling-fb-icon.png'),r=3;k=babelHelpers.inherits(s,c('React').Component);l=k&&k.prototype;function s(){var t,u;for(var v=arguments.length,w=Array(v),x=0;x<v;x++)w[x]=arguments[x];return u=(t=l.constructor).call.apply(t,[this].concat(w)),this.state={flyoutOpen:false,options:null},this.$MessengerGroupPollingAdminMessage1=false,this.$MessengerGroupPollingAdminMessage3=function(y){this.setState({flyoutOpen:y});}.bind(this),this.$MessengerGroupPollingAdminMessage4=function(){this.setState({flyoutOpen:false});}.bind(this),this.$MessengerGroupPollingAdminMessage8=function(y){this.$MessengerGroupPollingAdminMessage1=this.state.flyoutOpen;}.bind(this),this.$MessengerGroupPollingAdminMessage7=function(y){y.stopPropagation();if(this.state.flyoutOpen||this.$MessengerGroupPollingAdminMessage1)return;if(!this.state.options&&!this.state.flyoutOpen)this.$MessengerGroupPollingAdminMessage9();this.setState({flyoutOpen:!this.state.flyoutOpen});}.bind(this),u;}s.prototype.render=function(){var t,u,v,w,x,y;if(!c('MessengerConfig').ShowGroupPollingInterface)return this.$MessengerGroupPollingAdminMessage2();var z=c('MessengerGroupPollingUtils').renderEmojiText(this.props.message.log_message_body),aa=c('MessengerEnvironment').messengerui;if(!this.props.isLastOfType&&(!this.state.flyoutOpen||!aa))return z;var ba=(t=this.props.message)!=null?(u=t.log_message_data)!=null?(v=u.untypedData)!=null?v.question_json:v:u:t,ca=ba&&JSON.parse(ba);if(!ca)return this.$MessengerGroupPollingAdminMessage2();var da=aa?o:n,ea=c('React').createElement('div',{className:"_8bt"+(!aa?' '+"_5il4":'')},c('React').createElement(c('MessengerSpinner.react'),{color:'grey'})),fa=null;if(this.state.flyoutOpen)fa=c('React').createElement(c('MessengerContextualDialog.react'),{contextRef:function(){return this.refs.voteButton;}.bind(this),shown:this.state.flyoutOpen,onToggle:this.$MessengerGroupPollingAdminMessage3,onBlur:this.$MessengerGroupPollingAdminMessage4},c('React').createElement(c('BootloadOnRender.react'),{component:c('React').createElement(c('LazyComponent.react'),{questionID:ca.id,questionText:ca.text,options:this.state.options,onSubmitHandler:this.$MessengerGroupPollingAdminMessage4}),loader:c('JSResource')('MessengerGroupPollingFlyout.react').__setRef('MessengerGroupPollingAdminMessage.react'),placeholder:ea}));var ga=((w=ca)!=null?(x=w.options)!=null?(y=x[0])!=null?y.total_count:y:x:w)||0,ha=ca.options.map(function(ja){return c('React').createElement('div',{className:"_3b4a"+(!aa?' '+"_4ic5":''),key:ja.id},c('React').createElement('div',{className:"_3b4c"},c('React').createElement('div',{className:(aa?"_3b4f":'')+(!aa?' '+"_4ic6":'')},c('MessengerGroupPollingUtils').renderEmojiText(ja.text)),c('MessengerGroupPollingUtils').renderVoterFacepiles("_4ic7"+(!aa?' '+"_8kg":''),da,ja.total_count,ja.voters,ja.viewer_has_voted==='true')),c('React').createElement('div',{className:"_3b4h"+(!aa?' '+"_4ic8":'')},c('React').createElement('span',{style:{width:this.$MessengerGroupPollingAdminMessage5(ja.total_count,ga)}})));}.bind(this)),ia=ca.viewer_has_voted==='true'?i._("Change Vote"):i._("Vote");return c('React').createElement('div',null,z,c('React').createElement('div',{className:"_3b4t"+(!aa?' '+"_4ic9":'')},c('React').createElement('div',{className:"_3b4u"+(!aa?' '+"_2wew":'')},c('React').createElement(c('Image.react'),{className:"_4ica"+(!aa?' '+"_2ozk":''),src:aa?p:q}),i._("Poll")),c('React').createElement('div',{className:(aa?"_3b4v":'')+(!aa?' '+"_2wex":'')},c('MessengerGroupPollingUtils').renderEmojiText(ca.text)),c('React').createElement('div',{className:"_3b4w"},ha),c('React').createElement('div',{className:"_8bu"},this.$MessengerGroupPollingAdminMessage6(ca.total_count)),c('React').createElement('div',{className:"_4icb"+(!aa?' '+"_4icc":'')+(aa?' '+"uiContextualLayerParent":'')+(aa?' '+"_5f0v":''),onClick:this.$MessengerGroupPollingAdminMessage7,onMouseDown:this.$MessengerGroupPollingAdminMessage8,ref:'voteButton',role:'button',tabIndex:'0'},ia,fa)));};s.prototype.$MessengerGroupPollingAdminMessage2=function(){return c('React').createElement('span',null,i._("{original-admin-message} Use the mobile app to vote.",[i.param('original-admin-message',this.props.message.log_message_body)]));};s.prototype.$MessengerGroupPollingAdminMessage6=function(t){var u=t-r;if(u<=0){return null;}else return i._({"*":"{number of remaining answer options} more options...","268435456":"{number of remaining answer options} more option..."},[i.param('number of remaining answer options',u),i.plural(u)]);};s.prototype.$MessengerGroupPollingAdminMessage9=function(){var t,u,v,w=(t=this.props.message)!=null?(u=t.log_message_data)!=null?(v=u.untypedData)!=null?v.question_id:v:u:t;if(!w){this.setState({options:[]});return;}var x=c('MessengerGroupPollingAllOptionsWebGraphQLQuery').getURI({node_id:w});new (c('AsyncRequest'))().setURI(x).setHandler(function(y){var z=y.payload.data.node,aa=z.options.edges||[],ba=aa.map(function(ca){return ca.node;});this.setState({options:ba});}.bind(this)).send();};s.prototype.$MessengerGroupPollingAdminMessage5=function(t,u){return (u===0?'0%':t/u*100+'%');};s.propTypes={message:m.instanceOf(c('ImmutableObject')).isRequired,isLastOfType:m.bool.isRequired};f.exports=s;}),null);
__d('MercuryXMATRenderer',['cx','fbt','invariant','MercuryConfig','MercuryIDs','MercuryParticipants','MessagingGenericAdminTextType','MessengerGameAdminMessage.react','MessengerGroupPollingAdminMessage.react','MessengerTextWithEntities.react','MNAdsMessageUtils','React','TextWithEntities.react','FacepileRounded.react'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k={renderText:function l(m,n,o){var p=null;if(c('MercuryConfig').MessengerNewEmojiGK){p=c('React').createElement(c('MessengerTextWithEntities.react'),{renderEmoji:true,renderEmoticons:true,text:m.log_message_body});}else p=c('React').createElement(c('TextWithEntities.react'),{renderEmoji:true,renderEmoticons:true,text:m.log_message_body});switch(m.log_message_data.message_type){case c('MessagingGenericAdminTextType').TURN_ON_PUSH:var q=m.log_message_data.untypedData&&m.log_message_data.untypedData.recipient_id,r=q&&c('MercuryParticipants').getNow(c('MercuryIDs').getParticipantIDFromUserID(q)),s=c('MercuryIDs').getUserIDFromParticipantID(m.author);!!s||j(0);var t=c('MercuryParticipants').getNow(c('MercuryIDs').getParticipantIDFromUserID(s));if(s!==m.other_user_fbid){if(r){p=i._("You asked {admin-text-message} to turn on notifications for Messenger on mobile.",[i.param('admin-text-message',r.name)]);}else p=i._("You asked a contact to turn on notifications for Messenger on mobile.");}else if(t){p=i._("{admin-text-message} asked you to turn on notifications for Messenger on mobile.",[i.param('admin-text-message',t.name)]);}else p=i._("A contact asked you to turn on notifications for Messenger on mobile.");break;case c('MessagingGenericAdminTextType').JOURNEY_PROMPT_COLOR:p=i._("You need to be on the latest version of Messenger on a mobile device to pick a colour for this conversation.");break;case c('MessagingGenericAdminTextType').JOURNEY_PROMPT_NICKNAME:var u=null,v=c('MercuryIDs').getUserIDFromParticipantID(m.author);if(m.other_user_fbid&&v!==m.other_user_fbid){var w=c('MercuryIDs').getParticipantIDFromUserID(m.other_user_fbid);u=c('MercuryParticipants').getOrFetch(w);}if(u&&u.short_name){p=i._("You need to be using the latest version of Messenger on a mobile device to set a nickname for {admin-text-message}.",[i.param('admin-text-message',u.short_name)]);}else p=i._("You need to be on the latest version of Messenger on a mobile device to set a nickname for yourself.");break;case c('MessagingGenericAdminTextType').JOURNEY_PROMPT_LIKE:p=i._("You need to be on the latest version of Messenger on a mobile device to pick an emoji for this conversation.");break;case c('MessagingGenericAdminTextType').JOURNEY_PROMPT_BOT:p=i._("You need to be on the latest version of Messenger on a mobile device to add a subscription to this conversation.");break;case c('MessagingGenericAdminTextType').INSTANT_GAME_UPDATE:if(c('MercuryConfig').MessengerGamesGK)p=c('React').createElement(c('MessengerGameAdminMessage.react'),{message:m,text:m.log_message_body,isLastOfType:n,onLoad:o});break;case c('MessagingGenericAdminTextType').ADS_WELCOME_MSG:break;case c('MessagingGenericAdminTextType').AD_MANAGE_MESSAGE:if(c('MNAdsMessageUtils').isAdsAdminMessage(m))p=c('MNAdsMessageUtils').getAdsPageManage(m,false);break;case c('MessagingGenericAdminTextType').CONFIRM_FRIEND_REQUEST:var x=m.log_message_data.untypedData.friend_request_recipient,y=m.log_message_data.untypedData.friend_request_sender,z=c('MercuryParticipants').getNow(c('MercuryIDs').getParticipantIDFromUserID(x)),aa=c('MercuryParticipants').getNow(c('MercuryIDs').getParticipantIDFromUserID(y));if(aa!=null&&z!=null)p=c('React').createElement(c('FacepileRounded.react'),{profiles:[z,aa],message:m.log_message_body,numProfilesToDisplay:2,className:"_8lx"});break;case c('MessagingGenericAdminTextType').THREAD_JOINABLE_PROMOTION_TEXT:p=i._("Want more people to join? Share your room.");break;case c('MessagingGenericAdminTextType').GROUP_POLL:p=c('React').createElement(c('MessengerGroupPollingAdminMessage.react'),{message:m,isLastOfType:n});break;default:break;}return c('React').createElement('span',null,p);}};f.exports=k;}),null);
__d('P2PBigAmount.react',['cx','ix','MessengerEnvironment','Image.react','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.getImage=function(){if(this.isMessengerDotCom()){if(this.props.isPending){if(this.props.size==='large'){return i('/images/p2p/message-icon-dark-gray-large.png');}else return i('/images/p2p/message-icon-dark-gray.png');}else if(this.props.size==='large'){return i('/images/p2p/message-icon-messenger-blue.png');}else return i('/images/p2p/message-icon-blue.png');}else if(this.props.isPending){if(this.props.size==='large'){return i('/images/p2p/message-icon-gray-large.png');}else return i('/images/p2p/message-icon-gray.png');}else if(this.props.size==='large'){return i('/images/p2p/message-icon-facebook-blue.png');}else return i('/images/p2p/message-icon-www-blue.png');}.bind(this),this.isMessengerDotCom=function(){return c('MessengerEnvironment').messengerui;},o;}m.prototype.render=function(){var n=this.props.size==='large'?'24':'16';return (c('React').createElement('div',{className:"_8j6"+(this.isMessengerDotCom()?' '+"_8j7":'')+(this.props.size==='large'?' '+"_1fv":'')},c('React').createElement('div',{className:"_8j8"},c('React').createElement(c('Image.react'),{height:n,src:this.getImage(),width:n})),c('React').createElement('div',{className:"_8jc"+(this.props.isPending?' '+"_8jd":'')+(this.props.amount.length>=8?' '+"_8je":'')+(' '+"_3oh-")},this.props.amount)));};m.propTypes={amount:l.string.isRequired,isPending:l.bool,size:l.oneOf(['medium','large'])};m.defaultProps={size:'medium'};f.exports=m;}),null);
__d('P2PGroupSendReceiptDialog.react',['cx','fbt','MessengerEnvironment','Image.react','Link.react','P2PAmountUtils','P2PButton.react','P2PBigAmount.react','P2PDialog.react','P2PDialogBody.react','P2PDialogFooter.react','P2PDialogTitle.react','P2PLinkConstants','P2PLogger','P2PPaymentLoggerEvent','P2PPaymentLoggerEventFlow','P2PText.react','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.log=function(s,t){c('P2PLogger').log(s,babelHelpers['extends']({www_event_flow:this.props.eventFlow},t));}.bind(this),this.handleClose=function(){this.log(c('P2PPaymentLoggerEvent').UI_ACTN_3RD_PARTY_RECEIPT_DISMISSED);this.props.onClose();}.bind(this),this.renderParticipantRow=function(s,t){var u=void 0;if(t){u=i._("From");}else u=i._("To");return (c('React').createElement('li',{className:"_2chg",key:s.id},c('React').createElement('div',{className:"_2chh"},c('React').createElement(c('Link.react'),{href:s.profile_uri,onClick:this.props.onClose},c('React').createElement(c('Image.react'),{height:50,src:s.picture,width:50}))),c('React').createElement('div',{className:"_2chi"},c('React').createElement(c('P2PText.react'),{type:'primary'},c('React').createElement(c('P2PText.react'),{type:'secondary'},u),s.full_name))));}.bind(this),o;}m.prototype.componentDidMount=function(){this.log(c('P2PPaymentLoggerEvent').UI_ACTN_3RD_PARTY_RECEIPT_SHOWN,{raw_amount:this.props.amount});};m.prototype.render=function(){var n=c('MessengerEnvironment').messengerui,o=n?380:360,p=this.props.title;return (c('React').createElement(c('P2PDialog.react'),{className:n?"_bpv":'',layerHideOnBlur:false,onToggle:this.props.onClose,width:o},c('React').createElement(c('P2PDialogTitle.react'),null,p),c('React').createElement(c('P2PDialogBody.react'),null,c('React').createElement('ul',null,this.renderParticipantRow(this.props.sender,true),this.renderParticipantRow(this.props.receiver,false)),c('React').createElement('div',{className:"_bpy"},c('React').createElement(c('P2PBigAmount.react'),{amount:c('P2PAmountUtils').sanitizeAmount(this.props.amount),isPending:this.props.isGrayAmount,size:'large'})),c('React').createElement(c('P2PText.react'),{className:"_bpt",size:'small',type:'secondary'},this.props.bodyText,' ',c('React').createElement(c('Link.react'),{className:"_1ed3",href:c('P2PLinkConstants').helpCenterURI,target:'_blank'},i._("Learn More")))),c('React').createElement(c('P2PDialogFooter.react'),null,c('React').createElement(c('P2PButton.react'),{label:i._("OK"),onClick:this.handleClose,type:'primary'}))));};m.propTypes={amount:l.string.isRequired,eventFlow:l.string,isGrayAmount:l.bool,onClose:l.func.isRequired,receiver:l.object.isRequired,sender:l.object.isRequired,title:l.node};m.defaultProps={bodyText:i._("You can send money to friends in groups."),eventFlow:c('P2PPaymentLoggerEventFlow').UI_FLOW_P2P_GROUP_SEND,isGrayAmount:false,title:i._("Payment Details")};f.exports=m;}),null);
__d('P2PGroupPaymentRequestReceiptDialog.react',['fbt','P2PActions','P2PPaymentLoggerEventFlow','P2PGroupSendReceiptDialog.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.render=function(){return (c('React').createElement(c('P2PGroupSendReceiptDialog.react'),{amount:this.props.amount,bodyText:h._("You can send payment requests to friends in groups"),eventFlow:c('P2PPaymentLoggerEventFlow').UI_FLOW_P2P_GROUP_REQUEST,isGrayAmount:true,onClose:this.props.onClose||c('P2PActions').hideDialog,title:h._("Payment request details"),receiver:this.props.requestee,sender:this.props.requester}));};function l(){i.apply(this,arguments);}l.propTypes={amount:k.string,onClose:k.func,requestee:k.object.isRequired,requester:k.object.isRequired};f.exports=l;}),null);
__d("XP2PPaymentRequestReceiptController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/p2p\/payment_request\/",{id:{type:"String",required:true}});}),null);
__d("XP2PTransactionDetailController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/p2p\/transaction\/",{id:{type:"String",required:true}});}),null);
__d('P2PMercuryLogMessage.react',['cx','fbt','MessengerEnvironment','CurrentUser','Link.react','MercuryIDs','P2PGroupPaymentRequestReceiptDialog.react','P2PGroupSendReceiptDialog.react','P2PPaymentLogMessageSubtype','React','ReactLayeredComponentMixin_DEPRECATED','XP2PPaymentRequestReceiptController','XP2PTransactionDetailController'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c('React').PropTypes,k=c('React').createClass({displayName:'P2PMercuryLogMessage',mixins:[c('ReactLayeredComponentMixin_DEPRECATED')],propTypes:{amount:j.string,receiver:j.object.isRequired,sender:j.object.isRequired,subtype:j.oneOf(Object.keys(c('P2PPaymentLogMessageSubtype')).map(function(l){return c('P2PPaymentLogMessageSubtype')[l];})),transferID:j.string.isRequired,threadFBID:j.string,threadID:j.string},getDefaultProps:function l(){return {amount:'',sender:null,receiver:null,subtype:null};},getInitialState:function l(){return {groupPaymentRequestReceiptDetailsShown:false,groupSendReceiptDetailsShown:false};},handleGroupDetailsLinkClicked:function l(){this.setState({groupSendReceiptDetailsShown:true});},handleGroupPaymentRequestDetailsLinkClicked:function l(){this.setState({groupPaymentRequestReceiptDetailsShown:true});},handleThirdPartyReceiptDialogClosed:function l(){this.setState({groupPaymentRequestReceiptDetailsShown:false,groupSendReceiptDetailsShown:false});},isViewerSender:function l(){return (c('MercuryIDs').getUserIDFromParticipantID(this.props.sender.id)===c('CurrentUser').getID());},isViewerReceiver:function l(){return (c('MercuryIDs').getUserIDFromParticipantID(this.props.receiver.id)===c('CurrentUser').getID());},renderPaymentRequestDetailsLink:function l(){var m=c('XP2PPaymentRequestReceiptController').getURIBuilder().setString('id',this.props.transferID).getURI();return (c('React').createElement(c('Link.react'),{className:"_kiq",href:m,target:'_blank'},i._("See details")));},renderTransferDetailsLink:function l(){var m=c('XP2PTransactionDetailController').getURIBuilder().setString('id',this.props.transferID).getURI();return (c('React').createElement(c('Link.react'),{className:"_kiq",href:m,target:'_blank'},i._("See details")));},renderGroupDetailsLink:function l(){return (c('React').createElement(c('Link.react'),{className:"_kiq",href:'#',onClick:this.handleGroupDetailsLinkClicked},i._("See details")));},renderGroupPaymentRequestDetailsLink:function l(){return (c('React').createElement(c('Link.react'),{className:"_kiq",href:'#',onClick:this.handleGroupPaymentRequestDetailsLinkClicked},i._("See details")));},renderLayers:function l(){var m={},n={full_name:this.props.receiver.name,id:this.props.receiver.id,picture:this.props.receiver.image_src,profile_uri:this.props.receiver.href},o={full_name:this.props.sender.name,id:this.props.sender.id,picture:this.props.sender.image_src,profile_uri:this.props.sender.href};if(this.state.groupSendReceiptDetailsShown){m.groupSendReceiptDetailsDialog=c('React').createElement(c('P2PGroupSendReceiptDialog.react'),{amount:this.props.amount,onClose:this.handleThirdPartyReceiptDialogClosed,receiver:n,sender:o});}else if(this.state.groupPaymentRequestReceiptDetailsShown)m.groupPaymentRequestReceiptDetailsDialog=c('React').createElement(c('P2PGroupPaymentRequestReceiptDialog.react'),{amount:this.props.amount,onClose:this.handleThirdPartyReceiptDialogClosed,requestee:n,requester:o});return m;},render:function l(){var m=null,n=this.props.amount,o=this.props.subtype,p=this.isViewerSender(),q=this.isViewerReceiver(),r=void 0;if(!p&&!q){r=this.renderGroupDetailsLink();}else r=this.renderTransferDetailsLink();switch(o){case c('P2PPaymentLogMessageSubtype').SENT_IN_GROUP:m=i._("{sendername} sent {amount} to {receivername}. {details}",[i.param('sendername',this.props.sender.name),i.param('amount',n),i.param('receivername',this.props.receiver.name),i.param('details',r)]);break;case c('P2PPaymentLogMessageSubtype').CANCELED_EXPIRED:case c('P2PPaymentLogMessageSubtype').CANCELED_SAME_CARD:case c('P2PPaymentLogMessageSubtype').CANCELED_SENDER_RISK:case c('P2PPaymentLogMessageSubtype').CANCELED_RECIPIENT_RISK:case c('P2PPaymentLogMessageSubtype').CANCELED_CUSTOMER_SERVICE:if(p){m=i._("Your payment of {amount} was cancelled. {details}",[i.param('amount',n),i.param('details',this.renderTransferDetailsLink())]);}else if(q){m=i._("{name}'s payment of {amount} was cancelled. {details}",[i.param('name',this.props.sender.name),i.param('amount',n),i.param('details',this.renderTransferDetailsLink())]);}else m=i._("{sender_name}'s payment of {amount} to {receiver_name} was cancelled. {details}",[i.param('sender_name',this.props.sender.name),i.param('amount',n),i.param('receiver_name',this.props.receiver.name),i.param('details',r)]);m=c('React').createElement('span',{className:"_5rdx"},m);break;case c('P2PPaymentLogMessageSubtype').CANCELED_DECLINED:if(p){m=i._("{name} didn't accept your payment of {amount}. {details}",[i.param('name',this.props.receiver.name),i.param('amount',n),i.param('details',this.renderTransferDetailsLink())]);}else if(q){m=i._("You didn't accept {name}'s payment of {amount}. {details}",[i.param('name',this.props.sender.name),i.param('amount',n),i.param('details',this.renderTransferDetailsLink())]);}else m=i._("{receiver_name} didn't accept {sender_name}'s payment of {amount}. {details}",[i.param('receiver_name',this.props.receiver.name),i.param('sender_name',this.props.sender.name),i.param('amount',n),i.param('details',r)]);m=c('React').createElement('span',{className:"_5rdx"},m);break;case c('P2PPaymentLogMessageSubtype').REQUEST_CANCELED_BY_REQUESTER:if(p){m=i._("You cancelled your request for {payment request amount}. {details}",[i.param('payment request amount',n),i.param('details',this.renderPaymentRequestDetailsLink())]);}else if(q){m=i._("{sender's name} cancelled their request for {payment request amount}. {details}",[i.param('sender\'s name',this.props.sender.name),i.param('payment request amount',n),i.param('details',this.renderPaymentRequestDetailsLink())]);}else m=i._("{sender's name} cancelled their request for {payment request amount} from {receiver's name}. {details}",[i.param('sender\'s name',this.props.sender.name),i.param('payment request amount',n),i.param('receiver\'s name',this.props.receiver.name),i.param('details',this.renderGroupPaymentRequestDetailsLink())]);m=c('React').createElement('span',{className:"_5rdx"},m);break;case c('P2PPaymentLogMessageSubtype').REQUEST_DECLINED_BY_REQUESTEE:if(p){m=i._("{receiver's name} declined your request for {payment request amount}. {details}",[i.param('receiver\'s name',this.props.receiver.name),i.param('payment request amount',n),i.param('details',this.renderPaymentRequestDetailsLink())]);}else if(q){m=i._("You declined {sender's name}'s request for {payment request amount}. {details}",[i.param('sender\'s name',this.props.sender.name),i.param('payment request amount',n),i.param('details',this.renderPaymentRequestDetailsLink())]);}else m=i._("{receiver's name} declined {sender's name}'s request for {payment request amount}. {details}",[i.param('receiver\'s name',this.props.receiver.name),i.param('sender\'s name',this.props.sender.name),i.param('payment request amount',n),i.param('details',this.renderGroupPaymentRequestDetailsLink())]);m=c('React').createElement('span',{className:"_5rdx"},m);break;case c('P2PPaymentLogMessageSubtype').REQUEST_EXPIRED:if(p){m=i._("Your request for {payment request amount} expired, so it was cancelled. {details}",[i.param('payment request amount',n),i.param('details',this.renderPaymentRequestDetailsLink())]);}else if(q){m=i._("{sender's name}'s request for {payment request amount} expired so it was cancelled. {details}",[i.param('sender\'s name',this.props.sender.name),i.param('payment request amount',n),i.param('details',this.renderPaymentRequestDetailsLink())]);}else m=i._("{sender's name}'s request to {receiver's name} for {payment request amount} expired so it was cancelled. {details}",[i.param('sender\'s name',this.props.sender.name),i.param('receiver\'s name',this.props.receiver.name),i.param('payment request amount',n),i.param('details',this.renderGroupPaymentRequestDetailsLink())]);m=c('React').createElement('span',{className:"_5rdx"},m);break;}return (c('React').createElement('div',{className:c('MessengerEnvironment').messengerui?"_5rdy":''},m));}});f.exports=k;}),null);
__d('MessengerLogMessageBody.react',['fbt','immutable','ImmutableObject','MercuryIDs','MercuryParticipants','MercuryLogMessageType','MessengerAdminGroupUtils','P2PMercuryLogMessage.react','ReactComponentWithPureRenderMixin','React','StoreAndPropBasedStateMixin'],(function a(b,c,d,e,f,g,h){var i=c('React').PropTypes,j=c('React').createClass({displayName:'MessengerLogMessageBody',_viewer:'',mixins:[c('ReactComponentWithPureRenderMixin'),c('StoreAndPropBasedStateMixin')(c('MercuryParticipants'))],propTypes:{thread:i.instanceOf(c('ImmutableObject')),message:i.instanceOf(c('ImmutableObject')).isRequired,viewer:i.string.isRequired},statics:{calculateState:function k(l){var m=[],n=l.message,o=n.log_message_data,p=n.log_message_type;switch(p){case c('MercuryLogMessageType').SUBSCRIBE:m=o.added_participants;break;case c('MercuryLogMessageType').UNSUBSCRIBE:m=o.removed_participants;break;case c('MercuryLogMessageType').ORION:m.push(o.senderId,o.receiverId);break;}if(!m||!m.length)return {};var q=c('immutable').Map().withMutations(function(r){m.forEach(function(s){r.set(s,c('MercuryParticipants').getOrFetch(s)||{});});});return {extraParticipants:q};}},render:function k(){var l=this.props.message.log_message_type;this._viewer=c('MercuryIDs').getParticipantIDFromUserID(this.props.viewer);if(this._viewer!==this.props.message.author&&l!==c('MercuryLogMessageType').ORION)return null;var m=c('MessengerAdminGroupUtils').isJoinableThread(this.props.thread);switch(l){case c('MercuryLogMessageType').SUBSCRIBE:return (c('React').createElement('span',null,this._renderSubscribeMessage(this.props.message)));case c('MercuryLogMessageType').UNSUBSCRIBE:if(m)return (c('React').createElement('span',null,this._renderUnsubscribeMessageForRoom(this.props.message)));return (c('React').createElement('span',null,this._renderUnsubscribeMessage(this.props.message)));case c('MercuryLogMessageType').THREAD_NAME:var n=this.props.message.log_message_data;if(m){if(!n.name)return (c('React').createElement('span',null,h._("You removed the room name.")));return (c('React').createElement('span',null,h._("You named the room {the new name of the group}.",[h.param('the new name of the group',n.name)])));}if(!n.name)return (c('React').createElement('span',null,h._("You removed the group name.")));return (c('React').createElement('span',null,h._("You named the group {the new name of the group}.",[h.param('the new name of the group',n.name)])));case c('MercuryLogMessageType').THREAD_IMAGE:if(m)return (c('React').createElement('span',null,h._("You changed the room photo.")));return (c('React').createElement('span',null,h._("You changed the group photo.")));case c('MercuryLogMessageType').ORION:return this._renderP2PLogMessage(this.props.message);default:return null;}},_renderP2PLogMessage:function k(l){var m=l.log_message_data,n=m.senderId,o=m.receiverId,p=this.state.extraParticipants,q=p.get(n),r=p.get(o);return (c('React').createElement(c('P2PMercuryLogMessage.react'),{amount:m.formattedAmount,receiver:r,sender:q,subtype:m.subtype,threadFBID:l.thread_fbid,threadID:l.thread_id,transferID:m.transfer_id}));},_renderSubscribeMessage:function k(l){var m=this._moveCurrentUserToFront(l.log_message_data.added_participants),n=this.state.extraParticipants;switch(m.length){case 1:return h._("You added {subscriber1}.",[h.param('subscriber1',n.get(m[0]).name)]);case 2:return h._("You added {subscriber1} and {subscriber2}.",[h.param('subscriber1',n.get(m[0]).name),h.param('subscriber2',n.get(m[1]).name)]);case 3:return h._("You added {subscriber1}, {subscriber2} and {subscriber3}.",[h.param('subscriber1',n.get(m[0]).name),h.param('subscriber2',n.get(m[1]).name),h.param('subscriber3',n.get(m[2]).name)]);default:var o=m.map(function(p){return n.get(p);});return h._("You added {subscriber1}, {subscriber2} and {num} other people.",[h.param('subscriber1',o[0].name),h.param('subscriber2',o[1].name),h.param('num',o.slice(2).length)]);}},_renderUnsubscribeMessage:function k(l){var m=this.state.extraParticipants,n=l.log_message_data.removed_participants[0],o=m.get(n);if(!n||n===l.author){return h._("You left the conversation.");}else return h._("You removed {name} from the conversation.",[h.param('name',o.name)]);},_renderUnsubscribeMessageForRoom:function k(l){var m=this.state.extraParticipants,n=l.log_message_data.removed_participants[0],o=m.get(n);if(!n||n===l.author){return h._("You left the room.");}else return h._("You removed {name} from the room.",[h.param('name',o.name)]);},_moveCurrentUserToFront:function k(l){var m=this._viewer,n=l.indexOf(m);if(n>0){var o=l.filter(function(p){return p!==m;});return [m].concat(o);}return l;}});f.exports=j;}),null);
__d('MessengerLogMessage.react',['cx','ix','Image.react','ImmutableObject','MercuryLogMessageType','MercuryMessageInfo','MercuryXMATRenderer','MessengerLogMessageBody.react','MNCommerceLogMessageUtils','React','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes,m=i('/images/mercury/clients/messenger/message/messageStateFailed.png');j=babelHelpers.inherits(n,c('React').PureComponent);k=j&&j.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.$MessengerLogMessage4=function(){var t=this.props.message;if(c('MNCommerceLogMessageUtils').isCommercePageAdminMessage(t))return c('MNCommerceLogMessageUtils').getCommercePageManage(t,true);return null;}.bind(this),this.$MessengerLogMessage2=function(){if(!c('MercuryMessageInfo').hasError(this.props.message))return null;return (c('React').createElement(c('Image.react'),{className:"_41-9",src:m}));}.bind(this),p;}n.prototype.render=function(){return c('React').createElement('div',{className:this.$MessengerLogMessage1()},this.$MessengerLogMessage2(),c('React').createElement('i',{className:"_uwa"}),c('React').createElement('span',{className:"_3oh-"},this.$MessengerLogMessage3()));};n.prototype.$MessengerLogMessage3=function(){var o=void 0;if(this.props.message.log_message_type!==c('MercuryLogMessageType').ORION)o=c('MercuryXMATRenderer').renderText(this.props.message,this.props.isLastOfType,this.props.onImageLoad);return this.$MessengerLogMessage4()||o||c('React').createElement(c('MessengerLogMessageBody.react'),{message:this.props.message,viewer:this.props.viewer,thread:this.props.thread});};n.prototype.$MessengerLogMessage1=function(){var o=void 0,p=this.props.message,q=p.log_message_type===c('MercuryLogMessageType').UNSUBSCRIBE&&p.log_message_data.removed_participants.indexOf(p.author)!==-1,r=this.props.viewer;switch(p.log_message_type){case c('MercuryLogMessageType').SUBSCRIBE:o="_uwb";break;case c('MercuryLogMessageType').UNSUBSCRIBE:o=q?"_uwc":"_uwe";break;case c('MercuryLogMessageType').PHONE_CALL:o=p.log_message_data.caller.indexOf(r)!==-1?"_uwf":"_uwg";break;case c('MercuryLogMessageType').VIDEO_CALL:o=p.log_message_data.caller.indexOf(r)!==-1?"_uwh":"_uwi";break;case c('MercuryLogMessageType').THREAD_NAME:o="_uwj";break;case c('MercuryLogMessageType').THREAD_IMAGE:o="_uwk";break;case c('MercuryLogMessageType').SERVER_ERROR:o="_uwl";break;case c('MercuryLogMessageType').LIVE_LISTEN:o="_uwm";break;case c('MercuryLogMessageType').WALLPAPER:o="_uwn";break;case c('MercuryLogMessageType').ORION:o="_uwo";break;case c('MercuryLogMessageType').SWITCH_TO_WORK:o="_uwp";break;case c('MercuryLogMessageType').PAGE_REPLY:o="_uwq";break;}return c('joinClasses')("_497p"+((p.log_message_type===c('MercuryLogMessageType').PHONE_CALL||p.log_message_type===c('MercuryLogMessageType').VIDEO_CALL)&&!p.log_message_data.answered?' '+"_3no3":'')+(p.log_message_data&&p.log_message_data.message_type?' '+"_11es":''),o);};n.propTypes={message:l.instanceOf(c('ImmutableObject')).isRequired,viewer:l.string.isRequired,isLastOfType:l.bool.isRequired,onImageLoad:l.func};f.exports=n;}),null);
__d('MessengerContextualActions.react',['cx','ContextualLayerUpdateOnScroll','LayerHideOnBlur','Link.react','React','ReactAbstractContextualDialog','ReactLayer'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k,l,m=c('React').PropTypes,n=c('ReactLayer').createClass(c('ReactAbstractContextualDialog').createSpec({displayName:'MessengerContextualActionsDialog',theme:{wrapperClassName:"_hw2",arrowDimensions:{offset:12,length:12}}}));i=babelHelpers.inherits(o,c('React').Component);j=i&&i.prototype;o.prototype.render=function(){var q=this.props,r=q.children,s=babelHelpers.objectWithoutProperties(q,['children']);return (c('React').createElement(n,babelHelpers['extends']({alignment:'center',behaviors:{ContextualLayerUpdateOnScroll:c('ContextualLayerUpdateOnScroll'),LayerHideOnBlur:c('LayerHideOnBlur')}},s,{onToggle:this.props.onToggle}),c('React').createElement('ul',{className:"_hw3"},r)));};function o(){i.apply(this,arguments);}o.propTypes={onToggle:m.func};o.Item=p;k=babelHelpers.inherits(p,c('React').Component);l=k&&k.prototype;p.prototype.render=function(){return (c('React').createElement('li',{className:"_hw4"},c('React').createElement(c('Link.react'),{className:"_hw5",onClick:this.props.onClick},this.props.children)));};function p(){k.apply(this,arguments);}p.propTypes={onClick:m.func};f.exports=o;}),null);
__d('MessengerSaveMessageDialog.react',['fbt','CollectionCurationReferrerTags','CollectionCurationReferrerParamNames','Link.react','MessengerDialog.react','messengerDialogBodyReact','MessengerDialogHeader.react','React','URI','setTimeout','clearTimeout'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('messengerDialogBodyReact').comp,l=c('React').PropTypes;i=babelHelpers.inherits(m,c('React').PureComponent);j=i&&i.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=j.constructor).call.apply(n,[this].concat(q)),this.state={closeTimeout:null},o;}m.prototype.render=function(){var n={};n[c('CollectionCurationReferrerParamNames').CLICK_REF]=c('CollectionCurationReferrerTags').MESSENGER_DOT_COM_SAVE_CONFIRMATION;var o=new (c('URI'))('https://www.facebook.com/saved/').setQueryData(n);return (c('React').createElement(c('MessengerDialog.react'),{onToggle:this.props.onToggle},c('React').createElement(c('MessengerDialogHeader.react'),null,h._("Saving to Facebook")),c('React').createElement(k,null,c('React').createElement(c('Link.react'),{href:o,target:'_blank'},h._("View your saved items")))));};m.prototype.componentDidMount=function(){var n=c('setTimeout')(function(){this.props.onToggle(false);}.bind(this),2000);this.setState({closeTimeout:n});};m.prototype.componentWillUnmount=function(){c('clearTimeout')(this.state.closeTimeout);};m.propTypes={onToggle:l.func.isRequired};f.exports=m;}),null);
__d('SaveMessageUtils',['immutable','StoryAttachmentStyle'],(function a(b,c,d,e,f,g){var h=c('immutable').Set.of(c('StoryAttachmentStyle').FALLBACK,c('StoryAttachmentStyle').SHARE,c('StoryAttachmentStyle').EVENT,c('StoryAttachmentStyle').ATTACHED_STORY,c('StoryAttachmentStyle').MUSIC_AGGREGATION,c('StoryAttachmentStyle').AVATAR),i={isSavableMessageAttachment:function j(k){for(var l=0;l<k.length;l++)if(!h.has(k[l]))return false;return true;}};f.exports=i;}),null);
__d("XMessengerDotComSaveController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/save\/message\/",{});}),null);
__d("messengerURIUtilsRe",["MercuryIDs","MessengerURISerializer","MessengerView","URI"],(function a(b,c,d,e,f,g){'use strict';function h(k){var l=c("MessengerURISerializer").deserialize(new (c("URI"))(window.location.href)),m=c("MessengerView").DETAIL.THREAD,n=+l.queryAll;return c("MessengerURISerializer").serialize(Object.assign({},l,{activeThreadID:k,detailView:m,query:n!==0?l.query:undefined}));}function i(k){return h(c("MercuryIDs").getThreadIDFromUserID(k));}function j(k){return new (c("URI"))("/m/"+k);}g.getURIForThreadID=h;g.getURIForUserID=i;g.getURIForMessageID=j;}),null);
__d('MessengerMessageActionsWrapper.react',['csx','cx','fbt','invariant','DOMQuery','FBClipboardLink.react','ImmutableObject','ReactLayeredComponentMixin_DEPRECATED','MercuryAttachmentType','MercuryConfig','MercuryMessageActions','MercuryMessageInfo','MessengerActions','MessengerContextualActions.react','MessengerDeleteMessageDialog.react','Parent','React','ReactDOM','AsyncRequest','CollectionsDisplaySurface','CollectionCurationMechanisms','List.react','MessengerConfig','MessengerDotComSaveModule','MessengerSaveMessageDialog.react','messengerURIUtilsRe','SaveMessageUtils','SavedStateActions','URLMatcher','XMessengerDotComSaveController','setImmediate'],(function a(b,c,d,e,f,g,h,i,j,k){'use strict';var l=c('MessengerContextualActions.react').Item,m=c('React').PropTypes,n="_ui9",o="._ui9",p=c('React').createClass({displayName:'MessengerMessageActionsWrapper',mixins:[c('ReactLayeredComponentMixin_DEPRECATED')],propTypes:{isActive:m.bool,isDeletable:m.bool,isFromViewer:m.bool,message:m.instanceOf(c('ImmutableObject')).isRequired,onDeselect:m.func.isRequired,onSelect:m.func.isRequired},getDefaultProps:function q(){return {isDeletable:true};},render:function q(){return (c('React').createElement('div',babelHelpers['extends']({onContextMenu:this._handleContextMenu},this.props),this.props.children));},renderLayers:function q(){if(!this.props.isDeletable||!this.props.isActive)return {};var r=c('ReactDOM').findDOMNode(this),s=r&&c('DOMQuery').scry(r,o)[0];if(!s)return {};var t=[];t.push(c('React').createElement(l,{key:'delete',onClick:this._handleDelete},this._renderActionItemMsg()));if(this._canSaveMessage())t.push(c('React').createElement(l,{key:'save',onClick:this._handleSave},this._renderSaveItemMsg()));if(c('MessengerConfig').ShowMessageLinks)t.push(c('React').createElement(l,{key:'perma-link',onClick:this._handleLink},this._renderLinkItemMsg()));return {contextualDialog:c('React').createElement(c('MessengerContextualActions.react'),{context:s,onToggle:this._handleActionsToggle,shown:this.props.isActive},this._renderRetry(),t)};},_renderActionItemMsg:function q(){if(!this.props.isFromViewer&&c('MercuryConfig').MessengerGlobalDeleteGK)return j._("Hide");return j._("Delete");},_renderSaveItemMsg:function q(){return j._("Save to Facebook");},_renderLinkItemMsg:function q(){var r=c('messengerURIUtilsRe').getURIForMessageID(this.props.message.message_id).getQualifiedURIBase().toString(),s=j._("Copy link");return (c('React').createElement(c('FBClipboardLink.react'),{suppress:true,tooltip:'',value:r},s));},_renderRetry:function q(){if(!c('MercuryMessageInfo').hasError(this.props.message))return null;return (c('React').createElement(l,{onClick:this._handleRetry},j._("Try again")));},_handleActionsToggle:function q(r){!r&&this._handleDeselect();},_handleDeselect:function q(){this.props.onDeselect(this.props.message.message_id);},_handleDelete:function q(){var r=this.props.message;c('MessengerActions').showDialog(c('MessengerDeleteMessageDialog.react'),{onDelete:function s(){c('MercuryMessageActions').get()['delete'](r.thread_id,[r.message_id]);},onToggle:this._handleDialogToggle,onCancel:this._handleDeselect,isFromViewer:this.props.isFromViewer});},_canSaveMessage:function q(){var r=this.props.message;if(c('MessengerDotComSaveModule').enabled_attachment_save&&this._isSavableMessageAttachment())return true;if(c('MessengerDotComSaveModule').enabled_video_save&&r.attachments&&r.attachments.length>0&&r.attachments[0].share&&r.attachments[0].share.media.playable)return true;if(c('MessengerDotComSaveModule').enabled_inline_save){var s=c('URLMatcher').match(r.body);if(s!=null&&s.length>0)return true;}return false;},_handleLink:function q(){this._handleActionsToggle(false);},_isSavableMessageAttachment:function q(){var r=this.props.message.attachments;if(!r||r.length===0)return false;for(var s=0;s<r.length;s++){var t=r[s],u=false;if(t.share&&t.share.style_list){var v=t.share.style_list;u=c('SaveMessageUtils').isSavableMessageAttachment(v);}else u=t.attach_type===c('MercuryAttachmentType').VIDEO;if(!u)return false;}return true;},_handleSave:function q(){var r=this.props.message,s=c('CollectionsDisplaySurface').MESSENGER_DOT_COM_MESSAGE,t=c('CollectionCurationMechanisms').RIGHT_CLICK;new (c('AsyncRequest'))().setURI(c('XMessengerDotComSaveController').getURIBuilder().getURI()).setData({action:c('SavedStateActions').SAVE,surface:s,mechanism:t,message_id:r.message_id}).send();c('MessengerActions').showDialog(c('MessengerSaveMessageDialog.react'),{onToggle:this._handleDialogToggle});this._handleActionsToggle(false);},_handleDialogToggle:function q(r){if(!r)c('MessengerActions').hideDialog();},_handleRetry:function q(){this._handleDeselect();c('MercuryMessageActions').get().resend(this.props.message);},_handleContextMenu:function q(r){if(!this._shouldAllowNativeContextMenu(r))r.preventDefault();c('setImmediate')(function(){this.props.onSelect(this.props.message.message_id);}.bind(this));},_shouldAllowNativeContextMenu:function q(r){r.target instanceof HTMLElement||k(0);return (r.target.nodeName.toLowerCase()==='a'||window.getSelection().toString()!==''||!c('Parent').byClass(r.target,n));}});f.exports=p;}),null);
__d('MessengerMessageSeenHeads.react',['cssVar','cx','fbt','Image.react','immutable','ImmutableObject','MercuryMessageInfo','MercuryTimestamp','MessengerConfig','React','getViewportDimensions','joinClasses'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('React').PropTypes,n=c('MessengerConfig').MaxSeenHeadCount||8;k=babelHelpers.inherits(o,c('React').PureComponent);l=k&&k.prototype;o.prototype.render=function(){var q=this.props,r=q.message,s=q.nextTimestamp,t=q.participants,u=q.readReceipts;if(c('MercuryMessageInfo').isSending(r)||u.isEmpty()||c('MercuryMessageInfo').hasError(r))return null;var v=c('immutable').Seq(u).filter(function(da,ea){return (da.watermark>=r.timestamp&&da.watermark<s);}).sort(function(da,ea){return da.action-ea.action;});if(v.isEmpty())return null;var w=this.props.isFromViewer?n:p(),x=v.count()>w+1,y=x?v.slice(0,w):v,z=y.map(function(da,ea){var fa=t.get(ea);if(!fa)return null;var ga=da?j._("Seen by {full name} at {seen time}",[j.param('full name',fa.name),j.param('seen time',c('MercuryTimestamp').getPreciseTimestamp(da.action))]):j._("Seen by {full name}",[j.param('full name',fa.name)]);return (c('React').createElement(c('Image.react'),{alt:ga,className:"_jf2",key:ea,src:fa.image_src,title:ga}));}).toArray(),aa=z.length;if(!aa)return null;var ba=x?v.slice(w).count():0;if(ba>0){var ca=v.slice(w).map(function(da,ea){var fa=t.get(ea);return fa?fa.name:null;}).filter(function(da){return !!da;}).join('\n')+' ';z.unshift(c('React').createElement('span',{className:"_jf3",key:'overflow',title:ca},'+'+ba));}return (c('React').createElement('span',{className:c('joinClasses')(this.props.className,"_jf4"+(aa+ba===1?' '+"_jf5":''))},z));};function o(){k.apply(this,arguments);}o.propTypes={isFromViewer:m.bool,message:m.instanceOf(c('ImmutableObject')).isRequired,nextTimestamp:m.number.isRequired,participants:m.instanceOf(c('immutable').Map).isRequired,readReceipts:m.instanceOf(c('immutable').OrderedMap).isRequired};function p(){var q=c('getViewportDimensions')().width;if(q<parseInt("920px".replace('px',''),10))return Math.min(n,8);if(q<parseInt("1211px".replace('px',''),10))return Math.min(n,3);return n;}f.exports=o;}),null);
__d('messengerRTLClasses',['cx','isRTL'],(function a(b,c,d,e,f,g,h){'use strict';function i(j,k){var l=c('isRTL')(j||'');return k?l?"_4pv0":'':(!l?"direction_ltr":'')+(l?' '+"direction_rtl":'')+(!l?' '+"text_align_ltr":'')+(l?' '+"text_align_rtl":'')+(l?' '+"_4pv0":'');}f.exports=i;}),null);
__d('MessengerMessage.react',['cssVar','cx','fbt','EmojiLikeUtils','MercuryDisplayTimeFilterMessageRenderer','FluxContainer','immutable','ImmutableObject','MercuryAttachment','MercuryConfig','MercuryMessageDeliveryState','MercuryMessageError.react','MercuryMessageInfo','MercuryTimestamp','MessengerAttachmentAttribution.react','MessengerAttachmentRenderer','MessengerBubble.react','MessengerBubbleBlock.react','MessengerCodeBubble.react','MessengerCodePasteUtils','MessengerConfig','MessengerDecorator','MessengerMessageActionsWrapper.react','MessengerMessageSeenHeads.react','messengerURIUtilsRe','MessengerVideoAutoplayStore','MNCommerceMessageType','React','TooltipData','emptyFunction','getViewportDimensions','joinClasses','messengerRTLClasses'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('React').PropTypes;function n(q){switch(q){case c('MercuryMessageDeliveryState').SENDING:return j._("Sending");case c('MercuryMessageDeliveryState').SENT:return j._("Sent");case c('MercuryMessageDeliveryState').DELIVERED:return j._("Delivered");case c('MercuryMessageDeliveryState').ERROR:return j._("Error");}return null;}k=babelHelpers.inherits(o,c('React').Component);l=k&&k.prototype;function o(){var q,r;for(var s=arguments.length,t=Array(s),u=0;u<s;u++)t[u]=arguments[u];return r=(q=l.constructor).call.apply(q,[this].concat(t)),this.state={isVisible:false},this.$MessengerMessage9=function(v){v.stopPropagation();this.props.onSelect(this.props.message.message_id);}.bind(this),this.$MessengerMessage8=function(){this.props.onSelect(this.props.message.message_id);}.bind(this),r;}o.getStores=function(){return [c('MessengerVideoAutoplayStore')];};o.calculateState=function(q,r){return {isVisible:c('MessengerVideoAutoplayStore').isVisible(r.message.thread_id,r.message.message_id)};};o.prototype.shouldComponentUpdate=function(q,r){return q.isActive!==this.props.isActive||q.isFromViewer!==this.props.isFromViewer||q.message!==this.props.message||q.nextTimestamp!==this.props.nextTimestamp||q.showDeliveryState!==this.props.showDeliveryState||q.deliveryTimestamp!==this.props.deliveryTimestamp||!c('immutable').is(q.readReceipts,this.props.readReceipts)||!c('immutable').is(q.participants,this.props.participants)||q.customColor!==this.props.customColor||r.isVisible!==this.state.isVisible;};o.prototype.render=function(){var q=this.props,r=q.isActive,s=q.isFromViewer,t=q.message,u=q.participants,v=j._("{time}",[j.param('time',c('MercuryTimestamp').getPreciseTimestamp(t.timestamp))]),w=c('MessengerConfig').SentTimestampEnabled&&s?Object.assign({'data-tooltip-alignh':r?'right':'center'},c('TooltipData').propsFor(v,p())):null,x=c('MercuryConfig').MessengerGroupColors,y=[],z=this.props.message,aa=s||false;if(z&&!this.props.hideBeforeDecorator)c('MessengerDecorator').getBeforeDecorators().forEach(function(ba){if(ba.check(z))y.push(ba.render(z,aa));});return c('React').createElement(c('MessengerMessageActionsWrapper.react'),{className:c('joinClasses')("clearfix"+(' '+"_o46")+(' '+"_3erg")+(r?' '+"_-5k":'')+(s?' '+"_3i_m":'')+(s?' '+"_nd_":'')+(!s?' '+"_29_7":'')+(t.isSelected?' '+"_3xsz":'')+(x&&!!this.props.customColor?' '+"_34_4":''),c('messengerRTLClasses')(t.body)),isActive:r,isDeletable:!this.$MessengerMessage1()&&!this.props.isPageMessage,isFromViewer:s,message:t,onDeselect:this.props.onDeselect,onSelect:this.props.onSelect},y,this.$MessengerMessage2(w),this.$MessengerMessage3(w),this.$MessengerMessage4(z,aa,u),this.$MessengerMessage5(),this.$MessengerMessage6(),c('React').createElement(c('MessengerMessageSeenHeads.react'),{className:"_4jzq",isFromViewer:s,message:t,nextTimestamp:this.props.nextTimestamp,participants:this.props.participants,readReceipts:this.props.readReceipts}));};o.prototype.$MessengerMessage4=function(q,r,s){var t;if(q&&!this.props.hideAfterExternalDecorator){var t=function(){var u=[],v=[];c('MessengerDecorator').getAfterExternalDecorators().forEach(function(x){if(q&&x.check(q)){u.push(x.render(q,r,s));v.push(x.getAdditionalClassNames());}});var w=v.join(' ');return {v:c('React').createElement('span',{className:c('joinClasses')(w,"_31gm"+(!r?' '+"isFromOther":''))},u)};}();if(typeof t==="object")return t.v;}return null;};o.prototype.$MessengerMessage7=function(q){return q.every(function(r){return !r||!c('MessengerAttachmentRenderer').isRenderedShareAttachment(r);});};o.prototype.$MessengerMessage3=function(q){var r,s=this;if(this.props.message.is_filtered_content)return null;if(this.props.message.commerce_message_type===c('MNCommerceMessageType').RIDE_INTENT)return null;var t=c('MessengerAttachmentRenderer').getAttachmentsOutsideBubble(this.props.message,this.props.onAttachmentLoad,{customColor:this.props.customColor,isVisible:this.state.isVisible,onSelect:this.$MessengerMessage8,onUnwrap:null});if(!t||!t.length)return null;if(q){var u=t.some(function(x){return !!x&&c('MessengerAttachmentRenderer').isPhotosGroupAttachment(x);});t=this.$MessengerMessage7(t)?c('React').createElement('div',babelHelpers['extends']({},q,{className:"_3zvs"+(u?' '+"_2-x3":'')}),t):t.map(function(x){return x&&c('React').cloneElement(x,q);});}var v=c('MercuryConfig').MessengerSharedVideoNewDesign&&c('MessengerAttachmentRenderer').isSharedVideoAttachmentMessage(this.props.message),w=c('React').createElement('div',{key:'renderedAttachments',className:"_3058"+(' '+"_15gf")+(v?' '+"_3duc":'')},t);if(this.props.message.attachments.length===1&&c('MercuryAttachment').hasAttribution(this.props.message.attachments[0])){var r=function(){var x=[w,c('React').createElement(c('MessengerAttachmentAttribution.react'),{attachment:new (c('ImmutableObject'))(s.props.message.attachments[0]),key:'attribution'})],y=[],z=s.props.message,aa=s.props.isFromViewer||false;if(z)c('MessengerDecorator').getAfterDecorators().forEach(function(ba){if(ba.check(z))y.push(ba.render(z,aa));});if(y.length)x.push.apply(x,y);return {v:c('React').createElement(c('MessengerBubbleBlock.react'),null,x)};}();if(typeof r==="object")return r.v;}return w;};o.prototype.$MessengerMessage1=function(){return c('MessengerAttachmentRenderer').isP2PAttachment(this.props.message);};o.prototype.$MessengerMessage2=function(q){var r=this.props.message,s=c('immutable').List(c('MessengerAttachmentRenderer').getAttachmentsInsideBubble(r,this.props.onAttachmentLoad)),t=r.ranges;if(r.profile_ranges&&r.profile_ranges.length)t=(t||[]).concat(r.profile_ranges.map(function(v){return babelHelpers['extends']({},v,{url:c('messengerURIUtilsRe').getURIForUserID(v.id)});}));if(c('MessengerCodePasteUtils').containsCodeBlock(r.body))return c('React').createElement(c('MessengerCodeBubble.react'),{attachments:s,body:r.body,customColor:this.props.isFromViewer?this.props.customColor:'',className:(this.props.isFromViewer?"_3uhm":'')+(!this.props.isFromViewer?' '+"_3uhn":''),ranges:t,threadID:r.thread_id||''});if(r.is_filtered_content)return c('React').createElement('div',{className:"_3058 _wiu _52mr uiBoxYellow clearfix"},c('MercuryDisplayTimeFilterMessageRenderer').renderFilteredContent(r));var u=r.body&&!c('EmojiLikeUtils').isEmojiLike(r);if(u||!s.isEmpty())return c('React').createElement(c('MessengerBubble.react'),babelHelpers['extends']({attachments:s,body:r.body,className:"_3058 _ui9",customColor:this.props.customColor,customLike:r.customLike,isFromViewer:this.props.isFromViewer,isP2PAttachment:this.$MessengerMessage1(),ranges:t,message:r,metaRanges:r.meta_ranges,threadCustomColor:this.props.threadCustomColor||"#0084ff",threadID:r.thread_id},q||{}));return null;};o.prototype.$MessengerMessage6=function(){if(!this.props.isFromViewer||!this.props.showDeliveryState||this.props.message.is_like_preview)return null;var q=c('MercuryMessageInfo').getDeliveryState(this.props.message,this.props.deliveryTimestamp);if(q===c('MercuryMessageDeliveryState').UNKNOWN)return null;var r={};if(this.props.customColor&&(q===c('MercuryMessageDeliveryState').SENT||q===c('MercuryMessageDeliveryState').SENDING||q===c('MercuryMessageDeliveryState').DELIVERED))r.color=this.props.customColor;return c('React').createElement('span',{className:"_2her"+(q===c('MercuryMessageDeliveryState').SENDING?' '+"_4jzp":'')+(q===c('MercuryMessageDeliveryState').SENT?' '+"_3zzf":'')+(q===c('MercuryMessageDeliveryState').DELIVERED?' '+"_9ah":'')+(q===c('MercuryMessageDeliveryState').ERROR?' '+"_5ei9":''),onClick:this.$MessengerMessage9,style:r,title:n(q)},c('React').createElement('i',{className:"_57e_"}));};o.prototype.$MessengerMessage5=function(){var q=this.props.message;if(!c('MercuryMessageInfo').hasError(q))return null;return c('React').createElement(c('MercuryMessageError.react'),{className:"_3058 _2ygi",message:q,authorFBID:this.props.authorFBID});};o.propTypes={customColor:m.string,deliveryTimestamp:m.number.isRequired,hideAfterExternalDecorator:m.bool,hideBeforeDecorator:m.bool,isActive:m.bool,isFromViewer:m.bool,isPageMessage:m.bool,message:m.instanceOf(c('ImmutableObject')).isRequired,nextTimestamp:m.number.isRequired,onAttachmentLoad:m.func.isRequired,onDeselect:m.func.isRequired,onSelect:m.func.isRequired,participants:m.instanceOf(c('immutable').Map).isRequired,readReceipts:m.instanceOf(c('immutable').OrderedMap).isRequired,showDeliveryState:m.bool,authorFBID:m.string,threadCustomColor:m.string};o.defaultProps={onAttachmentLoad:c('emptyFunction')};function p(){if(c('getViewportDimensions')().width<=parseInt("700px".replace('px',''),10))return 'above';return 'right';}f.exports=c('FluxContainer').create(o,{withProps:true});}),null);
__d('MessengerPageAdminNoteList.react',['cx','fbt','LeftRight.react','MessengerBubble.react','PagesMessengerCreatorInfo.react','ReactComponentWithPureRenderMixin','React','enumerate','classWithMixins','immutable','mixin'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('classWithMixins')(c('React').Component,c('mixin')(c('ReactComponentWithPureRenderMixin'))));k=j&&j.prototype;m.prototype.render=function(){var n=[],o=this.calculateGroups(this.props.notes);o.forEach(function(p,q){n.push(c('React').createElement('li',{className:"_4kd2",key:'group:'+q},this.$MessengerPageAdminNoteList1(p)));}.bind(this));return (c('React').createElement('ul',{className:"_4kd3"},n));};m.prototype.$MessengerPageAdminNoteList1=function(n){var o=[];n.forEach(function(p,q){o.push(c('React').createElement('div',{className:"_4kd4",key:'note:'+q},this.$MessengerPageAdminNoteList2(p,n)));}.bind(this));return o;};m.prototype.$MessengerPageAdminNoteList2=function(n,o){var p=c('immutable').List([c('React').createElement(c('LeftRight.react'),{className:"_561k"},c('React').createElement('div',{className:"_561l"},i._("Private note")),c('React').createElement(c('PagesMessengerCreatorInfo.react'),{key:'creator_info',creator_info:o[0].creator_info,isNote:true}))]);return (c('React').createElement('div',{className:"_o46 _3i_m _nd_"},c('React').createElement('div',{className:'clearfix'},c('React').createElement(c('MessengerBubble.react'),{body:n.body.text,attachments:p,className:"_3058 _4kd5"}))));};m.prototype.calculateGroups=function(n){var o=[],p=null,q=null,r=c('enumerate')(n),s=void 0;while(!(s=r.next()).done){var t=q&&q.value.creator_info.creatorID===s.value.creator_info.creatorID;if(!t){p=[];o.push(p);}if(p)p.push(s.value);q=s;}return o;};function m(){j.apply(this,arguments);}m.propTypes={notes:l.arrayOf(l.shape({id:l.string,body:l.object.isRequired,creator_info:l.shape({creatorID:l.string.isRequired,creatorName:l.string.isRequired,creatorType:l.string.isRequired,labelType:l.string.isRequired,pageID:l.string.isRequired,profileURI:l.string}),timestamp:l.number.isRequired})).isRequired};f.exports=m;}),null);
__d('MessengerMessageGroup.react',['cx','fbt','immutable','ImmutableObject','Image.react','Link.react','MercuryConfig','MercuryIDs','MercuryParticipants','MercuryParticipantSilhouettes','MercuryTimestamp','MessagingThreadCustomizationConfig','MessengerActions','MessengerConfig','MessengerDateBreak.react','MessengerMessage.react','MessengerPageAdminNoteList.react','MessengerProfileImageWrapper.react','MessengerStickerUtils','MessengerTextWithEmoticons.react','messengerURIUtilsRe','PagesMessengerCreatorInfo.react','React','ReactDOM','StoreAndPropBasedStateMixin'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c('MessagingThreadCustomizationConfig').randomColor,k=c('MessagingThreadCustomizationConfig').colorChoices.filter(function(t){return t!==j;}),l=c('immutable').List,m=c('immutable').OrderedMap,n=c('React').PropTypes,o=32,p=new (c('ImmutableObject'))({image_src:c('MercuryParticipantSilhouettes').neutralSilhouette,is_messenger_user:true,name:''}),q=c('React').createClass({displayName:'MessengerMessageGroup',mixins:[c('StoreAndPropBasedStateMixin')(c('MercuryParticipants'))],propTypes:{activeMessageID:n.string,deliveryTimestamp:n.number.isRequired,hasDateBreak:n.bool,isCanonical:n.bool,isFromViewer:n.bool,isPageMessage:n.bool,lastReadTimestamp:n.number.isRequired,messages:n.instanceOf(c('immutable').List).isRequired,nextTimestamp:n.number.isRequired,onAttachmentLoad:n.func,onMessageDeselect:n.func.isRequired,onMessageSelect:n.func.isRequired,readReceipts:n.instanceOf(m).isRequired,thread:n.object,pageCustomAction:n.func},statics:{calculateState:function t(u){return {participants:r(u)};}},shouldComponentUpdate:function t(u,v){return (this.props.activeMessageID!==u.activeMessageID||this.props.isFromViewer!==u.isFromViewer||this.props.deliveryTimestamp!==u.deliveryTimestamp||this.props.lastReadTimestamp!==u.lastReadTimestamp||!c('immutable').is(this.props.messages,u.messages)||!c('immutable').is(this.props.readReceipts,u.readReceipts)||!c('immutable').is(this.state.participants,v.participants)||!!(u.thread&&this.props.thread&&this.props.thread!==u.thread));},render:function t(){return (c('React').createElement('div',null,c('React').createElement('div',{className:"_1t_p"+(' '+"clearfix")+(c('MessengerStickerUtils').isStickerMessageGroup(this.props.messages)?' '+"_5tx1":'')+(this._hasSeenHeadsAtBottom()?' '+"_35fy":'')},this._renderProfileColumn(),c('React').createElement('div',{className:"_41ud"},this._renderName(),this._renderMessages())),this.props.isPageMessage?this._renderNotes():null));},_renderProfileColumn:function t(){if(this.props.isFromViewer)return null;var u=this.props.messages.last(),v=this.state.participants.get(u.author)||p,w=i._("{name} {time}",[i.param('name',v.name),i.param('time',c('MercuryTimestamp').getPreciseTimestamp(u.timestamp))]),x=c('React').createElement(c('MessengerProfileImageWrapper.react'),{className:"_1t_r",isMessengerUser:v.is_messenger_user,size:o,showBadge:true,tooltipContent:w},c('React').createElement(c('Image.react'),{alt:v.name,src:v.image_src,height:o,width:o}));if(!this.props.isCanonical&&v.fbid){var y=c('messengerURIUtilsRe').getURIForUserID(v.fbid);x=c('React').createElement(c('Link.react'),{className:"_5f0v",href:y.toString(),onClick:this._handleContactSelect.bind(this,v),tabIndex:-1},x);}return (c('React').createElement('div',{className:"_1t_q"},x));},_renderMessages:function t(){var u=this.props.messages.size,v=[];this.props.messages.forEach(function(w,x,y){var z=w.message_id===this.props.activeMessageID;if(z&&!(x===0&&this.props.hasDateBreak)&&!c('MessengerConfig').SentTimestampEnabled)v.push(c('React').createElement(c('MessengerDateBreak.react'),{className:"_5r8z",date:new Date(w.timestamp),key:'db:'+w.message_id}));var aa=this.props.isPageMessage&&this.props.pageCustomAction?this.props.pageCustomAction:null;if(aa)v.push(c('React').createElement('h4',{key:'page_action'+w.message_id},c('React').createElement(aa,{message:w})));var ba=c('MercuryIDs').getUserIDFromParticipantID(this.props.author),ca=function ha(ia,ja,ka){var la=Number(ia.substring(5))*17,ma=Number(ja.split(':')[1].substring(5));return (la+ma)%ka.length;},da=this.props.thread?this.props.thread.custom_color:'',ea=c('MercuryConfig').MessengerGroupColors,fa=da===j&&ea;if(this.props.thread&&ba&&fa){var ga=ca(ba,this.props.thread.thread_id,k);da=k[ga];}v.push(c('React').createElement(c('MessengerMessage.react'),{customColor:this.props.isFromViewer||fa?da:'',deliveryTimestamp:this.props.deliveryTimestamp,isActive:z,isFromViewer:this.props.isFromViewer,isPageMessage:this.props.isPageMessage,key:w.message_id,message:w,messageActionsWrapper:this.props.messageActionWrapper,onAttachmentLoad:this.props.onAttachmentLoad,participants:this.state.participants,nextTimestamp:this._getNextTimestamp(y,u,x),onDeselect:this.props.onMessageDeselect,onSelect:this.props.onMessageSelect,readReceipts:this.props.readReceipts,showDeliveryState:w.timestamp>this.props.lastReadTimestamp,ref:w.message_id,authorFBID:ba==null?undefined:ba,threadCustomColor:da}));if(s(this.props.isPageMessage,y,x,w))v.push(c('React').createElement(c('PagesMessengerCreatorInfo.react'),{key:'creator_info:'+x,creator_info:w.creator_info}));}.bind(this));return v;},_renderNotes:function t(){var u=[];this.props.messages.forEach(function(v,w,x){if(this.props.isPageMessage&&v.page_admin_notes)u.push(c('React').createElement(c('MessengerPageAdminNoteList.react'),{key:'notes:'+v.message_id,notes:v.page_admin_notes}));}.bind(this));return u;},_renderName:function t(){var u=this.state.participants.get(this.props.messages.first().author);if(!u)return null;var v=u.short_name;if(this.props.thread){var w=this.props.thread.custom_nickname?this.props.thread.custom_nickname:null,x=c('MercuryIDs').getUserIDFromParticipantID(u.id);if(w&&x&&w[x]){v=w[x];if(c('MercuryConfig').MessengerNewEmojiGK)v=c('React').createElement(c('MessengerTextWithEmoticons.react'),{renderEmoticons:true,renderEmoji:true,text:v});}}return (c('React').createElement('h5',{className:"_ih3"+(this.props.isCanonical||this.props.isFromViewer?' '+"_-ne":'')},c('React').createElement('span',{className:"_3oh-"},v)));},getMessageElement:function t(u){return c('ReactDOM').findDOMNode(this.refs[u]);},_hasSeenHeadsAtBottom:function t(){var u=this.props,v=u.messages,w=u.nextTimestamp,x=u.readReceipts,y=v.last().timestamp,z=0;x.forEach(function(aa){if(aa>=y&&aa<w)if(++z===2)return false;});return z===2;},_getNextTimestamp:function t(u,v,w){return w<v-1?u.get(w+1).timestamp:this.props.nextTimestamp;},_handleContactSelect:function t(u,v){v&&v.preventDefault();var w=c('MercuryIDs').getThreadIDFromParticipantID(u.id);w&&c('MessengerActions').selectThread(w);}});function r(t){var u=t.messages.first().author;return c('immutable').Map().withMutations(function(v){t.readReceipts.forEach(function(w,x){v.set(x,c('MercuryParticipants').getOrFetch(x));});v.set(u,c('MercuryParticipants').getOrFetch(u));});}function s(t,u,v,w){if(!t||!w.creator_info)return false;if(v===u.size-1)return true;var x=u.get(v+1).creator_info;if(!x)return true;return w.creator_info.creatorID!==x.creatorID;}f.exports=q;}),null);
__d('MessengerTypingIndicator.react',['cx','Image.react','immutable','MercuryParticipants','MercuryTypingAnimation.react','MessengerProfileImageWrapper.react','MessengerBubble.react','ReactComponentWithPureRenderMixin','React','StoreAndPropBasedStateMixin'],(function a(b,c,d,e,f,g,h){var i=c('React').PropTypes,j=32,k=c('React').createClass({displayName:'MessengerTypingIndicator',mixins:[c('ReactComponentWithPureRenderMixin'),c('StoreAndPropBasedStateMixin')(c('MercuryParticipants'))],propTypes:{userID:i.string,showName:i.bool},statics:{calculateState:function l(m){return {author:c('MercuryParticipants').getOrFetch(m.userID)};}},render:function l(){if(!this.state.author)return null;var m=this.state.author;return (c('React').createElement('div',{className:"_1t_p _1hbw"},c('React').createElement('div',{className:"_1t_q"},c('React').createElement(c('MessengerProfileImageWrapper.react'),{className:"_1t_r",isMessengerUser:m.is_messenger_user,size:j,showBadge:true},c('React').createElement(c('Image.react'),{alt:'',src:m.image_src,height:j,width:j}))),c('React').createElement('div',{className:"_41ud"},c('React').createElement('div',{className:"_o46 _3erg _29_7"},c('React').createElement(c('MessengerBubble.react'),{attachments:c('immutable').List([c('React').createElement(c('MercuryTypingAnimation.react'),{key:'animation'})]),body:'',className:"_3058",ref:'bubble'})))));},getBubble:function l(){return this.refs.bubble;}});f.exports=k;}),null);
__d('MessengerStore',['MessengerDispatcher','mixInEventEmitter'],(function a(b,c,d,e,f,g){'use strict';function h(){this.$MessengerStore1=c('MessengerDispatcher').register(this.__onDispatch.bind(this));}h.prototype.getDispatchToken=function(){return this.$MessengerStore1;};h.prototype.emitChange=function(){this.emit('change');};h.prototype.destroy=function(){c('MessengerDispatcher').unregister(this.$MessengerStore1);};c('mixInEventEmitter')(h,{change:true});f.exports=h;}),null);
__d('MessengerDialogStore',['MessengerActions','MessengerStore'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('MessengerStore'));i=h&&h.prototype;function j(){'use strict';i.constructor.call(this);this.$MessengerDialogStore1={dialogClass:null,dialogProps:null};}j.prototype.getState=function(){'use strict';return this.$MessengerDialogStore1;};j.prototype.__onDispatch=function(k){'use strict';switch(k.type){case c('MessengerActions').Types.SHOW_DIALOG:this.$MessengerDialogStore1.dialogClass=k.dialogClass;this.$MessengerDialogStore1.dialogProps=k.dialogProps;this.emitChange();break;case c('MessengerActions').Types.HIDE_DIALOG:if(k.dialogClass&&this.$MessengerDialogStore1.dialogClass!=k.dialogClass)break;this.$MessengerDialogStore1.dialogClass=null;this.$MessengerDialogStore1.dialogProps=null;this.emitChange();break;}};f.exports=new j();}),null);
__d('MessengerDialogContainer.react',['MessengerDialogStore','PureStoreBasedStateMixin','React'],(function a(b,c,d,e,f,g){'use strict';var h=c('React').createClass({displayName:'MessengerDialogContainer',mixins:[c('PureStoreBasedStateMixin')(c('MessengerDialogStore'))],statics:{calculateState:function i(){return c('MessengerDialogStore').getState();}},render:function i(){if(!this.state.dialogClass)return null;var j=this.state.dialogClass;return c('React').createElement(j,babelHelpers['extends']({},this.state.dialogProps,{key:'dialog'}));}});f.exports=h;}),null);
__d('MercurySeenIndicator.react',['cx','MercuryDelayedRoger','MercuryIDs','React','SubscriptionsHandler'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.$MercurySeenIndicator3=function(){var r=c('MercuryIDs').getParticipantIDFromUserID(this.props.viewer),s=this.props.thread.participants.filter(function(t){return t!==r;});return {viewer:r,others:s};}.bind(this),this.$MercurySeenIndicator4=function(r){return r===this.props.thread.snippet_sender;}.bind(this),this.$MercurySeenIndicator5=function(r){var s=this.props.thread.thread_id;return this.$MercurySeenIndicator1.getSeenBy(s).length===r.length;}.bind(this),n;}l.prototype.componentWillMount=function(){this.$MercurySeenIndicator1=c('MercuryDelayedRoger').getForFBID(this.props.viewer);};l.prototype.componentDidMount=function(){this.$MercurySeenIndicator2=new (c('SubscriptionsHandler'))();this.$MercurySeenIndicator2.addSubscriptions(this.$MercurySeenIndicator1.subscribe('state-changed',function(m,n){n[this.props.thread.thread_id]&&this.forceUpdate();}.bind(this)));};l.prototype.componentWillUnmount=function(){this.$MercurySeenIndicator2&&this.$MercurySeenIndicator2.release();};l.prototype.render=function(){var m=this.$MercurySeenIndicator3(),n=m.viewer,o=m.others,p=this.$MercurySeenIndicator4(n),q=this.$MercurySeenIndicator5(o);return c('React').createElement('span',{className:"_3jy5"+(p?' '+"repliedLast":'')+(p&&q?' '+"seenByAll":'')});};l.propTypes={thread:k.object.isRequired,viewer:k.string.isRequired};f.exports=l;}),null);
__d('EmoticonUtils',['EmoticonsList','Parent'],(function a(b,c,d,e,f,g){var h='emoticon_',i=c('EmoticonsList').symbols,j={getEmoteFromTarget:function k(l){var m=c('Parent').byClass(l,'emoticon');if(!m)return null;var n=null;m.className.split(' ').forEach(function(o){if(o.startsWith(h))n=o.substring(h.length);});return i[n]||null;},insertEmoticon:function k(l,m,n){var o=m.substring(0,n.start),p=m.substring(n.end);if(n.start>0&&!o.endsWith(' '))l=' '+l;if(!p.startsWith(' '))l+=' ';var q=o+l+p;n.start+=l.length;n.end=n.start;return {result:q,start:n.start,end:n.end};}};f.exports=j;}),null);
__d('MercuryDragDropPrompt.react',['cx','fbt','React'],(function a(b,c,d,e,f,g,h,i){var j,k;j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;l.prototype.render=function(){'use strict';return (c('React').createElement('div',{className:"_4g6x"},c('React').createElement('div',{className:"_4g6y"},c('React').createElement('div',{className:"_4g6z _4g71"},i._("Drag Links\/Files Here")),c('React').createElement('div',{className:"_4g6z _4g6- _4g6_"},i._("Drop Files Here")),c('React').createElement('div',{className:"_4g6z _4g6- _4g70"},i._("Drop Link Here")))));};function l(){'use strict';j.apply(this,arguments);}f.exports=l;}),null);
__d('SelectionPosition',['Event','InputSelection','SubscriptionsHandler'],(function a(b,c,d,e,f,g){function h(i){'use strict';this.$SelectionPosition1=i;this.$SelectionPosition2={start:0,end:0};this.$SelectionPosition3=new (c('SubscriptionsHandler'))();this.$SelectionPosition4=false;this.updatePos();this.enable();}h.prototype.getPos=function(){'use strict';return babelHelpers['extends']({},this.$SelectionPosition2);};h.prototype.setPos=function(i,j){'use strict';this.$SelectionPosition2={start:i,end:j};this.restore();};h.prototype.updatePos=function(){'use strict';this.$SelectionPosition2=c('InputSelection').get(this.$SelectionPosition1);};h.prototype.restore=function(){'use strict';c('InputSelection').set(this.$SelectionPosition1,this.$SelectionPosition2.start,this.$SelectionPosition2.end);};h.prototype.enable=function(){'use strict';if(!this.$SelectionPosition4){this.$SelectionPosition3.addSubscriptions(c('Event').listen(this.$SelectionPosition1,'keyup',this.updatePos.bind(this)),c('Event').listen(this.$SelectionPosition1,'click',this.updatePos.bind(this)));this.$SelectionPosition4=true;}};h.prototype.disable=function(){'use strict';if(this.$SelectionPosition4){this.$SelectionPosition3.release();this.$SelectionPosition4=false;}};f.exports=h;}),null);
__d('PageCustomerConstants',['keyMirror'],(function a(b,c,d,e,f,g){'use strict';var h={ActionTypes:c('keyMirror')({UPDATE_CUSTOMER_ACTIONS:null,UPDATE_CUSTOMER_DATA:null,UPDATE_CUSTOMER_ADMIN_NOTES_DATA:null,UPDATE_MORE_SHARED_PHOTOS:null,UPDATED_CUSTOMER_TAG_NAMES:null,FETCH_CUSTOMER_DATA:null,FETCH_CUSTOMER_ACTIONS_DATA:null,FETCH_MORE_SHARED_PHOTOS:null,RESET:null,RESET_UI:null,QUERY_TAGS:null,SET_TAG:null,UNSET_TAG:null,SHOW_MORE_HISTORY:null,SHOW_MORE_NOTES:null,SHOW_STORY_PREVIEW:null,HIDE_STORY_PREVIEW:null,TOGGLE_EDIT_NOTE_DIALOG:null,TOGGLE_DELETE_NOTE_DIALOG:null,TOGGLE_FULL_VIEW:null,ADD_NOTE:null,EDIT_NOTE:null,DELETE_NOTE:null,DRAFT_NOTE:null}),PayloadSources:c('keyMirror')({SERVER_ACTION:null,VIEW_ACTION:null}),ContextCardLocations:c('keyMirror')({HOVERCARD_LOCATION:null,INBOX_LOCATION:null})};f.exports=h;}),null);
__d('PageCustomerDispatcher',['Dispatcher_DEPRECATED','PageCustomerConstants'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('PageCustomerConstants').PayloadSources,k=[];h=babelHelpers.inherits(l,c('Dispatcher_DEPRECATED'));i=h&&h.prototype;l.prototype.$PageCustomerDispatcher1=function(){var m=k;k=[];m.forEach(function(n){return n();});k.length=0;};l.prototype.addPostDispatchCallback=function(m){if(this.isDispatching()){k.push(m);}else m();};l.prototype.handleServerAction=function(m){this.addPostDispatchCallback(function(){var n={source:j.SERVER_ACTION,action:m};this.dispatch(n);this.$PageCustomerDispatcher1();}.bind(this));};l.prototype.handleViewAction=function(m){this.addPostDispatchCallback(function(){var n={source:j.VIEW_ACTION,action:m};this.dispatch(n);this.$PageCustomerDispatcher1();}.bind(this));};function l(){h.apply(this,arguments);}f.exports=new l();}),null);
__d('PagesManagerActionType',['ImmutableObject','keyMirrorRecursive'],(function a(b,c,d,e,f,g){var h=new (c('ImmutableObject'))(c('keyMirrorRecursive')({LIST:{FETCH:'',FETCHED:'',UPDATED:'',LOAD_MORE:'',LOADING:'',PREVENT_SCROLL:'',SELECT:'',DESELECT_ALL:'',VIEW:'',INITIAL_VIEW:'',CLEAR_INITIAL_VIEW:'',SWITCH_PRIORITY:'',SET_PRIORITY_GK:'',SET_RESPONSE_DATA:''},NAVIGATION_UNIT:{CHANGE:'',NOTIFICATION_COUNT_CHANGE:''},FILTER_PANEL:{TOGGLE_PANEL:''},LAYOUT:{HEIGHT_CHANGE:'',LIST_HEIGHT_CHANGE:''},SEARCH:{TOGGLE_SEARCH:'',CHANGE_SEARCH_TERM:'',IS_SEARCHING_CHANGED:'',ADD_SEARCH_CUSTOM_TAG:'',REMOVE_SEARCH_CUSTOM_TAG:'',FETCH_CUSTOM_TAG_THREAD_COUNTS:'',UPDATE_CUSTOM_TAG_THREAD_COUNTS:''}}));f.exports=h;}),null);
__d('PagesManagerCustomTagsActionType',['PagesManagerActionType','keyMirrorRecursive'],(function a(b,c,d,e,f,g){var h=c('keyMirrorRecursive')({FETCH:null,UPDATE:null,TOGGLE_MERGE_LABELS:null,TOGGLE_TAG_MANAGEMENT_DIALOG:null,CREATE:null,DELETE:null,EDIT_COLOR:null,MERGE:null},'CUSTOM_TAGS_');Object.assign(h,c('PagesManagerActionType'));f.exports=h;}),null);
__d('PagesManagerDispatcher',['ReactDispatcher_DEPRECATED'],(function a(b,c,d,e,f,g){'use strict';f.exports=new (c('ReactDispatcher_DEPRECATED'))();}),null);
__d('PagesManagerCustomTagsAction',['PagesManagerCustomTagsActionType','PagesManagerDispatcher'],(function a(b,c,d,e,f,g){var h={fetch:function i(j){c('PagesManagerDispatcher').dispatch({pageID:j,type:c('PagesManagerCustomTagsActionType').FETCH});},toggleMergeLabelsSection:function i(j,k){c('PagesManagerDispatcher').dispatch({type:c('PagesManagerCustomTagsActionType').TOGGLE_MERGE_LABELS,pageID:j,show:k});},toggleManageTagsDialog:function i(j,k){c('PagesManagerDispatcher').dispatch({type:c('PagesManagerCustomTagsActionType').TOGGLE_TAG_MANAGEMENT_DIALOG,pageID:j,show:k});},updateCustomTagsData:function i(j,k,l){c('PagesManagerDispatcher').dispatch({type:c('PagesManagerCustomTagsActionType').UPDATE,pageID:j,customTags:k,hasTagListChanged:l});},createCustomTag:function i(j,k,l){c('PagesManagerDispatcher').dispatch({type:c('PagesManagerCustomTagsActionType').CREATE,pageID:j,tagName:k,color:l});},deleteCustomTag:function i(j,k){c('PagesManagerDispatcher').dispatch({type:c('PagesManagerCustomTagsActionType').DELETE,pageID:j,tagName:k});},editCustomTagColor:function i(j,k,l){c('PagesManagerDispatcher').dispatch({type:c('PagesManagerCustomTagsActionType').EDIT_COLOR,pageID:j,tagName:k,color:l});},mergeCustomTag:function i(j,k,l){c('PagesManagerDispatcher').dispatch({type:c('PagesManagerCustomTagsActionType').MERGE,pageID:j,tagName:k,oldTags:l});}};f.exports=h;}),null);
__d('PagesManagerLogger',['immutable','PagesAdminToolUIActionType','PagesEventObserver','PagesEventType'],(function a(b,c,d,e,f,g){'use strict';var h=c('immutable').Map,i=new h(c('PagesAdminToolUIActionType')).toArray();j.prototype.$PagesManagerLogger1=function(k){if(i.indexOf(k)<0)return false;return true;};j.prototype.$PagesManagerLogger2=function(k,l,m,n){if(!this.$PagesManagerLogger1(l))return;var o=n||{};o.action_type=l;c('PagesEventObserver').notify(k,m,o);};j.prototype.logContextCardUIAction=function(k,l,m){this.$PagesManagerLogger2(c('PagesEventType').PAGES_ADMIN_TOOL_CONTEXT_CARD_UI_ACTION,k,l,m);};j.prototype.logManageTagUIAction=function(k,l,m){this.$PagesManagerLogger2(c('PagesEventType').PAGES_ADMIN_TOOL_MANAGE_TAG_UI_ACTION,k,l,m);};j.prototype.logMessageInboxUIAction=function(k,l,m){this.$PagesManagerLogger2(c('PagesEventType').PAGES_ADMIN_TOOL_MESSAGE_INBOX_UI_ACTION,k,l,m);};j.prototype.logHovercardUIAction=function(k,l,m){this.$PagesManagerLogger2(c('PagesEventType').PAGES_ADMIN_TOOL_HOVERCARD_UI_ACTION,k,l,m);};function j(){}f.exports=new j();}),null);
__d('PageCustomerActions',['cx','PageCustomerConstants','ActorURI','MercuryAttachmentType','MercuryAttachmentViewer','MercuryIDs','MercuryPageThreadActions','MessagesViewerSetID','PageCustomerDispatcher','PagesAdminToolUIActionType','PagesManagerLogger','PagesManagerCustomTagsAction','URI','Vector'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('PageCustomerConstants').ActionTypes,j='/ajax/messaging/attachments/sharedphotos.php',k={toggleContextCardDialog:function l(m,n){c('PageCustomerDispatcher').handleViewAction({actionType:i.TOGGLE_FULL_VIEW,pageID:m,userID:n});},resetData:function l(m){c('PageCustomerDispatcher').handleViewAction({actionType:i.RESET,pageID:m});},fetchCustomerData:function l(m,n){c('PageCustomerDispatcher').handleViewAction({actionType:i.FETCH_CUSTOMER_DATA,pageID:m,userID:n});},fetchCustomerActionsData:function l(m,n){c('PageCustomerDispatcher').handleViewAction({actionType:i.FETCH_CUSTOMER_ACTIONS_DATA,pageID:m,userID:n});},fetchMoreSharedPhotos:function l(m,n,o){c('PageCustomerDispatcher').handleViewAction({actionType:i.FETCH_MORE_SHARED_PHOTOS,pageID:m,userID:n,shouldLoadAllImages:o});},resetUI:function l(m,n){c('PageCustomerDispatcher').handleViewAction({actionType:i.RESET_UI,pageID:m,userID:n});},clickPhotoFullView:function l(m,n,o){switch(o.media_type){case c('MercuryAttachmentType').VIDEO:var p=o.dim.split(',');c('MercuryAttachmentViewer').renderVideo({disableForward:true,rootClassName:"_1j1h",videoID:o.fbid,videoSize:new (c('Vector'))(p[0],p[1]),videoURI:o.src_uri,pageID:m});break;case c('MercuryAttachmentType').ANIMATED_IMAGE:case c('MercuryAttachmentType').PHOTO:var q=c('ActorURI').create(new (c('URI'))(j).setQueryData({thread_id:n,image_id:o.fbid}),m);c('MercuryAttachmentViewer').bootstrapWithConfig({actorid:m,dimensions:o.dim,disableForward:true,disablePaging:true,endpoint:q,fbid:o.fbid,setID:c('MessagesViewerSetID').MESSAGES_VIEW_ALL_IN_THREAD,snapToPhoto:true,src:o.src_uri});break;}c('PagesManagerLogger').logContextCardUIAction(c('PagesAdminToolUIActionType').CONTEXT_CARD_CLICK_SHARED_MEDIA,m,{fbid:o.fbid,media_type:o.media_type});},clickProfileLink:function l(m,n){c('PagesManagerLogger').logContextCardUIAction(c('PagesAdminToolUIActionType').CONTEXT_CARD_CLICK_PROFILE_LINK,m);},queryTags:function l(m,n,o){c('PageCustomerDispatcher').handleViewAction({actionType:i.QUERY_TAGS,pageID:m,userID:n,query:o});},setTag:function l(m,n,o){c('PageCustomerDispatcher').handleViewAction({actionType:i.SET_TAG,pageID:m,userID:n,tagName:o});},unsetTag:function l(m,n,o){c('PageCustomerDispatcher').handleViewAction({actionType:i.UNSET_TAG,pageID:m,userID:n,tagName:o});},unflag:function l(m,n){c('MercuryPageThreadActions').getForFBID(m).removeFlag(c('MercuryIDs').getThreadIDFromUserID(n),'context_card');},updateCustomTagsData:function l(m,n,o){c('PagesManagerCustomTagsAction').updateCustomTagsData(m,n,o);},showMoreHistory:function l(m,n){c('PageCustomerDispatcher').handleViewAction({actionType:i.SHOW_MORE_HISTORY,pageID:m,userID:n});},showMoreNotes:function l(m,n){c('PageCustomerDispatcher').handleViewAction({actionType:i.SHOW_MORE_NOTES,pageID:m,userID:n});},showStoryPreview:function l(m,n,o){c('PageCustomerDispatcher').handleViewAction({actionType:i.SHOW_STORY_PREVIEW,pageID:m,userID:n,storyToken:o});},hideStoryPreview:function l(m,n){c('PageCustomerDispatcher').handleViewAction({actionType:i.HIDE_STORY_PREVIEW,pageID:m,userID:n});},toggleEditNoteDialog:function l(m,n,o,p){c('PageCustomerDispatcher').handleViewAction({actionType:i.TOGGLE_EDIT_NOTE_DIALOG,pageID:m,userID:n,noteID:p,showEditNoteDialog:o});},toggleDeleteNoteDialog:function l(m,n,o,p){c('PageCustomerDispatcher').handleViewAction({actionType:i.TOGGLE_DELETE_NOTE_DIALOG,pageID:m,userID:n,noteID:o,showDeleteNoteDialog:p});},addNote:function l(m,n,o){c('PageCustomerDispatcher').handleViewAction({actionType:i.ADD_NOTE,pageID:m,userID:n,noteBody:o});},editNote:function l(m,n,o,p){c('PageCustomerDispatcher').handleViewAction({actionType:i.EDIT_NOTE,pageID:m,userID:n,noteID:o,noteBody:p});},deleteNote:function l(m,n,o){c('PageCustomerDispatcher').handleViewAction({actionType:i.DELETE_NOTE,pageID:m,userID:n,noteID:o});},draftNote:function l(m,n,o){c('PageCustomerDispatcher').handleViewAction({actionType:i.DRAFT_NOTE,pageID:m,userID:n,noteDraft:o});}};f.exports=k;}),null);
__d('PagesMessengerOmnipicker.react',['cx','fbt','invariant','React','Link.react','Omnipicker.react','ComputerPanel.react','OmnipickerComputerSelector.react','OmnipickerDialog.react','OmnipickerDialogRenderer','OmnipickerPagePostedPhotosPanel.react','OmnipickerPagePostedPhotosSelector.react','OmnipickerPanelList.react','OmnipickerSelectorList.react','OmnipickerWaterfallLogger','PUWApplications','PUWSteps','WaterfallIDGenerator'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k=c('React').PropTypes,l=c('React').createClass({displayName:'PagesMessengerOmnipicker',_waterfallLogger:c('OmnipickerWaterfallLogger'),_dialogRenderer:null,propTypes:{uploadURI:k.string.isRequired,onPhotosSelected:k.func.isRequired,pageID:k.string.isRequired},componentDidMount:function m(){this._waterfallLogger=new (c('OmnipickerWaterfallLogger'))(c('PUWApplications').WEB_PAGES_MESSENGER,c('WaterfallIDGenerator').generate());var n={fileUploadURI:this.props.uploadURI};this._dialogRenderer=new (c('OmnipickerDialogRenderer'))(c('React').createElement(c('OmnipickerDialog.react'),{onCancel:this._onPickerCancel,title:i._("Select photo")},c('React').createElement(c('Omnipicker.react'),{logger:this._waterfallLogger,onDoneSelecting:this._onDoneSelecting},c('React').createElement(c('OmnipickerSelectorList.react'),null,c('React').createElement(c('OmnipickerComputerSelector.react'),null),c('React').createElement(c('OmnipickerPagePostedPhotosSelector.react'),null)),c('React').createElement(c('OmnipickerPanelList.react'),null,c('React').createElement(c('ComputerPanel.react'),{config:n}),c('React').createElement(c('OmnipickerPagePostedPhotosPanel.react'),{pageID:this.props.pageID})))));},render:function m(){return (c('React').createElement('div',{className:"_k6_"},c('React').createElement(c('Link.react'),{className:"_k70",onClick:this._onPickerLaunch},c('React').createElement('i',{alt:i._("Camera"),className:"_k72"}))));},_onPickerLaunch:function m(){this._waterfallLogger.logStep(c('PUWSteps').CLIENT_FLOW_BEGIN);this._dialogRenderer||j(0);this._dialogRenderer.show();},_onPickerCancel:function m(){this._dialogRenderer||j(0);this._dialogRenderer.hide();this._waterfallLogger.logStep(c('PUWSteps').CLIENT_FLOW_CANCEL);},_onDoneSelecting:function m(n){this._dialogRenderer||j(0);this._dialogRenderer.hide();this.props.onPhotosSelected(n);}});f.exports=l;}),null);
__d('SavedResponsesConstants',[],(function a(b,c,d,e,f,g){var h={editPanelViewMode:{LIST:'LIST',CREATE:'CREATE',EDIT:'EDIT',PERSONALIZE:'PERSONALIZE'},sortingKey:{LAST_USED:'LAST_USED',MOST_USED:'MOST_USED',LAST_CREATED:'LAST_CREATED'},browsePanelAttachModeWidth:300,editPanelDialogWidth:600,listItemImageHeight:60,listItemImageWidth:60};f.exports=h;}),null);
__d('SavedResponsesActionButton.react',['cx','Image.react','React','XUIGrayText.react','joinClasses'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(m,n){j.constructor.call(this,m,n);}l.prototype.render=function(){var m=c('joinClasses')("_uvx",this.props.className);return (c('React').createElement('div',{className:m,onClick:this.props.onClick},c('React').createElement(c('Image.react'),{src:this.props.image,className:"_uvy"}),c('React').createElement(c('XUIGrayText.react'),{shade:'medium',className:"_uvz"},this.props.label)));};l.propTypes={image:k.object.isRequired,label:k.string.isRequired,onClick:k.func.isRequired};f.exports=l;}),null);
__d("XPagesSavedResponseImagePreviewController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pages\/saved_responses\/image\/preview\/",{});}),null);
__d('SavedResponsesImage.react',['cx','ActorURI','AsyncRequest','Image.react','LoadingIndicator.react','React','XPagesSavedResponseImagePreviewController','XUICloseButton.react','isEmpty','joinClasses'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(m,n){j.constructor.call(this,m,n);this.$SavedResponsesImage1=null;this.state={currentThumbnailImageId:'',imageUrl:null,isFetchingThumbnail:false};}l.prototype.componentWillReceiveProps=function(m){if(m.imageID!==this.props.imageID)this.$SavedResponsesImage2(m.imageID);};l.prototype.componentDidMount=function(){if(this.props.imageID)this.$SavedResponsesImage2(this.props.imageID);};l.prototype.componentWillUnmount=function(){if(this.$SavedResponsesImage1&&this.$SavedResponsesImage1.abort){this.$SavedResponsesImage1.abort();this.$SavedResponsesImage1=null;}};l.prototype.render=function(){if(!this.$SavedResponsesImage3()&&!this.state.imageUrl)return null;var m="_3mgf";if(this.$SavedResponsesImage3()){m=c('joinClasses')(m,this.props.loadingClassName);}else m=c('joinClasses')(m,this.props.displayClassName);return (c('React').createElement('div',{className:this.props.className},c('React').createElement('div',{className:m},this.$SavedResponsesImage4())));};l.prototype.$SavedResponsesImage2=function(m){if(c('isEmpty')(m)){this.setState({imageUrl:null});return;}this.setState({isFetchingThumbnail:true});var n=c('XPagesSavedResponseImagePreviewController').getURIBuilder().getURI();n=c('ActorURI').create(n,this.props.pageID);this.$SavedResponsesImage1=new (c('AsyncRequest'))();this.$SavedResponsesImage1.setURI(n).setHandler(function(o){return this.$SavedResponsesImage5(o);}.bind(this)).setMethod('POST').setData({image_id:m,target_width:this.props.width,target_height:this.props.height}).send();};l.prototype.$SavedResponsesImage3=function(){return this.state.isFetchingThumbnail||!!this.props.isUploading;};l.prototype.$SavedResponsesImage4=function(){if(this.props.isUploading||this.state.isFetchingThumbnail){return (c('React').createElement(c('LoadingIndicator.react'),{size:'medium',color:'white',className:"_3mgg"}));}else if(this.state.imageUrl){return (c('React').createElement('div',null,c('React').createElement(c('XUICloseButton.react'),{className:"_3mgn"+(!this.props.shouldShowCloseButton?' '+"hidden_elem":''),size:'medium',onClick:this.props.onClose}),c('React').createElement(c('Image.react'),{src:this.state.imageUrl})));}else return null;};l.prototype.$SavedResponsesImage5=function(m){this.setState({imageUrl:m.payload.url,isFetchingThumbnail:false});};l.propTypes={displayClassName:k.string.isRequired,height:k.number.isRequired,imageID:k.string,isUploading:k.bool,loadingClassName:k.string.isRequired,onClose:k.func,pageID:k.string.isRequired,shouldShowCloseButton:k.bool.isRequired,width:k.number.isRequired};f.exports=l;}),null);
__d("SavedResponsesImageUploadHelper",[],(function a(b,c,d,e,f,g){function h(i,j){"use strict";this.$SavedResponsesImageUploadHelper1=i;this.$SavedResponsesImageUploadHelper2=j;}h.prototype.onUploaderMounted=function(i){"use strict";this.$SavedResponsesImageUploadHelper3=i;};h.prototype.onUploadFinished=function(){"use strict";if(!this.$SavedResponsesImageUploadHelper3)return;var i=this.$SavedResponsesImageUploadHelper3.getImageFiles().pop().toString();this.$SavedResponsesImageUploadHelper2(i);};h.prototype.onUploadStarted=function(){"use strict";this.$SavedResponsesImageUploadHelper1();};f.exports=h;}),null);
__d("XPagesSavedResponseNotifyAppliedController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pages\/saved_responses\/notify\/applied\/",{});}),null);
__d("XPagesSavedResponsesAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pages\/saved_responses\/",{page_id:{type:"Int",required:true},other_user_id:{type:"Int",required:true}});}),null);
__d('SavedResponsesUtils',['invariant','ActorURI','AsyncRequest','SavedResponsesConstants','XPagesSavedResponsesAsyncController','XPagesSavedResponseNotifyAppliedController'],(function a(b,c,d,e,f,g,h){var i={generateImageMetadata:function j(k){return {filename:'Photo.jpg',image_id:k,filetype:'image/jpeg'};},fetchSavedResponses:function j(k,l,m){var n=c('XPagesSavedResponsesAsyncController').getURIBuilder().setInt('other_user_id',l).setInt('page_id',k).getURI();n=c('ActorURI').create(n,k);new (c('AsyncRequest'))().setURI(n).setHandler(function(o){return m(o.payload.responses,o.payload.tokens);}).send();},sortSavedResponses:function j(k,l){switch(l){case c('SavedResponsesConstants').sortingKey.LAST_USED:return k.slice().sort(function(m,n){return n.lastTimeUsed-m.lastTimeUsed;});case c('SavedResponsesConstants').sortingKey.MOST_USED:return k.slice().sort(function(m,n){return n.usageCount-m.usageCount;});case c('SavedResponsesConstants').sortingKey.LAST_CREATED:return k;default:h(0);}},notifySavedResponseApplied:function j(k,l){var m=c('XPagesSavedResponseNotifyAppliedController').getURIBuilder().getURI();m=c('ActorURI').create(m,l);new (c('AsyncRequest'))().setURI(m).setMethod('POST').setData({response_id:k.id}).send();}};f.exports=i;}),null);
__d('SavedResponsesImageUploader.react',['cx','ChatFileUploaderMixin','Image.react','MercuryConfig','MercuryFileUploader','React','ReactDOM','SavedResponsesUtils','URI','XUIGrayText.react','joinClasses'],(function a(b,c,d,e,f,g,h){var i=c('React').PropTypes,j=c('React').createClass({displayName:'SavedResponsesImageUploader',mixins:[c('ChatFileUploaderMixin')],propTypes:{image:i.object.isRequired,label:i.string.isRequired,pageID:i.string},componentDidMount:function k(){this._fileUploader=new (c('MercuryFileUploader'))(this.props.attachmentsShelf,c('ReactDOM').findDOMNode(this.refs.form),c('ReactDOM').findDOMNode(this.refs.input),c('ReactDOM').findDOMNode(this.refs.attachID));if(this.props.imageID)this._fileUploader.addCachedAttachments([c('SavedResponsesUtils').generateImageMetadata(this.props.imageID)]);this.setUpSubscriptionsHandler(this._fileUploader);},getActionURI:function k(){return this.props.pageID?new (c('URI'))(c('MercuryConfig').upload_url).addQueryData('request_user_id',this.props.pageID).toString():c('MercuryConfig').upload_url;},getDefaultProps:function k(){return {pageID:null};},componentDidUpdate:function k(l,m){if(this.props.imageID){this._fileUploader.removeAttachments();this._fileUploader.addCachedAttachments([c('SavedResponsesUtils').generateImageMetadata(this.props.imageID)]);}},render:function k(){var l=c('joinClasses')("_uvx",this.props.className);return (c('React').createElement('form',{action:this.getActionURI(),className:l,method:'post',ref:'form'},c('React').createElement('input',{type:'hidden',name:'attach_id',ref:'attachID'}),c('React').createElement('div',{className:"_4q60"},c('React').createElement('div',{className:"_4q61 _2d_p"},c('React').createElement(c('Image.react'),{src:this.props.image,className:"_uvy"}),c('React').createElement(c('XUIGrayText.react'),{shade:'medium',className:"_uvz"},this.props.label)),c('React').createElement('input',{type:'file',className:"_2d_q",name:'attachment[]',accept:this.props.imagesOnly?'image/*':'*',ref:'input'}))));}});f.exports=j;}),null);
__d('SavedResponsesEditResponseContentView.react',['cx','fbt','ix','AbstractTextArea.react','React','SavedResponsesActionButton.react','SavedResponsesImage.react','SavedResponsesImageUploader.react','SavedResponsesImageUploadHelper','ScrollableArea.react','MacroInput.react'],(function a(b,c,d,e,f,g,h,i,j){var k,l,m=c('React').PropTypes;k=babelHelpers.inherits(n,c('React').Component);l=k&&k.prototype;n.prototype.render=function(){'use strict';var o=i._("Enter reply title here"),p=i._("Enter your message here");return (c('React').createElement('div',{className:this.props.className},c('React').createElement(c('AbstractTextArea.react'),{className:"_4451 _1vw8",onChange:function(q){return this.props.onTitleChange(q.target.value);}.bind(this),placeholder:o,value:this.props.responseTitle}),c('React').createElement('div',{className:"_38bw _57hg"},c('React').createElement(c('ScrollableArea.react'),{fade:true,shadow:true},c('React').createElement(c('MacroInput.react'),{className:"_3jv6",editorState:this.props.editorState,onChange:this.props.onContentChange,placeholder:p,readOnly:false,ref:'macroInput'}),c('React').createElement(c('SavedResponsesImage.react'),{className:"_57hh",displayClassName:"_57hn",imageID:this.props.responseImageID,isUploading:this.props.isUploadingImage,loadingClassName:"_57hi",pageID:this.props.pageID,height:250,onClose:this.props.onDeleteImage,shouldShowCloseButton:true,width:250}))),this.$SavedResponsesEditResponseContentView1()));};n.prototype.$SavedResponsesEditResponseContentView1=function(){'use strict';return (c('React').createElement('div',{className:"_57ho"},c('React').createElement(c('SavedResponsesImageUploader.react'),{className:"_3-8v",image:j('/images/mobile/glyph/photos_dark-grey_l.png'),label:i._("Add Image"),onFileUploaderMounted:function(o){return this.props.uploadHandler.onUploaderMounted(o);}.bind(this),onSubmit:function(){return this.props.uploadHandler.onUploadStarted();}.bind(this),onUploadFinished:function(){return this.props.uploadHandler.onUploadFinished();}.bind(this),pageID:this.props.pageID}),c('React').createElement(c('SavedResponsesActionButton.react'),{image:j('/images/mobile/glyph/love_dark-grey_l.png'),className:"_3-8v",label:i._("Personalise"),onClick:this.props.onPersonalize})));};function n(){'use strict';k.apply(this,arguments);}n.propTypes={editorState:m.object.isRequired,isUploadingImage:m.bool.isRequired,pageID:m.string.isRequired,responseImageID:m.string,responseTitle:m.string,onContentChange:m.func.isRequired,onDeleteImage:m.func.isRequired,onPersonalize:m.func.isRequired,onTitleChange:m.func.isRequired,uploadHandler:m.instanceOf(c('SavedResponsesImageUploadHelper')).isRequired};f.exports=n;}),null);
__d('SavedResponsesFooterButton.react',['cx','Image.react','React','XUIButton.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(m,n){j.constructor.call(this,m,n);}l.prototype.render=function(){return (c('React').createElement(c('XUIButton.react'),babelHelpers['extends']({},this.props,{className:"_3-8i"+(this.props.isHidden?' '+"hidden_elem":''),size:'large',label:this.props.label,onClick:this.props.onClick,use:this.props.use,image:this.props.image?c('React').createElement(c('Image.react'),{src:this.props.image}):null})));};l.propTypes={image:k.object,isHidden:k.bool,label:k.string.isRequired,onClick:k.func.isRequired,use:k.oneOf(['default','special','confirm'])};l.defaultProps={use:'default',isHidden:false};f.exports=l;}),null);
__d('SavedResponsesMacroDetailView.react',['cx','fbt','React','ScrollableArea.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(n,o){k.constructor.call(this,n,o);}m.prototype.render=function(){var n=this.props.macro;if(!n)return null;return (c('React').createElement(c('ScrollableArea.react'),{fade:true,shadow:true},c('React').createElement('div',null,c('React').createElement('div',{className:"_tpd"},n.key),c('React').createElement('div',{className:"_tpe"},n.description),c('React').createElement('div',{className:"_tpf"},i._("Example")),c('React').createElement('div',{className:"_tpg"},n.example))));};m.propTypes={macro:l.shape({description:l.string.isRequired,example:l.string.isRequired,key:l.string.isRequired,name:l.string.isRequired,value:l.string.isRequired})};f.exports=m;}),null);
__d('SavedResponsesMacroListItem.react',['cx','ix','Image.react','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(n,o){k.constructor.call(this,n,o);this.state={isHover:false};}m.prototype.render=function(){return (c('React').createElement('div',{className:"_5y_z",'data-id':this.props.macro.key,onClick:function(){return this.$SavedResponsesMacroListItem1();}.bind(this),onMouseOut:function(){return this.$SavedResponsesMacroListItem2();}.bind(this),onMouseOver:function(){return this.$SavedResponsesMacroListItem3();}.bind(this)},c('React').createElement('div',{className:"_5y__"},this.props.macro.key),c('React').createElement('div',{className:"_5z00"+(!this.state.isHover?' '+"hidden_elem":'')},c('React').createElement(c('Image.react'),{src:i('/images/pages/macro_listitem_triangle.png')}))));};m.prototype.$SavedResponsesMacroListItem3=function(){this.props.onHover(this.props.macro);this.setState({isHover:true});};m.prototype.$SavedResponsesMacroListItem2=function(){this.setState({isHover:false});};m.prototype.$SavedResponsesMacroListItem1=function(){this.props.onSelect(this.props.macro);};m.propTypes={macro:l.shape({key:l.string.isRequired,value:l.string.isRequired}).isRequired,onHover:l.func.isRequired,onSelect:l.func.isRequired};f.exports=m;}),null);
__d('SavedResponsesMacroListView.react',['React','SavedResponsesMacroListItem.react'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;function k(l,m){i.constructor.call(this,l,m);}k.prototype.render=function(){return (c('React').createElement('ul',null,this.$SavedResponsesMacroListView1()));};k.prototype.$SavedResponsesMacroListView1=function(){var l=[];for(var m in this.props.macros){var n=this.props.macros[m];l.push(c('React').createElement(c('SavedResponsesMacroListItem.react'),{macro:n,onHover:this.props.onMacroHover,onSelect:this.props.onMacroSelected}));}return l;};k.propTypes={macros:j.object.isRequired,onMacroHover:j.func.isRequired,onMacroSelected:j.func.isRequired};f.exports=k;}),null);
__d('SavedResponsesMacroBrowseView.react',['cx','fbt','Grid.react','React','SavedResponsesFooterButton.react','SavedResponsesMacroDetailView.react','SavedResponsesMacroListView.react','ScrollableArea.react','joinClasses'],(function a(b,c,d,e,f,g,h,i){var j,k,l=c('Grid.react').GridItem,m=c('React').PropTypes;j=babelHelpers.inherits(n,c('React').Component);k=j&&j.prototype;function n(o,p){'use strict';k.constructor.call(this,o,p);this.state={activeMacro:null};}n.prototype.render=function(){'use strict';return (c('React').createElement('div',null,this.renderBodyPart(),c('React').createElement('div',{className:"_3ohz"},this.renderFooterPart())));};n.prototype.renderBodyPart=function(){'use strict';var o=c('joinClasses')("_552a",this.props.className);return (c('React').createElement('div',{className:o},c('React').createElement(c('Grid.react'),{cols:2,spacing:'none',className:"_552b"},c('React').createElement(l,{className:"_552c"},c('React').createElement('div',{className:"_552d"}),c('React').createElement(c('ScrollableArea.react'),{fade:true,shadow:true},c('React').createElement('div',{className:"_2t-k"},c('React').createElement(c('SavedResponsesMacroListView.react'),{macros:this.props.macros,onMacroSelected:this.props.onMacroSelected,onMacroHover:function(p){return this.$SavedResponsesMacroBrowseView1(p);}.bind(this)})))),c('React').createElement(l,{className:"_552e"},c('React').createElement(c('SavedResponsesMacroDetailView.react'),{macro:this.state.activeMacro})))));};n.prototype.renderFooterPart=function(){'use strict';var o=i._("Cancel");return (c('React').createElement('div',null,c('React').createElement('div',{className:"_552g"},c('React').createElement(c('SavedResponsesFooterButton.react'),{label:o,onClick:this.props.onCancel}))));};n.prototype.$SavedResponsesMacroBrowseView1=function(o){'use strict';this.setState({activeMacro:o});};n.propTypes={macros:m.object.isRequired,onCancel:m.func.isRequired,onMacroSelected:m.func.isRequired};f.exports=n;}),null);
__d('SavedResponsesPanel.react',['cx','fbt','ix','Image.react','React','XUICloseButton.react','XUIDialogBody.react','XUIDialogTitle.react','XUIGrayText.react','emptyFunction'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('React').PropTypes;k=babelHelpers.inherits(n,c('React').Component);l=k&&k.prototype;function n(o,p){l.constructor.call(this,o,p);}n.prototype.render=function(){return (c('React').createElement('div',{className:this.props.className},c('React').createElement(c('XUIDialogTitle.react'),{className:"_3alh",showCloseButton:false},c('React').createElement('div',{className:"_2rp7"},c('React').createElement('div',{className:"_2rp8"+(!this.props.shouldShowBackButton?' '+"hidden_elem":''),onClick:this.props.onBackButtonClicked},c('React').createElement(c('Image.react'),{src:j("/images/help/rooms/back.png"),className:"_2rp9"}),c('React').createElement(c('XUIGrayText.react'),{shade:'light',className:"_2rpa"},this.props.backButtonLabel),c('React').createElement('div',{className:"_2rpb"})),c('React').createElement('span',{className:"_5hp9"},this.props.title)),this.$SavedResponsesPanel1()),c('React').createElement(c('XUIDialogBody.react'),{className:"_2rpc"},this.props.children)));};n.prototype.$SavedResponsesPanel1=function(){var o=i._("Close");return (c('React').createElement(c('XUICloseButton.react'),{className:"_2rpe",label:o,onClick:this.props.onClose,shade:'dark',size:'medium',title:o,type:'button'}));};n.propTypes={backButtonLabel:m.string,onBackButtonClicked:m.func,onClose:m.func.isRequired,shouldShowBackButton:m.bool,title:m.string.isRequired};n.defaultProps={backButtonLabel:null,onBackButtonClicked:c('emptyFunction'),shouldShowBackButton:false};f.exports=n;}),null);
__d('MacroSpan.react',['cx','DraftEntity','React','XUICloseButton.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.state={isMouseOver:false},this.$MacroSpan4=function(r){var s=r.key in this.props.tokens?this.props.tokens[r.key].value:r.key,t=r.key in this.props.tokens?this.props.tokens[r.key].key:r.key;return this.state.isMouseOver?t:s;}.bind(this),this.$MacroSpan2=function(){this.setState({isMouseOver:true});}.bind(this),this.$MacroSpan3=function(){this.setState({isMouseOver:false});}.bind(this),this.$MacroSpan5=function(){this.props.onRemoveToken(this.props.offsetKey);}.bind(this),this.$MacroSpan1=function(){return c('DraftEntity').get(this.props.entityKey).getData();}.bind(this),n;}l.prototype.render=function(){var m=this.$MacroSpan1();return c('React').createElement('span',{className:"_vxd",onMouseEnter:this.$MacroSpan2,onMouseLeave:this.$MacroSpan3},c('React').createElement('span',{className:"_vxe",contentEditable:false,'data-offset-key':this.props.offsetKey,spellCheck:false},this.$MacroSpan4(m),c('React').createElement(c('XUICloseButton.react'),{size:'small',className:"_vxf",onClick:this.$MacroSpan5})));};l.propTypes={entityKey:k.string.isRequired,offsetKey:k.string.isRequired,onRemoveToken:k.func.isRequired,tokens:k.object.isRequired};f.exports=l;}),null);
__d('getMacrosInputDecorator',['CompositeDraftDecorator','MacroSpan.react','getEntityMatcher'],(function a(b,c,d,e,f,g){function h(i,j){return new (c('CompositeDraftDecorator'))([{strategy:c('getEntityMatcher')(function(k){return k.getType()==='TOKEN';}),component:c('MacroSpan.react'),props:{onRemoveToken:j,tokens:i}}]);}f.exports=h;}),null);
__d('SavedResponsesTokensUtils',['DraftEntity','createEditorStateWithEntities','getMacrosInputDecorator'],(function a(b,c,d,e,f,g){'use strict';var h=new RegExp('{{(.*?)}}','ig'),i={_parseTemplateFieldTokens:function j(k){var l=k,m=[],n=void 0;while(n=h.exec(l)){var o={text:n[0],offset:n.index,length:n[0].length,entity:{token:n[0],key:n[1]}};m.push(o);l=l.replace(n[0],o.text);h.lastIndex=o.offset+o.length;}if(m.length>0){if(m[0].offset===0){l=" "+l;m.forEach(function(q){q.offset++;});}var p=m[m.length-1];if(p.length+p.offset===l.length)l=l+" ";}return {ranges:m,text:l};},createTemplateFieldsEditorStateWithText:function j(k,l,m){var n=i._parseTemplateFieldTokens(k),o=n.ranges,p=n.text;return c('createEditorStateWithEntities')({text:p,ranges:o,decorator:c('getMacrosInputDecorator')(m,l),entityCreationFn:function q(r){return c('DraftEntity').create('TOKEN','IMMUTABLE',r);}});},prepareforSend:function j(k,l){var m=k.match(/\{{(.*?)\}}/g);if(m)m.forEach(function(n){var o=n.replace('{{','').replace('}}',''),p=o in l?l[o].value:o;k=k.replace(n,p);});return k;}};f.exports=i;}),null);
__d("XPagesSavedResponsesAddController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pages\/saved_responses\/add\/",{owner_id:{type:"Int",required:true},title:{type:"String",defaultValue:""},message:{type:"String",required:true},photo_id:{type:"Int"},user_message:{type:"String"}});}),null);
__d("XPagesSavedResponsesDeleteController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pages\/saved_responses\/delete\/",{response_id:{type:"Int",required:true}});}),null);
__d("XPagesSavedResponsesEditController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pages\/saved_responses\/edit\/",{response_id:{type:"Int",required:true},title:{type:"String",defaultValue:""},message:{type:"String",required:true},photo_id:{type:"Int"},remove_photo_id:{type:"Int"}});}),null);
__d('SavedResponsesEditResponseView.react',['cx','fbt','invariant','ActorURI','AsyncRequest','DraftEntity','DraftModifier','DraftOffsetKey','EditorState','PagesEventObserver','PagesEventType','React','SavedResponsesEditResponseContentView.react','SavedResponsesFooterButton.react','SavedResponsesImageUploadHelper','SavedResponsesMacroBrowseView.react','SavedResponsesPanel.react','SavedResponsesTokensUtils','SelectionState','XPagesSavedResponsesAddController','XPagesSavedResponsesDeleteController','XPagesSavedResponsesEditController','XUISpinner.react','getMacrosInputDecorator'],(function a(b,c,d,e,f,g,h,i,j){var k,l,m=c('React').PropTypes;k=babelHelpers.inherits(n,c('React').Component);l=k&&k.prototype;function n(o,p){'use strict';l.constructor.call(this,o,p);var q=!!this.props.initialResponse||false,r=!!this.props.initialResponse&&!!this.props.initialResponse.image?this.props.initialResponse.image.id:'',s=this.$SavedResponsesEditResponseView1(q);this.state={anyContent:s.getCurrentContent().hasText(),editorState:s,imageID:r,isEditing:q,isModified:false,isPersonalizing:false,isProcessing:false,isUploadingImage:false,message:s.getCurrentContent().getPlainText(),shouldShowDeleteWarning:false,shouldShowDiscardWarning:false,title:!!this.props.initialResponse?this.props.initialResponse.title:'',uploadHandler:new (c('SavedResponsesImageUploadHelper'))(function(){return this.$SavedResponsesEditResponseView2();}.bind(this),function(t){return this.$SavedResponsesEditResponseView3(t);}.bind(this))};}n.prototype.render=function(){'use strict';return (c('React').createElement(c('SavedResponsesPanel.react'),{backButtonLabel:this.$SavedResponsesEditResponseView4(),className:"_15ht",onBackButtonClicked:function(){return this.$SavedResponsesEditResponseView5();}.bind(this),onClose:this.props.onClose,shouldShowBackButton:true,title:this.$SavedResponsesEditResponseView6()},this.$SavedResponsesEditResponseView7(),c('React').createElement('div',{className:"_3ohz"},this.$SavedResponsesEditResponseView8())));};n.prototype.$SavedResponsesEditResponseView9=function(){'use strict';return i._("Cancel");};n.prototype.$SavedResponsesEditResponseView10=function(){'use strict';return i._("Delete");};n.prototype.$SavedResponsesEditResponseView11=function(){'use strict';return i._("Save Reply");};n.prototype.$SavedResponsesEditResponseView7=function(){'use strict';if(this.state.isPersonalizing){return (c('React').createElement(c('SavedResponsesMacroBrowseView.react'),{className:"_1wxh",macros:this.props.supportedMacros,onCancel:function(){return this.$SavedResponsesEditResponseView12();}.bind(this),onMacroSelected:function(o){return this.$SavedResponsesEditResponseView13(o);}.bind(this)}));}else return (c('React').createElement(c('SavedResponsesEditResponseContentView.react'),{className:"_1wxh",editorState:this.state.editorState,isUploadingImage:this.state.isUploadingImage,onContentChange:function(o){return this.$SavedResponsesEditResponseView14(o);}.bind(this),onDeleteImage:function(){return this.$SavedResponsesEditResponseView15();}.bind(this),onPersonalize:function(){return this.$SavedResponsesEditResponseView16();}.bind(this),onTitleChange:function(o){this.setState({title:o,isModified:true});}.bind(this),pageID:this.props.pageID,responseImageID:this.state.imageID,responseTitle:this.state.title,uploadHandler:this.state.uploadHandler}));};n.prototype.$SavedResponsesEditResponseView8=function(){'use strict';if(this.state.isPersonalizing){return (c('React').createElement(c('SavedResponsesFooterButton.react'),{label:this.$SavedResponsesEditResponseView9(),onClick:function(){return this.$SavedResponsesEditResponseView12();}.bind(this)}));}else return this.$SavedResponsesEditResponseView17();};n.prototype.$SavedResponsesEditResponseView18=function(){'use strict';var o=i._("Continue Editing"),p=i._("Discard");return (c('React').createElement('div',null,c('React').createElement('div',{className:"_2ln1"},i._("Are you sure you want to discard your edit?")),c('React').createElement('div',{className:"_4pnp"},c('React').createElement(c('SavedResponsesFooterButton.react'),{label:p,onClick:function(){return this.$SavedResponsesEditResponseView19();}.bind(this)}),c('React').createElement(c('SavedResponsesFooterButton.react'),{label:o,onClick:function(){return this.$SavedResponsesEditResponseView20();}.bind(this),use:'confirm'}))));};n.prototype.$SavedResponsesEditResponseView21=function(){'use strict';return (c('React').createElement('div',null,c('React').createElement('div',{className:"_2ln1"},i._("Are you sure you want to delete this saved reply?")),c('React').createElement('div',{className:"_4pnp"},c('React').createElement(c('SavedResponsesFooterButton.react'),{label:this.$SavedResponsesEditResponseView10(),onClick:function(){return this.$SavedResponsesEditResponseView22();}.bind(this)}),c('React').createElement(c('SavedResponsesFooterButton.react'),{label:this.$SavedResponsesEditResponseView9(),onClick:function(){return this.$SavedResponsesEditResponseView23();}.bind(this),use:'confirm'}))));};n.prototype.$SavedResponsesEditResponseView24=function(){'use strict';return (c('React').createElement('div',null,c('React').createElement(c('SavedResponsesFooterButton.react'),{label:this.$SavedResponsesEditResponseView10(),onClick:function(){return this.$SavedResponsesEditResponseView25();}.bind(this),isHidden:!this.state.isEditing}),c('React').createElement('div',{className:"_4pnp"},c('React').createElement(c('SavedResponsesFooterButton.react'),{label:this.$SavedResponsesEditResponseView9(),onClick:function(){return this.props.onEditDone(false);}.bind(this)}),c('React').createElement(c('SavedResponsesFooterButton.react'),{disabled:!this.state.anyContent,label:this.$SavedResponsesEditResponseView11(),onClick:function(){return this.$SavedResponsesEditResponseView26();}.bind(this),use:'confirm'}),c('React').createElement(c('XUISpinner.react'),{size:'small',className:(!this.state.isProcessing?"hidden_elem":'')+(' '+"_3-91")+(' '+"_3-99")}))));};n.prototype.$SavedResponsesEditResponseView17=function(){'use strict';if(this.state.shouldShowDeleteWarning){return this.$SavedResponsesEditResponseView21();}else if(this.state.shouldShowDiscardWarning){return this.$SavedResponsesEditResponseView18();}else return this.$SavedResponsesEditResponseView24();};n.prototype.$SavedResponsesEditResponseView4=function(){'use strict';if(!this.state.isPersonalizing){return i._("List");}else return i._("Edit");};n.prototype.$SavedResponsesEditResponseView6=function(){'use strict';if(this.state.isPersonalizing){return i._("Add personalisation");}else if(this.state.isEditing){return i._("Edit reply");}else return i._("Create reply");};n.prototype.$SavedResponsesEditResponseView27=function(o){'use strict';var p={text:'{{'+o.name+'}}',key:o.name},q=this.state.editorState,r=q.getSelection(),s=q.getCurrentContent(),t=r.getStartKey(),u=r.getStartOffset(),v=s.getBlockForKey(t),w;if(v.getText().substr(u-1,1).trim().length>0){var x=c('DraftModifier').replaceText(s,r,' ');r=x.getSelectionAfter();w=c('DraftModifier').insertText(x,r,p.text,q.getCurrentInlineStyle(),c('DraftEntity').create('TOKEN','IMMUTABLE',p));}else w=c('DraftModifier').replaceText(s,r,p.text,q.getCurrentInlineStyle(),c('DraftEntity').create('TOKEN','IMMUTABLE',p));w=c('DraftModifier').insertText(w,w.getSelectionAfter(),' ');q=c('EditorState').push(q,w,'insert-fragment');q=c('EditorState').forceSelection(q,q.getSelection());this.$SavedResponsesEditResponseView14(q);};n.prototype.$SavedResponsesEditResponseView28=function(){'use strict';var o=this.state.editorState.getCurrentContent().getPlainText();c('PagesEventObserver').logData_DEPRECATED({event_name:c('PagesEventType').SAVED_REPLIES_EDIT_REPLY,page_id:this.props.pageID,response_content:o},null);var p=this.props.initialResponse;!!p||j(0);var q=this.state.imageID?this.state.imageID.toString():'',r=c('XPagesSavedResponsesEditController').getURIBuilder().setInt('response_id',p.id).setString('message',o).setString('title',this.state.title);if(!q&&p.image&&p.image.id){r.setInt('remove_photo_id',p.image.id);}else r.setInt('photo_id',q);r=c('ActorURI').create(r.getURI(),this.props.pageID);new (c('AsyncRequest'))().setURI(r).setMethod('POST').setHandler(function(){return this.props.onEditDone(true);}.bind(this)).send();};n.prototype.$SavedResponsesEditResponseView29=function(){'use strict';var o=this.state.editorState.getCurrentContent().getPlainText();c('PagesEventObserver').logData_DEPRECATED({event_name:c('PagesEventType').SAVED_REPLIES_CREATE_REPLY,page_id:this.props.pageID,response_content:o},null);var p=this.state.imageID?this.state.imageID.toString():'',q=c('XPagesSavedResponsesAddController').getURIBuilder().setInt('owner_id',this.props.pageID).setString('message',o).setString('title',this.state.title).setInt('photo_id',p).getURI();q=c('ActorURI').create(q,this.props.pageID);new (c('AsyncRequest'))().setURI(q).setMethod('POST').setHandler(function(){return this.props.onEditDone(true);}.bind(this)).send();};n.prototype.$SavedResponsesEditResponseView1=function(o){'use strict';if(o&&this.props.initialResponse){var p=this.props.initialResponse.message||'';return c('SavedResponsesTokensUtils').createTemplateFieldsEditorStateWithText(p,function(q){return this.$SavedResponsesEditResponseView30(q);}.bind(this),this.props.supportedMacros);}else return c('EditorState').createEmpty(c('getMacrosInputDecorator')(this.props.supportedMacros||{},function(q){return this.$SavedResponsesEditResponseView30(q);}.bind(this)));};n.prototype.$SavedResponsesEditResponseView15=function(){'use strict';this.setState({imageID:null});};n.prototype.$SavedResponsesEditResponseView5=function(){'use strict';if(this.state.isPersonalizing){this.setState({isPersonalizing:false});}else if(this.state.isModified){this.setState({shouldShowDiscardWarning:true});}else this.props.onBackButtonClicked();};n.prototype.$SavedResponsesEditResponseView12=function(){'use strict';this.setState({isPersonalizing:false});};n.prototype.$SavedResponsesEditResponseView13=function(o){'use strict';c('PagesEventObserver').logData_DEPRECATED({event_name:c('PagesEventType').SAVED_REPLIES_PERSONALIZE,page_id:this.props.pageID},null);this.setState({isPersonalizing:false});this.$SavedResponsesEditResponseView27(o);};n.prototype.$SavedResponsesEditResponseView16=function(){'use strict';this.setState({isPersonalizing:true});this.props.onEnterPersonalizeView();};n.prototype.$SavedResponsesEditResponseView14=function(o){'use strict';this.setState({anyContent:o.getCurrentContent().hasText(),editorState:o,isModified:true});};n.prototype.$SavedResponsesEditResponseView2=function(){'use strict';c('PagesEventObserver').logData_DEPRECATED({event_name:c('PagesEventType').SAVED_REPLIES_ADD_IMAGE,page_id:this.props.pageID},null);this.setState({imageID:null,isUploadingImage:true});};n.prototype.$SavedResponsesEditResponseView3=function(o){'use strict';this.setState({imageID:o,isUploadingImage:false});};n.prototype.$SavedResponsesEditResponseView30=function(o){'use strict';var p=this.state.editorState,q=c('DraftOffsetKey').decode(o),r=q.blockKey,s=q.decoratorKey,t=p.getBlockTree(r).getIn([s]),u=new (c('SelectionState'))({anchorKey:r,anchorOffset:t.get('start'),focusKey:r,focusOffset:t.get('end'),isBackward:false,hasFocus:true}),v=c('DraftModifier').removeRange(p.getCurrentContent(),u,'forward'),w=c('EditorState').push(p,v,'remove-range');this.$SavedResponsesEditResponseView14(w);};n.prototype.$SavedResponsesEditResponseView25=function(){'use strict';this.setState({shouldShowDeleteWarning:true});};n.prototype.$SavedResponsesEditResponseView26=function(){'use strict';this.setState({isProcessing:true});this.state.isEditing?this.$SavedResponsesEditResponseView28():this.$SavedResponsesEditResponseView29();};n.prototype.$SavedResponsesEditResponseView23=function(){'use strict';this.setState({shouldShowDeleteWarning:false});};n.prototype.$SavedResponsesEditResponseView22=function(){'use strict';c('PagesEventObserver').logData_DEPRECATED({event_name:c('PagesEventType').SAVED_REPLIES_DELETE_REPLY,page_id:this.props.pageID},null);this.setState({shouldShowDeleteWarning:false,isProcessing:true});var o=this.props.initialResponse;!!o||j(0);var p=c('XPagesSavedResponsesDeleteController').getURIBuilder().setInt('response_id',o.id).getURI();new (c('AsyncRequest'))().setURI(p).setMethod('POST').setHandler(function(){return this.props.onEditDone(true);}.bind(this)).send();};n.prototype.$SavedResponsesEditResponseView19=function(){'use strict';this.props.onBackButtonClicked();};n.prototype.$SavedResponsesEditResponseView20=function(){'use strict';this.setState({shouldShowDiscardWarning:false});};n.propTypes={initialResponse:m.shape({id:m.string.isRequired,title:m.string,message:m.string,image:m.object}),onBackButtonClicked:m.func.isRequired,onClose:m.func.isRequired,onEditDone:m.func.isRequired,onEnterPersonalizeView:m.func.isRequired,pageID:m.string.isRequired,supportedMacros:m.object};f.exports=n;}),null);
__d('SavedResponsesListItem.react',['cx','fbt','ClientIDs','Link.react','React','ReactDOM','SavedResponsesImage.react','SavedResponsesConstants'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.state={shouldShowSeeMoreLink:false,shouldLimitHeight:true},this.$SavedResponsesListItem1=function(){if(this.state.shouldLimitHeight===false||this.state.shouldShowSeeMoreLink)return;var s=c('ReactDOM').findDOMNode(this.refs.message);if(s.scrollHeight>s.clientHeight)this.setState({shouldShowSeeMoreLink:true});}.bind(this),this.$SavedResponsesListItem4=function(s){var t=0,u=0,v=/\{{(.*?)\}}/g,w=v.exec(s),x=[];while(w!=null){u=w.index;x.push(c('React').createElement('span',{key:c('ClientIDs').getNewClientID()},s.substring(t,u)));t=u+w[0].length;var y=w[1] in this.props.tokens?this.props.tokens[w[1]].value:w[1];x.push(c('React').createElement('span',{key:c('ClientIDs').getNewClientID(),className:"_-8"},y));w=v.exec(s);}x.push(c('React').createElement('span',{key:c('ClientIDs').getNewClientID()},s.substring(t,s.length)));return x;}.bind(this),this.$SavedResponsesListItem2=function(){this.props.onResponseSelected(this.props.response,this.props.tokens);}.bind(this),this.$SavedResponsesListItem3=function(){this.props.onResponseHover&&this.props.onResponseHover(this.props.response,this.props.tokens);}.bind(this),this.$SavedResponsesListItem5=function(s){this.setState({shouldShowSeeMoreLink:false,shouldLimitHeight:false});s.stopPropagation();}.bind(this),o;}m.prototype.componentDidMount=function(){this.$SavedResponsesListItem1();};m.prototype.componentDidUpdate=function(){this.$SavedResponsesListItem1();};m.prototype.render=function(){var n=this.props.response.image&&true;return c('React').createElement('div',{className:"_33w3"+(n?' '+"_33w4":''),'data-id':this.props.response.id,onClick:this.$SavedResponsesListItem2,onMouseEnter:this.$SavedResponsesListItem3,onMouseLeave:this.props.onResponseUnhover},c('React').createElement('div',{className:"_33w5"+(n?' '+"_33w6":'')+(' '+"fwb")},this.props.response.title),c('React').createElement('div',{className:"_33w7"+(this.state.shouldLimitHeight?' '+"_4en5":'')+(!this.props.response.title&&this.props.response.image?' '+"_2pid":''),ref:'message'},this.props.response.image?c('React').createElement(c('SavedResponsesImage.react'),{className:"_33w8",displayClassName:"_33w9",height:c('SavedResponsesConstants').listItemImageHeight,imageID:this.props.response.image.id,loadingClassName:"_33w9",pageID:this.props.pageID,shouldShowCloseButton:false,width:c('SavedResponsesConstants').listItemImageWidth}):null,this.$SavedResponsesListItem4(this.props.response.message)),c('React').createElement(c('Link.react'),{className:"_4en6"+(!this.state.shouldShowSeeMoreLink?' '+"hidden_elem":''),onClick:this.$SavedResponsesListItem5},i._("See more")));};m.propTypes={onResponseHover:l.func,onResponseSelected:l.func.isRequired,onResponseUnhover:l.func,pageID:l.string.isRequired,response:l.shape({id:l.string.isRequired,title:l.string,message:l.string.isRequired,image:l.object}),tokens:l.object.isRequired};f.exports=m;}),null);
__d('SavedResponsesListView.react',['cx','React','SavedResponsesListItem.react','SavedResponsesUtils','XUISpinner.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(m,n){j.constructor.call(this,m,n);}l.prototype.render=function(){if(this.props.isLoadingResponses)return (c('React').createElement('div',{className:"_e19"},c('React').createElement(c('XUISpinner.react'),{size:'large'})));var m=this.props.searchQuery.trim().toLowerCase(),n=function p(q){return (q.message.toLowerCase().indexOf(m)!==-1||(q.title||'').toLowerCase().indexOf(m)!==-1);},o=c('SavedResponsesUtils').sortSavedResponses(this.props.responses,this.props.sortingKey);return (c('React').createElement('ul',{className:this.props.shouldAdjustRightMargin?"_e1a":''},o.filter(n).map(function(p){return (c('React').createElement(c('SavedResponsesListItem.react'),{key:p.id,onResponseHover:this.props.onResponseHover,onResponseSelected:this.props.onResponseSelected,onResponseUnhover:this.props.onResponseUnhover,pageID:this.props.pageID,response:p,tokens:this.props.supportedMacros}));}.bind(this))));};l.propTypes={isLoadingResponses:k.bool.isRequired,onResponseHover:k.func,onResponseSelected:k.func.isRequired,onResponseUnhover:k.func,pageID:k.string.isRequired,responses:k.array.isRequired,searchQuery:k.string.isRequired,shouldAdjustRightMargin:k.bool};f.exports=l;}),null);
__d('SavedResponsesOrderingMenu.react',['cx','fbt','ContextualDialogArrow','PopoverMenu.react','React','ReactXUIMenu','SavedResponsesConstants','XUIPopoverButton.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('ReactXUIMenu').Item;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(n){k.constructor.call(this,n);var o=[{key:c('SavedResponsesConstants').sortingKey.MOST_USED,title:i._("Frequently used")},{key:c('SavedResponsesConstants').sortingKey.LAST_USED,title:i._("Recently used")},{key:c('SavedResponsesConstants').sortingKey.LAST_CREATED,title:i._("Recently created")}];this.$SavedResponsesOrderingMenu1=o;}m.prototype.$SavedResponsesOrderingMenu2=function(){return this.$SavedResponsesOrderingMenu1.find(function(n){return n.key===this.props.activeSortingOptionKey;}.bind(this));};m.prototype.render=function(){var n=c('React').createElement(c('ReactXUIMenu'),null,this.$SavedResponsesOrderingMenu1.map(function(o){return this.$SavedResponsesOrderingMenu3(o);}.bind(this)));return (c('React').createElement('div',{className:this.props.className},c('React').createElement('span',{className:"_4mjo"},i._("Sort by")),c('React').createElement(c('PopoverMenu.react'),{alignv:'baseline',menu:n,layerBehaviors:[c('ContextualDialogArrow')]},c('React').createElement(c('XUIPopoverButton.react'),{label:this.$SavedResponsesOrderingMenu2().title}))));};m.prototype.$SavedResponsesOrderingMenu3=function(n){return (c('React').createElement(l,{onclick:function(){return this.props.onSortingKeyChanged(n.key);}.bind(this),key:n.key},n.title));};f.exports=m;}),null);
__d('SavedResponsesListViewContainer.react',['cx','fbt','Layout.react','LeftFillRightFitLayout.react','React','SavedResponsesOrderingMenu.react','XUICloseButton.react','XUITextInput.react','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('Layout.react').Column,m=c('Layout.react').FillColumn,n=c('React').PropTypes;j=babelHelpers.inherits(o,c('React').Component);k=j&&j.prototype;o.prototype.render=function(){var p=c('joinClasses')("_3ohy",this.props.className);return (c('React').createElement('div',{className:p},c('React').createElement(c('LeftFillRightFitLayout.react'),{className:"_1x3h"},this.$SavedResponsesListViewContainer1(),c('React').createElement(c('SavedResponsesOrderingMenu.react'),{className:"_4b4m",activeSortingOptionKey:this.props.activeSortingOptionKey,onSortingKeyChanged:this.props.onSortingKeyChanged})),this.props.children,c('React').createElement('div',{className:"_3ohz"},this.props.footerPart)));};o.prototype.$SavedResponsesListViewContainer1=function(){return (c('React').createElement(c('Layout.react'),{className:"_4b4n"},c('React').createElement(l,null,c('React').createElement('div',{className:"_1x3i"})),c('React').createElement(m,null,c('React').createElement(c('XUITextInput.react'),{onChange:this.props.onSearchQueryChanged,ref:'inputField',placeholder:i._("Search replies"),value:this.props.searchQuery})),c('React').createElement(l,null,c('React').createElement(c('XUICloseButton.react'),{size:'small',onClick:this.props.onSearchQueryCleared,className:this.props.searchQuery.length===0?"hidden_elem":''}))));};function o(){j.apply(this,arguments);}o.propTypes={footerPart:n.object.isRequired,onSearchQueryChanged:n.func.isRequired,onSearchQueryCleared:n.func.isRequired,searchQuery:n.string.isRequired};f.exports=o;}),null);
__d('SavedResponsesManageListView.react',['cx','ix','fbt','React','SavedResponsesConstants','SavedResponsesFooterButton.react','SavedResponsesListView.react','SavedResponsesListViewContainer.react','SavedResponsesPanel.react','ScrollableArea.react'],(function a(b,c,d,e,f,g,h,i,j){var k,l,m=c('React').PropTypes;k=babelHelpers.inherits(n,c('React').Component);l=k&&k.prototype;function n(o,p){'use strict';l.constructor.call(this,o,p);this.$SavedResponsesManageListView1=function(q){this.setState({activeSortingOptionKey:q});}.bind(this);this.state={searchQuery:"",activeSortingOptionKey:c('SavedResponsesConstants').sortingKey.LAST_CREATED};}n.prototype.render=function(){'use strict';return (c('React').createElement(c('SavedResponsesPanel.react'),{className:"_15ht",shouldShowBackButton:false,onClose:this.props.onClose,title:j._("Saved Replies")},c('React').createElement(c('SavedResponsesListViewContainer.react'),{footerPart:this.$SavedResponsesManageListView2(),onSearchQueryChanged:function(o){return this.$SavedResponsesManageListView3(o);}.bind(this),onSearchQueryCleared:function(){return this.$SavedResponsesManageListView4();}.bind(this),searchQuery:this.state.searchQuery,activeSortingOptionKey:this.state.activeSortingOptionKey,onSortingKeyChanged:this.$SavedResponsesManageListView1},this.$SavedResponsesManageListView5())));};n.prototype.$SavedResponsesManageListView5=function(){'use strict';return (c('React').createElement('div',{className:"_4pno"},c('React').createElement(c('ScrollableArea.react'),{fade:true,shadow:true},c('React').createElement(c('SavedResponsesListView.react'),{isLoadingResponses:false,onResponseSelected:this.props.onResponseSelected,pageID:this.props.pageID,responses:this.props.responses,searchQuery:this.state.searchQuery,supportedMacros:this.props.supportedMacros,sortingKey:this.state.activeSortingOptionKey}),this.$SavedResponsesManageListView6())));};n.prototype.$SavedResponsesManageListView2=function(){'use strict';var o=j._("Create Reply"),p=j._("Done");return (c('React').createElement('div',{className:"_4pnp"},c('React').createElement(c('SavedResponsesFooterButton.react'),{label:o,onClick:this.props.onCreateNewReplyClicked,image:i('/images/mobile/glyph/compose_dark-grey_m.png')}),c('React').createElement(c('SavedResponsesFooterButton.react'),{label:p,onClick:this.props.onDoneClicked})));};n.prototype.$SavedResponsesManageListView6=function(){'use strict';return (c('React').createElement('div',{className:"_4pnq"},c('React').createElement('div',{className:"_50f8"+(' '+"_4pnr")},j._("End of saved replies"))));};n.prototype.$SavedResponsesManageListView3=function(o){'use strict';this.setState({searchQuery:o.target.value});};n.prototype.$SavedResponsesManageListView4=function(){'use strict';this.setState({searchQuery:""});};n.propTypes={onClose:m.func.isRequired,onCreateNewReplyClicked:m.func.isRequired,onDoneClicked:m.func.isRequired,onResponseSelected:m.func.isRequired,otherUserID:m.string.isRequired,pageID:m.string.isRequired,responses:m.array.isRequired,supportedMacros:m.object.isRequired};f.exports=n;}),null);
__d('SavedResponsesManagePanel.react',['cx','React','SavedResponsesConstants','SavedResponsesEditResponseView.react','SavedResponsesManageListView.react','SavedResponsesUtils','XUISpinner.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(m,n){j.constructor.call(this,m,n);this.state={isLoadingResponses:true,responseToEdit:null,responses:[],supportedMacros:null,viewType:this.props.initialViewType};}l.prototype.componentWillMount=function(){this.$SavedResponsesManagePanel1();};l.prototype.render=function(){if(this.state.isLoadingResponses)return (c('React').createElement('div',{className:"_15ht"},c('React').createElement('div',{className:"_15hu"},c('React').createElement(c('XUISpinner.react'),{size:'large'}))));switch(this.state.viewType){case c('SavedResponsesConstants').editPanelViewMode.LIST:return (c('React').createElement(c('SavedResponsesManageListView.react'),{onCreateNewReplyClicked:function(){return this.$SavedResponsesManagePanel2();}.bind(this),onDoneClicked:function(){return this.$SavedResponsesManagePanel3();}.bind(this),otherUserID:this.props.otherUserID,onResponseSelected:function(m,n){return (this.$SavedResponsesManagePanel4(m,n));}.bind(this),onClose:this.props.onClose,pageID:this.props.pageID,responses:this.state.responses,supportedMacros:this.state.supportedMacros}));case c('SavedResponsesConstants').editPanelViewMode.EDIT:case c('SavedResponsesConstants').editPanelViewMode.CREATE:case c('SavedResponsesConstants').editPanelViewMode.PERSONALIZE:return (c('React').createElement(c('SavedResponsesEditResponseView.react'),{initialResponse:this.state.responseToEdit,onBackButtonClicked:function(){return this.$SavedResponsesManagePanel5(false);}.bind(this),onClose:this.props.onClose,onEditDone:function(m){return this.$SavedResponsesManagePanel5(m);}.bind(this),onEnterPersonalizeView:function(){return this.$SavedResponsesManagePanel6();}.bind(this),pageID:this.props.pageID,supportedMacros:this.state.supportedMacros}));}};l.prototype.$SavedResponsesManagePanel1=function(){this.setState({isLoadingResponses:true});c('SavedResponsesUtils').fetchSavedResponses(this.props.pageID,this.props.otherUserID,function(m,n){return (this.setState({responses:m,supportedMacros:n,isLoadingResponses:false}));}.bind(this));};l.prototype.$SavedResponsesManagePanel5=function(m){if(this.props.initialViewType===c('SavedResponsesConstants').editPanelViewMode.CREATE){this.props.onClose();return;}if(m)this.$SavedResponsesManagePanel1();this.setState({responseToEdit:null,viewType:c('SavedResponsesConstants').editPanelViewMode.LIST});};l.prototype.$SavedResponsesManagePanel2=function(){this.setState({responseToEdit:null,viewType:c('SavedResponsesConstants').editPanelViewMode.CREATE});};l.prototype.$SavedResponsesManagePanel3=function(){this.props.onClose();};l.prototype.$SavedResponsesManagePanel6=function(){this.setState({viewType:c('SavedResponsesConstants').editPanelViewMode.PERSONALIZE});};l.prototype.$SavedResponsesManagePanel4=function(m){this.setState({responseToEdit:m,viewType:c('SavedResponsesConstants').editPanelViewMode.EDIT});};l.propTypes={initialViewType:k.string,onClose:k.func.isRequired,otherUserID:k.string.isRequired,pageID:k.string.isRequired};l.defaultProps={initialViewType:c('SavedResponsesConstants').editPanelViewMode.LIST};f.exports=l;}),null);
__d('PagesManagerCountDownTimer.react',['cx','React'],(function a(b,c,d,e,f,g,h){var i,j,k=1000;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(m,n){'use strict';j.constructor.call(this,m,n);this.$PagesManagerCountDownTimer2=function(){this.setState({isCountingDown:true});var o=function(){var p=this.$PagesManagerCountDownTimer1(this.props.expireTimestamp);if(p>0){this.setState({timeRemaining:p});this.$PagesManagerCountDownTimer2();return;}this.setState({isCountingDown:false});this.props.onTimeup();}.bind(this);setTimeout(o,k);}.bind(this);this.state={timeRemaining:this.$PagesManagerCountDownTimer1(this.props.expireTimestamp),isCountingDown:false};}l.prototype.componentDidMount=function(){'use strict';if(!this.state.isCountingDown)this.$PagesManagerCountDownTimer2();};l.prototype.componentWillReceiveProps=function(m){'use strict';this.setState({timeRemaining:this.$PagesManagerCountDownTimer1(m.expireTimestamp)});if(!this.state.isCountingDown)this.$PagesManagerCountDownTimer2();};l.prototype.render=function(){'use strict';return c('React').createElement('div',{className:"_3uo9"+(this.props.isHidden?' '+"hidden_elem":'')},this.$PagesManagerCountDownTimer3());};l.prototype.$PagesManagerCountDownTimer3=function(){'use strict';var m=Math.floor(this.state.timeRemaining/1000/60),n=this.$PagesManagerCountDownTimer4(Math.floor(m/60)),o=this.$PagesManagerCountDownTimer4(m%60);return c('React').createElement('span',null,n+':'+o);};l.prototype.$PagesManagerCountDownTimer1=function(m){'use strict';return m?m-Date.now():0;};l.prototype.$PagesManagerCountDownTimer4=function(m){'use strict';return ("0"+m).slice(-2);};f.exports=l;}),null);
__d('PagesManagerPerfLogger',['PagesManagerPerfTypedLogger','Set'],(function a(b,c,d,e,f,g){'use strict';var h=1000;function i(){this.$PagesManagerPerfLogger1=new (c('Set'))();}i.prototype.log=function(j,k){var l=k.perfID+':'+j;if(this.$PagesManagerPerfLogger1.has(l))return;this.$PagesManagerPerfLogger1.add(l);var m=Date.now()/h-k.baseTime;new (c('PagesManagerPerfTypedLogger'))().setPageID(k.pageID).setEventName(j).setEventSeriesID(k.perfID).setPerfTime(Math.round(m)).logVital();};f.exports=new i();}),null);
__d('PagesManagerStore',['PagesManagerActionType','FluxStore','Map','PagesManagerDispatcher'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('FluxStore'));i=h&&h.prototype;function j(k){'use strict';i.constructor.call(this,c('PagesManagerDispatcher'));this.$PagesManagerStore6=null;this.$PagesManagerStore1=0;this.$PagesManagerStore2=0;this.$PagesManagerStore3=0;this.$PagesManagerStore4=[];this.$PagesManagerStore5=new (c('Map'))();}j.prototype.__onDispatch=function(k){'use strict';switch(k.type){case c('PagesManagerActionType').LIST.VIEW:this.$PagesManagerStore6=k.listItem;this.__emitChange();break;case c('PagesManagerActionType').LIST.SELECT:this.$PagesManagerStore8(k);this.__emitChange();break;case c('PagesManagerActionType').LAYOUT.HEIGHT_CHANGE:this.$PagesManagerStore1=k.heights.navigationHeight;this.$PagesManagerStore2=k.heights.layoutHeight;this.__emitChange();break;case c('PagesManagerActionType').LAYOUT.LIST_HEIGHT_CHANGE:this.$PagesManagerStore3=k.height;this.__emitChange();break;case c('PagesManagerActionType').LIST.DESELECT_ALL:this.$PagesManagerStore8({rowsAdded:[],rowsRemoved:this.$PagesManagerStore4,selectedRows:[]});this.__emitChange();break;case c('PagesManagerActionType').LIST.INITIAL_VIEW:this.$PagesManagerStore9(k.item);break;case c('PagesManagerActionType').LIST.CLEAR_INITIAL_VIEW:this.$PagesManagerStore7=null;break;default:return;}};j.prototype.$PagesManagerStore9=function(k){'use strict';this.$PagesManagerStore7=k;this.$PagesManagerStore6=k;};j.prototype.$PagesManagerStore8=function(k){'use strict';this.$PagesManagerStore4=k.selectedRows;k.rowsAdded.forEach(function(l){this.$PagesManagerStore5.set(l,true);}.bind(this));k.rowsRemoved.forEach(function(l){this.$PagesManagerStore5.set(l,false);}.bind(this));};j.prototype.getViewingListItem=function(){'use strict';return this.$PagesManagerStore6;};j.prototype.getInitialViewingItem=function(){'use strict';return this.$PagesManagerStore7;};j.prototype.getLayoutHeight=function(){'use strict';return this.$PagesManagerStore2;};j.prototype.getNavigationHeight=function(){'use strict';return this.$PagesManagerStore1;};j.prototype.getListNavigationHeight=function(){'use strict';return this.$PagesManagerStore3;};j.prototype.getIsRowSelected=function(k){'use strict';return this.$PagesManagerStore5.has(k)?this.$PagesManagerStore5.get(k):false;};j.prototype.getSelectedRows=function(){'use strict';return this.$PagesManagerStore4;};j.prototype.isSelectionMode=function(){'use strict';return this.$PagesManagerStore4.length!==0;};f.exports=new j(c('PagesManagerDispatcher'));}),null);
__d('PagesManagerListBatchActionContainer.react',['FluxContainer','PagesManagerStore','React'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;j.getStores=function(){'use strict';return [c('PagesManagerStore')];};j.calculateState=function(k){'use strict';var l=c('PagesManagerStore').getSelectedRows(),m=l.length>0;return {showBatchAction:m,selectedRows:l};};j.prototype.render=function(){'use strict';var k=this.props,l=k.ChildClass,m=babelHelpers.objectWithoutProperties(k,['ChildClass']);return (c('React').createElement(l,babelHelpers['extends']({},m,{selectedRows:this.state.selectedRows,showBatchAction:this.state.showBatchAction})));};function j(){'use strict';h.apply(this,arguments);}f.exports=c('FluxContainer').create(j);}),null);
__d('PagesManagerAction',['PagesManagerActionType','PagesManagerDispatcher'],(function a(b,c,d,e,f,g){'use strict';var h={viewListItem:function i(j){c('PagesManagerDispatcher').dispatch({type:c('PagesManagerActionType').LIST.VIEW,listItem:j});},setInitialViewItem:function i(j){c('PagesManagerDispatcher').dispatch({type:c('PagesManagerActionType').LIST.INITIAL_VIEW,item:j});},clearInitialViewItem:function i(){c('PagesManagerDispatcher').dispatch({type:c('PagesManagerActionType').LIST.CLEAR_INITIAL_VIEW});},setHeight:function i(j){c('PagesManagerDispatcher').dispatch({type:c('PagesManagerActionType').LAYOUT.HEIGHT_CHANGE,heights:j});},setListNavigationHeight:function i(j){c('PagesManagerDispatcher').dispatch({type:c('PagesManagerActionType').LAYOUT.LIST_HEIGHT_CHANGE,height:j});},handleSelectionChange:function i(j,k,l){c('PagesManagerDispatcher').dispatch({type:c('PagesManagerActionType').LIST.SELECT,rowsAdded:j,rowsRemoved:k,selectedRows:l});},deselectAll:function i(){c('PagesManagerDispatcher').dispatch({type:c('PagesManagerActionType').LIST.DESELECT_ALL});}};f.exports=h;}),null);
__d('PagesManagerResizeListener',['EventEmitter'],(function a(b,c,d,e,f,g){f.exports=new (c('EventEmitter'))();}),null);
__d('PagesManagerListDetailLayout.react',['cx','Arbiter','PagesManagerAction','PagesManagerResizeListener','React','ReactDOM','ResizeListener','SubscriptionsHandler','Vector','XUICard.react','Grid.react','joinClasses'],(function a(b,c,d,e,f,g,h){var i,j,k=c('Grid.react').GridItem,l=200;i=babelHelpers.inherits(m,c('React').Component);j=i&&i.prototype;function m(n,o){'use strict';j.constructor.call(this,n,o);this.state={top:0,height:l};}m.prototype.recalculateHeight=function(){'use strict';var n=c('Vector').getViewportDimensions().y-c('ReactDOM').findDOMNode(this).getBoundingClientRect().top;if(!this.props.fullScreen){n-=30;n-=2;}var o=Math.max(l,n);this.setState({height:o});var p=this.props.navigationSection?c('Vector').getElementDimensions(c('ReactDOM').findDOMNode(this.refs.navigationSection)).y:0;c('PagesManagerAction').setHeight({layoutHeight:o,navigationHeight:p});var q=this.props.fullScreen?0:8;this.setState({top:p+q});};m.prototype.componentDidMount=function(){'use strict';this.recalculateHeight();this.$PagesManagerListDetailLayout1=new (c('SubscriptionsHandler'))();this.$PagesManagerListDetailLayout1.addSubscriptions(c('Arbiter').subscribe('reflow',function(){return this.recalculateHeight();}.bind(this)),c('ResizeListener').add(function(){return this.recalculateHeight();}.bind(this)),c('PagesManagerResizeListener').addListener('change',function(){return this.recalculateHeight();}.bind(this)));};m.prototype.componentWillUnmount=function(){'use strict';this.$PagesManagerListDetailLayout1&&this.$PagesManagerListDetailLayout1.release();};m.prototype.render=function(){'use strict';var n=this.state.height,o=this.state.top,p=!this.props.navigationSection?null:c('React').createElement('div',{className:"_2-97",ref:'navigationSection'},this.props.navigationSection);return (c('React').createElement(c('XUICard.react'),{className:this.props.fullScreen?"_4sno":'',style:{height:n}},p,c('React').createElement('div',{className:"_10ua",style:{top:o}},c('React').createElement(c('Grid.react'),{alignv:'top',className:"_10ue",cols:2},c('React').createElement(k,{className:c('joinClasses')("_10uf",this.props.listClassName)},this.props.listSection),c('React').createElement(k,{className:this.props.detailClassName},this.props.detailSection)))));};f.exports=m;}),null);
__d('PagesManagerListRowContainer.react',['FluxContainer','PagesManagerStore','React'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;j.getStores=function(){'use strict';return [c('PagesManagerStore')];};j.calculateState=function(k,l){'use strict';var m=false,n=false;if(l&&l.listItem){m=c('PagesManagerStore').getIsRowSelected(l.listItem);n=c('PagesManagerStore').getViewingListItem()===l.listItem;}var o=c('PagesManagerStore').isSelectionMode();return {selected:m,isViewing:n,selectionMode:o};};j.prototype.render=function(){'use strict';var k=this.props,l=k.ChildClass,m=babelHelpers.objectWithoutProperties(k,['ChildClass']);return (c('React').createElement(l,babelHelpers['extends']({ref:'childClass',selected:this.state.selected,isViewing:this.state.isViewing,selectionMode:this.state.selectionMode},m)));};function j(){'use strict';h.apply(this,arguments);}f.exports=c('FluxContainer').create(j,{withProps:true});}),null);
__d('PagesManagerListView.react',['PagesManagerListRowContainer.react','PagesManagerAction','PagesSelectableList.react','React'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;j.prototype.$PagesManagerListView1=function(k){'use strict';c('PagesManagerAction').viewListItem(k);};j.prototype.componentWillUpdate=function(k){'use strict';if(k.navigationKey!==this.props.navigationKey){c('PagesManagerAction').deselectAll();this.refs.selectableList.clearSelection();}};function j(k){'use strict';i.constructor.call(this,k);this.state={scrollableHeight:0};}j.prototype.render=function(){'use strict';var k;if(!this.props.list.length){if(!this.props.initLoading){k=this.props.emptyView;}else k=this.$PagesManagerListView2();}else k=this.$PagesManagerListView3();return (c('React').createElement(c('PagesSelectableList.react'),{actionBarRightComponent:this.props.actionBarRightContainer,deselectAllLabel:'',selectAllLabel:this.props.selectAllLabel,enableOnVisible:this.props.hasMoreItem,forceRequestMoreRows:true,height:this.props.height,loadingIndicator:this.props.loadingMoreSpinner,onSelectionChange:this.props.onSelectionChange,onRequestMoreRows:this.props.onScroll,ref:'selectableList',scrollableAreaMode:true,scrollableAreaHasShadow:false,scrollableWidth:this.props.scrollableWidth},k));};j.prototype.$PagesManagerListView3=function(){'use strict';return this.props.list.map(function(k){return (c('React').createElement(c('PagesManagerListRowContainer.react'),babelHelpers['extends']({ChildClass:this.props.listRowContainer,listItem:k,pageID:this.props.pageID,ref:this.props.getKey(k),key:this.props.getKey(k),onViewingListItem:this.$PagesManagerListView1,type:'li'},this.props.containerProps)));}.bind(this));};j.prototype.clearSelection=function(){'use strict';this.refs.selectableList.clearSelection();};j.prototype.$PagesManagerListView2=function(){'use strict';return c('React').createElement('div',{key:'loading'});};f.exports=j;}),null);
__d('PagesManagerStaticStore',[],(function a(b,c,d,e,f,g){var h={_pageID:'',setPageID:function i(j){this._pageID=j;},getPageID:function i(){return this._pageID;}};f.exports=h;}),null);
__d("XPagesCustomTagCreateController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pages\/custom_tag\/create\/",{tag_name:{type:"String",required:true},color:{type:"String"}});}),null);
__d("XPagesCustomTagDeleteController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pages\/custom_tag\/delete\/",{tag_name:{type:"String",required:true}});}),null);
__d("XPagesCustomTagEditColorController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pages\/custom_tag\/edit\/color\/",{tag_name:{type:"String",required:true},color:{type:"String",required:true}});}),null);
__d("XPagesCustomTagMergeController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pages\/custom_tag\/merge\/",{tag_name:{type:"String",required:true},old_tags:{type:"StringSet",required:true}});}),null);
__d("XPagesCustomTagsDataController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pages\/custom_tags\/data\/",{});}),null);
__d('PagesManagerCustomTagsStore',['ActorURI','AsyncRequest','PagesManagerCustomTagsActionType','PagesManagerDispatcher','FluxStore','immutable','Map','PageCustomerActions','XPagesCustomTagsDataController','XPagesCustomTagCreateController','XPagesCustomTagDeleteController','XPagesCustomTagEditColorController','XPagesCustomTagMergeController'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FluxStore'));i=h&&h.prototype;function j(k){i.constructor.call(this,k);this.$PagesManagerCustomTagsStore1=new (c('Map'))();this.$PagesManagerCustomTagsStore2=false;this.$PagesManagerCustomTagsStore3=false;}j.prototype.hasCustomTags=function(k){return this.$PagesManagerCustomTagsStore1.has(k);};j.prototype.getCustomTags=function(k){return c('immutable').Map(this.$PagesManagerCustomTagsStore1.get(k)||new (c('Map'))());};j.prototype.hasCustomTag=function(k,l){var m=this.$PagesManagerCustomTagsStore1.get(k);return m!==undefined&&m.has(l);};j.prototype.getIsMergingLabels=function(){return this.$PagesManagerCustomTagsStore2;};j.prototype.getIsManagingTags=function(){return this.$PagesManagerCustomTagsStore3;};j.prototype.__onDispatch=function(k){switch(k.type){case c('PagesManagerCustomTagsActionType').FETCH:new (c('AsyncRequest'))().setURI(c('ActorURI').create(c('XPagesCustomTagsDataController').getURIBuilder().getURI(),k.pageID)).setHandler(function(m){this.__dispatcher.dispatch({type:c('PagesManagerCustomTagsActionType').UPDATE,pageID:k.pageID,customTags:m.payload});}.bind(this)).send();break;case c('PagesManagerCustomTagsActionType').UPDATE:var l=this.$PagesManagerCustomTagsStore1.get(k.pageID)||new (c('Map'))();k.customTags.map(function(m){l.set(m.name,m);});this.$PagesManagerCustomTagsStore1.set(k.pageID,l);this.__emitChange();break;case c('PagesManagerCustomTagsActionType').TOGGLE_MERGE_LABELS:this.$PagesManagerCustomTagsStore2=k.show;this.__emitChange();break;case c('PagesManagerCustomTagsActionType').TOGGLE_TAG_MANAGEMENT_DIALOG:this.$PagesManagerCustomTagsStore3=k.show;this.$PagesManagerCustomTagsStore2=false;this.__emitChange();break;case c('PagesManagerCustomTagsActionType').CREATE:new (c('AsyncRequest'))().setURI(c('ActorURI').create(c('XPagesCustomTagCreateController').getURIBuilder().setString('tag_name',k.tagName).setString('color',k.color).getURI(),k.pageID)).setHandler(function(m){this.__dispatcher.dispatch({type:c('PagesManagerCustomTagsActionType').UPDATE,pageID:k.pageID,customTags:[m.payload],hasTagListChanged:true});}.bind(this)).send();break;case c('PagesManagerCustomTagsActionType').DELETE:new (c('AsyncRequest'))().setURI(c('ActorURI').create(c('XPagesCustomTagDeleteController').getURIBuilder().setString('tag_name',k.tagName).getURI(),k.pageID)).setHandler(function(m){var n=this.$PagesManagerCustomTagsStore1.get(k.pageID);if(n&&n.has(k.tagName)){n['delete'](k.tagName);this.$PagesManagerCustomTagsStore1.set(k.pageID,n);this.__dispatcher.dispatch({type:c('PagesManagerCustomTagsActionType').UPDATE,pageID:k.pageID,customTags:[],hasTagListChanged:true});}}.bind(this)).send();break;case c('PagesManagerCustomTagsActionType').EDIT_COLOR:new (c('AsyncRequest'))().setURI(c('ActorURI').create(c('XPagesCustomTagEditColorController').getURIBuilder().setString('tag_name',k.tagName).setString('color',k.color).getURI(),k.pageID)).setHandler(function(m){this.__dispatcher.dispatch({type:c('PagesManagerCustomTagsActionType').UPDATE,pageID:k.pageID,customTags:[m.payload],hasTagListChanged:false});}.bind(this)).send();break;case c('PagesManagerCustomTagsActionType').MERGE:new (c('AsyncRequest'))().setURI(c('ActorURI').create(c('XPagesCustomTagMergeController').getURIBuilder().setString('tag_name',k.tagName).setStringSet('old_tags',k.oldTags).getURI(),k.pageID)).setHandler(function(m){var n=this.$PagesManagerCustomTagsStore1.get(k.pageID);k.oldTags.forEach(function(o){if(n&&n.has(o)&&o!==k.tagName)n['delete'](o);});this.$PagesManagerCustomTagsStore1.set(k.pageID,n);this.__dispatcher.dispatch({type:c('PagesManagerCustomTagsActionType').UPDATE,pageID:k.pageID,customTags:[m.payload],hasTagListChanged:true});c('PageCustomerActions').resetData(k.pageID);}.bind(this)).send();break;default:break;}};f.exports=new j(c('PagesManagerDispatcher'));}),null);
__d('PageCustomTagColorSelector.react',['cx','xuiglyph','ContextualLayer.react','Image.react','PageCustomTagConsts','React','XUICard.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('PageCustomTagConsts').COLORS;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(n){k.constructor.call(this,n);this.$PageCustomTagColorSelector1=function(o){this.props.onToggleSelector(o);this.setState({openSelector:o});}.bind(this);this.$PageCustomTagColorSelector2=function(o){this.props.onSelectColor(o);this.setState({openSelector:false});}.bind(this);this.state={openSelector:false};}m.prototype.$PageCustomTagColorSelector3=function(n){return '#'+l[n].border.substring(2);};m.prototype.$PageCustomTagColorSelector4=function(n){return '#'+l[n].fill.substring(2);};m.prototype.$PageCustomTagColorSelector5=function(n){var o=null;if(n==='FF000000'){o=i('checkmark');}else o='/images/pages/context_card/checkmark/checkmark_'+n+'.png';return c('React').createElement(c('Image.react'),{src:o});};m.prototype.render=function(){var n='/images/pages/context_card/triangle_down/triangle_down_'+this.props.selectedColor+'.png';return (c('React').createElement('span',null,c('React').createElement('div',{className:"_1fj6"+(this.state.openSelector?' '+"_1fj7":''),ref:'colorSelector'},c('React').createElement(c('XUICard.react'),{className:"_1fjd",style:{borderColor:this.$PageCustomTagColorSelector3(this.props.selectedColor),backgroundColor:this.$PageCustomTagColorSelector4(this.props.selectedColor)},onClick:function(){return this.$PageCustomTagColorSelector1(!this.state.openSelector);}.bind(this)},c('React').createElement(c('Image.react'),{src:n}))),c('React').createElement(c('ContextualLayer.react'),{contextRef:function(){return this.refs.colorSelector;}.bind(this),shown:this.state.openSelector,onToggle:function(o){return !o&&this.$PageCustomTagColorSelector1;}.bind(this),position:'below',alignment:'left'},c('React').createElement('div',{className:"_1fj8"},c('React').createElement('div',{className:"_1fjb"}),Object.keys(l).map(function(o){return (c('React').createElement(c('XUICard.react'),{className:"_1fjc",key:o,style:{borderColor:this.$PageCustomTagColorSelector3(o),backgroundColor:this.$PageCustomTagColorSelector4(o)},onClick:function(){return this.$PageCustomTagColorSelector2(o);}.bind(this)},o===this.props.selectedColor?this.$PageCustomTagColorSelector5(o):null));}.bind(this))))));};f.exports=m;}),null);
__d('PageCustomTagSearchableEntry',['SearchableEntry'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('SearchableEntry'));i=h&&h.prototype;function j(k){'use strict';i.constructor.call(this,{uniqueID:k.id,title:k.name});this.$PageCustomTagSearchableEntry1=k;}j.prototype.getColor=function(){'use strict';return '#'+this.$PageCustomTagSearchableEntry1.color.substring(2);};j.prototype.getBorderColor=function(){'use strict';return '#'+this.$PageCustomTagSearchableEntry1.borderColor.substring(2);};j.prototype.getFillColor=function(){'use strict';return '#'+this.$PageCustomTagSearchableEntry1.fillColor.substring(2);};j.prototype.getFBID=function(){'use strict';return this.$PageCustomTagSearchableEntry1.id;};j.prototype.getData=function(){'use strict';return this.$PageCustomTagSearchableEntry1;};f.exports=j;}),null);
__d('PageCustomTagSearchSource',['AbstractSearchSource','PageCustomTagSearchableEntry'],(function a(b,c,d,e,f,g){var h,i,j=3,k=[];h=babelHelpers.inherits(l,c('AbstractSearchSource'));i=h&&h.prototype;l.getInstance=function(m,n){'use strict';var o=n?1:0;if(!k[o]){k[o]=new l(m,n);}else k[o].setAvailableTags(m);return k[o];};function l(m,n){'use strict';i.constructor.call(this);var o=n?1:0;if(!(k[o])){this.setAvailableTags(m);this.setShowQueryAsEntry(n);}}l.prototype.setAvailableTags=function(m){'use strict';this.$PageCustomTagSearchSource1=m;};l.prototype.setShowQueryAsEntry=function(m){'use strict';this.$PageCustomTagSearchSource2=m;};l.prototype.searchImpl=function(m,n,o){'use strict';var p=[],q=false;if(m){var r=m.toLowerCase();this.$PageCustomTagSearchSource1.forEach(function(u){if(u.name.toLowerCase().indexOf(r)!==-1)p.push(u);if(m===u.name)q=true;});}else p=this.$PageCustomTagSearchSource1.slice(0,j);var s=[],t=0;if(m&&!q&&this.$PageCustomTagSearchSource2)s.push(new (c('PageCustomTagSearchableEntry'))({id:0,color:'',borderColor:'',fillColor:'',name:m}));p.forEach(function(u){s.push(new (c('PageCustomTagSearchableEntry'))(u));});n(s,m);};f.exports=l;}),null);
__d('PageCustomTagTypeaheadPresenter.react',['cx','fbt','ContextualLayerUpdateOnScroll','LeftRight.react','PageCustomTagSearchableEntry','React','XUITypeaheadViewItem.react','emptyFunction'],(function a(b,c,d,e,f,g,h,i){var j,k,l,m,n,o;j=babelHelpers.inherits(p,c('React').Component);k=j&&j.prototype;p.prototype.render=function(){'use strict';var t=this.props.entry,u="_599m"+(this.props.highlighted?' '+"_599n":''),v={};if(!this.props.searchBar)v.color=this.props.highlighted?'white':t.getColor();var w=!t.getFBID();return (c('React').createElement('li',{'aria-selected':this.props.highlighted,className:u,key:t.getUniqueID(),onMouseDown:function(x){return this.props.onSelect(t,x);}.bind(this),onMouseEnter:function(){return this.props.onHighlight(t);}.bind(this)},c('React').createElement(c('LeftRight.react'),null,c('React').createElement('div',{style:v},t.getTitle()),w?c('React').createElement('div',{className:"_507"},i._("+ New Label")):null)));};function p(){'use strict';j.apply(this,arguments);}l=babelHelpers.inherits(q,c('React').Component);m=l&&l.prototype;q.prototype.$PageCustomTagsRenderer1=function(t){'use strict';return (c('React').createElement(p,{entry:t,key:t.getUniqueID(),highlighted:t===this.props.highlightedEntry,onHighlight:this.props.onHighlight,onRenderHighlight:this.props.onRenderHighlight,onSelect:this.props.onSelect,searchBar:this.props.searchBar}));};q.prototype.render=function(){'use strict';var t=(!this.props.searchBar?"_50ig":'')+(!this.props.entries.length?' '+"_599s":'');return (c('React').createElement('ul',{className:t,onMouseLeave:function(){return this.props.removeHighlight();}.bind(this)},this.props.entries.map(function(u){return this.$PageCustomTagsRenderer1(u);}.bind(this))));};function q(){'use strict';l.apply(this,arguments);}n=babelHelpers.inherits(r,c('React').Component);o=n&&n.prototype;r.prototype.render=function(){'use strict';var t=this.props.entry;return (c('React').createElement('span',{className:"_4n1-",style:{color:t.getColor()}},t.getTitle()));};function r(){'use strict';n.apply(this,arguments);}var s={useLayer:true,layerBehaviors:{ContextualLayerUpdateOnScroll:c('ContextualLayerUpdateOnScroll')},ViewRenderer:q,TokenRenderer:r};q.defaultProps={removeHighlight:c('emptyFunction'),searchBar:false};f.exports=s;}),null);
__d('PagesManagerManageCustomTagsDialog.react',['cx','fbt','immutable','LeftRight.react','Link.react','ObjectSort','PageCustomTagColorSelector.react','PagesAdminToolUIActionType','PagesContextCardCustomTag.react','PagesManagerCustomTagsAction','PagesManagerLogger','PagesSelectableListCheckbox.react','React','ScrollableArea.react','XUIButton.react','XUIDialog.react','XUIDialogBody.react','XUIDialogButton.react','XUIDialogCancelButton.react','XUIDialogFooter.react','XUIDialogTitle.react','XUISortableDataTable.react','XUITextInput.react','curry','nullthrows'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=350,m=500,n=225,o=25,p=5;j=babelHelpers.inherits(q,c('React').Component);k=j&&j.prototype;function q(r){k.constructor.call(this,r);this.$PagesManagerManageCustomTagsDialog1=function(s){c('PagesManagerLogger').logManageTagUIAction(c('PagesAdminToolUIActionType').TAG_MANAGEMENT_CLICK_DELETE_LINK,this.props.pageID,{fbid:s.id,tag_name:s.name});if(this.state.selectedRows.indexOf(s.name)>=0)this.$PagesManagerManageCustomTagsDialog2(s.name);this.$PagesManagerManageCustomTagsDialog3(true,s);}.bind(this);this.$PagesManagerManageCustomTagsDialog3=function(s,t){this.setState({deleteConfirmationDialogProps:{show:s,actionTag:s?c('nullthrows')(t):null}});}.bind(this);this.$PagesManagerManageCustomTagsDialog4=function(){var s=c('nullthrows')(this.state.deleteConfirmationDialogProps.actionTag);c('PagesManagerLogger').logManageTagUIAction(c('PagesAdminToolUIActionType').TAG_MANAGEMENT_CLICK_CONFIRM_DELETE,this.props.pageID,{fbid:s.id,tag_name:s.name});c('PagesManagerCustomTagsAction').deleteCustomTag(this.props.pageID,s.name);this.$PagesManagerManageCustomTagsDialog3(false);}.bind(this);this.$PagesManagerManageCustomTagsDialog6=function(s,t){c('PagesManagerLogger').logManageTagUIAction(c('PagesAdminToolUIActionType').TAG_MANAGEMENT_CLICK_CHANGE_COLOR,this.props.pageID,{fbid:s.id,tagName:s.name});c('PagesManagerCustomTagsAction').editCustomTagColor(this.props.pageID,s.name,t);}.bind(this);this.$PagesManagerManageCustomTagsDialog7=function(s){c('PagesManagerLogger').logManageTagUIAction(c('PagesAdminToolUIActionType').TAG_MANAGEMENT_CLICK_COLOR_SELECTOR,this.props.pageID,{show:s});}.bind(this);this.$PagesManagerManageCustomTagsDialog8=function(event){this.setState({tagNameInputValue:event.target.value});}.bind(this);this.$PagesManagerManageCustomTagsDialog9=function(event){this.setState({mergeTagNameInputValue:event.target.value});}.bind(this);this.$PagesManagerManageCustomTagsDialog10=function(){c('PagesManagerLogger').logManageTagUIAction(c('PagesAdminToolUIActionType').TAG_MANAGEMENT_CLICK_ADD_TAG,this.props.pageID,{tag_name:this.state.tagNameInputValue});c('PagesManagerCustomTagsAction').createCustomTag(this.props.pageID,this.state.tagNameInputValue);this.setState({tagNameInputValue:''});}.bind(this);this.$PagesManagerManageCustomTagsDialog11=function(){c('PagesManagerLogger').logManageTagUIAction(c('PagesAdminToolUIActionType').TAG_MANAGEMENT_CLICK_MERGE_TAG,this.props.pageID,{tag_name:this.state.mergeTagNameInputValue});c('PagesManagerCustomTagsAction').mergeCustomTag(this.props.pageID,this.state.mergeTagNameInputValue,this.state.selectedRows);this.$PagesManagerManageCustomTagsDialog12(false);this.setState({mergeTagNameInputValue:'',selectedRows:[]});}.bind(this);this.$PagesManagerManageCustomTagsDialog13=function(s){this.setState({hoveredTag:s});}.bind(this);this.$PagesManagerManageCustomTagsDialog15=function(s){if(this.state.selectedRows.indexOf(s)>=0){this.$PagesManagerManageCustomTagsDialog2(s);}else this.$PagesManagerManageCustomTagsDialog14(s);}.bind(this);this.$PagesManagerManageCustomTagsDialog12=function(s){c('PagesManagerCustomTagsAction').toggleMergeLabelsSection(this.props.pageID,s);}.bind(this);this.state={deleteConfirmationDialogProps:{show:false,actionTag:null},tagNameInputValue:'',mergeTagNameInputValue:'',selectedRows:[],hoveredTag:''};}q.prototype.$PagesManagerManageCustomTagsDialog5=function(){return c('React').createElement(c('XUIDialog.react'),{layerHideOnBlur:false,onToggle:function(r){return !r&&this.$PagesManagerManageCustomTagsDialog3(r);}.bind(this),shown:this.state.deleteConfirmationDialogProps.show,width:l},c('React').createElement(c('XUIDialogTitle.react'),{showCloseButton:false},i._("Delete label?")),c('React').createElement(c('XUIDialogBody.react'),null,i._("Are you sure to delete label \"{label name}\"?",[i.param('label name',this.state.deleteConfirmationDialogProps.actionTag!==null?this.state.deleteConfirmationDialogProps.actionTag.name:null)])),c('React').createElement(c('XUIDialogFooter.react'),null,c('React').createElement(c('XUIDialogCancelButton.react'),null),c('React').createElement(c('XUIDialogButton.react'),{action:'confirm',label:i._("Confirm"),onClick:this.$PagesManagerManageCustomTagsDialog4,use:'confirm'})));};q.prototype.$PagesManagerManageCustomTagsDialog2=function(r){var s=this.state.selectedRows,t=this.state.selectedRows.indexOf(r);s.splice(t,1);this.setState({selectedRows:s});};q.prototype.$PagesManagerManageCustomTagsDialog14=function(r){var s=this.state.selectedRows;s.push(r);this.setState({selectedRows:s});};q.prototype.$PagesManagerManageCustomTagsDialog16=function(r){if(this.state.hoveredTag===r||this.state.selectedRows.indexOf(r)>=0)return c('React').createElement(c('PagesSelectableListCheckbox.react'),{checked:this.state.selectedRows.indexOf(r)>=0,className:"_54un",onChange:c('curry')(this.$PagesManagerManageCustomTagsDialog15,r)});return null;};q.prototype.$PagesManagerManageCustomTagsDialog17=function(){return c('React').createElement('div',{className:"_42xa"},c('React').createElement(c('XUITextInput.react'),{className:"_42xc",placeholder:i._("Name the new combined label..."),xuiError:this.$PagesManagerManageCustomTagsDialog18(),onChange:this.$PagesManagerManageCustomTagsDialog9,value:this.state.mergeTagNameInputValue,maxLength:o}),c('React').createElement(c('XUIButton.react'),{className:"_42xd",label:i._("Combine"),disabled:this.$PagesManagerManageCustomTagsDialog18()||this.state.mergeTagNameInputValue===''||this.state.selectedRows.length<2,use:'confirm',onClick:this.$PagesManagerManageCustomTagsDialog11}));};q.prototype.$PagesManagerManageCustomTagsDialog19=function(){return c('React').createElement('div',{className:"_5hry"},c('React').createElement(c('XUITextInput.react'),{className:"_5hrz",placeholder:i._("Add a label for products, services or common questions..."),xuiError:this.$PagesManagerManageCustomTagsDialog20(),onChange:this.$PagesManagerManageCustomTagsDialog8,value:this.state.tagNameInputValue,maxLength:o}),c('React').createElement(c('XUIButton.react'),{className:"_5hr-",label:i._("Add"),disabled:this.$PagesManagerManageCustomTagsDialog20()||this.state.tagNameInputValue==='',use:'confirm',onClick:this.$PagesManagerManageCustomTagsDialog10}));};q.prototype.$PagesManagerManageCustomTagsDialog21=function(){if(this.props.customTags.size===0)return null;var r=c('React').createElement('div',{className:"_31fn"},this.props.customTags.toArray().map(function(s){return c('React').createElement(c('LeftRight.react'),{className:"_2zxg",key:s.id,onMouseEnter:c('curry')(this.$PagesManagerManageCustomTagsDialog13,s.name),onMouseLeave:c('curry')(this.$PagesManagerManageCustomTagsDialog13,'')},c('React').createElement('div',null,this.$PagesManagerManageCustomTagsDialog16(s.name),c('React').createElement(c('PageCustomTagColorSelector.react'),{selectedColor:s.color,onSelectColor:function(t){return this.$PagesManagerManageCustomTagsDialog6(s,t);}.bind(this),onToggleSelector:this.$PagesManagerManageCustomTagsDialog7}),c('React').createElement(c('PagesContextCardCustomTag.react'),{canRemove:false,tagData:s})),c('React').createElement(c('Link.react'),{onClick:c('curry')(this.$PagesManagerManageCustomTagsDialog1,s)},i._("Delete")));}.bind(this)));if(this.props.customTags.size>p)return c('React').createElement(c('ScrollableArea.react'),{height:n},r);return r;};q.prototype.$PagesManagerManageCustomTagsDialog20=function(){if(this.props.customTags.has(this.state.tagNameInputValue))return i._("Label name must be unique.");if(this.state.tagNameInputValue.indexOf(':')!==-1)return i._("Label name can not contain \":\".");return null;};q.prototype.$PagesManagerManageCustomTagsDialog18=function(){if(this.state.mergeTagNameInputValue.indexOf(':')!==-1)return i._("Label name can not contain \":\".");return null;};q.prototype.render=function(){var r=this.props.isMergingLabels&&this.state.selectedRows.length>1?this.$PagesManagerManageCustomTagsDialog17():this.$PagesManagerManageCustomTagsDialog19();return (c('React').createElement(c('XUIDialog.react'),{layerHideOnBlur:false,onToggle:this.props.onToggle,shown:this.props.show,width:m},c('React').createElement(c('XUIDialogTitle.react'),{showCloseButton:false},i._("Add & Manage Labels")),c('React').createElement(c('XUIDialogBody.react'),null,c('React').createElement('div',{className:"_5hrx"},i._("Labels help you track and find conversations. Create your own labels and apply them to people based on what they've messaged you about.")),c('React').createElement('div',{className:(this.state.selectedRows.length<2||this.props.isMergingLabels?"hidden_elem":'')+(' '+"_54uo")},c('React').createElement(c('XUIButton.react'),{className:"_54up",label:i._("Combine"),use:'confirm',onClick:c('curry')(this.$PagesManagerManageCustomTagsDialog12,true)})),this.$PagesManagerManageCustomTagsDialog21(),this.$PagesManagerManageCustomTagsDialog5(),r),c('React').createElement(c('XUIDialogFooter.react'),null,c('React').createElement(c('XUIDialogButton.react'),{action:'cancel',label:i._("Close"),use:'confirm'}))));};f.exports=q;}),null);
__d('PagesManagerDetailContainer.react',['FluxContainer','PagesManagerStore','React'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;function j(k){'use strict';i.constructor.call(this,k);this.state={height:0,viewingListItem:null};}j.getStores=function(){'use strict';return [c('PagesManagerStore')];};j.calculateState=function(k){'use strict';var l=c('PagesManagerStore').getLayoutHeight()-c('PagesManagerStore').getNavigationHeight();return {height:l,viewingListItem:c('PagesManagerStore').getViewingListItem()};};j.prototype.render=function(){'use strict';var k=this.props,l=k.ChildContainerClass,m=babelHelpers.objectWithoutProperties(k,['ChildContainerClass']);return (c('React').createElement(l,babelHelpers['extends']({height:this.state.height,viewingListItem:this.state.viewingListItem,listItemKey:this.props.getListItemKey(this.state.viewingListItem)},m)));};f.exports=c('FluxContainer').create(j);}),null);
__d('PagesManagerListContainer.react',['FluxContainer','PagesManagerAction','PagesManagerStore','React'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;function j(k){'use strict';i.constructor.call(this,k);this.state={height:0};}j.getStores=function(){'use strict';return [c('PagesManagerStore')];};j.calculateState=function(k){'use strict';var l=c('PagesManagerStore').getLayoutHeight()-c('PagesManagerStore').getNavigationHeight();return {height:l};};j.prototype.render=function(){'use strict';var k=this.props,l=k.ChildContainerClass,m=babelHelpers.objectWithoutProperties(k,['ChildContainerClass']);return (c('React').createElement(l,babelHelpers['extends']({height:this.state.height,onSelectionChange:this.$PagesManagerListContainer1},m)));};j.prototype.$PagesManagerListContainer1=function(k){var l=k.rowsAdded,m=k.rowsRemoved,n=k.selectedRows;'use strict';c('PagesManagerAction').handleSelectionChange(l,m,n);};f.exports=c('FluxContainer').create(j);}),null);
__d('AbstractPagesManagerListStore',['invariant','PagesManagerActionType','FluxStore','Map'],(function a(b,c,d,e,f,g,h){var i,j;i=babelHelpers.inherits(k,c('FluxStore'));j=i&&i.prototype;function k(l){'use strict';j.constructor.call(this,l);this.__hasMoreItem=new (c('Map'))();this.__isLoading=false;}k.prototype.__onDispatch=function(l){'use strict';switch(l.type){case c('PagesManagerActionType').LIST.FETCH:this.__handleListFetch(l);break;case c('PagesManagerActionType').LIST.FETCHED:case c('PagesManagerActionType').LIST.UPDATED:this.__emitChange();break;case c('PagesManagerActionType').LIST.LOADING:this.__isLoading=true;this.__emitChange();break;case c('PagesManagerActionType').NAVIGATION_UNIT.CHANGE:case c('PagesManagerActionType').SEARCH.ADD_SEARCH_CUSTOM_TAG:case c('PagesManagerActionType').SEARCH.REMOVE_SEARCH_CUSTOM_TAG:this.__handleNavigationUnitChange(l);break;default:return;}};k.prototype.__handleListFetch=function(l){'use strict';h(0);};k.prototype.__handleNavigationUnitChange=function(l){'use strict';h(0);};k.prototype.hasMoreItem=function(l){'use strict';return this.__hasMoreItem.get(l);};k.prototype.getItemList=function(l,m){'use strict';h(0);};k.prototype.isLoading=function(){'use strict';return this.__isLoading;};f.exports=k;}),null);
__d('PagesManagerMessagingUnreadCountHelper',['MercuryThreadlistConstants','MercuryUnreadState'],(function a(b,c,d,e,f,g){'use strict';var h={getUnreadCount:function i(j,k){var l=c('MercuryUnreadState').getForFBID(j),m=l.exceedsMaxCount(k);return m?c('MercuryThreadlistConstants').MAX_UNREAD_COUNT:l.getUnreadCount(k);}};f.exports=h;}),null);
__d("XPageInboxInterfaceSwitchController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pages\/manager\/inbox\/interfaceswitch\/",{});}),null);
__d("XPagesManagerInboxController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/{page_token}\/inbox\/{?selected_item_id}\/",{page_token:{type:"String",required:true},business_id:{type:"Int"},selected_item_id:{type:"FBID"}});}),null);
__d('PagesManagerInboxSwitcher.react',['cx','fbt','ix','ActorURI','AsyncRequest','Image.react','MercuryThreadInformer','MercuryUnreadState','MessagingTag','PagesManagerMessagingUnreadCountHelper','React','XPageInboxInterfaceSwitchController','XPagesManagerMessagesController','XPagesManagerInboxController','XUIBadge.react','fbglyph'],(function a(b,c,d,e,f,g,h,i,j){var k,l;k=babelHelpers.inherits(m,c('React').PureComponent);l=k&&k.prototype;function m(n){'use strict';l.constructor.call(this,n);this.state={unread:0};c('MercuryUnreadState').getForFBID(this.props.pageID);}m.prototype.componentDidMount=function(){'use strict';if(!this.props.switchNewInterface){var n=c('MercuryThreadInformer').getForFBID(this.props.pageID);n.subscribe('unread-updated',function(){var o=c('PagesManagerMessagingUnreadCountHelper').getUnreadCount(this.props.pageID,c('MessagingTag').INBOX);this.setState({unread:o});}.bind(this));}};m.prototype.$PagesManagerInboxSwitcher1=function(n){'use strict';var o=c('XPageInboxInterfaceSwitchController').getURIBuilder().getURI();o=c('ActorURI').create(o,this.props.pageID);new (c('AsyncRequest'))().setURI(o).setMethod('POST').setData({is_unified_inbox:n}).setHandler(function(p){var q=p.payload.isUnifiedInbox,r=q?c('XPagesManagerInboxController'):c('XPagesManagerMessagesController');r.getURIBuilder().setString('page_token',this.props.pageToken).getURI().go();}.bind(this)).send();};m.prototype.$PagesManagerInboxSwitcher2=function(){'use strict';return (c('React').createElement('div',{className:"_1tvr _4w2i",onClick:function(){return this.$PagesManagerInboxSwitcher1(false);}.bind(this),role:'button',tabIndex:0},c('React').createElement(c('Image.react'),{className:"_1tvs",src:j("\/images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/arrow-left_16_big-accent-blue.png")}),c('React').createElement('div',{className:"_259i"},i._("Return To Messages")),this.state.unread===0?null:c('React').createElement(c('XUIBadge.react'),{className:"_5z9d",count:this.state.unread})));};m.prototype.$PagesManagerInboxSwitcher3=function(){'use strict';return (c('React').createElement('div',{className:"_1tvr _4w2j",onClick:function(){return this.$PagesManagerInboxSwitcher1(true);}.bind(this),role:'button',tabIndex:0},c('React').createElement('div',{className:"_259i"},i._("View Instagram Comment")),c('React').createElement(c('Image.react'),{className:"_1tvs",src:j('/images/pages/inbox/purple-arrow.png')})));};m.prototype.render=function(){'use strict';return this.props.switchNewInterface?this.$PagesManagerInboxSwitcher3():this.$PagesManagerInboxSwitcher2();};f.exports=m;}),null);
__d('PagesManagerMessagingActionType',['PagesManagerActionType','keyMirrorRecursive'],(function a(b,c,d,e,f,g){var h=c('keyMirrorRecursive')({THREAD_LEVEL:{READ_STATUS:'',ARCHIVE_STATUS:'',SPAM_STATUS:'',UPDATE_THREAD:''},MESSAGE_LEVEL:{READ_RECEIPTS:''},SET_SCROLL_HEIGHT:null,SET_APPOINTMENT_BANNER_HEIGHT:null,AWAY_STATE:{UPDATE:null,FETCH:null,SET:null},SET_IS_CONTEXT_CARD_HIDDEN:null,MESSAGE_SEARCH:{NAME_SEARCH_UPDATE:null,SNIPPET_SEARCH_UPDATE:null,LOAD_MORE_NAME_RESULT:null,LOAD_MORE_SNIPPET_RESULT:null},HOT_LIKE:{END:null,START:null},BAN:{RESET:null,UPDATE:null},CLASSIFIER:{INITIALIZE_STORE:null,CHECK_FOR_INTENT:null,NOTIFY_INTENT_CLASSIFIED:null,THREAD_INTENT_UPDATED:null,VERIFY_INTENT:null}});Object.assign(h,c('PagesManagerActionType'));f.exports=h;}),null);
__d('PagesManagerMessagingAwayStatusDispatcher',['ReactDispatcher_DEPRECATED'],(function a(b,c,d,e,f,g){f.exports=new (c('ReactDispatcher_DEPRECATED'))();}),null);
__d('PagesManagerAwayToggleAction',['PagesManagerMessagingActionType','PagesManagerMessagingAwayStatusDispatcher','PagesAdminToolUIActionType','PagesManagerLogger'],(function a(b,c,d,e,f,g){'use strict';var h={fetchStatus:function i(j){c('PagesManagerMessagingAwayStatusDispatcher').dispatch({pageID:j,type:c('PagesManagerMessagingActionType').AWAY_STATE.FETCH});},setToggleStatus:function i(j,k){c('PagesManagerLogger').logMessageInboxUIAction(c('PagesAdminToolUIActionType').MESSAGE_INBOX_CLICK_AWAY_TOGGLE,j,{away:k});c('PagesManagerMessagingAwayStatusDispatcher').dispatch({pageID:j,toggle:k,type:c('PagesManagerMessagingActionType').AWAY_STATE.SET});}};f.exports=h;}),null);
__d('PagesManagerAwayBanner.react',['cx','fbt','ix','PagesManagerAwayToggleAction','Image.react','LeftRight.react','Link.react','PagesManagerResizeListener','PagesManagerCountDownTimer.react','React','XUIText.react'],(function a(b,c,d,e,f,g,h,i,j){var k,l,m='/help/800788243369168';k=babelHelpers.inherits(n,c('React').Component);l=k&&k.prototype;n.prototype.$PagesManagerAwayBanner1=function(){'use strict';c('PagesManagerAwayToggleAction').setToggleStatus(this.props.pageID,false);};n.prototype.componentDidUpdate=function(o){'use strict';if(o.isAway!==this.props.isAway)c('PagesManagerResizeListener').emit('change');};n.prototype.renderLeftChild=function(){'use strict';var o=this.props.expirationTimestamp*1000;return (c('React').createElement('div',null,c('React').createElement(c('Image.react'),{className:"_2fei",src:j('images/pages/pages_manager/messages/clock.png')}),c('React').createElement(c('XUIText.react'),{className:"_2fek",size:'small',display:'inline'},i._("Currently Away"),c('React').createElement('div',{className:"_2fel"},c('React').createElement(c('PagesManagerCountDownTimer.react'),{expireTimestamp:o,isHidden:!this.props.isAway,isNewInbox:true,onTimeup:function(){return this.$PagesManagerAwayBanner1();}.bind(this)})))));};n.prototype.renderRightChild=function(){'use strict';return (c('React').createElement('div',null,c('React').createElement(c('Link.react'),{className:"_2fem",href:m,target:'_blank'},i._("Learn more")),c('React').createElement(c('XUIText.react'),{className:"_2fen",onClick:function(){c('PagesManagerAwayToggleAction').setToggleStatus(this.props.pageID,false);}.bind(this)},i._("Turn Off"))));};n.prototype.render=function(){'use strict';if(!this.props.isInitialized)return c('React').createElement('div',null);return (c('React').createElement(c('LeftRight.react'),{className:"_2feo"+(!this.props.isAway?' '+"hidden_elem":'')},this.renderLeftChild(),this.renderRightChild()));};function n(){'use strict';k.apply(this,arguments);}f.exports=n;}),null);
__d("XPagesAwayToggleController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pages\/manager\/messages\/awaytoggle\/",{});}),null);
__d("XPagesAwayToggleStatusController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pages\/manager\/messages\/awaytoggle\/status\/",{});}),null);
__d('PagesManagerMessagingAwayStatusStore',['ActorURI','AsyncRequest','PagesManagerMessagingActionType','FluxStore','PagesManagerMessagingAwayStatusDispatcher','XPagesAwayToggleController','XPagesAwayToggleStatusController'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FluxStore'));i=h&&h.prototype;function j(k){i.constructor.call(this,k);this.$PagesManagerMessagingAwayStatusStore1=false;this.$PagesManagerMessagingAwayStatusStore2=false;this.$PagesManagerMessagingAwayStatusStore3=0;}j.prototype.$PagesManagerMessagingAwayStatusStore4=function(k){var l=c('XPagesAwayToggleStatusController').getURIBuilder().getURI();l=c('ActorURI').create(l,k);new (c('AsyncRequest'))().setURI(l).setHandler(function(m){this.$PagesManagerMessagingAwayStatusStore1=m.payload.isAway;this.$PagesManagerMessagingAwayStatusStore3=m.payload.expiration;this.$PagesManagerMessagingAwayStatusStore2=true;this.__dispatcher.dispatch({type:c('PagesManagerMessagingActionType').AWAY_STATE.UPDATE});}.bind(this)).send();};j.prototype.$PagesManagerMessagingAwayStatusStore5=function(k,l){var m=c('XPagesAwayToggleController').getURIBuilder().getURI();m=c('ActorURI').create(m,k);new (c('AsyncRequest'))().setURI(m).setMethod('POST').setData({is_away:l}).setHandler(function(n){this.$PagesManagerMessagingAwayStatusStore1=n.payload.isAway;this.$PagesManagerMessagingAwayStatusStore3=n.payload.expiration;this.__dispatcher.dispatch({type:c('PagesManagerMessagingActionType').AWAY_STATE.UPDATE});}.bind(this)).send();};j.prototype.__onDispatch=function(k){switch(k.type){case c('PagesManagerMessagingActionType').AWAY_STATE.SET:this.$PagesManagerMessagingAwayStatusStore5(k.pageID,k.toggle);break;case c('PagesManagerMessagingActionType').AWAY_STATE.FETCH:this.$PagesManagerMessagingAwayStatusStore4(k.pageID);break;case c('PagesManagerMessagingActionType').AWAY_STATE.UPDATE:this.__emitChange();break;default:break;}};j.prototype.isAway=function(){return this.$PagesManagerMessagingAwayStatusStore1;};j.prototype.isInitialized=function(){return this.$PagesManagerMessagingAwayStatusStore2;};j.prototype.getExpirationTimestamp=function(){return this.$PagesManagerMessagingAwayStatusStore3;};f.exports=new j(c('PagesManagerMessagingAwayStatusDispatcher'));}),null);
__d('PagesManagerAwayContainer.react',['PagesManagerMessagingAwayStatusStore','PagesManagerAwayToggleAction','FluxContainer','React'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;j.getStores=function(){'use strict';return [c('PagesManagerMessagingAwayStatusStore')];};j.calculateState=function(k,l){'use strict';return {isAway:c('PagesManagerMessagingAwayStatusStore').isAway(),isInitialized:c('PagesManagerMessagingAwayStatusStore').isInitialized(),expirationTimestamp:c('PagesManagerMessagingAwayStatusStore').getExpirationTimestamp()};};j.prototype.componentWillMount=function(){'use strict';c('PagesManagerAwayToggleAction').fetchStatus(this.props.pageID);};j.prototype.render=function(){'use strict';var k=this.props,l=k.RenderClass,m=babelHelpers.objectWithoutProperties(k,['RenderClass']);return (c('React').createElement(l,babelHelpers['extends']({},m,this.state)));};function j(){'use strict';h.apply(this,arguments);}f.exports=c('FluxContainer').create(j,{withProps:true});}),null);
__d('PagesManagerMessagingMessagelistDispatcher',['ReactDispatcher_DEPRECATED'],(function a(b,c,d,e,f,g){'use strict';f.exports=new (c('ReactDispatcher_DEPRECATED'))();}),null);
__d('PagesManagerMessagingClassifierActions',['PagesManagerMessagingMessagelistDispatcher','PagesManagerMessagingActionType'],(function a(b,c,d,e,f,g){'use strict';var h=c('PagesManagerMessagingActionType').CLASSIFIER,i={ActionTypes:h,checkForIntent:function j(k,l,m){c('PagesManagerMessagingMessagelistDispatcher').dispatch({type:h.CHECK_FOR_INTENT,message:k,userID:l,pageID:m});},initializeStore:function j(k,l){c('PagesManagerMessagingMessagelistDispatcher').dispatch({type:h.INITIALIZE_STORE,config:k,pageID:l});},notifyIntentClassified:function j(k){c('PagesManagerMessagingMessagelistDispatcher').dispatch({type:h.NOTIFY_INTENT_CLASSIFIED,intent:k});},notifyThreadIntentUpdated:function j(k,l){c('PagesManagerMessagingMessagelistDispatcher').dispatch({type:h.THREAD_INTENT_UPDATED,context:l,pageID:k});},verifyIntentClassification:function j(k,l,m){c('PagesManagerMessagingMessagelistDispatcher').dispatch({type:h.VERIFY_INTENT,messageID:k,message:l,result:m});}};f.exports=i;}),null);
__d('NativeBookingFlowAdminNotesMutation',['Relay','RelayMutationType'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('Relay').Mutation);i=h&&h.prototype;j.prototype.getMutation=function(){return function(){return {calls:[{kind:'Call',metadata:{},name:'request_note_update',value:{kind:'CallVariable',callVariableName:'input'}}],children:[{fieldName:'client_mutation_id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],kind:'Mutation',metadata:{inputType:'RequestNoteUpdateData!'},name:'NativeBookingFlowAdminNotesMutation',responseType:'RequestNoteUpdateResponsePayload'};}();};j.prototype.getVariables=function(){return {action:this.props.action,actor_id:this.props.actor_id,body:this.props.body,component_flow_request_id:this.props.component_flow_request_id,request_note_id:this.props.request_note_id};};j.prototype.getFatQuery=function(){return function(){return {children:[{children:[{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'},{fieldName:'__typename',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'String'}],fieldName:'component_flow_request',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id',isAbstract:true},type:'NativeComponentFlowRequest'},{children:[{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],fieldName:'request_note',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id'},type:'PagesPlatformNote'}],id:c('Relay').QL.__id(),kind:'Fragment',metadata:{},name:'NativeBookingFlowAdminNotesMutationRelayQL',type:'RequestNoteUpdateResponsePayload'};}();};j.prototype.getConfigs=function(){return [{type:c('RelayMutationType').FIELDS_CHANGE,fieldIDs:{component_flow_request:this.props.component_flow_request_id}}];};function j(){h.apply(this,arguments);}f.exports=j;}),null);
__d('NativeComponentFlowBookingRequestMutation',['Relay','RelayMutationType'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('Relay').Mutation);i=h&&h.prototype;j.prototype.getMutation=function(){return function(){return {calls:[{kind:'Call',metadata:{},name:'native_booking_request_status_update',value:{kind:'CallVariable',callVariableName:'input'}}],children:[{fieldName:'client_mutation_id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],kind:'Mutation',metadata:{inputType:'NativeBookingRequestStatusUpdateData!'},name:'NativeComponentFlowBookingRequestMutation',responseType:'NativeBookingRequestStatusUpdateResponsePayload'};}();};j.prototype.getVariables=function(){return {action:this.props.action,actor_id:this.props.actor_id,message_text:this.props.message_text,request_id:this.props.request_id,service_id:this.props.service_id,suggested_end_time:this.props.suggested_end_time,suggested_time:this.props.suggested_time};};j.prototype.getFatQuery=function(){return function(){return {children:[{children:[{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],fieldName:'request',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id'},type:'NativeComponentFlowBookingRequest'}],id:c('Relay').QL.__id(),kind:'Fragment',metadata:{},name:'NativeComponentFlowBookingRequestMutationRelayQL',type:'NativeComponentFlowRequestRescheduleResponsePayload'};}();};j.prototype.getConfigs=function(){return [{type:c('RelayMutationType').FIELDS_CHANGE,fieldIDs:{request:this.props.request_id}}];};function j(){h.apply(this,arguments);}j.fragments={request:function k(){return function(){return {children:[{fieldName:'booking_status',kind:'Field',metadata:{},type:'PagesPlatformNativeBookingStatus'},{fieldName:'start_time',kind:'Field',metadata:{},type:'Time'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],id:c('Relay').QL.__id(),kind:'Fragment',metadata:{},name:'NativeComponentFlowBookingRequestMutation_RequestRelayQL',type:'NativeComponentFlowBookingRequest'};}();}};f.exports=j;}),null);
__d('PagesAppointmentDateTimeRangePicker.react',['cx','fbt','BUIDatePicker.react','BUITimeInput.react','DateTime','Link.react','LocalDate','React','TimeOfDay','Timezone'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('Timezone').getEnvironmentTimezoneID,m=c('Timezone').UTC,n=l()||m,o=c('LocalDate').today(n),p=[function(s){return s.isAfterOrEqual(o);}];j=babelHelpers.inherits(q,c('React').Component);k=j&&j.prototype;function q(s){k.constructor.call(this,s);r.call(this);var t=s.value||{from:c('TimeOfDay').fromDateTime(c('DateTime').now(n)).addMinutes(15),until:null,date:o};this.state={value:t,showUntil:Boolean(t.until)};}q.prototype.shouldComponentUpdate=function(s,t){return (!this.$PagesAppointmentDateTimeRangePicker1(this.props.value,s.value)||!this.$PagesAppointmentDateTimeRangePicker1(this.state.value,t.value)||this.state.showUntil!==t.showUntil);};q.prototype.componentWillReceiveProps=function(s){if(s.value&&!this.$PagesAppointmentDateTimeRangePicker1(this.props.value,s.value))this.setState({value:s.value,showUntil:Boolean(s.value.until)});};q.prototype.componentDidMount=function(){this.props.onChange(this.state.value);};q.prototype.$PagesAppointmentDateTimeRangePicker1=function(s,t){if(!s&&!t)return true;if(s&&t){if(!s.date.equals(t.date))return false;if(!s.from.equals(t.from))return false;if(!s.util&&!t.until)return true;if(s.until&&t.until&&s.until.equals(t.until))return true;}return false;};q.prototype.$PagesAppointmentDateTimeRangePicker6=function(){var s=this.state.value,t=s.from,u=s.until;if(this.state.showUntil)return (c('React').createElement(c('BUITimeInput.react'),{minValue:t,onChange:this.$PagesAppointmentDateTimeRangePicker4,value:u}));return (c('React').createElement(c('Link.react'),{onClick:this.$PagesAppointmentDateTimeRangePicker5},i._("+ End Time")));};q.prototype.render=function(){var s=this.state.value,t=s.date,u=s.from;return (c('React').createElement('div',null,c('React').createElement(c('BUIDatePicker.react'),{dateRestraints:p,onChange:this.$PagesAppointmentDateTimeRangePicker2,value:t}),c('React').createElement('div',{className:"_3-8x"},c('React').createElement(c('BUITimeInput.react'),{className:"_3-90",onChange:this.$PagesAppointmentDateTimeRangePicker3,value:u}),this.$PagesAppointmentDateTimeRangePicker6())));};var r=function s(){this.$PagesAppointmentDateTimeRangePicker2=function(t){var u=Object.assign({},this.state.value,{date:t});this.setState({value:u});this.props.onChange(u);}.bind(this);this.$PagesAppointmentDateTimeRangePicker3=function(t){var u=Object.assign({},this.state.value,{from:t});this.setState({value:u});this.props.onChange(u);}.bind(this);this.$PagesAppointmentDateTimeRangePicker4=function(t){var u=Object.assign({},this.state.value,{until:t});this.setState({value:u});this.props.onChange(u);}.bind(this);this.$PagesAppointmentDateTimeRangePicker5=function(){this.setState({showUntil:true});}.bind(this);};f.exports=q;}),null);
__d("PageAllServicesQueryWebGraphQLQuery",["WebGraphQLQueryHelper"],(function a(b,c,d,e,f,g){'use strict';f.exports=c("WebGraphQLQueryHelper").getExports({docID:"890499557751834",queryID:"890499564418500"});}),null);
__d('PagesCatalogItemsSelector.react',['fbt','AsyncRequest','PageAllServicesQueryWebGraphQLQuery','React','SUIBusinessTheme','SUISelector.react','SUISelectorOption.react','idx'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;function k(l){j.constructor.call(this,l);this.$PagesCatalogItemsSelector1=function(m){var n,o,p,q,r,s,t=(n=m)!=null?(o=n.payload)!=null?(p=o.data)!=null?(q=p.page)!=null?(r=q.services_card)!=null?(s=r.product_catalog)!=null?s.catalog_items:s:r:q:p:o:n;this.setState({catalog_items:t});}.bind(this);this.$PagesCatalogItemsSelector2=function(m){this.setState({value:m});this.props.onChange(m);}.bind(this);this.state={catalog_items:null,value:null};}k.prototype.componentDidMount=function(){var l=c('PageAllServicesQueryWebGraphQLQuery').getURI({page_id:this.props.pageID});new (c('AsyncRequest'))(l).setHandler(this.$PagesCatalogItemsSelector1).send();};k.prototype.render=function(){var l,m,n,o=((l=this)!=null?(m=l.state)!=null?(n=m.catalog_items)!=null?n.edges:n:m:l)||[];return (c('React').createElement(c('SUISelector.react'),{onChange:this.$PagesCatalogItemsSelector2,placeholder:h._("Select a service"),theme:c('SUIBusinessTheme'),value:this.state.value},o.map(function(p){return (c('React').createElement(c('SUISelectorOption.react'),{value:p.node.id,key:p.node.id},p.node.name));})));};f.exports=k;}),null);
__d('PagesManagerRequestTimeDialogType',['keyMirror'],(function a(b,c,d,e,f,g){'use strict';f.exports=c('keyMirror')({ADMIN_CANCEL:null,ADMIN_DECLINE:null,CREATE_ANOTHER_APPOINTMENT:null,LIST:null,SCHEDULE:null,USER_CANCEL:null,USER_DECLINE:null,USER_VIEW_DETAILS:null,VIEW_DETAILS:null});}),null);
__d('PagesPlatformBookingGlyphUtils',['ix','fbglyph'],(function a(b,c,d,e,f,g,h){'use strict';var i={'calendar:16:fig-light-20':h("\/images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/calendar_16_fig-light-20.png"),'calendar:16:fig-light-50':h("\/images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/calendar_16_fig-light-50.png"),'calendar:16:fig-white':h("\/images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/calendar_16_fig-white.png"),'calendar:20:fig-light-20':h("\/images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/calendar_20_fig-light-20.png"),'calendar:20:fig-light-50':h("\/images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/calendar_20_fig-light-50.png"),'calendar:20:fig-white':h("\/images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/calendar_20_fig-white.png"),'clock:16:fig-light-20':h("\/images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/clock_16_fig-light-20.png"),'clock:20:fig-light-20':h("\/images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/clock_20_fig-light-20.png"),'price-tag:20:fig-light-20':h("\/images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/price-tag_20_fig-light-20.png")},j={selectGlyph:function k(l,m,n){return i[l+':'+m+':'+n];}};f.exports=j;}),null);
__d('PagesManagerMessagingAppointmentDialogDetailPane.react',['cx','fbt','AbstractTextArea.react','ChatAppointmentUtil','DateTime','Image.react','ImageBlock.react','LocalDate','PagesAppointmentDateTimeRangePicker.react','PagesCatalogItemsSelector.react','PagesManagerRequestTimeDialogType','PagesPlatformBookingGlyphUtils','PagesPlatformNativeBookingStatus','React','Relay','Timezone','idx','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l,m,n=c('Timezone').getEnvironmentTimezoneID()||c('Timezone').UTC,o=function t(){return (c('React').createElement('div',{className:"_9tb _3-8y"}));},p=function t(u){return (c('React').createElement('div',{className:c('joinClasses')(u.className,"_9tc")},u.children));},q=function t(u){return (c('React').createElement('div',{className:c('joinClasses')(u.className,"_9te")},u.children));};j=babelHelpers.inherits(r,c('React').Component);k=j&&j.prototype;r.prototype.render=function(){var t=this.props,u=t.className,v=t.primaryText,w=t.secondaryText,x=t.src,y=t.subText,z=x?c('ImageBlock.react'):'div',aa=void 0;if(!v)return null;if(x)aa=c('React').createElement('div',{className:"_9tf"},c('React').createElement(c('Image.react'),{className:"_9tg",src:x}));return (c('React').createElement(z,{className:u,spacing:'medium'},aa,c('React').createElement('div',null,w?c('React').createElement(q,{className:"_3-94"},w):null,c('React').createElement(p,null,v),y?c('React').createElement(q,{className:"_3-8w"},y):null)));};function r(){j.apply(this,arguments);}l=babelHelpers.inherits(s,c('React').Component);m=l&&l.prototype;function s(t){m.constructor.call(this,t);this.$PagesManagerMessagingAppointmentDialogDetailPane2=function(){this.props.onDataChange(this.$PagesManagerMessagingAppointmentDialogDetailPane4());}.bind(this);this.$PagesManagerMessagingAppointmentDialogDetailPane13=function(u){this.setState({dateTimeRange:u},this.$PagesManagerMessagingAppointmentDialogDetailPane2);}.bind(this);this.$PagesManagerMessagingAppointmentDialogDetailPane23=function(event){var u=event.target.value;this.setState({notes:u});}.bind(this);this.$PagesManagerMessagingAppointmentDialogDetailPane22=function(event){var u=event.target.value;this.setState({cancelNotes:u},this.$PagesManagerMessagingAppointmentDialogDetailPane2);}.bind(this);this.$PagesManagerMessagingAppointmentDialogDetailPane12=function(u){this.setState({serviceID:u},this.$PagesManagerMessagingAppointmentDialogDetailPane2);}.bind(this);this.state=this.$PagesManagerMessagingAppointmentDialogDetailPane1(t);this.$PagesManagerMessagingAppointmentDialogDetailPane2();}s.prototype.componentWillReceiveProps=function(t){if(this.props.paneType!==t.paneType)this.setState(this.$PagesManagerMessagingAppointmentDialogDetailPane1(t),this.$PagesManagerMessagingAppointmentDialogDetailPane2);};s.prototype.$PagesManagerMessagingAppointmentDialogDetailPane1=function(t){var u,v,w,x,y,z,aa;return {cancelNotes:this.$PagesManagerMessagingAppointmentDialogDetailPane3(t),dateTimeRange:null,notes:((u=t)!=null?(v=u.appointment)!=null?(w=v.request_note)!=null?(x=w.edges)!=null?(y=x[0])!=null?(z=y.node)!=null?(aa=z.body)!=null?aa.text:aa:z:y:x:w:v:u)||'',serviceID:null};};s.prototype.$PagesManagerMessagingAppointmentDialogDetailPane4=function(){switch(this.props.paneType){case c('PagesManagerRequestTimeDialogType').CREATE_ANOTHER_APPOINTMENT:return this.$PagesManagerMessagingAppointmentDialogDetailPane5();case c('PagesManagerRequestTimeDialogType').SCHEDULE:return this.$PagesManagerMessagingAppointmentDialogDetailPane6();case c('PagesManagerRequestTimeDialogType').ADMIN_CANCEL:case c('PagesManagerRequestTimeDialogType').ADMIN_DECLINE:case c('PagesManagerRequestTimeDialogType').USER_CANCEL:case c('PagesManagerRequestTimeDialogType').USER_DECLINE:return this.$PagesManagerMessagingAppointmentDialogDetailPane7();}return {data:{},isValid:false};};s.prototype.$PagesManagerMessagingAppointmentDialogDetailPane8=function(t,u){if(!t||!u)return null;return c('DateTime').localNow().set({second:u.second,minute:u.minute,hour:u.hour,day:t.day,month:t.month,year:t.year}).getUnixTimestampSeconds();};s.prototype.$PagesManagerMessagingAppointmentDialogDetailPane7=function(){var t=this.state.cancelNotes;return {data:{cancelNotes:t},isValid:true};};s.prototype.$PagesManagerMessagingAppointmentDialogDetailPane5=function(){var t=this.state.serviceID,u=this.$PagesManagerMessagingAppointmentDialogDetailPane6();u.data=babelHelpers['extends']({},u.data,{serviceID:t});return u;};s.prototype.$PagesManagerMessagingAppointmentDialogDetailPane6=function(){var t=this.state.dateTimeRange,u={data:{},isValid:false};if(t){var v=t.date,w=t.from,x=t.until,y=this.$PagesManagerMessagingAppointmentDialogDetailPane8(v,w),z=x&&x.isAfterOrEqual(w)?this.$PagesManagerMessagingAppointmentDialogDetailPane8(v,x):this.$PagesManagerMessagingAppointmentDialogDetailPane8(v.addDays(1),x),aa=c('DateTime').now(n).getUnixTimestampSeconds();if(y&&y>aa)u={data:{startTime:y,endTime:z},isValid:true};}return u;};s.prototype.getAppointmentDetail=function(){return this.state;};s.prototype.$PagesManagerMessagingAppointmentDialogDetailPane3=function(t){var u,v,w,x=((u=t)!=null?(v=u.appointment)!=null?(w=v.user)!=null?w.name:w:v:u)||'';switch(t.paneType){case c('PagesManagerRequestTimeDialogType').ADMIN_CANCEL:return i._("Hi, {user name}. Unfortunately, we need to cancel this appointment. We're sorry for the inconvenience and would like to reschedule. Are there any other times that would work for you?",[i.param('user name',x)]);case c('PagesManagerRequestTimeDialogType').ADMIN_DECLINE:return i._("Hi, {user name}. Unfortunately, the appointment times you've suggested aren't available. Are there any other times that would work for you?",[i.param('user name',x)]);case c('PagesManagerRequestTimeDialogType').USER_CANCEL:case c('PagesManagerRequestTimeDialogType').USER_DECLINE:return i._("Hello. Unfortunately, this time doesn't work for my schedule.");}return '';};s.prototype.$PagesManagerMessagingAppointmentDialogDetailPane9=function(t,u){var v=t?i._("{user name}'s availability",[i.param('user name',t)]):i._("Availability");return c('React').createElement(r,{className:"_3-8y",primaryText:u,secondaryText:v});};s.prototype.$PagesManagerMessagingAppointmentDialogDetailPane10=function(t){return c('React').createElement(r,{className:"_3-8y",primaryText:t,secondaryText:i._("Additional notes")});};s.prototype.$PagesManagerMessagingAppointmentDialogDetailPane11=function(){var t=this.props.appointment;if(!t)return null;var u=t.page||{};return c('React').createElement('div',{className:"_zcq"},c('React').createElement('div',{className:"_3-96"},i._("When you create an appointment, people will get a reminder the day before their service. It will also appear as a calendar event.")),c('React').createElement(c('PagesCatalogItemsSelector.react'),{onChange:this.$PagesManagerMessagingAppointmentDialogDetailPane12,pageID:u.id}),c('React').createElement('div',{className:"_9th"},c('React').createElement(c('PagesAppointmentDateTimeRangePicker.react'),{onChange:this.$PagesManagerMessagingAppointmentDialogDetailPane13,value:this.state.dateTimeRange})));};s.prototype.$PagesManagerMessagingAppointmentDialogDetailPane14=function(){var t,u,v,w,x,y=this.props.appointment;if(!y)return null;var z=y.product_item||{},aa=y.special_request||'',ba=y.user||{},ca=y.user_availability||'',da=z.experimental_freeform_price||'',ea=z.name||'',fa=((t=z)!=null?(u=t.profile_picture)!=null?u.uri:u:t)||((v=y)!=null?(w=v.page)!=null?(x=w.profile_photo)!=null?x.url:x:w:v);return c('React').createElement('div',{className:"_zcq"},c('React').createElement(r,{primaryText:ea,src:fa,subText:da}),c('React').createElement('div',{className:"_9th"},c('React').createElement(c('PagesAppointmentDateTimeRangePicker.react'),{onChange:this.$PagesManagerMessagingAppointmentDialogDetailPane13,value:this.state.dateTimeRange})),c('React').createElement(o,null),this.$PagesManagerMessagingAppointmentDialogDetailPane9(ba.name,ca),this.$PagesManagerMessagingAppointmentDialogDetailPane10(aa));};s.prototype.$PagesManagerMessagingAppointmentDialogDetailPane15=function(){var t=this.props.appointment;if(!t)return null;var u=t.booking_status||'',v=t.user||{},w=v.name||'',x=v.profile_picture||{},y=u===c('PagesPlatformNativeBookingStatus').REQUESTED?this.$PagesManagerMessagingAppointmentDialogDetailPane16():this.$PagesManagerMessagingAppointmentDialogDetailPane17();return c('React').createElement('div',{className:"_zcq"},c('React').createElement(r,{primaryText:w,secondaryText:i._("Customer"),src:x.uri}),y,c('React').createElement(o,null),this.$PagesManagerMessagingAppointmentDialogDetailPane18());};s.prototype.$PagesManagerMessagingAppointmentDialogDetailPane19=function(){return c('React').createElement('div',{className:"_zcq"},this.$PagesManagerMessagingAppointmentDialogDetailPane17(),c('React').createElement(o,null),this.$PagesManagerMessagingAppointmentDialogDetailPane18());};s.prototype.$PagesManagerMessagingAppointmentDialogDetailPane20=function(){var t=this.props.appointment;if(!t)return null;var u=t.booking_status||'',v=t.status||'',w=c('PagesPlatformBookingGlyphUtils').selectGlyph('calendar','20','fig-white');return c('React').createElement('div',{className:"_zcq"},c('React').createElement(r,{className:c('joinClasses')("_zcr _2ph_",(u===c('PagesPlatformNativeBookingStatus').PENDING?"_9ti":'')+(u===c('PagesPlatformNativeBookingStatus').CONFIRMED?' '+"_9tj":'')+(u===c('PagesPlatformNativeBookingStatus').DECLINED||u===c('PagesPlatformNativeBookingStatus').CANCELLED?' '+"_9tk":'')),primaryText:v,secondaryText:i._("Appointment"),src:w}),this.$PagesManagerMessagingAppointmentDialogDetailPane17(),c('React').createElement(o,null),this.$PagesManagerMessagingAppointmentDialogDetailPane18());};s.prototype.$PagesManagerMessagingAppointmentDialogDetailPane21=function(){var t=this.props.appointment;if(!t)return null;return c('React').createElement('div',{className:"_zcq"},this.$PagesManagerMessagingAppointmentDialogDetailPane17());};s.prototype.$PagesManagerMessagingAppointmentDialogDetailPane16=function(){var t=this.props.appointment;if(!t)return null;var u=t.special_request||'',v=t.user_availability||'';return c('React').createElement('div',null,this.$PagesManagerMessagingAppointmentDialogDetailPane9(null,v),this.$PagesManagerMessagingAppointmentDialogDetailPane10(u));};s.prototype.$PagesManagerMessagingAppointmentDialogDetailPane17=function(){var t,u,v,w,x,y=this.props.appointment;if(!y)return null;var z=y.product_item||{},aa=y.suggested_time_range||{},ba=z.experimental_freeform_price||'',ca=z.name||'',da=((t=z)!=null?(u=t.profile_picture)!=null?u.uri:u:t)||((v=y)!=null?(w=v.page)!=null?(x=w.profile_photo)!=null?x.url:x:w:v),ea=c('PagesPlatformBookingGlyphUtils').selectGlyph('calendar','20','fig-light-20'),fa=c('PagesPlatformBookingGlyphUtils').selectGlyph('clock','20','fig-light-20'),ga=c('PagesPlatformBookingGlyphUtils').selectGlyph('price-tag','20','fig-light-20');return c('React').createElement('div',null,c('React').createElement(r,{className:"_3-8y",primaryText:ca,secondaryText:i._("Appointment"),src:da}),c('React').createElement(r,{className:"_3-8y",primaryText:c('ChatAppointmentUtil').renderDate(aa),secondaryText:i._("Date"),src:ea}),c('React').createElement(r,{className:"_3-8y",primaryText:c('ChatAppointmentUtil').renderTimeRange(aa),secondaryText:i._("Time"),src:fa}),c('React').createElement(r,{className:"_3-8y",primaryText:ba,secondaryText:i._("Price"),src:ga}));};s.prototype.$PagesManagerMessagingAppointmentDialogDetailPane18=function(){var t='',u='',v='',w=null,x=this.props.paneType;switch(this.props.paneType){case c('PagesManagerRequestTimeDialogType').ADMIN_DECLINE:case c('PagesManagerRequestTimeDialogType').USER_DECLINE:v=i._("Message");u=i._("Send a brief message describing why you're declining this appointment request.");t=this.state.cancelNotes;w=this.$PagesManagerMessagingAppointmentDialogDetailPane22;break;case c('PagesManagerRequestTimeDialogType').ADMIN_CANCEL:case c('PagesManagerRequestTimeDialogType').USER_CANCEL:v=i._("Message");u=i._("Send a brief message describing why you're cancelling this appointment.");t=this.state.cancelNotes;w=this.$PagesManagerMessagingAppointmentDialogDetailPane22;break;case c('PagesManagerRequestTimeDialogType').VIEW_DETAILS:case c('PagesManagerRequestTimeDialogType').CREATE_ANOTHER_APPOINTMENT:v=i._("Notes");u=i._("Add notes about this appointment. These will not be visible to the person.");t=this.state.notes;w=this.$PagesManagerMessagingAppointmentDialogDetailPane23;break;}return c('React').createElement('div',{className:"_3-8y"},c('React').createElement(p,{className:"_3-95"},v),c('React').createElement(c('AbstractTextArea.react'),{className:"_zcu",defaultValue:t,key:x,onChange:w,placeholder:u}));};s.prototype.render=function(){switch(this.props.paneType){case c('PagesManagerRequestTimeDialogType').ADMIN_DECLINE:case c('PagesManagerRequestTimeDialogType').ADMIN_CANCEL:return this.$PagesManagerMessagingAppointmentDialogDetailPane15();case c('PagesManagerRequestTimeDialogType').USER_DECLINE:case c('PagesManagerRequestTimeDialogType').USER_CANCEL:return this.$PagesManagerMessagingAppointmentDialogDetailPane19();case c('PagesManagerRequestTimeDialogType').CREATE_ANOTHER_APPOINTMENT:return this.$PagesManagerMessagingAppointmentDialogDetailPane11();case c('PagesManagerRequestTimeDialogType').SCHEDULE:return this.$PagesManagerMessagingAppointmentDialogDetailPane14();case c('PagesManagerRequestTimeDialogType').USER_VIEW_DETAILS:return this.$PagesManagerMessagingAppointmentDialogDetailPane21();case c('PagesManagerRequestTimeDialogType').VIEW_DETAILS:return this.$PagesManagerMessagingAppointmentDialogDetailPane20();}return null;};f.exports=c('Relay').createContainer(s,{fragments:{appointment:function t(){return function(){return {children:[{alias:'booking_status',fieldName:'booking_status_value',kind:'Field',metadata:{},type:'String'},{fieldName:'id',kind:'Field',metadata:{isRequisite:true},type:'ID'},{children:[{fieldName:'id',kind:'Field',metadata:{isRequisite:true},type:'ID'},{fieldName:'name',kind:'Field',metadata:{},type:'String'},{children:[{fieldName:'url',kind:'Field',metadata:{},type:'Url'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],fieldName:'profile_photo',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id'},type:'Photo'}],fieldName:'page',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id'},type:'Page'},{children:[{fieldName:'experimental_freeform_price',kind:'Field',metadata:{},type:'String'},{fieldName:'name',kind:'Field',metadata:{},type:'String'},{children:[{fieldName:'uri',kind:'Field',metadata:{},type:'Url'}],fieldName:'profile_picture',kind:'Field',metadata:{canHaveSubselections:true},type:'Image'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],fieldName:'product_item',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id'},type:'ProductItem'},{calls:[{kind:'Call',metadata:{},name:'first',value:{kind:'CallValue',callValue:10}}],children:[{children:[{children:[{children:[{fieldName:'text',kind:'Field',metadata:{},type:'String'}],fieldName:'body',kind:'Field',metadata:{canHaveSubselections:true},type:'TextWithEntities'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],fieldName:'node',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id',isRequisite:true},type:'PagesPlatformNote'},{fieldName:'cursor',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],fieldName:'edges',kind:'Field',metadata:{canHaveSubselections:true,isPlural:true},type:'PagesPlatformNoteFromComponentFlowRequestEdge'},{children:[{fieldName:'has_next_page',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'Boolean'},{fieldName:'has_previous_page',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'Boolean'}],fieldName:'page_info',kind:'Field',metadata:{canHaveSubselections:true,isGenerated:true,isRequisite:true},type:'PageInfo'}],fieldName:'request_note',kind:'Field',metadata:{canHaveSubselections:true,isConnection:true,isFindable:true},type:'PagesPlatformNoteFromComponentFlowRequestConnection'},{fieldName:'special_request',kind:'Field',metadata:{},type:'String'},{fieldName:'status',kind:'Field',metadata:{},type:'String'},{children:[{fieldName:'start',kind:'Field',metadata:{},type:'Time'},{fieldName:'end',kind:'Field',metadata:{},type:'Time'}],fieldName:'suggested_time_range',kind:'Field',metadata:{canHaveSubselections:true},type:'TimeRange'},{children:[{fieldName:'name',kind:'Field',metadata:{},type:'String'},{children:[{fieldName:'uri',kind:'Field',metadata:{},type:'Url'}],fieldName:'profile_picture',kind:'Field',metadata:{canHaveSubselections:true},type:'Image'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],fieldName:'user',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id'},type:'User'},{fieldName:'user_availability',kind:'Field',metadata:{},type:'String'}],id:c('Relay').QL.__id(),kind:'Fragment',metadata:{},name:'PagesManagerMessagingAppointmentDialogDetailPane_react_AppointmentRelayQL',type:'NativeComponentFlowBookingRequest'};}();}}});}),null);
__d('PagesPlatformBookingMessageViewer',['keyMirror'],(function a(b,c,d,e,f,g){'use strict';f.exports=c('keyMirror')({ADMIN:null,USER:null});}),null);
__d('PagesManagerMessagingAppointmentDialogNavItem.react',['cx','fbt','DateTime','Layout.react','Link.react','PagesPlatformBookingMessageViewer','PagesPlatformNativeBookingStatus','React','Relay'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('Layout.react').Column,m=c('Layout.react').FillColumn;j=babelHelpers.inherits(n,c('React').Component);k=j&&j.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.$PagesManagerMessagingAppointmentDialogNavItem1=function(){this.props.onClick(this.props.index);}.bind(this),p;}n.prototype.$PagesManagerMessagingAppointmentDialogNavItem2=function(o){if(this.props.viewer===c('PagesPlatformBookingMessageViewer').ADMIN)return null;if(!o)return null;return (c('React').createElement(l,{className:"_3-91 _1o9z"},c('React').createElement('div',{className:"_1o9-"},o.day),c('React').createElement('div',{className:"_1o9_"},o.month)));};n.prototype.$PagesManagerMessagingAppointmentDialogNavItem3=function(o,p){if(this.props.viewer===c('PagesPlatformBookingMessageViewer').USER)return null;if(p!==c('PagesPlatformNativeBookingStatus').PENDING&&p!==c('PagesPlatformNativeBookingStatus').CONFIRMED)return null;return (c('React').createElement(l,{className:"_1oa1"+(p===c('PagesPlatformNativeBookingStatus').PENDING?' '+"_2qun":'')+(p===c('PagesPlatformNativeBookingStatus').CONFIRMED?' '+"_2qum":'')},o));};n.prototype.render=function(){var o=this.props.appointment;if(!o)return null;var p=o.booking_status,q=o.product_item||{},r=o.requested_time,s=o.status,t=o.suggested_time_range,u=void 0,v=void 0;switch(p){case c('PagesPlatformNativeBookingStatus').PENDING:case c('PagesPlatformNativeBookingStatus').CONFIRMED:var w=c('DateTime').localCreate(t.start),x=c('DateTime').localCreate(t.end);u={month:w.format('M'),day:w.format('j')};v=w.format('g:i A');if(t.start!==t.end)v+=' - '+x.format('g:i A');break;case c('PagesPlatformNativeBookingStatus').REQUESTED:case c('PagesPlatformNativeBookingStatus').DECLINED:var y=c('DateTime').localCreate(r);v=i._("Sent on {date of the request was sent} at {time of the request was sent}",[i.param('date of the request was sent',y.format('l, M j')),i.param('time of the request was sent',y.format('g:i A'))]);break;}return (c('React').createElement(c('Layout.react'),{className:"_2pi3 _2quo"},this.$PagesManagerMessagingAppointmentDialogNavItem2(u),c('React').createElement(m,null,c('React').createElement('div',{className:"_2qus"},q.name||i._("Appointment")),c('React').createElement('div',{className:"_2quw"},v)),this.$PagesManagerMessagingAppointmentDialogNavItem3(s,p),c('React').createElement(c('Link.react'),{className:"_1oa2",onClick:this.$PagesManagerMessagingAppointmentDialogNavItem1})));};f.exports=c('Relay').createContainer(n,{fragments:{appointment:function o(){return function(){return {children:[{alias:'booking_status',fieldName:'booking_status_value',kind:'Field',metadata:{},type:'String'},{children:[{fieldName:'name',kind:'Field',metadata:{},type:'String'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],fieldName:'product_item',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id'},type:'ProductItem'},{fieldName:'requested_time',kind:'Field',metadata:{},type:'Time'},{children:[{fieldName:'start',kind:'Field',metadata:{},type:'Time'},{fieldName:'end',kind:'Field',metadata:{},type:'Time'}],fieldName:'suggested_time_range',kind:'Field',metadata:{canHaveSubselections:true},type:'TimeRange'},{fieldName:'status',kind:'Field',metadata:{},type:'String'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],id:c('Relay').QL.__id(),kind:'Fragment',metadata:{},name:'PagesManagerMessagingAppointmentDialogNavItem_react_AppointmentRelayQL',type:'NativeComponentFlowBookingRequest'};}();}}});}),null);
__d('PagesManagerMessagingAppointmentDialog.react',['cx','fbt','LayerFadeOnHide','LayerHideOnEscape','NativeBookingFlowAdminNotesMutation','NativeBookingRequestStatusUpdateAction','NativeComponentFlowBookingRequestMutation','PagesEventObserver','PagesEventType','PagesManagerMessagingAppointmentDialogDetailPane.react','PagesManagerMessagingAppointmentDialogNavItem.react','PagesManagerRequestTimeDialogType','PagesPlatformBookingMessageViewer','PagesPlatformNativeBookingStatus','PagesPlatformNoteUpdateAction','React','Relay','XUIDialog.react','XUIDialogBody.react','XUIDialogButton.react','XUIDialogFooter.react','XUIDialogTitle.react','idx'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=400;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(o){k.constructor.call(this,o);this.$PagesManagerMessagingAppointmentDialog5=function(){this.$PagesManagerMessagingAppointmentDialog4(c('PagesManagerRequestTimeDialogType').USER_DECLINE);}.bind(this);this.$PagesManagerMessagingAppointmentDialog6=function(){this.$PagesManagerMessagingAppointmentDialog4(c('PagesManagerRequestTimeDialogType').USER_CANCEL);}.bind(this);this.$PagesManagerMessagingAppointmentDialog7=function(){this.$PagesManagerMessagingAppointmentDialog4(c('PagesManagerRequestTimeDialogType').ADMIN_CANCEL);}.bind(this);this.$PagesManagerMessagingAppointmentDialog8=function(){var p=this.state.currentAppointment,q=this.refs.detailPane;if(!p||!q)return;var r=p.page||{},s=p.suggested_time_range||{};c('PagesEventObserver').notify(c('PagesEventType').BOOKING_CONSUMER_TAPPED_ACCEPT_APPOINTMENT,r.id);c('Relay').Store.commitUpdate(new (c('NativeComponentFlowBookingRequestMutation'))({action:c('NativeBookingRequestStatusUpdateAction').ACCEPT,actor_id:this.props.actorID,request_id:p.id,suggested_end_time:s.end,suggested_time:s.start}));this.setState({currentAppointment:null});this.props.onToggle(false);}.bind(this);this.$PagesManagerMessagingAppointmentDialog9=function(){var p=this.state,q=p.currentAppointment,r=p.formData;if(!q||!r.isValid)return;var s=r.data,t=this.props.actorID,u=q.page||{},v=q.suggested_time_range||{},w=void 0,x=void 0;switch(this.state.dialogType){case c('PagesManagerRequestTimeDialogType').ADMIN_CANCEL:w=c('NativeBookingRequestStatusUpdateAction').ADMIN_CANCEL;x=c('PagesEventType').BOOKING_ADMIN_TAPPED_CANCEL_APPOINTMENT;break;case c('PagesManagerRequestTimeDialogType').ADMIN_DECLINE:w=c('NativeBookingRequestStatusUpdateAction').ADMIN_DECLINE;x=c('PagesEventType').BOOKING_ADMIN_TAPPED_DECLINE_APPOINTMENT;break;case c('PagesManagerRequestTimeDialogType').USER_CANCEL:w=c('NativeBookingRequestStatusUpdateAction').USER_CANCEL;x=c('PagesEventType').BOOKING_CONSUMER_TAPPED_CANCEL_APPOINTMENT;break;case c('PagesManagerRequestTimeDialogType').USER_DECLINE:w=c('NativeBookingRequestStatusUpdateAction').DECLINE;x=c('PagesEventType').BOOKING_CONSUMER_TAPPED_DECLINE_APPOINTMENT;break;}if(!w||!x)return;c('PagesEventObserver').notify(x,u.id);c('Relay').Store.commitUpdate(new (c('NativeComponentFlowBookingRequestMutation'))({action:w,actor_id:t,message_text:s.cancelNotes,request_id:q.id,suggested_end_time:v.end,suggested_time:v.start}));this.setState({currentAppointment:null});this.props.onToggle(false);}.bind(this);this.$PagesManagerMessagingAppointmentDialog10=function(){var p,q,r,s,t,u,v=this.state.currentAppointment,w=this.refs.detailPane;if(!v||!w)return;var x=w.getAppointmentDetail()||{},y=((p=v)!=null?(q=p.request_note)!=null?(r=q.edges)!=null?(s=r[0])!=null?s.node:s:r:q:p)||{},z=((t=y)!=null?(u=t.body)!=null?u.text:u:t)||'',aa=x.notes||'';if(aa!==z){var ba=y.id?c('PagesPlatformNoteUpdateAction').UPDATE:c('PagesPlatformNoteUpdateAction').ADD;c('Relay').Store.commitUpdate(new (c('NativeBookingFlowAdminNotesMutation'))({action:ba,actor_id:this.props.actorID,body:{text:aa},component_flow_request_id:v.id,request_note_id:y.id}));}this.$PagesManagerMessagingAppointmentDialog11();}.bind(this);this.$PagesManagerMessagingAppointmentDialog11=function(){this.setState({currentAppointment:null});this.props.onToggle(false);}.bind(this);this.$PagesManagerMessagingAppointmentDialog12=function(){var p=this.state,q=p.currentAppointment,r=p.formData;if(!q||!r.isValid)return;var s=r.data,t=q.page.id,u=q.id;c('Relay').Store.commitUpdate(new (c('NativeComponentFlowBookingRequestMutation'))({action:c('NativeBookingRequestStatusUpdateAction').SCHEDULE,actor_id:this.props.actorID,request_id:u,suggested_end_time:s.endTime,suggested_time:s.startTime}));var v=this.$PagesManagerMessagingAppointmentDialog1?'list':'banner';c('PagesEventObserver').notify(c('PagesEventType').BOOKING_ADMIN_TAPPED_SCHEDULE_APPOINTMENT,t,{referrer:v});this.$PagesManagerMessagingAppointmentDialog11();}.bind(this);this.$PagesManagerMessagingAppointmentDialog13=function(){var p=this.state,q=p.currentAppointment,r=p.formData;if(!q||!r.isValid)return;var s=r.data,t=q.page.id,u=q.id;c('Relay').Store.commitUpdate(new (c('NativeComponentFlowBookingRequestMutation'))({action:c('NativeBookingRequestStatusUpdateAction').CREATE,actor_id:this.props.actorID,request_id:u,service_id:s.serviceID,suggested_end_time:s.endTime,suggested_time:s.startTime}));var v=this.$PagesManagerMessagingAppointmentDialog1?'list':'banner';c('PagesEventObserver').notify(c('PagesEventType').BOOKING_ADMIN_TAPPED_CREATE_APPOINTMENT,t,{referrer:v});this.$PagesManagerMessagingAppointmentDialog11();}.bind(this);this.$PagesManagerMessagingAppointmentDialog22=function(p){var q=this.state.appointments[p],r=q.booking_status;this.setState({currentAppointment:q,dialogType:this.$PagesManagerMessagingAppointmentDialog3(r)});}.bind(this);this.$PagesManagerMessagingAppointmentDialog23=function(p){this.setState({formData:p});}.bind(this);this.state=this.$PagesManagerMessagingAppointmentDialog2(o);}m.prototype.$PagesManagerMessagingAppointmentDialog2=function(o){var p,q,r,s,t,u=((p=o)!=null?(q=p.appointments)!=null?(r=q.native_booking_request)!=null?r.edges:r:q:p)||[],v=u.map(function(y){return y.node;}),w=o.appointment||((s=this)!=null?(t=s.state)!=null?t.currentAppointment:t:s),x=w&&w.booking_status;this.$PagesManagerMessagingAppointmentDialog1=!w;return {appointments:v,currentAppointment:w,dialogType:o.dialogType||this.$PagesManagerMessagingAppointmentDialog3(x),formData:{isValid:false,data:{}}};};m.prototype.$PagesManagerMessagingAppointmentDialog3=function(o){switch(o){case c('PagesPlatformNativeBookingStatus').CONFIRMED:case c('PagesPlatformNativeBookingStatus').PENDING:if(this.props.viewer===c('PagesPlatformBookingMessageViewer').ADMIN){return c('PagesManagerRequestTimeDialogType').VIEW_DETAILS;}else return c('PagesManagerRequestTimeDialogType').USER_VIEW_DETAILS;case c('PagesPlatformNativeBookingStatus').DECLINED:case c('PagesPlatformNativeBookingStatus').REQUESTED:return c('PagesManagerRequestTimeDialogType').SCHEDULE;case c('PagesPlatformNativeBookingStatus').CANCELLED:return c('PagesManagerRequestTimeDialogType').LIST;}return c('PagesManagerRequestTimeDialogType').LIST;};m.prototype.$PagesManagerMessagingAppointmentDialog4=function(o){this.setState(babelHelpers['extends']({},this.$PagesManagerMessagingAppointmentDialog2(this.props),{dialogType:o}));};m.prototype.$PagesManagerMessagingAppointmentDialog14=function(){return c('React').createElement(c('XUIDialogFooter.react'),null,c('React').createElement(c('XUIDialogButton.react'),{action:'button',disabled:!this.state.formData.isValid,label:i._("Schedule Appointment"),onClick:this.$PagesManagerMessagingAppointmentDialog12,use:'confirm'}));};m.prototype.$PagesManagerMessagingAppointmentDialog15=function(){return c('React').createElement(c('XUIDialogFooter.react'),null,c('React').createElement(c('XUIDialogButton.react'),{action:'button',label:i._("Cancel Appointment"),onClick:this.$PagesManagerMessagingAppointmentDialog7}),c('React').createElement(c('XUIDialogButton.react'),{action:'button',label:i._("Done"),onClick:this.$PagesManagerMessagingAppointmentDialog10,use:'confirm'}));};m.prototype.$PagesManagerMessagingAppointmentDialog16=function(){var o=this.state.currentAppointment;if(!o)return null;var p=o.booking_status,q=void 0,r=void 0,s=void 0,t=void 0;switch(p){case c('PagesPlatformNativeBookingStatus').PENDING:q=i._("Accept");r=i._("Decline");s=this.$PagesManagerMessagingAppointmentDialog8;t=this.$PagesManagerMessagingAppointmentDialog5;break;default:q=i._("Done");r=i._("Cancel Appointment");s=this.$PagesManagerMessagingAppointmentDialog11;t=this.$PagesManagerMessagingAppointmentDialog6;break;}return c('React').createElement(c('XUIDialogFooter.react'),null,c('React').createElement(c('XUIDialogButton.react'),{action:'button',label:r,onClick:t}),c('React').createElement(c('XUIDialogButton.react'),{action:'button',label:q,onClick:s,use:'confirm'}));};m.prototype.$PagesManagerMessagingAppointmentDialog17=function(){return c('React').createElement(c('XUIDialogFooter.react'),null,c('React').createElement(c('XUIDialogButton.react'),{action:'button',label:c('React').createElement('fbtc',null,'Back'),onClick:this.$PagesManagerMessagingAppointmentDialog11}),c('React').createElement(c('XUIDialogButton.react'),{action:'button',label:i._("Decline Appointment"),onClick:this.$PagesManagerMessagingAppointmentDialog9,use:'confirm'}));};m.prototype.$PagesManagerMessagingAppointmentDialog18=function(){return c('React').createElement(c('XUIDialogFooter.react'),null,c('React').createElement(c('XUIDialogButton.react'),{action:'button',label:c('React').createElement('fbtc',null,'Back'),onClick:this.$PagesManagerMessagingAppointmentDialog11}),c('React').createElement(c('XUIDialogButton.react'),{action:'button',label:i._("Cancel Appointment"),onClick:this.$PagesManagerMessagingAppointmentDialog9,use:'confirm'}));};m.prototype.$PagesManagerMessagingAppointmentDialog19=function(){return c('React').createElement(c('XUIDialogFooter.react'),null,c('React').createElement(c('XUIDialogButton.react'),{action:'button',label:c('React').createElement('fbtc',null,'Back'),onClick:this.$PagesManagerMessagingAppointmentDialog11}),c('React').createElement(c('XUIDialogButton.react'),{action:'button',disabled:!this.state.formData.isValid,label:i._("Create Appointment"),onClick:this.$PagesManagerMessagingAppointmentDialog13,use:'confirm'}));};m.prototype.$PagesManagerMessagingAppointmentDialog20=function(){var o=void 0;switch(this.state.dialogType){case c('PagesManagerRequestTimeDialogType').SCHEDULE:o=i._("Schedule appointment");break;case c('PagesManagerRequestTimeDialogType').ADMIN_DECLINE:case c('PagesManagerRequestTimeDialogType').USER_DECLINE:o=i._("Decline appointment");break;case c('PagesManagerRequestTimeDialogType').CREATE_ANOTHER_APPOINTMENT:o=i._("Create another appointment");break;case c('PagesManagerRequestTimeDialogType').USER_VIEW_DETAILS:case c('PagesManagerRequestTimeDialogType').VIEW_DETAILS:o=i._("Appointment details");break;case c('PagesManagerRequestTimeDialogType').LIST:o=i._({"*":"Appointments","268435456":"Appointment"},[i.plural(this.state.appointments.length)]);break;case c('PagesManagerRequestTimeDialogType').ADMIN_CANCEL:case c('PagesManagerRequestTimeDialogType').USER_CANCEL:o=i._("Cancel appointment");break;}return c('React').createElement(c('XUIDialogTitle.react'),null,o);};m.prototype.$PagesManagerMessagingAppointmentDialog21=function(){switch(this.state.dialogType){case c('PagesManagerRequestTimeDialogType').SCHEDULE:return this.$PagesManagerMessagingAppointmentDialog14();case c('PagesManagerRequestTimeDialogType').ADMIN_DECLINE:case c('PagesManagerRequestTimeDialogType').USER_DECLINE:return this.$PagesManagerMessagingAppointmentDialog17();case c('PagesManagerRequestTimeDialogType').CREATE_ANOTHER_APPOINTMENT:return this.$PagesManagerMessagingAppointmentDialog19();case c('PagesManagerRequestTimeDialogType').USER_VIEW_DETAILS:return this.$PagesManagerMessagingAppointmentDialog16();case c('PagesManagerRequestTimeDialogType').VIEW_DETAILS:return this.$PagesManagerMessagingAppointmentDialog15();case c('PagesManagerRequestTimeDialogType').ADMIN_CANCEL:case c('PagesManagerRequestTimeDialogType').USER_CANCEL:return this.$PagesManagerMessagingAppointmentDialog18();}return null;};m.prototype.$PagesManagerMessagingAppointmentDialog24=function(){var o=void 0;if(this.state.dialogType===c('PagesManagerRequestTimeDialogType').LIST||!this.state.currentAppointment){var p=this.state.appointments.map(function(q,r){return (c('React').createElement(c('PagesManagerMessagingAppointmentDialogNavItem.react'),{appointment:q,index:r,key:q.id,onClick:this.$PagesManagerMessagingAppointmentDialog22,viewer:this.props.viewer}));}.bind(this));o=c('React').createElement('div',{className:"_25xb"},p);}else o=c('React').createElement(c('PagesManagerMessagingAppointmentDialogDetailPane.react'),{appointment:this.state.currentAppointment,onDataChange:this.$PagesManagerMessagingAppointmentDialog23,paneType:this.state.dialogType,ref:'detailPane',viewer:this.props.viewer});return (c('React').createElement(c('XUIDialogBody.react'),null,o));};m.prototype.render=function(){if(!this.props.dialogShown)return null;return (c('React').createElement(c('XUIDialog.react'),{behaviors:{LayerFadeOnHide:c('LayerFadeOnHide'),LayerHideOnEscape:c('LayerHideOnEscape')},causalElementRef:this.props.causalElementRef,onToggle:this.props.onToggle,shown:this.props.dialogShown,width:l},this.$PagesManagerMessagingAppointmentDialog20(),this.$PagesManagerMessagingAppointmentDialog24(),this.$PagesManagerMessagingAppointmentDialog21()));};var n=function(){return {children:[{alias:'booking_status',fieldName:'booking_status_value',kind:'Field',metadata:{},type:'String'},{fieldName:'id',kind:'Field',metadata:{isRequisite:true},type:'ID'},{children:[{fieldName:'id',kind:'Field',metadata:{isRequisite:true},type:'ID'}],fieldName:'page',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id'},type:'Page'},{calls:[{kind:'Call',metadata:{},name:'first',value:{kind:'CallValue',callValue:10}}],children:[{children:[{children:[{children:[{fieldName:'text',kind:'Field',metadata:{},type:'String'}],fieldName:'body',kind:'Field',metadata:{canHaveSubselections:true},type:'TextWithEntities'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],fieldName:'node',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id',isRequisite:true},type:'PagesPlatformNote'},{fieldName:'cursor',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],fieldName:'edges',kind:'Field',metadata:{canHaveSubselections:true,isPlural:true},type:'PagesPlatformNoteFromComponentFlowRequestEdge'},{children:[{fieldName:'has_next_page',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'Boolean'},{fieldName:'has_previous_page',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'Boolean'}],fieldName:'page_info',kind:'Field',metadata:{canHaveSubselections:true,isGenerated:true,isRequisite:true},type:'PageInfo'}],fieldName:'request_note',kind:'Field',metadata:{canHaveSubselections:true,isConnection:true,isFindable:true},type:'PagesPlatformNoteFromComponentFlowRequestConnection'},{children:[{fieldName:'start',kind:'Field',metadata:{},type:'Time'},{fieldName:'end',kind:'Field',metadata:{},type:'Time'}],fieldName:'suggested_time_range',kind:'Field',metadata:{canHaveSubselections:true},type:'TimeRange'}],id:c('Relay').QL.__id(),kind:'Fragment',metadata:{},name:'PagesManagerMessagingAppointmentDialog_reactRelayQL',type:'NativeComponentFlowBookingRequest'};}();f.exports=c('Relay').createContainer(m,{initialVariables:{bookingStatus:[],count:1,pageID:''},fragments:{appointments:function o(){return function(p,q,r){return {children:[{calls:[{kind:'Call',metadata:{type:'[PagesPlatformNativeBookingStatus]'},name:'booking_status',value:{kind:'CallVariable',callVariableName:'bookingStatus'}},{kind:'Call',metadata:{type:'PagesPlatformNativeBookingTimeFilter'},name:'booking_time',value:{kind:'CallValue',callValue:'FUTURE_ONLY'}},{kind:'Call',metadata:{},name:'requests_on_page',value:{kind:'CallVariable',callVariableName:'pageID'}},{kind:'Call',metadata:{},name:'first',value:{kind:'CallVariable',callVariableName:'count'}}],children:[{children:[{children:[].concat.apply([],[{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'},c('Relay').QL.__frag(p),c('Relay').QL.__frag(q),c('Relay').QL.__frag(r)]),fieldName:'node',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id',isRequisite:true},type:'NativeComponentFlowBookingRequest'},{fieldName:'cursor',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],fieldName:'edges',kind:'Field',metadata:{canHaveSubselections:true,isPlural:true},type:'NativeBookingRequestsEdge'},{children:[{fieldName:'has_next_page',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'Boolean'},{fieldName:'has_previous_page',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'Boolean'}],fieldName:'page_info',kind:'Field',metadata:{canHaveSubselections:true,isGenerated:true,isRequisite:true},type:'PageInfo'}],fieldName:'native_booking_request',kind:'Field',metadata:{canHaveSubselections:true,isConnection:true},type:'NativeBookingRequestsConnection'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],id:c('Relay').QL.__id(),kind:'Fragment',metadata:{},name:'PagesManagerMessagingAppointmentDialog_react_AppointmentsRelayQL',type:'User'};}(n,c('PagesManagerMessagingAppointmentDialogNavItem.react').getFragment('appointment'),c('PagesManagerMessagingAppointmentDialogDetailPane.react').getFragment('appointment'));},appointment:function o(){return function(p,q){return {children:[].concat.apply([],[{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'},c('Relay').QL.__frag(p),c('Relay').QL.__frag(q)]),id:c('Relay').QL.__id(),kind:'Fragment',metadata:{},name:'PagesManagerMessagingAppointmentDialog_react_AppointmentRelayQL',type:'NativeComponentFlowBookingRequest'};}(n,c('PagesManagerMessagingAppointmentDialogDetailPane.react').getFragment('appointment'));}}});}),null);
__d("XPagesBanUserStatusFetchController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pages\/admin\/ban_user\/status\/",{page_id:{type:"FBID",required:true},user_id:{type:"FBID",required:true}});}),null);
__d('PagesManagerMessagingMessagelistAction',['AsyncRequest','PagesManagerMessagingActionType','Map','PagesManagerMessagingMessagelistDispatcher','XPagesBanUserStatusFetchController'],(function a(b,c,d,e,f,g){var h=c('PagesManagerMessagingActionType').LIST,i=new (c('Map'))(),j={updateMessagelist:function k(l,m,n){c('PagesManagerMessagingMessagelistDispatcher').dispatch({type:h.LOADED,pageID:l,threadID:m,data:n});},setHotLikeEnd:function k(){c('PagesManagerMessagingMessagelistDispatcher').dispatch({type:c('PagesManagerMessagingActionType').HOT_LIKE.END});},setHotLikeStart:function k(l){c('PagesManagerMessagingMessagelistDispatcher').dispatch({type:c('PagesManagerMessagingActionType').HOT_LIKE.START,preview:l});},setIsLoading:function k(l){c('PagesManagerMessagingMessagelistDispatcher').dispatch({type:h.LOADING,isLoading:l});},setIsLoadingMore:function k(l){c('PagesManagerMessagingMessagelistDispatcher').dispatch({type:h.LOAD_MORE,isLoadingMore:l});},setScrollAreaHeight:function k(l){c('PagesManagerMessagingMessagelistDispatcher').dispatch({type:c('PagesManagerMessagingActionType').SET_SCROLL_HEIGHT,height:l});},setAppointmentBannerHeight:function k(l){c('PagesManagerMessagingMessagelistDispatcher').dispatch({type:c('PagesManagerMessagingActionType').SET_APPOINTMENT_BANNER_HEIGHT,appointmentBannerHeight:l});},setAppointmentScheduleBannerHeight:function k(l){c('PagesManagerMessagingMessagelistDispatcher').dispatch({type:c('PagesManagerMessagingActionType').SET_APPOINTMENT_BANNER_HEIGHT,appointmentBannerHeight:l});},setAppointmentStatusBannerHeight:function k(l){c('PagesManagerMessagingMessagelistDispatcher').dispatch({type:c('PagesManagerMessagingActionType').SET_APPOINTMENT_BANNER_HEIGHT,appointmentBannerHeight:l});},updateReadReceipts:function k(l,m,n){c('PagesManagerMessagingMessagelistDispatcher').dispatch({type:c('PagesManagerMessagingActionType').MESSAGE_LEVEL.READ_RECEIPTS,pageID:l,threadID:m,readReceipts:n});},updateThread:function k(l,m){c('PagesManagerMessagingMessagelistDispatcher').dispatch({type:c('PagesManagerMessagingActionType').THREAD_LEVEL.UPDATE_THREAD,pageID:l,threadID:m});},setIsContextCardHidden:function k(l,m){c('PagesManagerMessagingMessagelistDispatcher').dispatch({type:c('PagesManagerMessagingActionType').SET_IS_CONTEXT_CARD_HIDDEN,pageID:l,isHidden:m});},updateIsUserBanned:function k(l,m,n){c('PagesManagerMessagingMessagelistDispatcher').dispatch({type:c('PagesManagerMessagingActionType').BAN.UPDATE,pageID:l,userID:m,isBanned:n});},_getBanningMapKey:function k(l,m){return l+'_'+m;},fetchIsUserBanned:function k(l,m){var n=this._getBanningMapKey(l,m);if(i.has(n)&&i.get(n))return;var o=c('XPagesBanUserStatusFetchController').getURIBuilder().setFBID('page_id',l).setFBID('user_id',m).getURI();new (c('AsyncRequest'))().setURI(o).setHandler(function(p){j.updateIsUserBanned(l,m,p.payload);}).send();i.set(n,true);},resetIsUserBanned:function k(l,m){i.set(this._getBanningMapKey(l,m),false);}};f.exports=j;}),null);
__d('PagesManagerMessagingAppointmentBannerContainer.react',['ix','cx','fbt','PagesManagerMessagingMessagelistAction','ChatAppointmentUtil','Image.react','Link.react','Map','PagesEventObserver','PagesEventType','PagesManagerMessagingAppointmentDialog.react','PagesPlatformBookingMessageViewer','PagesPlatformNativeBookingStatus','React','ReactDOM','Relay','fbglyph','idx'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=100,n=function q(r){return (c('React').createElement(c('Link.react'),{className:"_2ph_ _1hgm",onClick:r.onClick,role:'button'},c('React').createElement('span',{className:"_2pii _1hgo _1hgp"},c('React').createElement(c('Image.react'),{className:"_3-90",src:h("\/images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/calendar_12_fig-black.png")}),r.title),c('React').createElement('span',{className:"_1hgq"+(r.bookingStatus===c('PagesPlatformNativeBookingStatus').CONFIRMED?' '+"_1hgt":'')+(r.bookingStatus===c('PagesPlatformNativeBookingStatus').PENDING?' '+"_1hgs":'')+(' '+"_1hgu")},r.status)));};k=babelHelpers.inherits(o,c('React').Component);l=k&&k.prototype;function o(q){l.constructor.call(this,q);this.$PagesManagerMessagingAppointmentBanner5=function(){this.setState({dialogShown:true});c('PagesEventObserver').notify(c('PagesEventType').BOOKING_ADMIN_CLICK_REQUEST_LIST,this.props.pageID);}.bind(this);this.$PagesManagerMessagingAppointmentBanner6=function(){this.setState({dialogShown:true});c('PagesEventObserver').notify(c('PagesEventType').BOOKING_ADMIN_CLICK_SENT_LIST,this.props.pageID);}.bind(this);var r=q.messageList,s=q.pageID,t=q.userID;this.state=this.$PagesManagerMessagingAppointmentBanner2(q);this.lastMessageMap=new (c('Map'))();this.$PagesManagerMessagingAppointmentBanner1=true;q.relay.setVariables({pageID:s,count:m});this.lastMessageMap.set(t,this.$PagesManagerMessagingAppointmentBanner3(r));}o.prototype.$PagesManagerMessagingAppointmentBanner2=function(q){var r,s,t,u,v,w,x,y,z,aa,ba=((r=q)!=null?(s=r.appointments)!=null?s.user_name:s:r)||'',ca=((t=q)!=null?(u=t.appointments)!=null?(v=u.confirmed)!=null?v.edges:v:u:t)||[],da=((w=q)!=null?(x=w.appointments)!=null?(y=x.requested)!=null?y.edges:y:x:w)||[],ea=ca.map(function(ha){return ha.node;}),fa=da.map(function(ha){return ha.node;}),ga=((z=this)!=null?(aa=z.state)!=null?aa.dialogShown:aa:z)||false;return {confirmed:ea,dialogShown:ga,requested:fa,userName:ba};};o.prototype.componentWillReceiveProps=function(q){var r=q.messageList,s=q.pageID,t=q.userID,u=this.$PagesManagerMessagingAppointmentBanner3(r),v=this.lastMessageMap.get(t),w=null;this.setState(this.$PagesManagerMessagingAppointmentBanner2(q));if(this.$PagesManagerMessagingAppointmentBanner4(v,u)){w='forceFetch';}else if(this.props.userID!==t||this.props.pageID!==s){this.$PagesManagerMessagingAppointmentBanner1=true;w='setVariables';}if(w)this.props.relay[w]({pageID:s,count:m});this.lastMessageMap.set(t,u);};o.prototype.$PagesManagerMessagingAppointmentBanner3=function(q){return q&&q[q.length-1];};o.prototype.$PagesManagerMessagingAppointmentBanner4=function(q,r){if(r&&q!==r){var s,t,u,v,w,x,y,z,aa,ba=((s=r)!=null?(t=s.attachments)!=null?(u=t[0])!=null?(v=u.share)!=null?(w=v.target)!=null?(x=w.requestMetadata)!=null?x.id:x:w:v:u:t:s)||((y=r)!=null?(z=y.log_message_data)!=null?(aa=z.untypedData)!=null?aa.request_id:aa:z:y);return Boolean(ba);}return false;};o.prototype.$PagesManagerMessagingAppointmentBanner7=function(q){if(q.length===0)return null;var r=void 0;if(q.length===1){r=j._({"*":"{user name} requested {number} appointments","268435456":"{user name} requested 1 appointment"},[j.param('user name',this.props.appointments.user_name),j.plural(q.length,'number')]);}else r=j._({"*":"{number} appointment requests","268435456":"1 appointment request"},[j.plural(q.length,'number')]);return (c('React').createElement(n,{status:j._("Respond"),title:r,onClick:this.$PagesManagerMessagingAppointmentBanner5}));};o.prototype.$PagesManagerMessagingAppointmentBanner8=function(q){if(q.length===0)return null;var r=void 0,s=void 0,t=void 0;if(q.length===1){var u=q[0],v=u.suggested_time_range;r=c('ChatAppointmentUtil').renderDateTimeRange(v);s=u.status;t=u.booking_status;}else{r=j._({"*":"{number} appointments","268435456":"1 appointment"},[j.plural(q.length,'number')]);s=j._("View");}return (c('React').createElement(n,{bookingStatus:t,status:s,title:r,onClick:this.$PagesManagerMessagingAppointmentBanner6}));};o.prototype.$PagesManagerMessagingAppointmentBanner9=function(){if(!this.state.dialogShown)return null;return (c('React').createElement(c('PagesManagerMessagingAppointmentDialog.react'),{actorID:this.props.viewer.actor.id,appointments:this.props.appointments,bookingStatus:['PENDING','REQUESTED','CONFIRMED'],causalElementRef:function(){return this;}.bind(this),count:this.props.count,dialogShown:this.state.dialogShown,onToggle:function(q){return this.setState({dialogShown:q});}.bind(this),pageID:this.props.pageID,viewer:c('PagesPlatformBookingMessageViewer').ADMIN}));};o.prototype.render=function(){var q=this.state,r=q.confirmed,s=q.requested;if(r.length===0&&s.length===0)return null;if(this.$PagesManagerMessagingAppointmentBanner1){c('PagesEventObserver').notify(c('PagesEventType').BOOKING_ADMIN_BANNER_IMPRESSION,this.props.pageID,{sent_count:r.length,requested_count:s.length});this.$PagesManagerMessagingAppointmentBanner1=false;}return (c('React').createElement('div',{className:"_1hgy",ref:function t(u){if(u&&c('ReactDOM').findDOMNode(u)){c('PagesManagerMessagingMessagelistAction').setAppointmentBannerHeight(c('ReactDOM').findDOMNode(u).clientHeight);}else c('PagesManagerMessagingMessagelistAction').setAppointmentBannerHeight(0);}},this.$PagesManagerMessagingAppointmentBanner9(),this.$PagesManagerMessagingAppointmentBanner7(s),this.$PagesManagerMessagingAppointmentBanner8(r)));};var p=function(){return {children:[{children:[{children:[{fieldName:'booking_status',kind:'Field',metadata:{},type:'PagesPlatformNativeBookingStatus'},{fieldName:'id',kind:'Field',metadata:{isRequisite:true},type:'ID'},{children:[{fieldName:'end',kind:'Field',metadata:{},type:'Time'},{fieldName:'start',kind:'Field',metadata:{},type:'Time'}],fieldName:'suggested_time_range',kind:'Field',metadata:{canHaveSubselections:true},type:'TimeRange'},{fieldName:'status',kind:'Field',metadata:{},type:'String'}],fieldName:'node',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id',isRequisite:true},type:'NativeComponentFlowBookingRequest'},{fieldName:'cursor',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],fieldName:'edges',kind:'Field',metadata:{canHaveSubselections:true,isPlural:true},type:'NativeBookingRequestsEdge'},{children:[{fieldName:'has_next_page',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'Boolean'},{fieldName:'has_previous_page',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'Boolean'}],fieldName:'page_info',kind:'Field',metadata:{canHaveSubselections:true,isGenerated:true,isRequisite:true},type:'PageInfo'}],id:c('Relay').QL.__id(),kind:'Fragment',metadata:{},name:'PagesManagerMessagingAppointmentBannerContainer_reactRelayQL',type:'NativeBookingRequestsConnection'};}();f.exports=c('Relay').createContainer(o,{initialVariables:{count:m,pageID:''},fragments:{appointments:function q(r){var s=r.count,t=r.pageID;return function(u,v,w){return {children:[].concat.apply([],[{alias:'user_name',fieldName:'name',kind:'Field',metadata:{},type:'String'},{alias:'confirmed',calls:[{kind:'Call',metadata:{type:'[PagesPlatformNativeBookingStatus]'},name:'booking_status',value:[{kind:'CallValue',callValue:'PENDING'},{kind:'CallValue',callValue:'CONFIRMED'}]},{kind:'Call',metadata:{type:'PagesPlatformNativeBookingTimeFilter'},name:'booking_time',value:{kind:'CallValue',callValue:'FUTURE_ONLY'}},{kind:'Call',metadata:{},name:'requests_on_page',value:{kind:'CallVariable',callVariableName:'pageID'}},{kind:'Call',metadata:{},name:'first',value:{kind:'CallVariable',callVariableName:'count'}}],children:[].concat.apply([],[c('Relay').QL.__frag(u)]),fieldName:'native_booking_request',kind:'Field',metadata:{canHaveSubselections:true,isConnection:true},type:'NativeBookingRequestsConnection'},{alias:'requested',calls:[{kind:'Call',metadata:{type:'[PagesPlatformNativeBookingStatus]'},name:'booking_status',value:[{kind:'CallValue',callValue:'REQUESTED'}]},{kind:'Call',metadata:{type:'PagesPlatformNativeBookingTimeFilter'},name:'booking_time',value:{kind:'CallValue',callValue:'FUTURE_ONLY'}},{kind:'Call',metadata:{},name:'requests_on_page',value:{kind:'CallVariable',callVariableName:'pageID'}},{kind:'Call',metadata:{},name:'first',value:{kind:'CallVariable',callVariableName:'count'}}],children:[].concat.apply([],[c('Relay').QL.__frag(v)]),fieldName:'native_booking_request',kind:'Field',metadata:{canHaveSubselections:true,isConnection:true},type:'NativeBookingRequestsConnection'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'},c('Relay').QL.__frag(w)]),id:c('Relay').QL.__id(),kind:'Fragment',metadata:{},name:'PagesManagerMessagingAppointmentBannerContainer_react_AppointmentsRelayQL',type:'User'};}(p,p,c('PagesManagerMessagingAppointmentDialog.react').getFragment('appointments',{bookingStatus:['PENDING','REQUESTED','CONFIRMED'],count:s,pageID:t}));},viewer:function q(){return function(){return {children:[{children:[{fieldName:'id',kind:'Field',metadata:{isRequisite:true},type:'ID'},{fieldName:'__typename',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'String'}],fieldName:'actor',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id',isAbstract:true},type:'Actor'}],id:c('Relay').QL.__id(),kind:'Fragment',metadata:{},name:'PagesManagerMessagingAppointmentBannerContainer_react_ViewerRelayQL',type:'Viewer'};}();}}});}),null);
__d('PagesManagerMessagingAppointmentBannerRoute',['Relay'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('Relay').Route);i=h&&h.prototype;function j(){h.apply(this,arguments);}j.paramDefinitions={count:{type:'Int',required:true},pageID:{type:'String',required:true},userID:{type:'String',required:true}};j.queries={appointments:function k(l,m){var n=m.count,o=m.pageID;return function(p){return {calls:[{kind:'Call',metadata:{type:'ID!'},name:'id',value:{kind:'CallVariable',callVariableName:'userID'}}],children:[].concat.apply([],[{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'},{fieldName:'__typename',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'String'},c('Relay').QL.__frag(p)]),fieldName:'node',kind:'Query',metadata:{isAbstract:true,identifyingArgName:'id',identifyingArgType:'ID!'},name:'PagesManagerMessagingAppointmentBannerRoute',type:'Node'};}(l.getFragment('appointments',{count:n,pageID:o}));},viewer:function k(l){return function(m){return {children:[].concat.apply([],[c('Relay').QL.__frag(m)]),fieldName:'viewer',kind:'Query',metadata:{},name:'PagesManagerMessagingAppointmentBannerRoute',type:'Viewer'};}(l.getFragment('viewer'));}};j.routeName='PagesManagerMessagingAppointmentBannerRoute';f.exports=j;}),null);
__d('PagesManagerMessagingAppointmentBannerRoot.react',['PagesManagerMessagingAppointmentBannerContainer.react','PagesManagerMessagingAppointmentBannerRoute','React','RelayRootContainer'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;j.prototype.render=function(){var k=this.props,l=k.pageID,m=k.userID,n=babelHelpers.objectWithoutProperties(k,['pageID','userID']);if(!l||!m)return null;return (c('React').createElement(c('RelayRootContainer'),{Component:c('PagesManagerMessagingAppointmentBannerContainer.react'),renderFetched:function o(p){return (c('React').createElement(c('PagesManagerMessagingAppointmentBannerContainer.react'),babelHelpers['extends']({},n,p)));},route:new (c('PagesManagerMessagingAppointmentBannerRoute'))({count:100,pageID:l,userID:m})}));};function j(){h.apply(this,arguments);}f.exports=j;}),null);
__d('PagesMessagingIntent',[],(function a(b,c,d,e,f,g){'use strict';f.exports={PRICE:'#prices',HOURS:'#hours',APPOINTMENT:'#appointment',LOCATION:'#location',PAYMENTS:'#payments',PURCHASE:'#purchase',CONTACT:'#contact',AVAILABILITY:'#availability',DELIVERY:'#delivery',SUPPORT:'#support',PRODUCT_INQUIRY:'#product_inquiry',COMPLAINTS:'#complaints',EXCHANGE_REFUND:'#exchange_refund',SOLICITATION:'#solicitation',THANKS:'#thanks'};}),null);
__d('PagesManagerMessagingClassifierUtil',['fbt','PagesMessagingIntent'],(function a(b,c,d,e,f,g,h){'use strict';var i={getIntentDescription:function j(k){switch(k){case c('PagesMessagingIntent').PRICE:return h._("Pricing");case c('PagesMessagingIntent').HOURS:return h._("Business hours");case c('PagesMessagingIntent').DELIVERY:return h._("Delivery");case c('PagesMessagingIntent').APPOINTMENT:return h._("Appointment or booking");case c('PagesMessagingIntent').LOCATION:return h._("Location");case c('PagesMessagingIntent').PAYMENTS:return h._("Payment");case c('PagesMessagingIntent').PURCHASE:return h._("Purchasing");case c('PagesMessagingIntent').CONTACT:return h._("Getting in touch");case c('PagesMessagingIntent').EXCHANGE_REFUND:return h._("Exchange or refund");case c('PagesMessagingIntent').AVAILABILITY:return h._("Availability");case c('PagesMessagingIntent').THANKS:return h._("Thanks");case c('PagesMessagingIntent').PRODUCT_INQUIRY:return h._("Product enquiry");case c('PagesMessagingIntent').COMPLAINTS:return h._("Complaints");case c('PagesMessagingIntent').SOLICITATION:return h._("Solicitation");case c('PagesMessagingIntent').SUPPORT:return h._("Support");default:throw new Error('invalid intent provided');}}};f.exports=i;}),null);
__d('PagesManagerMessagingThreadIntentTaggingSubscription',['GraphQLSubscription','Relay','nullthrows'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('GraphQLSubscription'));i=h&&h.prototype;function j(k,l){i.constructor.call(this,{page_id:k},function(m){var n=m.pages_inbox_intent_tagging_subscribe.context;l({intent:n.last_classified_intent,messageID:n.last_classified_message_id,userID:n.user.id,isVerified:n.is_last_classification_verified,score:n.last_classified_score});});}j.getSubscriptionQuery=function(){return function(){return {calls:[{kind:'Call',metadata:{},name:'pages_inbox_intent_tagging_subscribe',value:{kind:'CallVariable',callVariableName:'input'}}],children:[{children:[{fieldName:'last_classified_intent',kind:'Field',metadata:{},type:'String'},{fieldName:'last_classified_message_id',kind:'Field',metadata:{},type:'ID'},{fieldName:'is_last_classification_verified',kind:'Field',metadata:{},type:'Boolean'},{fieldName:'last_classified_score',kind:'Field',metadata:{},type:'Int'},{children:[{fieldName:'id',kind:'Field',metadata:{isRequisite:true},type:'ID'}],fieldName:'user',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id'},type:'User'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],fieldName:'context',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id'},type:'PageThreadAutomationContext'},{fieldName:'client_subscription_id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'},{fieldName:'client_mutation_id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],kind:'Subscription',metadata:{inputType:'PagesInboxIntentTaggingSubscribeData!'},name:'PagesManagerMessagingThreadIntentTaggingSubscription',responseType:'PagesInboxIntentTaggingSubscribeResponsePayload'};}();};j.prototype.getQueryParams=function(k){return {page_id:c('nullthrows')(k.page_id)};};f.exports=j;}),null);
__d("XPagesMessagingIntentClassifierController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pages\/messaging\/intent\/classify\/",{});}),null);
__d("XPagesMessagingIntentVerificationController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pages\/messaging\/intent\/verify\/",{});}),null);
__d('PagesManagerMessagingClassifierStore',['invariant','PagesManagerMessagingClassifierActions','AsyncRequest','PagesManagerMessagingClassifierUtil','PagesManagerMessagingMessagelistDispatcher','FluxStore','IntentClassifierRequestAction','Map','RelayGraphQLSubscriber','RelayGraphQLSubscriptionNetworkLayer','PagesManagerMessagingThreadIntentTaggingSubscription','XDliteGraphQLSkywalkerController','XPagesMessagingIntentClassifierController','XPagesMessagingIntentVerificationController'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('PagesManagerMessagingClassifierActions').ActionTypes;i=babelHelpers.inherits(l,c('FluxStore'));j=i&&i.prototype;function l(){j.constructor.call(this,c('PagesManagerMessagingMessagelistDispatcher'));this.$PagesManagerMessagingClassifierStore1=false;this.$PagesManagerMessagingClassifierStore2=false;this.$PagesManagerMessagingClassifierStore3=null;this.$PagesManagerMessagingClassifierStore4=null;this.$PagesManagerMessagingClassifierStore5=new (c('Map'))();this.$PagesManagerMessagingClassifierStore7=new (c('Map'))();}l.prototype.getIntentDescriptionByMessageID=function(m){var n=this.$PagesManagerMessagingClassifierStore7.get(m);return n?c('PagesManagerMessagingClassifierUtil').getIntentDescription(n.intent).toString().toLowerCase():null;};l.prototype.getLastIntent=function(){return this.$PagesManagerMessagingClassifierStore3;};l.prototype.getIsClassifierVerificationEnabled=function(){return this.$PagesManagerMessagingClassifierStore2;};l.prototype.getIntentOnThread=function(m,n){if(!this.$PagesManagerMessagingClassifierStore1)return null;var o=this.$PagesManagerMessagingClassifierStore8(m,n);if(this.$PagesManagerMessagingClassifierStore5.has(o)){var p=this.$PagesManagerMessagingClassifierStore5.get(o);if(p)return c('PagesManagerMessagingClassifierUtil').getIntentDescription(p.intent);return null;}this.$PagesManagerMessagingClassifierStore9(n,m);this.$PagesManagerMessagingClassifierStore5.set(o,null);return null;};l.prototype.__onDispatch=function(m){var n=true;switch(m.type){case k.INITIALIZE_STORE:this.$PagesManagerMessagingClassifierStore10(m.config,m.pageID);break;case k.CHECK_FOR_INTENT:n=this.$PagesManagerMessagingClassifierStore11(m.message,m.userID,m.pageID);break;case k.NOTIFY_INTENT_CLASSIFIED:this.$PagesManagerMessagingClassifierStore3=m.intent;break;case k.THREAD_INTENT_UPDATED:this.$PagesManagerMessagingClassifierStore12(m.pageID,m.context);break;case k.VERIFY_INTENT:this.$PagesManagerMessagingClassifierStore13(m.messageID,m.message,m.result);break;default:n=false;break;}if(n)this.__emitChange();};l.prototype.$PagesManagerMessagingClassifierStore10=function(m,n){this.$PagesManagerMessagingClassifierStore1=m.enableSubjecLineTagging;this.$PagesManagerMessagingClassifierStore2=m.enableClassifierVerification;if(this.$PagesManagerMessagingClassifierStore1){c('RelayGraphQLSubscriptionNetworkLayer').injectGraphQLSubscriber(c('RelayGraphQLSubscriber')(c('XDliteGraphQLSkywalkerController').getURIBuilder().getURI()));this.$PagesManagerMessagingClassifierStore6=new (c('PagesManagerMessagingThreadIntentTaggingSubscription'))(n,function(o){c('PagesManagerMessagingClassifierActions').notifyThreadIntentUpdated(n,o);});}};l.prototype.$PagesManagerMessagingClassifierStore14=function(m,n,o){this.$PagesManagerMessagingClassifierStore4=m;var p=c('XPagesMessagingIntentClassifierController').getURIBuilder().getURI();new (c('AsyncRequest'))().setURI(p).setMethod('POST').setData({page_id:o,user_id:n,message:m,action:c('IntentClassifierRequestAction').REQUEST_MESSAGE_INTENT}).setHandler(function(q){return (c('PagesManagerMessagingClassifierActions').notifyIntentClassified(q.payload.intent));}).send();};l.prototype.$PagesManagerMessagingClassifierStore9=function(m,n){var o=c('XPagesMessagingIntentClassifierController').getURIBuilder().getURI();new (c('AsyncRequest'))().setURI(o).setMethod('POST').setData({page_id:n,user_id:m,action:c('IntentClassifierRequestAction').REQUEST_THREAD_INTENT}).setHandler(function(p){c('PagesManagerMessagingClassifierActions').notifyThreadIntentUpdated(n,p.payload);}).send();};l.prototype.$PagesManagerMessagingClassifierStore11=function(m,n,o){if(!m){this.$PagesManagerMessagingClassifierStore4=null;this.$PagesManagerMessagingClassifierStore3=null;return true;}if(this.$PagesManagerMessagingClassifierStore15&&m!==this.$PagesManagerMessagingClassifierStore4){this.$PagesManagerMessagingClassifierStore14(m,n,o);return true;}else return false;};l.prototype.$PagesManagerMessagingClassifierStore13=function(m,n,o){var p=this.$PagesManagerMessagingClassifierStore7.get(m);p||h(0);var q=c('XPagesMessagingIntentVerificationController').getURIBuilder().getURI();new (c('AsyncRequest'))().setURI(q).setMethod('POST').setData({page_id:p.pageID,user_id:p.userID,intent:p.intent,is_correct:o,message_id:m,score:p.score,message:n}).send();this.$PagesManagerMessagingClassifierStore7['delete'](m);if(!o)this.$PagesManagerMessagingClassifierStore5.set(this.$PagesManagerMessagingClassifierStore8(p.pageID,p.userID),null);};l.prototype.$PagesManagerMessagingClassifierStore12=function(m,n){var o=n.userID,p=n.messageID,q=n.isVerified,r=n.intent,s=n.score,t=r?{intent:r,pageID:m,userID:o,score:s}:null;this.$PagesManagerMessagingClassifierStore5.set(this.$PagesManagerMessagingClassifierStore8(m,o),t);if(t&&!q)this.$PagesManagerMessagingClassifierStore7.set(p,t);};l.prototype.$PagesManagerMessagingClassifierStore8=function(m,n){return m+':'+n;};f.exports=new l();}),null);
__d('PagesManagerMessagingComposerActionTypes',['keyMirrorRecursive'],(function a(b,c,d,e,f,g){'use strict';var h=c('keyMirrorRecursive')({ATTACHMENT:{ALL_COMPLETE:'attachment/attach/complete/all',ATTACH_CACHED:'attachment/attach/cached',ATTACH_COMPLETE:'attachment/attach/complete',ATTACH_START:'attachment/attach/start',CANCEL:'attachment/cancel',DETACH:'attachment/detach',DETACH_ALL:'attachment/detach/all'},MESSAGE:{CLEAR:'message/clear',SET:'message/set'},PARTICIPANT:{SET:'participant/set'},SAVED_REPLIES:{LOADING:'saved-replies/loading',SET:'saved-replies/set'},SHARE_UPLOADER:{READY:'share-uploader/ready',CLEAR:'share-uploader/clear'},UPLOADER:{READY:'uploader/ready'}});f.exports=h;}),null);
__d('PagesManagerMessagingComposerDispatcher',['ReactDispatcher_DEPRECATED'],(function a(b,c,d,e,f,g){f.exports=new (c('ReactDispatcher_DEPRECATED'))();}),null);
__d('PagesManagerMessagingComposerActions',['PagesManagerMessagingComposerActionTypes','PagesManagerMessagingComposerDispatcher'],(function a(b,c,d,e,f,g){'use strict';var h={clearMessage:function i(){c('PagesManagerMessagingComposerDispatcher').dispatch({actionType:c('PagesManagerMessagingComposerActionTypes').MESSAGE.CLEAR});},clearShareLinkUploader:function i(){c('PagesManagerMessagingComposerDispatcher').dispatch({actionType:c('PagesManagerMessagingComposerActionTypes').SHARE_UPLOADER.CLEAR});},completeAllAttachments:function i(){c('PagesManagerMessagingComposerDispatcher').dispatch({actionType:c('PagesManagerMessagingComposerActionTypes').ATTACHMENT.ALL_COMPLETE});},completeAttachment:function i(j){c('PagesManagerMessagingComposerDispatcher').dispatch({actionType:c('PagesManagerMessagingComposerActionTypes').ATTACHMENT.ATTACH_COMPLETE,attachment:j});},detachAllAttachments:function i(){c('PagesManagerMessagingComposerDispatcher').dispatch({actionType:c('PagesManagerMessagingComposerActionTypes').ATTACHMENT.DETACH_ALL});},detachAttachment:function i(j){c('PagesManagerMessagingComposerDispatcher').dispatch({actionType:c('PagesManagerMessagingComposerActionTypes').ATTACHMENT.DETACH,uploadID:j});},fileUploaderReady:function i(j){c('PagesManagerMessagingComposerDispatcher').dispatch({actionType:c('PagesManagerMessagingComposerActionTypes').UPLOADER.READY,uploader:j});},setIsSavedRepliesLoading:function i(j){c('PagesManagerMessagingComposerDispatcher').dispatch({actionType:c('PagesManagerMessagingComposerActionTypes').SAVED_REPLIES.LOADING,isLoading:j});},setMessage:function i(j){c('PagesManagerMessagingComposerDispatcher').dispatch({actionType:c('PagesManagerMessagingComposerActionTypes').MESSAGE.SET,message:j});},setParticipant:function i(j){c('PagesManagerMessagingComposerDispatcher').dispatch({actionType:c('PagesManagerMessagingComposerActionTypes').PARTICIPANT.SET,participant:j});},setSavedReplies:function i(j,k){c('PagesManagerMessagingComposerDispatcher').dispatch({actionType:c('PagesManagerMessagingComposerActionTypes').SAVED_REPLIES.SET,replies:j,tokens:k});},setShareLinkUploader:function i(j){c('PagesManagerMessagingComposerDispatcher').dispatch({actionType:c('PagesManagerMessagingComposerActionTypes').SHARE_UPLOADER.READY,uploader:j});},startAttachment:function i(j){c('PagesManagerMessagingComposerDispatcher').dispatch({actionType:c('PagesManagerMessagingComposerActionTypes').ATTACHMENT.ATTACH_START,files:j});}};f.exports=h;}),null);
__d('PagesManagerMessagingComposerStore',['PagesManagerMessagingComposerActionTypes','FluxStore','Map','MercuryConfig','PagesManagerMessagingComposerDispatcher','PagesMessagingConfig','URI'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FluxStore'));i=h&&h.prototype;function j(k){i.constructor.call(this,k);this.$PagesManagerMessagingComposerStore1=new (c('Map'))();this.$PagesManagerMessagingComposerStore2=null;this.$PagesManagerMessagingComposerStore3=false;this.$PagesManagerMessagingComposerStore4='';this.$PagesManagerMessagingComposerStore5=null;this.$PagesManagerMessagingComposerStore6={replies:[],tokens:{}};this.$PagesManagerMessagingComposerStore7=null;}j.prototype.getAllAttachmentsMeta=function(){var k=this.$PagesManagerMessagingComposerStore8(),l=[];for(var m=this.$PagesManagerMessagingComposerStore1.values(),n=Array.isArray(m),o=0,m=n?m:m[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var p;if(n){if(o>=m.length)break;p=m[o++];}else{o=m.next();if(o.done)break;p=o.value;}var q=p;if(q.id&&k.indexOf(q.id)!==-1||q.isUploading)l.push(q);}return l;};j.prototype.getAttachedAttachmentIds=function(){if(this.$PagesManagerMessagingComposerStore2)return this.$PagesManagerMessagingComposerStore2.getAttachments();return [];};j.prototype.getAttachedImageIds=function(){if(this.$PagesManagerMessagingComposerStore2)return this.$PagesManagerMessagingComposerStore2.getImageFiles();return [];};j.prototype.getAttachedAnimatedImageIds=function(){if(this.$PagesManagerMessagingComposerStore2)return this.$PagesManagerMessagingComposerStore2.getAnimatedImageFiles();return [];};j.prototype.getAttachedVideoIds=function(){if(this.$PagesManagerMessagingComposerStore2)return this.$PagesManagerMessagingComposerStore2.getVideoFiles();return [];};j.prototype.getAttachedAudioFilesIds=function(){if(this.$PagesManagerMessagingComposerStore2)return this.$PagesManagerMessagingComposerStore2.getAudioFiles();return [];};j.prototype.getAttachedFilesIds=function(){if(this.$PagesManagerMessagingComposerStore2)return this.$PagesManagerMessagingComposerStore2.getFiles();return [];};j.prototype.getFileUploader=function(){return this.$PagesManagerMessagingComposerStore2;};j.prototype.getIsAttachmentUploading=function(){if(this.$PagesManagerMessagingComposerStore2)return this.$PagesManagerMessagingComposerStore2.isUploading();return false;};j.prototype.getIsSavedRepliesLoading=function(){return this.$PagesManagerMessagingComposerStore3;};j.prototype.getMessage=function(){return this.$PagesManagerMessagingComposerStore4;};j.prototype.getQuickReplyMode=function(){return c('PagesMessagingConfig').sendOnEnter;};j.prototype.getParticipant=function(){return this.$PagesManagerMessagingComposerStore5;};j.prototype.getSavedReplies=function(){return this.$PagesManagerMessagingComposerStore6;};j.prototype.getShareLink=function(){if(this.$PagesManagerMessagingComposerStore7)return this.$PagesManagerMessagingComposerStore7.getAttachData();};j.prototype.getUploadActionFromUserID=function(k){if(!k)return null;return new (c('URI'))(c('MercuryConfig').upload_url).addQueryData('request_user_id',k).toString();};j.prototype.$PagesManagerMessagingComposerStore9=function(k,l){this.$PagesManagerMessagingComposerStore1.set(l.upload_id,{id:'',isUploading:true,name:l.metadata.filename,type:l.metadata.filetype,uploadID:l.upload_id});};j.prototype.$PagesManagerMessagingComposerStore10=function(k){k.map(function(l){this.$PagesManagerMessagingComposerStore1.set(l.upload_id,{id:'',isUploading:true,name:l.metadata.name,type:l.metadata.type,uploadID:l.upload_id});}.bind(this));};j.prototype.$PagesManagerMessagingComposerStore11=function(){this.$PagesManagerMessagingComposerStore4='';};j.prototype.$PagesManagerMessagingComposerStore12=function(k){if(this.$PagesManagerMessagingComposerStore1.has(k))this.$PagesManagerMessagingComposerStore1['delete'](k);};j.prototype.$PagesManagerMessagingComposerStore13=function(){if(this.$PagesManagerMessagingComposerStore7)this.$PagesManagerMessagingComposerStore7.clear();};j.prototype.$PagesManagerMessagingComposerStore14=function(k){var l=void 0;if(this.$PagesManagerMessagingComposerStore1.has(k.upload_id)){l=this.$PagesManagerMessagingComposerStore1.get(k.upload_id);l.id=this.$PagesManagerMessagingComposerStore15(k);l.isUploading=false;this.$PagesManagerMessagingComposerStore1.set(k.upload_id,l);}};j.prototype.$PagesManagerMessagingComposerStore8=function(){if(!this.$PagesManagerMessagingComposerStore2)return [];var k=this.$PagesManagerMessagingComposerStore2;return [].concat(k.getAttachments(),k.getImageFiles(),k.getAnimatedImageFiles(),k.getVideoFiles(),k.getAudioFiles(),k.getFiles());};j.prototype.$PagesManagerMessagingComposerStore15=function(k){return k.metadata.image_id||k.metadata.gif_id||k.metadata.video_id||k.metadata.audio_id||k.metadata.file_id;};j.prototype.__onDispatch=function(k){switch(k.actionType){case c('PagesManagerMessagingComposerActionTypes').ATTACHMENT.ALL_COMPLETE:this.$PagesManagerMessagingComposerStore16();this.__emitChange();break;case c('PagesManagerMessagingComposerActionTypes').ATTACHMENT.ATTACH_COMPLETE:this.$PagesManagerMessagingComposerStore14(k.attachment);this.__emitChange();break;case c('PagesManagerMessagingComposerActionTypes').ATTACHMENT.ATTACH_START:this.$PagesManagerMessagingComposerStore10(k.files);this.__emitChange();break;case c('PagesManagerMessagingComposerActionTypes').ATTACHMENT.DETACH:this.$PagesManagerMessagingComposerStore17(k.uploadID);this.__emitChange();break;case c('PagesManagerMessagingComposerActionTypes').ATTACHMENT.DETACH_ALL:this.$PagesManagerMessagingComposerStore18();this.__emitChange();break;case c('PagesManagerMessagingComposerActionTypes').MESSAGE.CLEAR:this.$PagesManagerMessagingComposerStore11();break;case c('PagesManagerMessagingComposerActionTypes').MESSAGE.SET:this.$PagesManagerMessagingComposerStore19(k.message);this.__emitChange();break;case c('PagesManagerMessagingComposerActionTypes').PARTICIPANT.SET:this.$PagesManagerMessagingComposerStore20(k.participant);this.__emitChange();break;case c('PagesManagerMessagingComposerActionTypes').SAVED_REPLIES.LOADING:this.$PagesManagerMessagingComposerStore21(k.isLoading);this.__emitChange();break;case c('PagesManagerMessagingComposerActionTypes').SAVED_REPLIES.SET:this.$PagesManagerMessagingComposerStore22(k.replies,k.tokens);this.__emitChange();break;case c('PagesManagerMessagingComposerActionTypes').SHARE_UPLOADER.READY:this.$PagesManagerMessagingComposerStore23(k.uploader);break;case c('PagesManagerMessagingComposerActionTypes').SHARE_UPLOADER.CLEAR:this.$PagesManagerMessagingComposerStore13();break;case c('PagesManagerMessagingComposerActionTypes').UPLOADER.READY:this.$PagesManagerMessagingComposerStore24(k.uploader);this.$PagesManagerMessagingComposerStore25();break;}};j.prototype.$PagesManagerMessagingComposerStore18=function(){if(this.$PagesManagerMessagingComposerStore2){this.$PagesManagerMessagingComposerStore2.removeAttachments();this.$PagesManagerMessagingComposerStore1.clear();}};j.prototype.$PagesManagerMessagingComposerStore17=function(k){if(this.$PagesManagerMessagingComposerStore2){this.$PagesManagerMessagingComposerStore2.removeOneAttachment(k);this.$PagesManagerMessagingComposerStore12(k);}};j.prototype.$PagesManagerMessagingComposerStore16=function(){this.$PagesManagerMessagingComposerStore1.forEach(function(k,l){if(k.isUploading)this.$PagesManagerMessagingComposerStore1['delete'](k.uploadID);}.bind(this));};j.prototype.$PagesManagerMessagingComposerStore24=function(k){this.$PagesManagerMessagingComposerStore2=k;};j.prototype.$PagesManagerMessagingComposerStore21=function(k){this.$PagesManagerMessagingComposerStore3=k;};j.prototype.$PagesManagerMessagingComposerStore19=function(k){this.$PagesManagerMessagingComposerStore4=k;};j.prototype.$PagesManagerMessagingComposerStore20=function(k){this.$PagesManagerMessagingComposerStore5=k;};j.prototype.$PagesManagerMessagingComposerStore22=function(k,l){this.$PagesManagerMessagingComposerStore6={replies:k,tokens:l};};j.prototype.$PagesManagerMessagingComposerStore23=function(k){this.$PagesManagerMessagingComposerStore7=k;};j.prototype.$PagesManagerMessagingComposerStore25=function(){var k=this.$PagesManagerMessagingComposerStore2;if(k)k.subscribe('cached-file-added',this.$PagesManagerMessagingComposerStore9.bind(this));};f.exports=new j(c('PagesManagerMessagingComposerDispatcher'));}),null);
__d('PagesManagerMessagingComposerAttachmentListItem.react',['cx','ix','Image.react','React','XUICloseButton.react','XUISpinner.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(n){k.constructor.call(this,n);this.$PagesManagerMessagingComposerAttachmentListItem1=function(){return this.props.onDetach(this.props.uploadID);}.bind(this);}m.prototype.$PagesManagerMessagingComposerAttachmentListItem2=function(){if(this.props.type.startsWith('image')){return i('/images/pages/pages_manager/messages/photo-attachment.png');}else if(this.props.type.startsWith('video')){return i('/images/pages/pages_manager/messages/video-attachment.png');}else if(this.props.type.startsWith('audio')){return i('/images/pages/pages_manager/messages/audio-attachment.png');}else if(this.props.type.startsWith('text'))return i('/images/pages/pages_manager/messages/text-attachment.png');return i('/images/pages/pages_manager/messages/general-attachment.png');};m.prototype.$PagesManagerMessagingComposerAttachmentListItem3=function(){return (c('React').createElement(c('XUICloseButton.react'),{className:"_2uia",onClick:this.$PagesManagerMessagingComposerAttachmentListItem1}));};m.prototype.$PagesManagerMessagingComposerAttachmentListItem4=function(){return (c('React').createElement('span',{className:"_2uib"},this.props.isUploading?c('React').createElement(c('XUISpinner.react'),{size:'large'}):c('React').createElement(c('Image.react'),{src:this.$PagesManagerMessagingComposerAttachmentListItem2(),alt:this.props.type})));};m.prototype.$PagesManagerMessagingComposerAttachmentListItem5=function(){return (c('React').createElement('span',{className:"_2uic"},this.props.name));};m.prototype.render=function(){return (c('React').createElement('li',{className:"clearfix _2uid"},c('React').createElement('span',{className:"_kqe _kqf"},this.$PagesManagerMessagingComposerAttachmentListItem4()),c('React').createElement('span',{className:"_kqe _kqh"},this.$PagesManagerMessagingComposerAttachmentListItem5()),c('React').createElement('span',{className:"_kqe _kqi"},this.$PagesManagerMessagingComposerAttachmentListItem3())));};m.propTypes={attachmentID:l.string,isUploading:l.bool,key:l.string,name:l.string,onDetach:l.func,type:l.string,uploadID:l.string};f.exports=m;}),null);
__d('PagesManagerMessagingComposerAttachmentList.react',['cx','PagesManagerMessagingComposerAttachmentListItem.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(m){j.constructor.call(this,m);}l.prototype.$PagesManagerMessagingComposerAttachmentList1=function(m){return (c('React').createElement(c('PagesManagerMessagingComposerAttachmentListItem.react'),{isUploading:m.isUploading,key:m.uploadID,name:m.name,onDetach:this.props.onDetach,type:m.type,uploadID:m.uploadID}));};l.prototype.render=function(){if(this.props.attachments.length>0)return (c('React').createElement('ul',{className:"_27ru"},this.props.attachments.map(this.$PagesManagerMessagingComposerAttachmentList1,this)));return null;};l.propTypes={attachments:k.array.isRequired,onDetach:k.func.isRequired};l.defaultProps={attachments:[]};f.exports=l;}),null);
__d("XPagesSavedResponsesImageDuplicationController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pages\/saved_responses\/image\/duplication\/",{});}),null);
__d('PagesManagerMessagingSavedRepliesListItem.react',['cx','ActorURI','AsyncRequest','LeftRight.react','React','SavedResponsesImage.react','SavedResponsesTokensUtils','SavedResponsesUtils','XPagesSavedResponsesImageDuplicationController','joinClasses'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes,l=53,m=53;i=babelHelpers.inherits(n,c('React').Component);j=i&&i.prototype;function n(o){j.constructor.call(this,o);this.state={isHovering:false};}n.prototype.$PagesManagerMessagingSavedRepliesListItem1=function(){if(this.props.reply.image){var o=this.props.reply.image.id;return (c('React').createElement(c('SavedResponsesImage.react'),{className:"_3-9b _wba",displayClassName:"_wba",height:l,imageID:o,loadingClassName:"_wba",pageID:this.props.pageID,shouldShowCloseButton:false,width:m}));}};n.prototype.$PagesManagerMessagingSavedRepliesListItem2=function(){if(this.props.reply.title)return (c('React').createElement('h4',{className:"_wbb"},this.props.reply.title));};n.prototype.$PagesManagerMessagingSavedRepliesListItem3=function(){var o=c('SavedResponsesTokensUtils').prepareforSend(this.props.reply.message,this.props.tokens),p=null,q=void 0,r=void 0;if(!this.props.reply.image){this.props.onClick(this.props.reply,o,p);return;}p=this.props.reply.image.id;q=c('XPagesSavedResponsesImageDuplicationController').getURIBuilder().getURI();r=c('ActorURI').create(q,this.props.pageID);new (c('AsyncRequest'))().setURI(r).setMethod('POST').setData({image_id:p}).setHandler(function(s){var t=c('SavedResponsesUtils').generateImageMetadata(''+s.payload.duplicatedImageID);this.props.onClick(this.props.reply,o,t);}.bind(this)).send();};n.prototype.$PagesManagerMessagingSavedRepliesListItem4=function(){var o=c('SavedResponsesTokensUtils').prepareforSend(this.props.reply.message,this.props.tokens);this.props.onMouseEnter(o);};n.prototype.$PagesManagerMessagingSavedRepliesListItem5=function(o){var p=0,q=0,r=/\{{(.*?)\}}/g,s=r.exec(o),t=0,u=[];while(s!=null){q=s.index;u.push(c('React').createElement('span',{key:'token:'+t},o.substring(p,q)));p=q+s[0].length;t+=1;var v=s[1] in this.props.tokens?this.props.tokens[s[1]].value:s[1];u.push(c('React').createElement('span',{className:"_3p6b",key:'token:'+t},v));s=r.exec(o);t+=1;}u.push(c('React').createElement('span',{key:'token:'+t},o.substring(p,o.length)));t+=1;return u;};n.prototype.render=function(){return (c('React').createElement('li',{className:c('joinClasses')("_2ph_ _1_2c",this.props.className),onClick:function(){return this.$PagesManagerMessagingSavedRepliesListItem3();}.bind(this),onMouseEnter:function(){return this.$PagesManagerMessagingSavedRepliesListItem4();}.bind(this),onMouseLeave:function(){return this.props.onMouseLeave();}.bind(this),ref:'replyItem'},c('React').createElement(c('LeftRight.react'),{direction:'right'},c('React').createElement('div',null,this.$PagesManagerMessagingSavedRepliesListItem2(),this.$PagesManagerMessagingSavedRepliesListItem5(this.props.reply.message)),this.$PagesManagerMessagingSavedRepliesListItem1())));};n.propTypes={className:k.string,onClick:k.func.isRequired,onMouseEnter:k.func.isRequired,onMouseLeave:k.func.isRequired,pageID:k.string.isRequired,reply:k.object.isRequired,tokens:k.object.isRequired};f.exports=n;}),null);
__d('PagesManagerMessagingSavedRepliesList.react',['cx','fbt','Link.react','React','PagesManagerMessagingSavedRepliesListItem.react','ScrollableArea.react','XUISpinner.react','SavedResponsesUtils'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;m.prototype.$PagesManagerMessagingSavedRepliesList1=function(n){var o=this.props.filter.toLowerCase();return (n.message.toLowerCase().indexOf(o)!==-1||(n.title||'').toLowerCase().indexOf(o)!==-1);};m.prototype.render=function(){return (c('React').createElement('div',{className:"_1_25"+(this.props.isLoading?' '+"_1_26":'')+(!this.props.isLoading&&this.props.replies.length===0?' '+"_1_27":'')},this.props.isLoading?this.$PagesManagerMessagingSavedRepliesList2():null,this.$PagesManagerMessagingSavedRepliesList3()));};m.prototype.$PagesManagerMessagingSavedRepliesList4=function(){return (c('React').createElement(c('Link.react'),{onClick:function(){return this.props.onCreateNewReply();}.bind(this),className:"_1_2a"},i._("Create new reply")));};m.prototype.$PagesManagerMessagingSavedRepliesList5=function(){return (c('React').createElement('div',{className:"_2ph_ _1_28"},c('React').createElement('p',null,this.$PagesManagerMessagingSavedRepliesList6()),c('React').createElement('p',null,this.$PagesManagerMessagingSavedRepliesList4())));};m.prototype.$PagesManagerMessagingSavedRepliesList2=function(){return (c('React').createElement('div',null,c('React').createElement('div',{className:"_2ph_ _1_29"},c('React').createElement(c('XUISpinner.react'),{size:'large'}))));};m.prototype.$PagesManagerMessagingSavedRepliesList6=function(){return i._("End of saved replies");};m.prototype.$PagesManagerMessagingSavedRepliesList3=function(){var n=c('SavedResponsesUtils').sortSavedResponses(this.props.replies,this.props.sortingKey);return (c('React').createElement(c('ScrollableArea.react'),{fade:true,shadow:false,height:300},c('React').createElement('ul',{className:"_1_2b"},n.map(this.$PagesManagerMessagingSavedRepliesList7,this),c('React').createElement('li',{className:"_2ph_ _1_2c"},this.$PagesManagerMessagingSavedRepliesList5()))));};m.prototype.$PagesManagerMessagingSavedRepliesList7=function(n,o){return (c('React').createElement(c('PagesManagerMessagingSavedRepliesListItem.react'),{className:!this.$PagesManagerMessagingSavedRepliesList1(n)?"hidden_elem":'',key:o,onClick:this.props.onReplySelected,onMouseEnter:this.props.onReplyMouseEnter,onMouseLeave:this.props.onReplyMouseLeave,pageID:this.props.pageID,reply:n,tokens:this.props.tokens}));};function m(){j.apply(this,arguments);}m.defaultProps={filter:''};m.propTypes={filter:l.string,isLoading:l.bool.isRequired,onCreateNewReply:l.func.isRequired,onReplyMouseEnter:l.func.isRequired,onReplyMouseLeave:l.func.isRequired,onReplySelected:l.func.isRequired,pageID:l.string.isRequired,replies:l.array.isRequired,tokens:l.object.isRequired};f.exports=m;}),null);
__d('PagesManagerMessagingSavedRepliesFlyout.react',['cx','fbt','ix','Layout.react','Image.react','LeftFillRightFitLayout.react','LeftRight.react','Link.react','PagesManagerMessagingSavedRepliesList.react','React','SavedResponsesConstants','SavedResponsesOrderingMenu.react','XUICloseButton.react','XUITextInput.react'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('Layout.react').Column,n=c('Layout.react').FillColumn,o=c('React').PropTypes;k=babelHelpers.inherits(p,c('React').Component);l=k&&k.prototype;function p(q){l.constructor.call(this,q);this.$PagesManagerMessagingSavedRepliesFlyout1=function(r){this.setState({activeSortingOptionKey:r});}.bind(this);this.state={searchQuery:'',activeSortingOptionKey:c('SavedResponsesConstants').sortingKey.MOST_USED};}p.prototype.$PagesManagerMessagingSavedRepliesFlyout2=function(q){var r=q.target.value;this.setState({searchQuery:r});};p.prototype.$PagesManagerMessagingSavedRepliesFlyout3=function(){this.setState({searchQuery:''});};p.prototype.render=function(){return (c('React').createElement('div',{className:"_201v"},this.$PagesManagerMessagingSavedRepliesFlyout4(),c('React').createElement(c('LeftFillRightFitLayout.react'),null,this.$PagesManagerMessagingSavedRepliesFlyout5(),c('React').createElement(c('SavedResponsesOrderingMenu.react'),{className:"_2tws",activeSortingOptionKey:this.state.activeSortingOptionKey,onSortingKeyChanged:this.$PagesManagerMessagingSavedRepliesFlyout1})),this.$PagesManagerMessagingSavedRepliesFlyout6()));};p.prototype.$PagesManagerMessagingSavedRepliesFlyout4=function(){return (c('React').createElement('div',{className:"_2ph_ _201w"},c('React').createElement(c('LeftRight.react'),null,c('React').createElement('h3',{className:"_201x"},i._("Saved Replies")),c('React').createElement(c('Link.react'),{className:'PagesManagerMessagingSavedRepliesFlyout/manageLink',onClick:this.props.onManageReplies},i._("Manage Replies")))));};p.prototype.$PagesManagerMessagingSavedRepliesFlyout6=function(){return (c('React').createElement(c('PagesManagerMessagingSavedRepliesList.react'),{filter:this.state.searchQuery,isLoading:this.props.isLoading,onCreateNewReply:this.props.onCreateNewReply,onReplyMouseEnter:this.props.onReplyMouseEnter,onReplyMouseLeave:this.props.onReplyMouseLeave,onReplySelected:this.props.onReplySelected,pageID:this.props.pageID,replies:this.props.replies,sortingKey:this.state.activeSortingOptionKey,tokens:this.props.tokens}));};p.prototype.$PagesManagerMessagingSavedRepliesFlyout5=function(){return (c('React').createElement(c('Layout.react'),{className:"_2ph_ _201y"},c('React').createElement(m,null,c('React').createElement(c('Image.react'),{className:"_201z",src:j('/images/browse/search/search-gray.png')})),c('React').createElement(n,null,c('React').createElement(c('XUITextInput.react'),{className:"_201-",onChange:this.$PagesManagerMessagingSavedRepliesFlyout2.bind(this),ref:'inputField',placeholder:i._("Search saved replies"),value:this.state.searchQuery})),c('React').createElement(m,null,c('React').createElement(c('XUICloseButton.react'),{size:'small',onClick:this.$PagesManagerMessagingSavedRepliesFlyout3.bind(this),className:(this.state.searchQuery.length===0?"hidden_elem":'')+(' '+"_2twt")}))));};p.propTypes={isLoading:o.bool.isRequired,onCreateNewReply:o.func.isRequired,onManageReplies:o.func.isRequired,onReplyMouseEnter:o.func.isRequired,onReplyMouseLeave:o.func.isRequired,onReplySelected:o.func.isRequired,pageID:o.string.isRequired,replies:o.array.isRequired,tokens:o.object.isRequired};f.exports=p;}),null);
__d('PagesManagerMessagingSavedRepliesButton.react',['cx','fbt','ix','Image.react','Link.react','PagesEventObserver','PagesEventType','PagesManagerMessagingSavedRepliesFlyout.react','React','SavedResponsesConstants','SavedResponsesManagePanel.react','XUIContextualDialog.react','XUIDialog.react'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('React').PropTypes,n=600,o=405;k=babelHelpers.inherits(p,c('React').Component);l=k&&k.prototype;function p(q){l.constructor.call(this,q);this.state={initialSavedResponsesManageViewType:c('SavedResponsesConstants').editPanelViewMode.LIST,isFlyoutShown:false,isManageDialogVisible:false};}p.prototype.$PagesManagerMessagingSavedRepliesButton1=function(){this.props.onFetchReplies();c('PagesEventObserver').notify(c('PagesEventType').SAVED_REPLIES_TOGGLE_BROWSE_VIEW,this.props.pageID,{toggle_on:!this.state.isFlyoutShown});this.setState({isFlyoutShown:!this.state.isFlyoutShown});};p.prototype.$PagesManagerMessagingSavedRepliesButton2=function(){this.props.onFetchReplies();this.setState({isManageDialogVisible:false});};p.prototype.$PagesManagerMessagingSavedRepliesButton3=function(){setTimeout(function(){c('PagesEventObserver').notify(c('PagesEventType').SAVED_REPLIES_TOGGLE_BROWSE_VIEW,this.props.pageID,{toggle_on:false});this.setState({isFlyoutShown:false});}.bind(this),0);};p.prototype.render=function(){var q=i._("Choose a Saved Reply");return (c('React').createElement('div',null,c('React').createElement(c('Link.react'),{'aria-label':this.props.showTooltip?q:null,className:"_3xmz",'data-hover':'tooltip','data-tooltip-align':'right','data-tooltip-content':this.props.showTooltip?q:null,onClick:this.$PagesManagerMessagingSavedRepliesButton1.bind(this)},c('React').createElement(c('Image.react'),{alt:'',className:"_3xm-",ref:'icon',src:j('/images/pages/pages_manager/messages/composer-saved-replies.png'),tabIndex:0})),this.$PagesManagerMessagingSavedRepliesButton4(),this.$PagesManagerMessagingSavedRepliesButton5()));};p.prototype.$PagesManagerMessagingSavedRepliesButton4=function(){if(this.state.isFlyoutShown)return (c('React').createElement(c('XUIContextualDialog.react'),{alignment:'right',className:"_3xm_",contextRef:function(){return this.refs.icon;}.bind(this),hasActionableContext:true,hideOnEscape:false,onBlur:this.$PagesManagerMessagingSavedRepliesButton3.bind(this),position:'above',ref:'flyoutDialog',shown:this.state.isFlyoutShown,width:o},c('React').createElement(c('PagesManagerMessagingSavedRepliesFlyout.react'),{isLoading:this.props.isSavedRepliesLoading,onCreateNewReply:function(){return this.setState({isManageDialogVisible:true,initialSavedResponsesManageViewType:c('SavedResponsesConstants').editPanelViewMode.CREATE});}.bind(this),onManageReplies:function(){return this.setState({isManageDialogVisible:true,initialSavedResponsesManageViewType:c('SavedResponsesConstants').editPanelViewMode.LIST});}.bind(this),onReplyMouseEnter:this.props.onReplyMouseEnter,onReplyMouseLeave:this.props.onReplyMouseLeave,onReplySelected:this.props.onReplySelected,pageID:this.props.pageID,replies:this.props.replies,tokens:this.props.tokens})));};p.prototype.$PagesManagerMessagingSavedRepliesButton5=function(){if(this.state.isManageDialogVisible)return (c('React').createElement(c('XUIDialog.react'),{layerHideOnBlur:false,ref:'managementDialog',shown:this.state.isManageDialogVisible,width:n},c('React').createElement(c('SavedResponsesManagePanel.react'),{initialViewType:this.state.initialSavedResponsesManageViewType,onClose:this.$PagesManagerMessagingSavedRepliesButton2.bind(this),otherUserID:this.props.recipientID,pageID:this.props.pageID})));};p.propTypes={isSavedRepliesLoading:m.bool.isRequired,onFetchReplies:m.func.isRequired,onReplyMouseEnter:m.func.isRequired,onReplyMouseLeave:m.func.isRequired,onReplySelected:m.func.isRequired,pageID:m.string.isRequired,recipientID:m.string.isRequired,replies:m.array.isRequired,showTooltip:m.bool,tokens:m.object.isRequired};p.defaultProps={showTooltip:true};f.exports=p;}),null);
__d('PagesManagerMessagingComposerView.react',['cssVar','cx','fbt','ix','PagesManagerMessagingComposerAttachmentList.react','CommerceInvoiceAdminButton.react','Image.react','MercuryDragDropPrompt.react','MercuryShareAttachmentRenderLocations','MessengerHotLikeButton.react','PagesAdminToolUIActionType','PagesEventObserver','PagesEventType','PagesManagerLogger','PagesManagerMessagingSavedRepliesButton.react','PagesMessagingPerfTypedLogger','PagesMessageSuggestedResponseHandler','PagesMessengerFileUploader.react','PagesMessengerOmnipicker.react','PagesMessengerSuggestedResponseView.react','PagesMessengerTextInput.react','React','ReactDOM','SavedResponsesUtils','Tooltip.react','TooltipData','UFIStickerButton.react','XUIButton.react','fbglyph','Grid.react'],(function a(b,c,d,e,f,g,h,i,j,k){'use strict';var l,m,n=c('React').PropTypes,o=function r(){},p=c('Grid.react').GridItem;l=babelHelpers.inherits(q,c('React').Component);m=l&&l.prototype;function q(r){m.constructor.call(this,r);this.$PagesManagerMessagingComposerView1=false;this.state={isAttachmentsButtonVisible:true,isSavedRepliesButtonVisible:true,isStickerButtonVisible:true,placeholder:''};}q.prototype.componentDidUpdate=function(r,s){if(this.props.onInitialRender&&this.props.participant&&this.refs.textInput&&!this.$PagesManagerMessagingComposerView1){this.props.onInitialRender();this.$PagesManagerMessagingComposerView1=true;}if(r&&r.message!==this.props.message)this.refs.textInput.updateHeight();};q.prototype.componentWillMount=function(){this.$PagesManagerMessagingComposerView2(this.props);};q.prototype.componentWillReceiveProps=function(r){this.$PagesManagerMessagingComposerView2(r,this.state);};q.prototype.$PagesManagerMessagingComposerView2=function(r){var s=r.attachments.length,t=r.message.length;this.setState({isSavedRepliesButtonVisible:t<1&&s<1,isStickerButtonVisible:t<1&&s<1});};q.prototype.$PagesManagerMessagingComposerView3=function(){return (this.props.canAttachFiles&&this.state.isAttachmentsButtonVisible);};q.prototype.$PagesManagerMessagingComposerView4=function(){return (this.props.canUseSavedReplies&&this.state.isSavedRepliesButtonVisible);};q.prototype.$PagesManagerMessagingComposerView5=function(){return (this.props.canUseStickers&&this.state.isStickerButtonVisible);};q.prototype.$PagesManagerMessagingComposerView6=function(r){this.props.onEmoticonSelected(r,c('ReactDOM').findDOMNode(this.refs.textInput.refs.input));};q.prototype.$PagesManagerMessagingComposerView7=function(r){r.preventDefault();var s=Date.now();c('PagesManagerLogger').logMessageInboxUIAction(c('PagesAdminToolUIActionType').MESSAGE_INBOX_CLICK_SEND_MESSAGE,this.props.userID);new (c('PagesMessagingPerfTypedLogger'))().setPageID(this.props.userID).setEventName(c('PagesEventType').MESSAGES_SEND_MESSAGE_JS_START).logVital();this.props.onSend(s);};q.prototype.$PagesManagerMessagingComposerView8=function(){if(!this.$PagesManagerMessagingComposerView3())return null;var r=j._("Send a file");if(this.props.canUseOmnipicker)return (c('React').createElement('div',babelHelpers['extends']({className:"_4dvy"},c('TooltipData').propsFor(r,'above')),c('React').createElement(c('PagesMessengerOmnipicker.react'),{onPhotosSelected:this.props.onOmnipickerPhotosSelected,uploadURI:this.props.uploaderActionURI,pageID:this.props.userID})));return (c('React').createElement('div',babelHelpers['extends']({className:"_4dvy"},c('TooltipData').propsFor(r)),c('React').createElement(c('PagesMessengerFileUploader.react'),{actionURI:this.props.uploaderActionURI,iconSize:'large',onFileUploaderMounted:this.props.onFileUploaderMounted,onSubmit:this.props.onFileUploaderSubmit,onUpdateAttachmentsShelf:this.props.onFileUploadUpdateUI,onUploadFinished:this.props.onFileUploadFinished,ref:'fileUploader'})));};q.prototype.$PagesManagerMessagingComposerView9=function(){if(!this.props.canAttachFiles)return null;return (c('React').createElement(c('PagesManagerMessagingComposerAttachmentList.react'),{attachments:this.props.attachments,attachmentsUploading:this.props.attachmentsUploading,onDetach:this.props.onAttachmentDetach,ref:'attachmentList'}));};q.prototype.$PagesManagerMessagingComposerView10=function(){if(this.props.threadID&&this.props.message.length<1&&this.props.attachments.length<1){var r=this.props.threadID;return (c('React').createElement('span',{className:"_1z9h"},c('React').createElement(c('MessengerHotLikeButton.react'),{customColor:"#0084ff",disabled:!this.props.threadID,location:c('MercuryShareAttachmentRenderLocations').PAGES_INBOX,sendSticker:this.props.onStickerSelected,renderSize:24,threadID:r})));}return null;};q.prototype.$PagesManagerMessagingComposerView11=function(){var r=this.state.placeholder||j._("Write a reply...");return (c('React').createElement('div',{className:"_4dv-"},c('React').createElement(c('PagesMessengerTextInput.react'),{className:"_1p7p _5id1 _4dv_",onNoShiftEnter:this.props.isQuickReplyMode?function(s){return this.$PagesManagerMessagingComposerView7(s);}.bind(this):null,onFocus:this.props.onFocus,placeholder:r,onChange:this.props.onInputChange,value:this.props.message,ref:'textInput'})));};q.prototype.$PagesManagerMessagingComposerView12=function(){return (c('React').createElement('div',{className:"_6fk",ref:'linkPreview'}));};q.prototype.$PagesManagerMessagingComposerView13=function(){return (c('React').createElement('div',{className:"_4dw0"},c('React').createElement(c('Image.react'),{className:"_1cjc",src:this.props.participant.image_src})));};q.prototype.$PagesManagerMessagingComposerView14=function(){if(!this.$PagesManagerMessagingComposerView4()||!this.props.recipientID)return null;return (c('React').createElement('span',{className:"_4dw1"},c('React').createElement(c('PagesManagerMessagingSavedRepliesButton.react'),{recipientID:this.props.recipientID,isSavedRepliesLoading:this.props.isSavedRepliesLoading,onFetchReplies:this.props.onFetchReplies,onReplyMouseEnter:this.$PagesManagerMessagingComposerView15.bind(this),onReplyMouseLeave:this.$PagesManagerMessagingComposerView16.bind(this),onReplySelected:this.$PagesManagerMessagingComposerView17.bind(this),pageID:this.props.userID,replies:this.props.savedReplies.replies,showTooltip:true,tokens:this.props.savedReplies.tokens})));};q.prototype.$PagesManagerMessagingComposerView18=function(){var r=j._("Send");return (c('React').createElement('div',{className:"_4dw3"+(this.props.message.length<1&&this.props.attachments.length<1?' '+"hidden_elem":'')},c('React').createElement(c('XUIButton.react'),{disabled:this.props.isSendBlocked,label:r,onClick:function(s){return this.$PagesManagerMessagingComposerView7(s);}.bind(this),use:'confirm'})));};q.prototype.$PagesManagerMessagingComposerView19=function(){if(!this.$PagesManagerMessagingComposerView5())return null;var r=j._("Post a Sticker");return (c('React').createElement('span',{className:"_4dw4"},c('React').createElement(c('UFIStickerButton.react'),{onStickerSelected:this.props.onStickerSelected,onEmoticonSelected:function(s){return this.$PagesManagerMessagingComposerView6(s);}.bind(this)},c('React').createElement(c('Image.react'),{alt:r,className:"_3fhi",src:k('/images/pages/pages_manager/messages/composer-stickers.png')}))));};q.prototype.$PagesManagerMessagingComposerView20=function(){if(!this.props.shouldShowCommerceInvoiceButton||this.props.recipientID==null)return null;return (c('React').createElement('div',{className:"_3w8o"},c('React').createElement(c('CommerceInvoiceAdminButton.react'),{defaultCurrency:this.props.defaultCurrency,pageID:this.props.userID,recipientID:this.props.recipientID,shouldOpenNewFlow:this.props.shouldShowCommerceInvoiceNewFlow,shouldShowNUX:this.props.shouldShowCommerceInvoiceButtonNUX,shouldShowPUX:this.props.shouldShowCommerceInvoiceButtonPUX,shouldShowShippingNUX:this.props.shouldShowInvoiceShippingNUX})));};q.prototype.$PagesManagerMessagingComposerView21=function(){return (c('React').createElement(c('PagesMessengerSuggestedResponseView.react'),{suggestedResponseHandler:this.props.suggestedResponseHandler,onAccepted:this.props.onSuggestedResponseAccept,onDeclined:this.props.onSuggestedResponseDecline}));};q.prototype.render=function(){if(!this.props.recipientID||!this.props.threadID||!this.props.participant){return c('React').createElement('div',{className:"__1d"});}else if(this.props.isBlocked&&this.props.enableBlockedComposer){new (c('PagesMessagingPerfTypedLogger'))().setPageID(this.props.userID).setEventName(c('PagesEventType').COMPOSER_BLOCKED_WITH_WARNING).log();return (c('React').createElement(p,{alignv:'middle',className:"_50wh"},c('React').createElement('div',{className:"_50wn"},j._("Your Page is no longer able to send messages to this person."),c('React').createElement(c('Tooltip.react'),{tooltip:j._("A Page may be unable to send messages to someone if they are no longer on Facebook, if they pose a security risk or if they have chosen not to receive messages.")},c('React').createElement('a',{href:'https://www.facebook.com/help/273376269375028'},c('React').createElement(c('Image.react'),{src:k("\/images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/info-solid_16_fig-light-20.png"),style:{verticalAlign:'-2px'}}))))));}return (c('React').createElement('div',{className:"__1d"},c('React').createElement(c('MercuryDragDropPrompt.react'),null),c('React').createElement('div',{className:"_4dw9"},this.$PagesManagerMessagingComposerView13(),this.$PagesManagerMessagingComposerView11(),c('React').createElement('div',{className:"_3-8o _4dwa"},this.$PagesManagerMessagingComposerView20(),this.$PagesManagerMessagingComposerView8(),this.$PagesManagerMessagingComposerView19(),this.$PagesManagerMessagingComposerView14(),this.$PagesManagerMessagingComposerView10(),this.$PagesManagerMessagingComposerView18())),c('React').createElement('div',{className:"_6fl"},this.$PagesManagerMessagingComposerView21(),this.$PagesManagerMessagingComposerView12()),this.$PagesManagerMessagingComposerView9()));};q.prototype.$PagesManagerMessagingComposerView15=function(r){this.setState({placeholder:r});};q.prototype.$PagesManagerMessagingComposerView16=function(){this.setState({placeholder:''});};q.prototype.$PagesManagerMessagingComposerView17=function(r,s,t){this.setState({placeholder:''});this.props.onReplySelected(s,t);c('PagesEventObserver').notify(c('PagesEventType').SAVED_REPLIES_APPLY_REPLY,this.props.userID);c('SavedResponsesUtils').notifySavedResponseApplied(r,this.props.userID);};q.propTypes={attachments:n.array,canAttachFiles:n.bool,canUseSavedReplies:n.bool,canUseStickers:n.bool,isQuickReplyMode:n.bool,isSavedRepliesLoading:n.bool,isSendBlocked:n.bool,message:n.string.isRequired,onAttachmentDetach:n.func,onEmoticonSelected:n.func,onFetchReplies:n.func.isRequired,onFileUploaderSubmit:n.func,onFileUploaderMounted:n.func,onFileUploadFinished:n.func,onFocus:n.func,onInitialRender:n.func,onInputChange:n.func,onSend:n.func,onStickerSelected:n.func,onSuggestedResponseAccept:n.func,onSuggestedResponseDecline:n.func,participant:n.object,recipientID:n.string,savedReplies:n.object,shouldShowInvoiceShippingNUX:n.bool,suggestedResponseHandler:n.instanceOf(c('PagesMessageSuggestedResponseHandler')),uploaderActionURI:n.string,userID:n.string};q.defaultProps={attachments:[],canAttachFiles:true,canUseOmnipicker:false,canUseSavedReplies:true,canUseStickers:true,isSendBlocked:false,onAttachmentDetach:o,onEmoticonSelected:o,onFileUploaderMounted:o,onFileUploaderSubmit:o,onFileUploadFinished:o,onInputChange:o,onSend:o,onStickerSelected:o,onSuggestedResponseAccept:o,shouldShowCommerceInvoiceButton:false,shouldShowCommerceInvoiceButtonNUX:false,shouldShowCommerceInvoiceButtonPUX:false,shouldShowInvoiceShippingNUX:false};f.exports=q;}),null);
__d('PagesManagerMessagingNUXActionTypes',['keyMirrorRecursive'],(function a(b,c,d,e,f,g){'use strict';var h=c('keyMirrorRecursive')({RESET_STEP:'',SET_IS_VISIBLE:'',SET_ROOT_ELEMENT:'',SET_STEP:'',SET_SHOULD_SHOW_BANNER:'',SET_SHOULD_SHOW_CONTEXT_CARD_STEP:'',SET_DEPENDENCY_READY:{COMPOSER:'',CONTEXT_CARD:'',THREADLIST:''}});f.exports=h;}),null);
__d('PagesManagerMessagingNUXDispatcher',['ReactDispatcher_DEPRECATED'],(function a(b,c,d,e,f,g){'use strict';f.exports=new (c('ReactDispatcher_DEPRECATED'))();}),null);
__d('PagesManagerMessagingNUXActions',['PagesManagerMessagingNUXActionTypes','PagesManagerMessagingNUXDispatcher','PagesManagerMessagingMessagelistDispatcher','PagesManagerMessagingActionType'],(function a(b,c,d,e,f,g){'use strict';var h={resetStep:function i(){c('PagesManagerMessagingNUXDispatcher').dispatch({actionType:c('PagesManagerMessagingNUXActionTypes').RESET_STEP});},setComposerReady:function i(){c('PagesManagerMessagingNUXDispatcher').dispatch({actionType:c('PagesManagerMessagingNUXActionTypes').SET_DEPENDENCY_READY.COMPOSER});},setContextCardReady:function i(){c('PagesManagerMessagingNUXDispatcher').dispatch({actionType:c('PagesManagerMessagingNUXActionTypes').SET_DEPENDENCY_READY.CONTEXT_CARD});},setThreadlistReady:function i(){c('PagesManagerMessagingNUXDispatcher').dispatch({actionType:c('PagesManagerMessagingNUXActionTypes').SET_DEPENDENCY_READY.THREADLIST});},setIsVisible:function i(j){c('PagesManagerMessagingNUXDispatcher').dispatch({actionType:c('PagesManagerMessagingNUXActionTypes').SET_IS_VISIBLE,isVisible:j});},setRootElement:function i(j){c('PagesManagerMessagingNUXDispatcher').dispatch({actionType:c('PagesManagerMessagingNUXActionTypes').SET_ROOT_ELEMENT,rootElement:j});},setStep:function i(j){c('PagesManagerMessagingNUXDispatcher').dispatch({actionType:c('PagesManagerMessagingNUXActionTypes').SET_STEP,step:j});},setShouldShowBanner:function i(j){c('PagesManagerMessagingNUXDispatcher').dispatch({actionType:c('PagesManagerMessagingNUXActionTypes').SET_SHOULD_SHOW_BANNER,shouldShow:j});},setShouldShowContextCardStep:function i(j){c('PagesManagerMessagingNUXDispatcher').dispatch({actionType:c('PagesManagerMessagingNUXActionTypes').SET_SHOULD_SHOW_CONTEXT_CARD_STEP,shouldShow:j});}};f.exports=h;}),null);
__d("XPagesMessagingBlockController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pages\/message\/isblocked\/",{recipient_id:{type:"String",required:true}});}),null);
__d('PagesManagerMessagingComposerContainer.react',['invariant','AsyncRequest','DragDropTarget','EmoticonsList','EmoticonUtils','FluxContainer','MercuryIDs','MercuryPageMessageActions','MercuryMessageObject','MercuryParticipants','MercurySourceType','PagesEventObserver','PagesEventType','PagesManagerMessagingComposerActions','PagesManagerMessagingComposerStore','PagesManagerMessagingComposerView.react','PagesManagerMessagingNUXActions','PagesMessagingConfig','PagesMessagingPerfTypedLogger','PagesMessengerShareLinkUploader','React','ReactDOM','SavedResponsesUtils','SelectionPosition','SubscriptionsHandler','XPagesMessagingBlockController','emptyFunction','ActorURI'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.getStores=function(){return [c('PagesManagerMessagingComposerStore')];};l.calculateState=function(m,n){var o=m?m.isShareLinkUploading:false,p=m?m.isBlocked:false;return {attachments:c('PagesManagerMessagingComposerStore').getAllAttachmentsMeta(),isAttachmentUploading:c('PagesManagerMessagingComposerStore').getIsAttachmentUploading(),isSavedRepliesLoading:c('PagesManagerMessagingComposerStore').getIsSavedRepliesLoading(),isQuickReplyMode:c('PagesManagerMessagingComposerStore').getQuickReplyMode(),isShareLinkUploading:o,message:c('PagesManagerMessagingComposerStore').getMessage(),participant:c('PagesManagerMessagingComposerStore').getParticipant(),savedReplies:c('PagesManagerMessagingComposerStore').getSavedReplies(),uploaderActionURI:c('PagesManagerMessagingComposerStore').getUploadActionFromUserID(n.userID),isBlocked:p};};l.prototype.$PagesManagerMessagingComposerContainer7=function(m){this.$PagesManagerMessagingComposerContainer5.addSubscriptions(m.subscribe('one-upload-completed',this.$PagesManagerMessagingComposerContainer8.bind(this)));};l.prototype.componentDidUpdate=function(m){if(this.props.recipientID&&this.props.threadID&&(!m.recipientID||!m.threadID)){c('PagesManagerMessagingNUXActions').setComposerReady();if(this.props.onInitialRender)this.props.onInitialRender();}if(this.props.enableBlockedComposer&&this.props.recipientID!==null&&this.props.recipientID!==m.recipientID)this.isRecipientBlocked(this.props.recipientID);};l.prototype.componentDidMount=function(){this.$PagesManagerMessagingComposerContainer9(this.props.userID);};l.prototype.componentWillMount=function(){this.$PagesManagerMessagingComposerContainer10(this.props);this.$PagesManagerMessagingComposerContainer5=new (c('SubscriptionsHandler'))();};l.prototype.componentWillReceiveProps=function(m){this.$PagesManagerMessagingComposerContainer10(m);if(m.threadID!==this.props.threadID){c('PagesManagerMessagingComposerActions').clearMessage();c('PagesManagerMessagingComposerActions').detachAllAttachments();}if(m.userID!==this.props.userID)this.$PagesManagerMessagingComposerContainer9(m.userID);};l.prototype.componentWillUpdate=function(m,n){if(this.props.onMessageOrAttachmentUpdate&&(n.attachments.length!==this.state.attachments.length||n.message!==this.state.message))this.props.onMessageOrAttachmentUpdate();};l.prototype.componentWillUnmount=function(){this.$PagesManagerMessagingComposerContainer5&&this.$PagesManagerMessagingComposerContainer5.release();};l.prototype.$PagesManagerMessagingComposerContainer11=function(){var m=new (c('PagesMessengerShareLinkUploader'))(c('ReactDOM').findDOMNode(this.refs.composer.refs.linkPreview),this.refs.composer.refs.textInput.refs.input,c('emptyFunction'),c('emptyFunction'),this.props.userID);this.$PagesManagerMessagingComposerContainer5.addSubscriptions(m.subscribe('link-detected',function(){this.setState({isShareLinkUploading:true});this.props.onMessageOrAttachmentUpdate();}.bind(this)),m.subscribe('share-loaded',function(){this.setState({isShareLinkUploading:false});}.bind(this)),m.subscribe('closed',function(){this.props.onMessageOrAttachmentUpdate();}.bind(this)));if(c('PagesMessagingConfig').dragdropEnabled){this.$PagesManagerMessagingComposerContainer1=this.$PagesManagerMessagingComposerContainer1||new (c('DragDropTarget'))(c('ReactDOM').findDOMNode(this)).enable();this.$PagesManagerMessagingComposerContainer1.setOnURLDropCallback(function(n){return (m.loadShare(n));});}c('PagesManagerMessagingComposerActions').setShareLinkUploader(m);};l.prototype.$PagesManagerMessagingComposerContainer12=function(){if(this.state.isSavedRepliesLoading||!this.props.userID||!this.props.recipientID)return;c('PagesManagerMessagingComposerActions').setIsSavedRepliesLoading(true);c('SavedResponsesUtils').fetchSavedResponses(this.props.userID,this.props.recipientID,function(m,n){c('PagesManagerMessagingComposerActions').setIsSavedRepliesLoading(false);c('PagesManagerMessagingComposerActions').setSavedReplies(m,n);});};l.prototype.$PagesManagerMessagingComposerContainer10=function(m){var n=m.userID;n||h(0);this.$PagesManagerMessagingComposerContainer2=c('MercuryMessageObject').getForFBID(n);this.$PagesManagerMessagingComposerContainer3=c('MercuryPageMessageActions').getForFBID(n);};l.prototype.$PagesManagerMessagingComposerContainer9=function(m){var n=c('MercuryIDs').getParticipantIDFromUserID(m);c('MercuryParticipants').get(n,function(o){c('PagesManagerMessagingComposerActions').setParticipant(o);});};l.prototype.isSendBlocked=function(){if(this.state.isAttachmentUploading||this.state.isShareLinkUploading||this.state.message===''&&this.state.attachments.length<1)return true;return false;};l.prototype.isRecipientBlocked=function(m){var n=c('ActorURI').create(c('XPagesMessagingBlockController').getURIBuilder().setString('recipient_id',m).getURI(),this.props.userID);new (c('AsyncRequest'))().setURI(n).setHandler(function(o){var p=o.payload;this.setState({isBlocked:p});return;}.bind(this)).send();};l.prototype.$PagesManagerMessagingComposerContainer13=function(m){c('PagesManagerMessagingComposerActions').detachAttachment(m);};l.prototype.$PagesManagerMessagingComposerContainer14=function(m,n){var o=c('EmoticonsList').symbols[m];if(!o)return;this.$PagesManagerMessagingComposerContainer4=this.$PagesManagerMessagingComposerContainer4||new (c('SelectionPosition'))(n);var p=c('EmoticonUtils').insertEmoticon(o,this.state.message,this.$PagesManagerMessagingComposerContainer4.getPos());this.$PagesManagerMessagingComposerContainer4.setPos(p.start,p.end);c('PagesManagerMessagingComposerActions').setMessage(p.result);};l.prototype.$PagesManagerMessagingComposerContainer15=function(m){this.$PagesManagerMessagingComposerContainer7(m);if(c('PagesMessagingConfig').dragdropEnabled){this.$PagesManagerMessagingComposerContainer1=this.$PagesManagerMessagingComposerContainer1||new (c('DragDropTarget'))(c('ReactDOM').findDOMNode(this)).enable();this.$PagesManagerMessagingComposerContainer1.setOnFilesDropCallback(this.$PagesManagerMessagingComposerContainer16.bind(this));}c('PagesManagerMessagingComposerActions').fileUploaderReady(m);};l.prototype.$PagesManagerMessagingComposerContainer8=function(m,n){c('PagesManagerMessagingComposerActions').completeAttachment(n);};l.prototype.$PagesManagerMessagingComposerContainer17=function(m,n){c('PagesManagerMessagingComposerActions').startAttachment(n.files);if(this.refs.composer&&this.refs.composer.refs.textInput&&this.refs.composer.refs.textInput.refs.input)c('ReactDOM').findDOMNode(this.refs.composer.refs.textInput.refs.input).focus();};l.prototype.$PagesManagerMessagingComposerContainer18=function(m){if(m==='all-uploads-completed'){c('PagesManagerMessagingComposerActions').completeAllAttachments();}else m==='upload-canceled';};l.prototype.$PagesManagerMessagingComposerContainer19=function(m){c('PagesManagerMessagingComposerActions').setMessage(m.target.value);};l.prototype.$PagesManagerMessagingComposerContainer20=function(m,n){var o=c('PagesManagerMessagingComposerStore').getFileUploader();c('PagesManagerMessagingComposerActions').detachAllAttachments();c('PagesManagerMessagingComposerActions').setMessage(m);if(n&&o)o.addCachedAttachments([n]);if(this.refs.composer&&this.refs.composer.refs.textInput)c('ReactDOM').findDOMNode(this.refs.composer.refs.textInput.refs.input).focus();};l.prototype.$PagesManagerMessagingComposerContainer21=function(m){var n=c('PagesManagerMessagingComposerStore').getFileUploader();if(n)n.addCachedAttachments(m.map(function(o){return {filename:'Photo.jpg',image_id:o.fbid,filetype:'image/jpeg'};}));};l.prototype.$PagesManagerMessagingComposerContainer22=function(m){try{this.$PagesManagerMessagingComposerContainer23(m);}catch(n){new (c('PagesMessagingPerfTypedLogger'))().setPageID(this.props.userID).setEventName(c('PagesEventType').MESSAGES_SEND_MESSAGE_JS_EXCEPTION).setExceptionMessage(n.message).setStack(n.stack).logVital();}};l.prototype.$PagesManagerMessagingComposerContainer23=function(m){var n=this.state.message,o=c('PagesManagerMessagingComposerStore').getAttachedAttachmentIds(),p=c('PagesManagerMessagingComposerStore').getAttachedImageIds(),q=c('PagesManagerMessagingComposerStore').getAttachedAnimatedImageIds(),r=c('PagesManagerMessagingComposerStore').getAttachedVideoIds(),s=c('PagesManagerMessagingComposerStore').getAttachedAudioFilesIds(),t=c('PagesManagerMessagingComposerStore').getAttachedFilesIds(),u=c('PagesManagerMessagingComposerStore').getShareLink(),v=this.$PagesManagerMessagingComposerContainer2.constructUserGeneratedMessageObject(n,c('MercurySourceType').TITAN_WEB,this.props.threadID,null,this.props.creatorInfo);if(this.isSendBlocked()||!n&&!o.length&&!s.length&&!p.length&&!t.length&&!q.length&&!r.length&&!u)return;if(u){v.has_attachment=true;v.content_attachment=u;}if(o.length>0){v.has_attachment=true;v.raw_attachments=o;}if(p.length>0){v.image_ids=p;v.has_attachment=true;}if(q.length>0){v.gif_ids=q;v.has_attachment=true;}if(r.length>0){v.video_ids=r;v.has_attachment=true;}if(s.length>0){v.audio_ids=s;v.has_attachment=true;}if(t.length>0){v.file_ids=t;v.has_attachment=true;}c('PagesEventObserver').logData_DEPRECATED({page_id:this.props.user,event_name:c('PagesEventType').MESSAGES_DIALOG_SEND,thread_id:this.props.threadElementID},null);this.$PagesManagerMessagingComposerContainer3.send(v);c('PagesManagerMessagingComposerActions').detachAllAttachments();c('PagesManagerMessagingComposerActions').clearMessage();c('PagesManagerMessagingComposerActions').clearShareLinkUploader();new (c('PagesMessagingPerfTypedLogger'))().setPageID(this.props.userID).setEventName(c('PagesEventType').MESSAGES_SEND_MESSAGE_JS_END).setPerfTime(Date.now()-m).logVital();};l.prototype.$PagesManagerMessagingComposerContainer24=function(m){var n=this.$PagesManagerMessagingComposerContainer2.constructUserGeneratedMessageObject('',c('MercurySourceType').TITAN_WEB,this.props.threadID,null,this.props.creatorInfo);n.has_attachment=true;n.sticker_id=m;this.$PagesManagerMessagingComposerContainer3.send(n);c('PagesManagerMessagingComposerActions').clearMessage();};l.prototype.$PagesManagerMessagingComposerContainer16=function(m){if(this.refs.composer&&this.refs.composer.refs.fileUploader)this.refs.composer.refs.fileUploader.addFiles(m);};l.prototype.render=function(){return (c('React').createElement(c('PagesManagerMessagingComposerView.react'),babelHelpers['extends']({},this.props,this.state,{isSendBlocked:this.isSendBlocked(),onAttachmentDetach:this.$PagesManagerMessagingComposerContainer13.bind(this),onEmoticonSelected:this.$PagesManagerMessagingComposerContainer14.bind(this),onFetchReplies:this.$PagesManagerMessagingComposerContainer12.bind(this),onFileUploaderMounted:this.$PagesManagerMessagingComposerContainer15.bind(this),onFileUploaderSubmit:this.$PagesManagerMessagingComposerContainer17.bind(this),onFileUploadFinished:this.$PagesManagerMessagingComposerContainer18.bind(this),onInitialRender:function(){return this.$PagesManagerMessagingComposerContainer11();}.bind(this),onInputChange:function(m){return this.$PagesManagerMessagingComposerContainer19(m);}.bind(this),onOmnipickerPhotosSelected:this.$PagesManagerMessagingComposerContainer21.bind(this),onReplySelected:this.$PagesManagerMessagingComposerContainer20.bind(this),onSend:function(m){return this.$PagesManagerMessagingComposerContainer22(m);}.bind(this),onStickerSelected:this.$PagesManagerMessagingComposerContainer24.bind(this),ref:'composer'})));};function l(){i.apply(this,arguments);}l.propTypes={creatorInfo:k.object,onInitialRender:k.func,onMessageOrAttachmentUpdate:k.func,shouldShowCommerceInvoiceButton:k.bool,shouldShowCommerceInvoiceButtonNUX:k.bool,shouldShowCommerceInvoiceButtonPUX:k.bool,shouldShowCommerceInvoiceNewFlow:k.bool,shouldShowInvoiceShippingNUX:k.bool,threadElementID:k.string,threadID:k.string,userID:k.string};f.exports=c('FluxContainer').create(l,{withProps:true});}),null);
__d('PagesManagerNavigationUnit',['invariant'],(function a(b,c,d,e,f,g,h){'use strict';function i(j){this.$PagesManagerNavigationUnit1=j;}i.prototype.getDisplayTitle=function(){h(0);};i.prototype.getKey=function(){return this.$PagesManagerNavigationUnit1;};i.prototype.getNotificationCount=function(j,k){return 0;};f.exports=i;}),null);
__d('PagesManagerMessagingAllNavigationUnit',['fbt','PagesManagerMessagingNavigationUnitKey','PagesManagerNavigationUnit'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('PagesManagerNavigationUnit'));j=i&&i.prototype;function k(){j.constructor.call(this,c('PagesManagerMessagingNavigationUnitKey').FILTERS.ALL);}k.prototype.getDisplayTitle=function(){return h._("All");};f.exports=k;}),null);
__d('PagesManagerMessagingFolderNavigationUnit',['invariant','immutable','PagesManagerMessagingNavigationUnitKey','PagesManagerNavigationUnit'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('immutable').List;i=babelHelpers.inherits(l,c('PagesManagerNavigationUnit'));j=i&&i.prototype;l.prototype.getSupportedFilterKeys=function(){return k([c('PagesManagerMessagingNavigationUnitKey').FILTERS.ALL]);};l.prototype.assertSupportsFilter=function(m){this.getSupportedFilterKeys().indexOf(m.getKey())>=0||h(0);};function l(){i.apply(this,arguments);}f.exports=l;}),null);
__d('PagesManagerMessagingArchiveNavigationUnit',['fbt','PagesManagerMessagingFolderNavigationUnit','PagesManagerMessagingNavigationUnitKey'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('PagesManagerMessagingFolderNavigationUnit'));j=i&&i.prototype;function k(){j.constructor.call(this,c('PagesManagerMessagingNavigationUnitKey').FOLDERS.ARCHIVED);}k.prototype.getDisplayTitle=function(){return h._("Archived");};f.exports=k;}),null);
__d('PagesManagerMessagingFlaggedNavigationUnit',['fbt','PagesManagerNavigationUnit','PagesManagerMessagingNavigationUnitKey'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('PagesManagerNavigationUnit'));j=i&&i.prototype;function k(){j.constructor.call(this,c('PagesManagerMessagingNavigationUnitKey').FILTERS.FLAGGED);}k.prototype.getDisplayTitle=function(){return h._("Flagged");};f.exports=k;}),null);
__d('PagesManagerMessagingInboxNavigationUnit',['fbt','immutable','PagesManagerMessagingFolderNavigationUnit','PagesManagerMessagingNavigationUnitKey','PagesManagerMessagingUnreadCountHelper'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('immutable').List;i=babelHelpers.inherits(l,c('PagesManagerMessagingFolderNavigationUnit'));j=i&&i.prototype;function l(){j.constructor.call(this,c('PagesManagerMessagingNavigationUnitKey').FOLDERS.INBOX);}l.prototype.getDisplayTitle=function(){return h._("Inbox");};l.prototype.getSupportedFilterKeys=function(){return k([c('PagesManagerMessagingNavigationUnitKey').FILTERS.ALL,c('PagesManagerMessagingNavigationUnitKey').FILTERS.UNREAD,c('PagesManagerMessagingNavigationUnitKey').FILTERS.FLAGGED]);};l.prototype.getNotificationCount=function(m,n){return c('PagesManagerMessagingUnreadCountHelper').getUnreadCount(m,this.getKey());};f.exports=l;}),null);
__d('PagesManagerMessagingLogger',['invariant','MessagingTag','PagesEventObserver','PagesEventType'],(function a(b,c,d,e,f,g,h){var i='messages',j='inbox',k=':',l={logMessagesSectionViewEvent:function m(n,o){var p=o||j,q=[];if(p.indexOf(':')){q=p.split(k);p=q[q.length-1];}c('PagesEventObserver').notify(c('PagesEventType').VIEW_MESSAGES,n,{section:i,subsection:p});},logPageViewFolderEvent:function m(n,o,p){var event='';switch(o.getKey()){case c('MessagingTag').INBOX:event=c('PagesEventType').MESSAGES_VIEW_INBOX;break;case c('MessagingTag').ACTION_ARCHIVED:event=c('PagesEventType').MESSAGES_VIEW_ARCHIVED;break;case c('MessagingTag').SPAM:event=c('PagesEventType').MESSAGES_VIEW_SPAM;break;default:h(0);}c('PagesEventObserver').notify(event,n,{source:p});}};f.exports=l;}),null);
__d('PagesManagerMessagingSpamNavigationUnit',['fbt','PagesManagerMessagingFolderNavigationUnit','PagesManagerMessagingNavigationUnitKey'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('PagesManagerMessagingFolderNavigationUnit'));j=i&&i.prototype;function k(){j.constructor.call(this,c('PagesManagerMessagingNavigationUnitKey').FOLDERS.SPAM);}k.prototype.getDisplayTitle=function(){return h._("Spam");};f.exports=k;}),null);
__d('PagesManagerMessagingUnreadNavigationUnit',['fbt','PagesManagerMessagingNavigationUnitKey','PagesManagerMessagingUnreadCountHelper','PagesManagerNavigationUnit'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('PagesManagerNavigationUnit'));j=i&&i.prototype;function k(){j.constructor.call(this,c('PagesManagerMessagingNavigationUnitKey').FILTERS.UNREAD);}k.prototype.getDisplayTitle=function(){return h._("Unread");};k.prototype.getNotificationCount=function(l,m){if(m.activeFolder.getKey()!==c('PagesManagerMessagingNavigationUnitKey').FOLDERS.INBOX)return 0;return c('PagesManagerMessagingUnreadCountHelper').getUnreadCount(l,m.activeFolder.getKey());};f.exports=k;}),null);
__d('PagesManagerMessagingFilterStore',['invariant','FluxStore','immutable','Map','MessagingTag','MessageThreadViewSource','PagesManagerActionType','PagesManagerDispatcher','PagesManagerMessagingAllNavigationUnit','PagesManagerMessagingArchiveNavigationUnit','PagesManagerMessagingFlaggedNavigationUnit','PagesManagerMessagingInboxNavigationUnit','PagesManagerMessagingLogger','PagesManagerMessagingSpamNavigationUnit','PagesManagerMessagingSearchStore','PagesManagerMessagingUnreadNavigationUnit','PagesManagerMessagingNavigationUnitKey'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k='inbox|all|';i=babelHelpers.inherits(l,c('FluxStore'));j=i&&i.prototype;function l(){j.constructor.call(this,c('PagesManagerDispatcher'));var m=new (c('PagesManagerMessagingInboxNavigationUnit'))(),n=new (c('PagesManagerMessagingArchiveNavigationUnit'))(),o=new (c('PagesManagerMessagingSpamNavigationUnit'))();this.$PagesManagerMessagingFilterStore2=c('immutable').List([m,n,o]);this.$PagesManagerMessagingFilterStore8=new (c('PagesManagerMessagingAllNavigationUnit'))();var p=new (c('PagesManagerMessagingUnreadNavigationUnit'))();this.$PagesManagerMessagingFilterStore1=c('immutable').List([this.$PagesManagerMessagingFilterStore8,p,new (c('PagesManagerMessagingFlaggedNavigationUnit'))()]);this.$PagesManagerMessagingFilterStore4=this.$PagesManagerMessagingFilterStore2.first();this.$PagesManagerMessagingFilterStore5=this.getFilterByKey(this.$PagesManagerMessagingFilterStore4.getSupportedFilterKeys().first());this.$PagesManagerMessagingFilterStore7=false;this.$PagesManagerMessagingFilterStore6=false;this.$PagesManagerMessagingFilterStore3=[m,p,n,o];}l.prototype.$PagesManagerMessagingFilterStore9=function(m,n){var o=m.filter(function(p){return p.getKey()===n;});o.size>0||h(0);return o.first();};l.prototype.$PagesManagerMessagingFilterStore10=function(m,n){c('PagesManagerMessagingLogger').logMessagesSectionViewEvent(m,n.getKey());c('PagesManagerMessagingLogger').logPageViewFolderEvent(m,n,c('MessageThreadViewSource').NEW_MESSAGETAB);this.$PagesManagerMessagingFilterStore4=n;this.$PagesManagerMessagingFilterStore5=this.getFilterByKey(n.getSupportedFilterKeys().first());this.__emitChange();};l.prototype.$PagesManagerMessagingFilterStore11=function(m,n){if(n.getKey()===c('MessagingTag').UNREAD){this.$PagesManagerMessagingFilterStore5=n;this.$PagesManagerMessagingFilterStore4=this.$PagesManagerMessagingFilterStore2.first();}else{this.$PagesManagerMessagingFilterStore4.assertSupportsFilter(n);this.$PagesManagerMessagingFilterStore5=n;}this.__emitChange();};l.prototype.getFilterByKey=function(m){return this.$PagesManagerMessagingFilterStore9(this.$PagesManagerMessagingFilterStore1,m);};l.prototype.getAvailableFolders=function(){return this.$PagesManagerMessagingFilterStore2;};l.prototype.getAvailableFilters=function(){return c('immutable').List(this.$PagesManagerMessagingFilterStore1.filter(function(m){return this.getActiveFolder().getSupportedFilterKeys().indexOf(m.getKey())>=0;}.bind(this)));};l.prototype.getActiveFolder=function(){return this.$PagesManagerMessagingFilterStore4;};l.prototype.getActiveFilter=function(){var m=c('PagesManagerMessagingSearchStore').getCurrentSearchCustomTagNames();return this.$PagesManagerMessagingFilterStore6||m.size!==0&&this.$PagesManagerMessagingFilterStore5.getKey()!==c('PagesManagerMessagingNavigationUnitKey').FILTERS.FLAGGED?this.$PagesManagerMessagingFilterStore8:this.$PagesManagerMessagingFilterStore5;};l.prototype.getActiveFolderName=function(){return this.getActiveFolder().getKey();};l.prototype.getActiveFilterName=function(){return this.getActiveFilter().getKey();};l.prototype.getFolderDropDown=function(){if(this.getActiveFilterName()===c('MessagingTag').UNREAD){return this.$PagesManagerMessagingFilterStore2;}else{var m=this.$PagesManagerMessagingFilterStore3.filter(function(n){return n.getKey()!==this.$PagesManagerMessagingFilterStore4.getKey();}.bind(this));return c('immutable').List(m);}};l.prototype.getActiveFolderDropDown=function(){if(this.getActiveFilterName()===c('MessagingTag').UNREAD){return this.$PagesManagerMessagingFilterStore5;}else return this.$PagesManagerMessagingFilterStore4;};l.prototype.getUnitNotificationCountMap=function(m){var n=new (c('Map'))(),o=function(p){return n.set(p,p.getNotificationCount(m,{activeFolder:this.getActiveFolder(),activeFilter:this.getActiveFilter()}));}.bind(this);this.getAvailableFolders().map(o);this.getAvailableFilters().map(o);return n;};l.prototype.getNavigationKey=function(){return this.getActiveFolderName()+'|'+this.getActiveFilterName()+'|'+(c('PagesManagerMessagingSearchStore').getCustomTagsFilterName()||'');};l.prototype.getIsInboxAll=function(){return this.getNavigationKey()===k;};l.prototype.getIsFiltering=function(){return this.$PagesManagerMessagingFilterStore7;};l.prototype.__onDispatch=function(m){switch(m.type){case c('PagesManagerActionType').NAVIGATION_UNIT.CHANGE:if(this.getAvailableFolders().indexOf(m.unit)>=0){this.$PagesManagerMessagingFilterStore10(m.pageID,m.unit);}else this.$PagesManagerMessagingFilterStore11(m.pageID,m.unit);break;case c('PagesManagerActionType').NAVIGATION_UNIT.NOTIFICATION_COUNT_CHANGE:this.__emitChange();break;case c('PagesManagerActionType').SEARCH.ADD_SEARCH_CUSTOM_TAG:case c('PagesManagerActionType').SEARCH.REMOVE_SEARCH_CUSTOM_TAG:case c('PagesManagerActionType').SEARCH.CHANGE_SEARCH_TERM:c('PagesManagerDispatcher').waitFor([c('PagesManagerMessagingSearchStore').getDispatchToken()]);var n=c('PagesManagerMessagingSearchStore').getCurrentSearchTerm()!=='';this.$PagesManagerMessagingFilterStore7=false;if(this.$PagesManagerMessagingFilterStore6!==n){this.$PagesManagerMessagingFilterStore6=n;this.__emitChange();}break;case c('PagesManagerActionType').FILTER_PANEL.TOGGLE_PANEL:this.$PagesManagerMessagingFilterStore7=m.showPanel;this.__emitChange();}};f.exports=new l();}),null);
__d('PagesMessagingSearchMode',['keyMirrorRecursive'],(function a(b,c,d,e,f,g){'use strict';var h=c('keyMirrorRecursive')({ALL:'',NAME_SEARCH:'',KEYWORD_SEARCH:'',MESSAGE_SEARCH:'',NONE:''});f.exports=h;}),null);
__d('PagesManagerMessagingThreadlistAction',['PagesManagerMessagingActionType','PagesManagerDispatcher','MercuryThreadlistConstants','PagesAdminToolUIActionType','PagesManagerLogger','PagesMessagingSearchMode'],(function a(b,c,d,e,f,g){var h={initThreadlist:function i(j){this.fetchThreadlist(j,0,c('MercuryThreadlistConstants').WEBMESSENGER_THREAD_COUNT);},fetchThreadlist:function i(j,k,l){c('PagesManagerDispatcher').dispatch({offset:k,limit:l,pageID:j,type:c('PagesManagerMessagingActionType').LIST.FETCH});},updateThreadlist:function i(j){c('PagesManagerDispatcher').dispatch({pageID:j,type:c('PagesManagerMessagingActionType').LIST.UPDATED});},switchPriorityView:function i(j){c('PagesManagerDispatcher').dispatch({isPriorityOn:j,type:c('PagesManagerMessagingActionType').LIST.SWITCH_PRIORITY});},setPriorityGK:function i(j){c('PagesManagerDispatcher').dispatch({isPriorityEnabled:j,type:c('PagesManagerMessagingActionType').LIST.SET_PRIORITY_GK});},changeSearchTerm:function i(j,k,l,m){c('PagesManagerDispatcher').dispatch({type:c('PagesManagerMessagingActionType').SEARCH.CHANGE_SEARCH_TERM,searchTerm:k,pageID:j,activeFolder:l,searchMode:m});},changeIsSearchingNameStatus:function i(j){c('PagesManagerDispatcher').dispatch({type:c('PagesManagerMessagingActionType').MESSAGE_SEARCH.NAME_SEARCH_UPDATE,isSearching:j});},changeIsSearchingSnippetStatus:function i(j){c('PagesManagerDispatcher').dispatch({type:c('PagesManagerMessagingActionType').MESSAGE_SEARCH.SNIPPET_SEARCH_UPDATE,isSearching:j});},loadMoreNameResult:function i(j,k,l){c('PagesManagerDispatcher').dispatch({type:c('PagesManagerMessagingActionType').MESSAGE_SEARCH.LOAD_MORE_NAME_RESULT,searchTerm:k,pageID:j,activeFolder:l});},loadMoreSnippetResult:function i(j,k,l){c('PagesManagerDispatcher').dispatch({type:c('PagesManagerMessagingActionType').MESSAGE_SEARCH.LOAD_MORE_SNIPPET_RESULT,searchTerm:k,pageID:j,activeFolder:l});},resetSearch:function i(j){h.changeSearchTerm(j,'','',c('PagesMessagingSearchMode').NONE);},addSearchCustomTag:function i(j,k,l){c('PagesManagerLogger').logMessageInboxUIAction(c('PagesAdminToolUIActionType').MESSAGE_INBOX_CLICK_ADD_SEARCH_TAGS,j,{tag_name:k,position:l});c('PagesManagerDispatcher').dispatch({type:c('PagesManagerMessagingActionType').SEARCH.ADD_SEARCH_CUSTOM_TAG,pageID:j,tagName:k});},removeSearchCustomTag:function i(j,k,l){c('PagesManagerLogger').logMessageInboxUIAction(c('PagesAdminToolUIActionType').MESSAGE_INBOX_CLICK_REMOVE_SEARCH_TAGS,j,{tag_name:k,position:l});c('PagesManagerDispatcher').dispatch({type:c('PagesManagerMessagingActionType').SEARCH.REMOVE_SEARCH_CUSTOM_TAG,pageID:j,tagName:k});},fetchCustomTagThreadCounts:function i(j){c('PagesManagerDispatcher').dispatch({type:c('PagesManagerMessagingActionType').SEARCH.FETCH_CUSTOM_TAG_THREAD_COUNTS,pageID:j});},searchNameResult:function i(j,k,l){c('PagesManagerDispatcher').dispatch({type:c('PagesManagerMessagingActionType').MESSAGE_SEARCH.CHANGE_NAME_SEARCH_TERM,searchTerm:k,pageID:j,activeFolder:l});},searchMessageResult:function i(j,k,l){c('PagesManagerDispatcher').dispatch({type:c('PagesManagerMessagingActionType').MESSAGE_SEARCH.CHANGE_MESSAGE_SEARCH_TERM,searchTerm:k,pageID:j,activeFolder:l});}};f.exports=h;}),null);
__d("XPagesCustomTagMessageThreadCountsController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pages\/custom_tags\/message_thread_counts\/",{intersect_custom_tags:{type:"StringVector",defaultValue:[]},folder:{type:"String",defaultValue:"inbox"},key:{type:"String",required:true},enum_tag:{type:"Enum",enumType:1}});}),null);
__d('PagesManagerMessagingSearchStore',['ActorURI','PagesManagerMessagingActionType','AsyncRequest','PagesManagerDispatcher','FluxStore','immutable','Map','MercurySearchSnippetResults','MercurySearchThreadResults','MercurySearchThreadResultOrderer','MercurySearchThreadsStrategy','PageMessageEnumTag','PagesManagerCustomTagsActionType','PagesManagerCustomTagsStore','PagesManagerMessagingFilterStore','PagesMessengerThreadUtils','PagesMessagingSearchMode','PagesManagerMessagingThreadlistAction','PagesManagerMessagingNavigationUnitKey','XPagesCustomTagMessageThreadCountsController','emptyFunction','guid'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FluxStore'));i=h&&h.prototype;function j(){i.constructor.call(this,c('PagesManagerDispatcher'));this.$PagesManagerMessagingSearchStore2='';this.$PagesManagerMessagingSearchStore3=false;this.$PagesManagerMessagingSearchStore4=false;this.$PagesManagerMessagingSearchStore5=false;this.$PagesManagerMessagingSearchStore6=false;this.$PagesManagerMessagingSearchStore7=false;this.$PagesManagerMessagingSearchStore8='';this.$PagesManagerMessagingSearchStore10=[];this.$PagesManagerMessagingSearchStore11={};this.$PagesManagerMessagingSearchStore1=[];this.$PagesManagerMessagingSearchStore9=c('PagesMessagingSearchMode').NONE;this.$PagesManagerMessagingSearchStore12={};}j.prototype.getCurrentSearchTerm=function(){return this.$PagesManagerMessagingSearchStore2;};j.prototype.getIsInSearchMode=function(){return this.$PagesManagerMessagingSearchStore5;};j.prototype.getSearchMode=function(){return this.$PagesManagerMessagingSearchStore9;};j.prototype.getThreadNameSearchResults=function(){return this.$PagesManagerMessagingSearchStore10;};j.prototype.getThreadSnippetSearchResults=function(){return this.$PagesManagerMessagingSearchStore11;};j.prototype.getIsSearchingName=function(){return this.$PagesManagerMessagingSearchStore6;};j.prototype.getIsSearchingSnippet=function(){return this.$PagesManagerMessagingSearchStore7;};j.prototype.hasMoreNameSearchResult=function(){return this.$PagesManagerMessagingSearchStore3;};j.prototype.hasMoreSnippetSearchResult=function(){return this.$PagesManagerMessagingSearchStore4;};j.prototype.getCurrentSearchCustomTagNames=function(){return c('immutable').List(this.$PagesManagerMessagingSearchStore1);};j.prototype.getCustomTagsFilterName=function(){if(this.$PagesManagerMessagingSearchStore1.length===0)return null;return c('PagesMessengerThreadUtils').getCustomTagsFilter(this.$PagesManagerMessagingSearchStore1,c('PagesManagerMessagingFilterStore').getActiveFilterName()===c('PagesManagerMessagingNavigationUnitKey').FILTERS.FLAGGED);};j.prototype.getCurrentSearchCustomTagThreadCounts=function(){var k=this.$PagesManagerMessagingSearchStore13();if(!k||!(k in this.$PagesManagerMessagingSearchStore12))return null;return c('immutable').OrderedMap(this.$PagesManagerMessagingSearchStore12[k]);};j.prototype.$PagesManagerMessagingSearchStore14=function(k,l){return k+'|'+l;};j.prototype.$PagesManagerMessagingSearchStore13=function(){return this.$PagesManagerMessagingSearchStore14(c('PagesManagerMessagingFilterStore').getActiveFolderName(),this.getCustomTagsFilterName()||'');};j.prototype.$PagesManagerMessagingSearchStore15=function(k){var l=this.$PagesManagerMessagingSearchStore13();if(!l||l in this.$PagesManagerMessagingSearchStore12)return;new (c('AsyncRequest'))().setURI(c('ActorURI').create(c('XPagesCustomTagMessageThreadCountsController').getURIBuilder().setStringVector('intersect_custom_tags',this.$PagesManagerMessagingSearchStore1).setEnum('enum_tag',c('PagesManagerMessagingFilterStore').getActiveFilterName()===c('PagesManagerMessagingNavigationUnitKey').FILTERS.FLAGGED?c('PageMessageEnumTag').FLAG:null).setString('folder',c('PagesManagerMessagingFilterStore').getActiveFolderName()).setString('key',this.$PagesManagerMessagingSearchStore13()).getURI(),k)).setHandler(function(m){var n=m.payload.threadCounts,o=Object.keys(n).sort(function(q,r){return n[r]-n[q];}),p=new (c('Map'))();o.map(function(q){p.set(q,n[q]);});if(this.__dispatcher.isDispatching()){this.$PagesManagerMessagingSearchStore12[m.payload.key]=p;if(m.payload.key===this.$PagesManagerMessagingSearchStore13())this.__emitChange();}else this.__dispatcher.dispatch({type:c('PagesManagerMessagingActionType').SEARCH.UPDATE_CUSTOM_TAG_THREAD_COUNTS,key:m.payload.key,threadCounts:p});}.bind(this)).send();};j.prototype.__onDispatch=function(k){switch(k.type){case c('PagesManagerMessagingActionType').SEARCH.CHANGE_SEARCH_TERM:this.$PagesManagerMessagingSearchStore2=k.searchTerm;if(this.$PagesManagerMessagingSearchStore2===''){this.$PagesManagerMessagingSearchStore10=[];this.$PagesManagerMessagingSearchStore5=false;this.$PagesManagerMessagingSearchStore9=c('PagesMessagingSearchMode').NONE;}else{this.$PagesManagerMessagingSearchStore5=true;this.$PagesManagerMessagingSearchStore9=k.searchMode;this.$PagesManagerMessagingSearchStore16(k.pageID,k.searchTerm,k.activeFolder,k.searchMode);}this.__emitChange();break;case c('PagesManagerMessagingActionType').MESSAGE_SEARCH.NAME_SEARCH_UPDATE:this.$PagesManagerMessagingSearchStore6=k.isSearching;this.__emitChange();break;case c('PagesManagerMessagingActionType').MESSAGE_SEARCH.SNIPPET_SEARCH_UPDATE:this.$PagesManagerMessagingSearchStore7=k.isSearching;this.__emitChange();break;case c('PagesManagerMessagingActionType').MESSAGE_SEARCH.LOAD_MORE_NAME_RESULT:this.$PagesManagerMessagingSearchStore17(k.pageID,k.searchTerm,k.activeFolder);this.__emitChange();break;case c('PagesManagerMessagingActionType').MESSAGE_SEARCH.LOAD_MORE_SNIPPET_RESULT:this.$PagesManagerMessagingSearchStore18(k.pageID,k.searchTerm,k.activeFolder);this.__emitChange();break;case c('PagesManagerMessagingActionType').SEARCH.ADD_SEARCH_CUSTOM_TAG:c('PagesManagerDispatcher').waitFor([c('PagesManagerCustomTagsStore').getDispatchToken()]);var l=c('PagesManagerCustomTagsStore').hasCustomTag(k.pageID,k.tagName);if(l&&this.$PagesManagerMessagingSearchStore1.indexOf(k.tagName)<0){this.$PagesManagerMessagingSearchStore2='';this.$PagesManagerMessagingSearchStore5=false;this.$PagesManagerMessagingSearchStore1.push(k.tagName);this.__emitChange();}break;case c('PagesManagerMessagingActionType').SEARCH.REMOVE_SEARCH_CUSTOM_TAG:case c('PagesManagerCustomTagsActionType').DELETE:var m=this.$PagesManagerMessagingSearchStore1.indexOf(k.tagName);if(m>=0){this.$PagesManagerMessagingSearchStore1.splice(m,1);this.__emitChange();}break;case c('PagesManagerMessagingActionType').SEARCH.FETCH_CUSTOM_TAG_THREAD_COUNTS:this.$PagesManagerMessagingSearchStore15(k.pageID);break;case c('PagesManagerCustomTagsActionType').UPDATE:if(k.hasTagListChanged){this.$PagesManagerMessagingSearchStore12={};this.$PagesManagerMessagingSearchStore15(k.pageID);}this.__emitChange();break;case c('PagesManagerMessagingActionType').SEARCH.UPDATE_CUSTOM_TAG_THREAD_COUNTS:this.$PagesManagerMessagingSearchStore12[k.key]=k.threadCounts;if(k.key===this.$PagesManagerMessagingSearchStore13())this.__emitChange();break;}};j.prototype.$PagesManagerMessagingSearchStore16=function(k,l,m,n){var o=c('guid')();this.$PagesManagerMessagingSearchStore8=o;var p=c('MercurySearchThreadsStrategy').getForFBID(k),q=c('MercurySearchSnippetResults').getForFBID(k),r=c('MercurySearchThreadResultOrderer').getForFBID(k);if(n===c('PagesMessagingSearchMode').ALL||n===c('PagesMessagingSearchMode').NAME_SEARCH){this.$PagesManagerMessagingSearchStore6=true;p.search(l,function(s){this.$PagesManagerMessagingSearchStore10=r.filterThreadsInFolder(s,m);this.__emitChange();}.bind(this),function(s,t){if(o!==this.$PagesManagerMessagingSearchStore8)return;var u=r.filterThreadsInFolder(s,m);this.$PagesManagerMessagingSearchStore10=r.orderResults(this.$PagesManagerMessagingSearchStore10,[],u,m);this.$PagesManagerMessagingSearchStore3=!t;if(this.__dispatcher.isDispatching()){this.$PagesManagerMessagingSearchStore6=false;this.__emitChange();}else c('PagesManagerMessagingThreadlistAction').changeIsSearchingNameStatus(false);}.bind(this),c('emptyFunction'));}if(n===c('PagesMessagingSearchMode').ALL||n===c('PagesMessagingSearchMode').MESSAGE_SEARCH){this.$PagesManagerMessagingSearchStore7=true;q.getAllThreadSearchResults(l,function(s,t,u){this.$PagesManagerMessagingSearchStore11=this.$PagesManagerMessagingSearchStore19(t,s,m);this.$PagesManagerMessagingSearchStore4=!u;if(this.__dispatcher.isDispatching()){this.$PagesManagerMessagingSearchStore7=false;this.__emitChange();}else c('PagesManagerMessagingThreadlistAction').changeIsSearchingSnippetStatus(false);}.bind(this,r));}this.__emitChange();};j.prototype.$PagesManagerMessagingSearchStore19=function(k,l,m){var n=Object.keys(k),o=l.filterThreadsInFolder(n,m),p={};o.forEach(function(q){p[q]=k[q];});return p;};j.prototype.$PagesManagerMessagingSearchStore17=function(k,l,m){var n=c('MercurySearchThreadResults').getForFBID(k),o=c('MercurySearchThreadResultOrderer').getForFBID(k);this.$PagesManagerMessagingSearchStore6=true;n.getMoreThreadlist(l,function(p,q){var r=o.filterThreadsInFolder(p,m);this.$PagesManagerMessagingSearchStore10=r;if(this.__dispatcher.isDispatching()){this.$PagesManagerMessagingSearchStore6=false;this.__emitChange();}else c('PagesManagerMessagingThreadlistAction').changeIsSearchingNameStatus(false);}.bind(this));};j.prototype.$PagesManagerMessagingSearchStore18=function(k,l,m){var n=c('MercurySearchSnippetResults').getForFBID(k),o=c('MercurySearchThreadResultOrderer').getForFBID(k);n.getAllThreadSearchMoreResults(l,function(p,q,r){this.$PagesManagerMessagingSearchStore4=!r;this.$PagesManagerMessagingSearchStore11=this.$PagesManagerMessagingSearchStore19(q,p,m);if(this.__dispatcher.isDispatching()){this.$PagesManagerMessagingSearchStore7=false;this.__emitChange();}else c('PagesManagerMessagingThreadlistAction').changeIsSearchingSnippetStatus(false);}.bind(this,o));};f.exports=new j();}),null);
__d('PagesManagerMessagingMessageDateBreak.react',['cx','MessengerDateBreak.react','React'],(function a(b,c,d,e,f,g,h){var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;function k(l){'use strict';j.constructor.call(this,l);}k.prototype.render=function(){'use strict';return (c('React').createElement(c('MessengerDateBreak.react'),{className:"_2hvw",date:this.props.date}));};f.exports=k;}),null);
__d('PagesManagerMessagingIntentVerifier.react',['cx','fbt','PagesManagerMessagingClassifierActions','Link.react','React','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=k.constructor).call.apply(m,[this].concat(p)),this.$PagesManagerMessagingIntentVerifier1=function(r){c('PagesManagerMessagingClassifierActions').verifyIntentClassification(this.props.messageID,this.props.message,false);r.stopPropagation();}.bind(this),this.$PagesManagerMessagingIntentVerifier2=function(r){c('PagesManagerMessagingClassifierActions').verifyIntentClassification(this.props.messageID,this.props.message,true);r.stopPropagation();}.bind(this),n;}l.prototype.render=function(){return (c('React').createElement('div',{className:c('joinClasses')(this.props.className,"_45zu")},c('React').createElement('span',null,i._("Is this about {intent}?",[i.param('intent',this.props.intent)])),c('React').createElement(c('Link.react'),{onClick:this.$PagesManagerMessagingIntentVerifier2},i._("Yes")),c('React').createElement(c('Link.react'),{onClick:this.$PagesManagerMessagingIntentVerifier1},i._("No"))));};f.exports=l;}),null);
__d('PagesManagerMessagingIntentVerificationContainer.react',['PagesManagerMessagingClassifierStore','FluxContainer','PagesManagerMessagingIntentVerifier.react','React'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;j.getStores=function(k){return [c('PagesManagerMessagingClassifierStore')];};j.calculateState=function(k,l){return {intentDescription:c('PagesManagerMessagingClassifierStore').getIntentDescriptionByMessageID(l.message.message_id),isFeatureEnabled:c('PagesManagerMessagingClassifierStore').getIsClassifierVerificationEnabled()};};function j(k){i.constructor.call(this,k);}j.prototype.render=function(){var k=this.state.intentDescription;if(!k||!this.state.isFeatureEnabled)return null;return (c('React').createElement(c('PagesManagerMessagingIntentVerifier.react'),{intent:k,messageID:this.props.message.message_id,message:this.props.message.body}));};f.exports=c('FluxContainer').create(j,{withProps:true,pure:true});}),null);
__d('PagesManagerMessagingMessageGroup.react',['MessengerMessageGroup.react','PagesManagerMessagingIntentVerificationContainer.react','React'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;j.prototype.render=function(){return (c('React').createElement(c('MessengerMessageGroup.react'),babelHelpers['extends']({},this.props,{pageCustomAction:c('PagesManagerMessagingIntentVerificationContainer.react')})));};function j(){h.apply(this,arguments);}f.exports=j;}),null);
__d('PagesManagerMessagingMessageList.react',['cx','ChatTypingIndicators.react','immutable','MessageList.react','MessengerCollapsedLogMessageGroup.react','MessengerLogMessage.react','MessengerSpinner.react','MessengerTypingIndicator.react','PagesEventObserver','PagesEventType','PagesManagerMessagingMessageDateBreak.react','PagesManagerMessagingMessageGroup.react','React','MercuryShareAttachmentRenderLocations','ScrollableArea.react','debounce'],(function a(b,c,d,e,f,g,h){var i,j,k='message_tab';i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(m,n){'use strict';j.constructor.call(this,m,n);this.$PagesManagerMessagingMessageList1=true;this.prevScrollTop=0;this.prevScrollHeight=0;}l.prototype.componentDidUpdate=function(m){'use strict';var n=this.props.messagelist.last()&&this.props.messagelist.last().thread_fbid,o=m.messagelist.last()&&m.messagelist.last().thread_fbid;if(m.messagelist.size===0&&this.props.messagelist.size!==0||n!=o){this.refs.scrollableArea&&this.refs.scrollableArea.getArea().scrollToBottom();}else if(this.props.messagelist.size!==m.messagelist.size)this.$PagesManagerMessagingMessageList2(this.prevScrollHeight,this.prevScrollTop);};l.prototype.$PagesManagerMessagingMessageList2=function(m,n){'use strict';if(!this.refs.scrollableArea)return;var o=this.refs.scrollableArea.getArea(),p=o.getScrollHeight()-m+n;o.setScrollTop(p,false);};l.prototype.$PagesManagerMessagingMessageList3=function(){'use strict';if(!this.refs.scrollableArea)return;var m=this.refs.scrollableArea.getArea(),n=this.prevScrollTop,o=this.prevScrollHeight;this.$PagesManagerMessagingMessageList4();if(m.isScrolledToTop()){this.props.fetchEarlierMessages();}else if(m.isScrolledToBottom()){this.$PagesManagerMessagingMessageList5();}else{if(m.getScrollTop()===n&&m.getScrollHeight()!==o)this.$PagesManagerMessagingMessageList2(o,n);this.$PagesManagerMessagingMessageList6();}};l.prototype.$PagesManagerMessagingMessageList5=function(){'use strict';if(!this.$PagesManagerMessagingMessageList1)this.$PagesManagerMessagingMessageList1=true;};l.prototype.$PagesManagerMessagingMessageList6=function(){'use strict';if(this.$PagesManagerMessagingMessageList1)this.$PagesManagerMessagingMessageList1=false;};l.prototype.$PagesManagerMessagingMessageList4=function(){'use strict';var m=this.refs.scrollableArea;this.prevScrollHeight=m?m.getArea().getScrollHeight():0;this.prevScrollTop=m?m.getArea().getScrollTop():0;};l.prototype.$PagesManagerMessagingMessageList7=function(){'use strict';var m=Math.floor(this.props.scrollHeight/130);return (c('React').createElement('div',{className:"_31m6",style:{height:this.props.scrollHeight}},c('React').createElement('div',{className:"_31m7",style:{height:130*m}},this.$PagesManagerMessagingMessageList8(m))));};l.prototype.$PagesManagerMessagingMessageList8=function(m){'use strict';var n=c('React').createElement('div',{className:"_1vrr"},c('React').createElement('div',{className:"_31m8"}),c('React').createElement('div',{className:"_31ma"}),c('React').createElement('div',{className:"_31mb"}),c('React').createElement('div',{className:"_31mc"}),c('React').createElement('div',{className:"_31me"}),c('React').createElement('div',{className:"_31mf"}),c('React').createElement('div',{className:"_31mg"}),c('React').createElement('div',{className:"_31mh"}),c('React').createElement('div',{className:"_31mi"}),c('React').createElement('div',{className:"_31mj"}),c('React').createElement('div',{className:"_31mk"}),c('React').createElement('div',{className:"_31ml"}),c('React').createElement('div',{className:"_31mm"}),c('React').createElement('div',{className:"_31mn"}),c('React').createElement('div',{className:"_31mo"}),c('React').createElement('div',{className:"_31mp"}),c('React').createElement('div',{className:"_31mq"})),o=[];for(var p=0;p<m;p++)o.push(c('React').cloneElement(n,{key:'loading'+p}));return (c('React').createElement('div',{className:"_1vrs"},o));};l.prototype.$PagesManagerMessagingMessageList9=function(){'use strict';if(!this.props.isLoadingMore)return null;return (c('React').createElement('div',{className:"_2k8v"},c('React').createElement(c('MessengerSpinner.react'),null)));};l.prototype.$PagesManagerMessagingMessageList10=function(){'use strict';c('PagesEventObserver').notify(c('PagesEventType').MESSAGES_VIEW_THREAD,this.props.pageID,{source:k,thread_id:this.props.threadID});return (c('React').createElement('div',{className:"clearfix _1ej0 _2mpc"},c('React').createElement(c('MessageList.react'),{DateBreak:c('PagesManagerMessagingMessageDateBreak.react'),deliveryTimestamp:0,isCanonical:true,isPageMessage:true,location:c('MercuryShareAttachmentRenderLocations').MESSENGER,CollapsedLogMessageGroup:c('MessengerCollapsedLogMessageGroup.react'),LogMessage:c('MessengerLogMessage.react'),MessageGroup:c('PagesManagerMessagingMessageGroup.react'),messages:this.props.messagelist,readReceipts:this.props.readReceipts,viewer:this.props.pageID}),c('React').createElement(c('ChatTypingIndicators.react'),{indicatorClass:c('MessengerTypingIndicator.react'),indicatorsWillShow:function m(){},indicatorsDidShow:function(){this.$PagesManagerMessagingMessageList1&&this.refs.scrollableArea&&this.refs.scrollableArea.getArea().scrollToBottom();}.bind(this),rootClassName:"clearfix _17pz _4gv2",threadID:this.props.threadID,viewer:this.props.pageID})));};l.prototype.render=function(){'use strict';if(this.props.initLoading)return this.$PagesManagerMessagingMessageList7();return (c('React').createElement(c('ScrollableArea.react'),{className:"_11y7",fade:false,height:this.props.scrollHeight,onScroll:c('debounce')(function(){return this.$PagesManagerMessagingMessageList3();}.bind(this),500),ref:'scrollableArea',shadow:false},this.$PagesManagerMessagingMessageList9(),c('React').createElement('div',{className:"_14y3"},this.props.threadID?this.$PagesManagerMessagingMessageList10():c('React').createElement('div',null))));};f.exports=l;}),null);
__d("XPagesContextCardSetIsHiddenController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pages\/customer\/context_card\/set_is_hidden\/",{});}),null);
__d('PagesManagerMessagingMessagelistStore',['PagesManagerMessagingActionType','ActorURI','AsyncRequest','FluxStore','immutable','Map','MercuryMessages','PagesManagerMessagingMessagelistDispatcher','MercuryThreadlistConstants','XPagesContextCardSetIsHiddenController'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('FluxStore'));i=h&&h.prototype;function j(){'use strict';i.constructor.call(this,c('PagesManagerMessagingMessagelistDispatcher'));this.$PagesManagerMessagingMessagelistStore1='';this.$PagesManagerMessagingMessagelistStore2=false;this.$PagesManagerMessagingMessagelistStore3=false;this.$PagesManagerMessagingMessagelistStore4=false;this.$PagesManagerMessagingMessagelistStore6=[];this.$PagesManagerMessagingMessagelistStore7=c('immutable').OrderedMap();this.$PagesManagerMessagingMessagelistStore8=0;this.$PagesManagerMessagingMessagelistStore10=new (c('Map'))();this.$PagesManagerMessagingMessagelistStore11=0;}j.prototype.__onDispatch=function(k){'use strict';switch(k.type){case c('PagesManagerMessagingActionType').LIST.LOADED:this.$PagesManagerMessagingMessagelistStore12(k);this.__emitChange();break;case c('PagesManagerMessagingActionType').LIST.LOADING:this.$PagesManagerMessagingMessagelistStore2=k.isLoading;this.__emitChange();break;case c('PagesManagerMessagingActionType').LIST.LOAD_MORE:this.$PagesManagerMessagingMessagelistStore3=k.isLoadingMore;this.__emitChange();break;case c('PagesManagerMessagingActionType').MESSAGE_LEVEL.READ_RECEIPTS:this.$PagesManagerMessagingMessagelistStore13(k);this.__emitChange();break;case c('PagesManagerMessagingActionType').SET_SCROLL_HEIGHT:var l=k.height;if(l!==this.$PagesManagerMessagingMessagelistStore8){this.$PagesManagerMessagingMessagelistStore8=l;this.__emitChange();}break;case c('PagesManagerMessagingActionType').SET_APPOINTMENT_BANNER_HEIGHT:this.$PagesManagerMessagingMessagelistStore11=k.appointmentBannerHeight;this.__emitChange();break;case c('PagesManagerMessagingActionType').THREAD_LEVEL.UPDATE_THREAD:this.__emitChange();break;case c('PagesManagerMessagingActionType').SET_IS_CONTEXT_CARD_HIDDEN:this.$PagesManagerMessagingMessagelistStore14(k.pageID,k.isHidden);this.__emitChange();break;case c('PagesManagerMessagingActionType').HOT_LIKE.END:this.$PagesManagerMessagingMessagelistStore4=false;this.$PagesManagerMessagingMessagelistStore5=null;break;case c('PagesManagerMessagingActionType').HOT_LIKE.START:this.$PagesManagerMessagingMessagelistStore4=true;this.$PagesManagerMessagingMessagelistStore5=k.preview;this.__emitChange();break;case c('PagesManagerMessagingActionType').BAN.UPDATE:this.$PagesManagerMessagingMessagelistStore15(k.pageID,k.userID,k.isBanned);this.__emitChange();break;default:return;}};j.prototype.$PagesManagerMessagingMessagelistStore12=function(k){'use strict';this.$PagesManagerMessagingMessagelistStore2=false;this.$PagesManagerMessagingMessagelistStore1=k.threadID;this.$PagesManagerMessagingMessagelistStore6=k.data.messages;};j.prototype.$PagesManagerMessagingMessagelistStore13=function(k){'use strict';if(this.$PagesManagerMessagingMessagelistStore1!==k.threadID)this.$PagesManagerMessagingMessagelistStore6=[];this.$PagesManagerMessagingMessagelistStore1=k.threadID;this.$PagesManagerMessagingMessagelistStore7=k.readReceipts;};j.prototype.isLoading=function(){'use strict';return this.$PagesManagerMessagingMessagelistStore2;};j.prototype.isLoadingMore=function(){'use strict';return this.$PagesManagerMessagingMessagelistStore3;};j.prototype.getMessagelist=function(k,l){'use strict';var m;if(l!=this.$PagesManagerMessagingMessagelistStore1)return c('MercuryMessages').getForFBID(k).getThreadMessagesRangeNow(l,0,c('MercuryThreadlistConstants').RECENT_MESSAGES_LIMIT).reverse();if(this.$PagesManagerMessagingMessagelistStore4&&this.$PagesManagerMessagingMessagelistStore5){m=this.$PagesManagerMessagingMessagelistStore6.slice();if(this.$PagesManagerMessagingMessagelistStore5)m.push(this.$PagesManagerMessagingMessagelistStore5);return m;}return this.$PagesManagerMessagingMessagelistStore6;};j.prototype.getScrollHeight=function(){'use strict';return this.$PagesManagerMessagingMessagelistStore8;};j.prototype.getReadReceipts=function(k){'use strict';if(k!=this.$PagesManagerMessagingMessagelistStore1)return c('immutable').OrderedMap();return this.$PagesManagerMessagingMessagelistStore7;};j.prototype.isCardHidden=function(){'use strict';if(this.$PagesManagerMessagingMessagelistStore9===undefined||this.$PagesManagerMessagingMessagelistStore9===null)return null;return this.$PagesManagerMessagingMessagelistStore9;};j.prototype.getAppointmentBannerHeight=function(){'use strict';return this.$PagesManagerMessagingMessagelistStore11;};j.prototype.$PagesManagerMessagingMessagelistStore14=function(k,l){'use strict';this.$PagesManagerMessagingMessagelistStore9=l;var m=c('ActorURI').create(c('XPagesContextCardSetIsHiddenController').getURIBuilder().getURI(),k);new (c('AsyncRequest'))().setURI(m).setData({is_hidden:l}).setMethod('POST').send();};j.prototype.$PagesManagerMessagingMessagelistStore16=function(k,l){'use strict';return k+'_'+l;};j.prototype.getIsUserBanned=function(k,l){'use strict';return this.$PagesManagerMessagingMessagelistStore10.get(this.$PagesManagerMessagingMessagelistStore16(k,l));};j.prototype.$PagesManagerMessagingMessagelistStore15=function(k,l,m){'use strict';this.$PagesManagerMessagingMessagelistStore10.set(this.$PagesManagerMessagingMessagelistStore16(k,l),m);};f.exports=new j(c('PagesManagerMessagingMessagelistDispatcher'));}),null);
__d('PagesManagerMessagingFilterActions',['PagesManagerActionType','PagesManagerDispatcher','PagesManagerMessagingThreadlistAction','PagesManagerNavigationUnit'],(function a(b,c,d,e,f,g){'use strict';var h={changeFilter:function i(j,k){c('PagesManagerDispatcher').dispatch({unit:k,pageID:j,type:c('PagesManagerActionType').NAVIGATION_UNIT.CHANGE});c('PagesManagerMessagingThreadlistAction').resetSearch(j);},notifyNotificationCountChanged:function i(j){c('PagesManagerDispatcher').dispatch({pageID:j,type:c('PagesManagerActionType').NAVIGATION_UNIT.NOTIFICATION_COUNT_CHANGE});},toggleFilterPanel:function i(j,k){c('PagesManagerDispatcher').dispatch({pageID:j,showPanel:k,type:c('PagesManagerActionType').FILTER_PANEL.TOGGLE_PANEL});}};f.exports=h;}),null);
__d('PagesManagerMessagingPriorityNavigationUnit',['fbt','PagesManagerNavigationUnit','PagesManagerMessagingNavigationUnitKey'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('PagesManagerNavigationUnit'));j=i&&i.prototype;function k(){j.constructor.call(this,c('PagesManagerMessagingNavigationUnitKey').FILTERS.PRIORITY);}k.prototype.getDisplayTitle=function(){return h._("Priority view");};f.exports=k;}),null);
__d('PagesManagerMessagingPriorityStore',['FluxStore','MercuryFilters','MercuryPageOrderedThreadlist','PagesManagerActionType','PagesManagerDispatcher','PagesManagerMessagingPriorityNavigationUnit','PagesManagerMessagingInboxNavigationUnit','PagesManagerMessagingAllNavigationUnit'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=new (c('PagesManagerMessagingInboxNavigationUnit'))(),k=new (c('PagesManagerMessagingPriorityNavigationUnit'))(),l=new (c('PagesManagerMessagingAllNavigationUnit'))();h=babelHelpers.inherits(m,c('FluxStore'));i=h&&h.prototype;function m(){i.constructor.call(this,c('PagesManagerDispatcher'));this.$PagesManagerMessagingPriorityStore1=true;this.$PagesManagerMessagingPriorityStore2=true;this.$PagesManagerMessagingPriorityStore3=false;this.$PagesManagerMessagingPriorityStore4=false;this.$PagesManagerMessagingPriorityStore5=0;}m.prototype.__onDispatch=function(n){switch(n.type){case c('PagesManagerActionType').LIST.FETCH:if(this.$PagesManagerMessagingPriorityStore4)this.$PagesManagerMessagingPriorityStore6(n);break;case c('PagesManagerActionType').LIST.LOADING:if(this.$PagesManagerMessagingPriorityStore4){this.$PagesManagerMessagingPriorityStore3=true;this.__emitChange();}break;case c('PagesManagerActionType').LIST.SWITCH_PRIORITY:this.$PagesManagerMessagingPriorityStore4=n.isPriorityOn;break;default:return;}};m.prototype.$PagesManagerMessagingPriorityStore7=function(n,o,p){var q=c('MercuryPageOrderedThreadlist').getForFBID(n);q.getFilteredThreadlist(o,p+1,j.getKey(),k.getKey(),function(r){var s=r.length>p;this.$PagesManagerMessagingPriorityStore8(s,s);if(!s)this.$PagesManagerMessagingPriorityStore9(n,o,p);}.bind(this));};m.prototype.$PagesManagerMessagingPriorityStore9=function(n,o,p){var q=c('MercuryPageOrderedThreadlist').getForFBID(n),r=q.getAvailableThreadlistNow(j.getKey(),k.getKey());q.getFilteredThreadlist(this.$PagesManagerMessagingPriorityStore5,p+1,j.getKey(),l.getKey(),function(s){var t=s.length>p;s=t?s.slice(0,-1):s;s=this.$PagesManagerMessagingPriorityStore10(s,r);q.addNonPriorityThreadsWithoutSort(s);this.$PagesManagerMessagingPriorityStore5+=p;this.$PagesManagerMessagingPriorityStore11(t);}.bind(this));return;};m.prototype.$PagesManagerMessagingPriorityStore12=function(n){var o=c('MercuryPageOrderedThreadlist').getForFBID(n);return o.getAvailableThreadlistNow(j.getKey(),k.getKey());};m.prototype.$PagesManagerMessagingPriorityStore13=function(n){if(this.$PagesManagerMessagingPriorityStore2)return [];var o=c('MercuryPageOrderedThreadlist').getForFBID(n);return o.getAvailableThreadlistNow(j.getKey(),c('MercuryFilters').NONPRIORITY);};m.prototype.$PagesManagerMessagingPriorityStore6=function(n){var o=n.pageID,p=n.offset,q=n.limit;this.$PagesManagerMessagingPriorityStore3=true;if(this.$PagesManagerMessagingPriorityStore2){var r=this.$PagesManagerMessagingPriorityStore14(o,p+q);if(r){this.$PagesManagerMessagingPriorityStore8(this.$PagesManagerMessagingPriorityStore2,true);}else this.$PagesManagerMessagingPriorityStore7(o,p,q);}else{var s=this.$PagesManagerMessagingPriorityStore15(o,this.$PagesManagerMessagingPriorityStore5+q);if(s){this.$PagesManagerMessagingPriorityStore11(this.$PagesManagerMessagingPriorityStore1);}else this.$PagesManagerMessagingPriorityStore9(o,p,q);}};m.prototype.$PagesManagerMessagingPriorityStore14=function(n,o){var p=c('MercuryPageOrderedThreadlist').getForFBID(n);return p.getThreadCount(j.getKey(),k.getKey())>=o;};m.prototype.$PagesManagerMessagingPriorityStore15=function(n,o){var p=c('MercuryPageOrderedThreadlist').getForFBID(n);return p.hasLoadedThreadlist(j.getKey(),l.getKey())||p.getThreadCount(j.getKey(),l.getKey())>=o;};m.prototype.$PagesManagerMessagingPriorityStore8=function(n,o){this.$PagesManagerMessagingPriorityStore3=!o;this.$PagesManagerMessagingPriorityStore2=n;if(!this.__dispatcher.isDispatching()&&o)this.__dispatcher.dispatch({type:c('PagesManagerActionType').LIST.FETCHED});};m.prototype.$PagesManagerMessagingPriorityStore11=function(n){this.$PagesManagerMessagingPriorityStore3=false;this.$PagesManagerMessagingPriorityStore1=n;if(!this.__dispatcher.isDispatching())this.__dispatcher.dispatch({type:c('PagesManagerActionType').LIST.FETCHED});};m.prototype.$PagesManagerMessagingPriorityStore10=function(n,o){return n.filter(function(p){return !o.includes(p);});};m.prototype.getIsPriorityMode=function(){return this.$PagesManagerMessagingPriorityStore4;};m.prototype.getPriorityItemList=function(n){var o=this.$PagesManagerMessagingPriorityStore12(n);return this.$PagesManagerMessagingPriorityStore2&&o.length>0?o.slice(0,o.length-1):o;};m.prototype.getNonPriorityItemList=function(n){var o=this.$PagesManagerMessagingPriorityStore13(n);return this.$PagesManagerMessagingPriorityStore1&&o.length>0?o.slice(0,o.length-1):o;};m.prototype.hasMorePriorityItem=function(){return this.$PagesManagerMessagingPriorityStore2;};m.prototype.hasMoreNonPriorityItem=function(){return this.$PagesManagerMessagingPriorityStore1;};m.prototype.isLoading=function(){return this.$PagesManagerMessagingPriorityStore3;};f.exports=new m();}),null);
__d('PagesManagerMessagingThreadlistStore',['AbstractPagesManagerListStore','PagesManagerActionType','MercuryPageOrderedThreadlist','MercuryThreadlistConstants','PagesManagerDispatcher','PagesManagerMessagingFilterStore','PagesManagerMessagingPriorityStore','PagesManagerMessagingSearchStore'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('AbstractPagesManagerListStore'));i=h&&h.prototype;function j(){'use strict';i.constructor.call(this,c('PagesManagerDispatcher'));}j.prototype.__onDispatch=function(k){'use strict';var l=c('PagesManagerMessagingPriorityStore').getIsPriorityMode();switch(k.type){case c('PagesManagerActionType').LIST.FETCH:if(!l)this.__handleListFetch(k);break;case c('PagesManagerActionType').LIST.LOADING:if(!l){this.__isLoading=true;this.__emitChange();}break;case c('PagesManagerActionType').LIST.SET_PRIORITY_GK:this.__isPriorityEnabled=k.isPriorityEnabled;default:i.__onDispatch.call(this,k);}};j.prototype.$PagesManagerMessagingThreadlistStore1=function(){'use strict';return c('PagesManagerMessagingSearchStore').getCustomTagsFilterName()||c('PagesManagerMessagingFilterStore').getActiveFilterName();};j.prototype.$PagesManagerMessagingThreadlistStore2=function(k,l){'use strict';var m=c('MercuryPageOrderedThreadlist').getForFBID(k);return m.hasLoadedThreadlist(c('PagesManagerMessagingFilterStore').getActiveFolderName(),this.$PagesManagerMessagingThreadlistStore1())||m.getThreadCount(c('PagesManagerMessagingFilterStore').getActiveFolderName(),this.$PagesManagerMessagingThreadlistStore1())>=l;};j.prototype.$PagesManagerMessagingThreadlistStore3=function(k,l,m){'use strict';var n=c('MercuryPageOrderedThreadlist').getForFBID(k);n.getFilteredThreadlist(l,m+1,c('PagesManagerMessagingFilterStore').getActiveFolderName(),this.$PagesManagerMessagingThreadlistStore1(),function(o){var p=o.length>m;this.$PagesManagerMessagingThreadlistStore4(p);}.bind(this));};j.prototype.$PagesManagerMessagingThreadlistStore5=function(k){'use strict';var l=c('MercuryPageOrderedThreadlist').getForFBID(k);return l.getAvailableThreadlistNow(c('PagesManagerMessagingFilterStore').getActiveFolderName(),this.$PagesManagerMessagingThreadlistStore1());};j.prototype.__handleListFetch=function(k){'use strict';var l=k.pageID,m=k.offset,n=k.limit;this.__isLoading=true;var o=this.$PagesManagerMessagingThreadlistStore2(l,m+n);if(o){this.$PagesManagerMessagingThreadlistStore4(this.__hasMoreItem.get(c('PagesManagerMessagingFilterStore').getNavigationKey()));}else this.$PagesManagerMessagingThreadlistStore3(l,m,n);this.__emitChange();};j.prototype.__handleNavigationUnitChange=function(k){'use strict';c('PagesManagerDispatcher').waitFor([c('PagesManagerMessagingFilterStore').getDispatchToken(),c('PagesManagerMessagingSearchStore').getDispatchToken()]);if(this.__isPriorityEnabled&&c('PagesManagerMessagingFilterStore').getIsInboxAll())return;this.__handleListFetch({pageID:k.pageID,offset:0,limit:c('MercuryThreadlistConstants').WEBMESSENGER_THREAD_COUNT});};j.prototype.$PagesManagerMessagingThreadlistStore4=function(k){'use strict';this.__isLoading=false;this.__hasMoreItem.set(c('PagesManagerMessagingFilterStore').getNavigationKey(),k);if(!this.__dispatcher.isDispatching())this.__dispatcher.dispatch({type:c('PagesManagerActionType').LIST.FETCHED});};j.prototype.getItemList=function(k){'use strict';var l=this.$PagesManagerMessagingThreadlistStore5(k),m=c('PagesManagerMessagingFilterStore').getNavigationKey();return this.hasMoreItem(m)&&l.length>0?l.slice(0,l.length-1):l;};f.exports=new j();}),null);
__d('PagesManagerMessagingThreadInteractionHelper',['MercuryPageThreadActions','MercuryThreadIDMap','MercuryThreads','MessagingTag','PagesManagerMessagingFilterActions','PagesManagerMessagingFilterStore','PagesManagerMessagingMessagelistStore','PagesManagerMessagingNavigationUnitKey','PagesManagerMessagingPriorityStore','PagesManagerMessagingThreadlistStore','PagesManagerStore','PagesMessagingActionPlacement','URI'],(function a(b,c,d,e,f,g){'use strict';var h={_getPermalinkURI:function i(j,k){var l=c('MercuryThreadIDMap').getForFBID(k).getServerIDFromClientIDNow(j),m=c('URI').getRequestURI(),n=c('MercuryThreads').getForFBID(k).getThreadMetaNow(j);m.addQueryData({threadid:l,timestamp:n?n.timestamp:null});return m;},_clearURLParam:function i(){var j=c('URI').getRequestURI();j.removeQueryData('threadid');j.removeQueryData('timestamp');window.history.replaceState({},null,j);},handlePermalinkUpdate:function i(j,k){if(!j){this._clearURLParam();return;}var l=h._getPermalinkURI(j,k);window.history.replaceState({},null,l);},handleUnreadStateUpdate:function i(j,k,l){var m=c('PagesManagerStore').getViewingListItem();if(!m)return;var n=c('MercuryThreads').getForFBID(k).getThreadMetaNow(m.toString()),o=c('MercuryThreads').getForFBID(k).getThreadMetaNow(j.toString()),p=c('PagesManagerMessagingMessagelistStore').getMessagelist(k,m.toString()),q=c('PagesManagerMessagingThreadlistStore').getItemList(k,l).length,r=c('MercuryPageThreadActions').getForFBID(k);if(n&&n.unread_count>0||p.length>0){var s=c('PagesManagerMessagingPriorityStore').getIsPriorityMode()&&o&&o.page_thread_info&&o.page_thread_info.is_priority===true,t=c('PagesManagerMessagingPriorityStore').getIsPriorityMode()&&n&&n.page_thread_info&&n.page_thread_info.is_priority===true;if(l===c('MessagingTag').UNREAD&&q>1&&j!==m||t){r.markRead(m,c('PagesMessagingActionPlacement').MESSAGE_DIALOG_SHOWN);}else if(l===c('MessagingTag').UNREAD&&q===1){r.markRead(j,c('PagesMessagingActionPlacement').MESSAGE_DIALOG_SHOWN);c('PagesManagerMessagingFilterActions').changeFilter(k,c('PagesManagerMessagingFilterStore').getFilterByKey(c('PagesManagerMessagingNavigationUnitKey').FILTERS.ALL));}else if(l!==c('MessagingTag').UNREAD&&!s)r.markRead(j,c('PagesMessagingActionPlacement').MESSAGE_DIALOG_SHOWN);}}};f.exports=h;}),null);
__d('PagesManagerMessagingBatchActionMenu.react',['cx','fbt','invariant','AsyncRequest','MercuryPageThreadActions','InsightsInfoTip.react','PagesAdminToolUIActionType','PagesManagerAction','PagesManagerLogger','PagesManagerMessagingMessagelistAction','PagesMessengerActions','PagesMessagingActionPlacement','PopoverMenu.react','React','SimpleXUIDialog','XPagesBanUserDataController','ReactXUIMenu','XUIDialogButton.react','XUIDialogCancelButton.react','XUIText.react'],(function a(b,c,d,e,f,g,h,i,j){var k,l,m=c('ReactXUIMenu').Item;k=babelHelpers.inherits(n,c('React').Component);l=k&&k.prototype;function n(o){'use strict';l.constructor.call(this,o);this.$PagesManagerMessagingBatchActionMenu1=c('MercuryPageThreadActions').getForFBID(o.pageID);}n.prototype.$PagesManagerMessagingBatchActionMenu2=function(event,o){'use strict';var p=o.item.getValue();c('PagesManagerLogger').logMessageInboxUIAction(c('PagesAdminToolUIActionType').MESSAGE_INBOX_CLICK_MENU_ACTION,this.props.pageID,{menu_action:p,position:this.props.placement});var q=null,r=false;switch(p){case c('PagesMessengerActions').FLAG:q=this.$PagesManagerMessagingBatchActionMenu1.batchAddFlag;break;case c('PagesMessengerActions').UNFLAG:q=this.$PagesManagerMessagingBatchActionMenu1.batchRemoveFlag;break;case c('PagesMessengerActions').MARK_AS_SPAM:q=this.$PagesManagerMessagingBatchActionMenu1.batchMarkSpam;r=true;break;case c('PagesMessengerActions').MARK_AS_UNSPAM:q=this.$PagesManagerMessagingBatchActionMenu1.batchUnmarkSpam;r=true;break;case c('PagesMessengerActions').MARK_AS_READ:q=this.$PagesManagerMessagingBatchActionMenu1.batchMarkRead;break;case c('PagesMessengerActions').MARK_AS_UNREAD:q=this.$PagesManagerMessagingBatchActionMenu1.batchMarkUnread;break;case c('PagesMessengerActions').ARCHIVE:q=this.$PagesManagerMessagingBatchActionMenu1.batchArchive;r=true;break;case c('PagesMessengerActions').UNARCHIVE:q=this.$PagesManagerMessagingBatchActionMenu1.batchUnarchive;r=true;break;case c('PagesMessengerActions').DELETE_THREAD:this.$PagesManagerMessagingBatchActionMenu3();return;case c('PagesMessengerActions').HIDE_CONTEXT_CARD:this.$PagesManagerMessagingBatchActionMenu4();return;case c('PagesMessengerActions').SHOW_CONTEXT_CARD:this.$PagesManagerMessagingBatchActionMenu5();return;case c('PagesMessengerActions').SHOW_BAN_FROM_PAGE:this.$PagesManagerMessagingBatchActionMenu6();return;default:j(0);}if(q)q.call(this.$PagesManagerMessagingBatchActionMenu1,this.props.selectedRows,this.props.placement);c('PagesManagerAction').deselectAll();if(r===true)c('PagesManagerAction').viewListItem(null);this.props.onSelectionClear&&this.props.onSelectionClear();};n.prototype.$PagesManagerMessagingBatchActionMenu3=function(){'use strict';var o=this.props.selectedRows.length,p=i._("Delete Messages"),q=i._("Are you sure you want to delete {number of messages}?",[i.param('number of messages',c('React').createElement('span',{className:"_50f7"},i._({"*":{"message":"{number of messages} message","messages":"{number of messages} messages"}},[i.param('number of messages',o,[0]),i['enum'](o>1?'messages':'message',{message:'message',messages:'messages'})])))]),r=i._("Delete Messages"),s=[c('React').createElement(c('XUIDialogCancelButton.react'),{key:'cancel'}),c('React').createElement(c('XUIDialogButton.react'),{action:'cancel',key:'submit',label:r,onClick:function(){this.$PagesManagerMessagingBatchActionMenu1.batchDelete(this.props.selectedRows,c('PagesMessagingActionPlacement').THREAD_LIST_BATCH_ACTION);c('PagesManagerAction').deselectAll();c('PagesManagerAction').viewListItem(null);this.props.onSelectionClear&&this.props.onSelectionClear();}.bind(this),use:'confirm'})];c('SimpleXUIDialog').showEx(q,p,s);};n.prototype.$PagesManagerMessagingBatchActionMenu4=function(){'use strict';c('PagesManagerMessagingMessagelistAction').setIsContextCardHidden(this.props.pageID,true);};n.prototype.$PagesManagerMessagingBatchActionMenu5=function(){'use strict';c('PagesManagerMessagingMessagelistAction').setIsContextCardHidden(this.props.pageID,false);};n.prototype.$PagesManagerMessagingBatchActionMenu6=function(){'use strict';this.props.pageID||j(0);this.props.userID||j(0);var o=c('XPagesBanUserDataController').getURIBuilder().setFBID('page_id',this.props.pageID).setFBIDVector('user_ids',[this.props.userID]).getURI(),p=i._("Ban person from Page"),q=i._("A person who's banned can't post, comment, like or take other actions on the Page. They won't be notified."),r=this.props.userName?i._("Would you like to ban {user name}?",[i.param('user name',c('React').createElement(c('XUIText.react'),{weight:'bold'},this.props.userName))]):i._("Would you like to ban this user?"),s=c('React').createElement('div',null,r,c('React').createElement(c('InsightsInfoTip.react'),{alignH:'center',position:'above',tip:q}));c('SimpleXUIDialog').showConfirm(s,p,function(t){if(!t)return;new (c('AsyncRequest'))().setURI(o).setHandler(function(u){if(!u.payload.success)return;c('PagesManagerMessagingMessagelistAction').resetIsUserBanned(this.props.pageID,this.props.userID);this.$PagesManagerMessagingBatchActionMenu1.batchMarkSpam(this.props.selectedRows,c('PagesMessagingActionPlacement').THREAD_LIST_BATCH_ACTION);}.bind(this)).send();}.bind(this));};n.prototype.renderMenu=function(){'use strict';return (c('React').createElement(c('ReactXUIMenu'),{onItemClick:function(event,o){return this.$PagesManagerMessagingBatchActionMenu2(event,o);}.bind(this)},this.props.inlineActionParam.showFlag?c('React').createElement(m,{value:c('PagesMessengerActions').FLAG},i._("Flag")):null,this.props.inlineActionParam.showUnflag?c('React').createElement(m,{value:c('PagesMessengerActions').UNFLAG},i._("Unflag")):null,this.props.inlineActionParam.showSpam?c('React').createElement(m,{value:c('PagesMessengerActions').MARK_AS_SPAM},i._("Mark as Spam")):null,this.props.inlineActionParam.showUnspam?c('React').createElement(m,{value:c('PagesMessengerActions').MARK_AS_UNSPAM},i._("Move to Inbox")):null,this.props.inlineActionParam.showMarkRead?c('React').createElement(m,{value:c('PagesMessengerActions').MARK_AS_READ},i._("Mark as Read")):null,this.props.inlineActionParam.showMarkUnread?c('React').createElement(m,{value:c('PagesMessengerActions').MARK_AS_UNREAD},i._(["Mark as Unread","d40d50f73da3233202117a2dc422f97d"])):null,this.props.inlineActionParam.showArchive?c('React').createElement(m,{value:c('PagesMessengerActions').ARCHIVE},i._("Archive")):null,this.props.inlineActionParam.showUnarchive?c('React').createElement(m,{value:c('PagesMessengerActions').UNARCHIVE},i._("Move to Inbox")):null,this.props.inlineActionParam.showDelete?c('React').createElement(m,{value:c('PagesMessengerActions').DELETE_THREAD},i._("Delete")):null,this.props.inlineActionParam.showHideContextCard?c('React').createElement(m,{value:c('PagesMessengerActions').HIDE_CONTEXT_CARD},i._("Hide sender info")):null,this.props.inlineActionParam.showShowContextCard?c('React').createElement(m,{value:c('PagesMessengerActions').SHOW_CONTEXT_CARD},i._("Show sender info")):null,this.props.showBanFromPage&&this.props.pageID&&this.props.userID?c('React').createElement(m,{value:c('PagesMessengerActions').SHOW_BAN_FROM_PAGE},i._("Ban from Page")):null));};n.prototype.render=function(){'use strict';return (c('React').createElement(c('PopoverMenu.react'),{alignh:this.props.alignh,className:"_1tly"+(!this.props.showBatchAction?' '+"hidden_elem":''),layerBehaviors:this.props.layerBehaviors,menu:this.renderMenu(),onHide:this.props.onHide,onShow:this.props.onShow,ref:'menu'},this.props.children));};n.defaultProps={alignh:'left'};f.exports=n;}),null);
__d('PagesManagerMessagingThreadTitle.react',['cx','fbt','ContextualDialogArrow','ContextualLayerAutoFlip','Image.react','InlineBlock.react','LeftRight.react','Link.react','MercuryIDs','MercuryParticipants','MercuryThreadTitle.react','PagesManagerMessagingBatchActionMenu.react','PagesMessengerThreadUtils','PagesMessagingActionPlacement','MercuryParticipantListRenderer','XUIPopoverButton.react','React'],(function a(b,c,d,e,f,g,h,i){var j,k;j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;function l(m){'use strict';k.constructor.call(this,m);this.state={href:'',userName:null,imageSource:null,menuShown:false};}l.prototype.$PagesManagerMessagingThreadTitle1=function(m){'use strict';if(m&&m.other_user_fbid){var n=c('MercuryIDs').getParticipantIDFromUserID(m.other_user_fbid);c('MercuryParticipants').get(n,function(o){var p=new (c('MercuryParticipantListRenderer'))().renderParticipantList([o]);this.setState({userName:p,href:o.href,imageSource:o.image_src});}.bind(this));}};l.prototype.componentWillMount=function(){'use strict';this.$PagesManagerMessagingThreadTitle1(this.props.thread);};l.prototype.componentWillReceiveProps=function(m){'use strict';this.$PagesManagerMessagingThreadTitle1(m.thread);};l.prototype.$PagesManagerMessagingThreadTitle2=function(){'use strict';return (c('React').createElement('div',null,this.state.imageSource?c('React').createElement(c('Image.react'),{className:"_3stv",src:this.state.imageSource}):c('React').createElement('div',{className:"_3stv"}),c('React').createElement(c('InlineBlock.react'),{className:"_3ak8 _3-9a"},c('React').createElement(c('MercuryThreadTitle.react'),{className:"_174p",thread:this.props.thread,viewer:this.props.pageID,showUnreadCount:false}),c('React').createElement(c('Link.react'),{href:this.state.href?this.state.href:'',target:'_blank'},i._("View Profile")))));};l.prototype.render=function(){'use strict';if(this.props.thread===null||this.props.thread===undefined)return c('React').createElement('div',{className:"_174o"});var m=c('PagesMessengerThreadUtils').getBatchActionMenuParam(this.props.thread);m.showMarkRead=false;m.showMarkUnread=false;m.showHideContextCard=this.props.isContextCardEnabled&&!this.props.isContextCardHidden;m.showShowContextCard=this.props.isContextCardEnabled&&this.props.isContextCardHidden;var n=c('React').createElement(c('XUIPopoverButton.react'),{label:i._("Actions")});return (c('React').createElement(c('LeftRight.react'),{className:"_3stw"},this.$PagesManagerMessagingThreadTitle2(),c('React').createElement(c('PagesManagerMessagingBatchActionMenu.react'),{alignh:'right',layerBehaviors:[c('ContextualDialogArrow'),c('ContextualLayerAutoFlip')],onHide:function(){this.setState({menuShown:false});}.bind(this),onShow:function(){this.setState({menuShown:true});}.bind(this),pageID:this.props.pageID,inlineActionParam:m,placement:c('PagesMessagingActionPlacement').THREAD_TITLE_BAR,selectedRows:[this.props.thread&&this.props.thread.thread_id],showBanFromPage:this.props.isBanFromPageEnabled,showBatchAction:true,userID:this.props.thread?this.props.thread.other_user_fbid:null,userName:this.state?this.state.userName:null},n)));};f.exports=l;}),null);
__d('PagesManagerMessagingDetailContainer.react',['cx','BootloadedComponent.react','FluxContainer','Grid.react','immutable','JSResource','MercuryMessageStore','MercuryRoger','MercuryThreadInformer','MercuryThreads','MessagingTag','MessengerConfig','MessengerHotLikePreviewEvents','PagesEventType','PagesManagerMessagingAppointmentBannerRoot.react','PagesManagerMessagingClassifierStore','PagesManagerMessagingComposerContainer.react','PagesManagerMessagingFilterStore','PagesManagerMessagingMessageList.react','PagesManagerMessagingMessagelistAction','PagesManagerMessagingMessagelistStore','PagesManagerMessagingTabPerfEvents','PagesManagerMessagingThreadInteractionHelper','PagesManagerMessagingThreadTitle.react','PagesManagerPerfLogger','PagesMessagingPerfTypedLogger','React','ReactDOM','Set','SubscriptionsHandler','Vector','debounce'],(function a(b,c,d,e,f,g,h){var i,j,k=c('Grid.react').GridItem;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(m,n){'use strict';j.constructor.call(this,m,n);this.$PagesManagerMessagingDetailContainer6=c('MercuryRoger').getForFBID(m.pageID);this.$PagesManagerMessagingDetailContainer10=c('MercuryThreadInformer').getForFBID(m.pageID);this.$PagesManagerMessagingDetailContainer2=null;this.$PagesManagerMessagingDetailContainer4=false;this.state={appointmentBannerHeight:0,isContextCardEnabled:false,isLoading:false,isLoadingMore:false,messagelist:[],preventScroll:false,hideContextCard:m.config.hideContextCard,threadID:'',thread:{}};this.$PagesManagerMessagingDetailContainer7=c('debounce')(function(){if(this.props.height)this.$PagesManagerMessagingDetailContainer11(this.props.height);}.bind(this),50);}l.getStores=function(){'use strict';return [c('PagesManagerMessagingMessagelistStore'),c('PagesManagerMessagingClassifierStore')];};l.calculateState=function(m,n){'use strict';var o=[],p={},q=null;if(n.listItemKey){o=c('PagesManagerMessagingMessagelistStore').getMessagelist(n.pageID,n.listItemKey);p=c('PagesManagerMessagingMessagelistStore').getReadReceipts(n.listItemKey);q=c('MercuryThreads').getForFBID(n.pageID).getThreadMetaNow(n.listItemKey);if(q&&q.other_user_fbid&&n.config&&n.pageID)c('PagesManagerMessagingMessagelistAction').fetchIsUserBanned(n.pageID,q.other_user_fbid);}var r=c('PagesManagerMessagingMessagelistStore').isCardHidden();if(r===null)r=n.config.hideContextCard;var s=n.config.enableContextCard&&q&&q.other_user_fbid,t=n.pageID&&q&&q.other_user_fbid?c('PagesManagerMessagingMessagelistStore').getIsUserBanned(n.pageID,q.other_user_fbid):false;return {appointmentBannerHeight:c('PagesManagerMessagingMessagelistStore').getAppointmentBannerHeight(),isContextCardEnabled:s,hideContextCard:r,isLoading:c('PagesManagerMessagingMessagelistStore').isLoading(),isLoadingMore:c('PagesManagerMessagingMessagelistStore').isLoadingMore(),isUserBanned:t,scrollHeight:c('PagesManagerMessagingMessagelistStore').getScrollHeight(),messagelist:o,readReceipts:p,threadID:n.listItemKey,thread:q};};l.prototype.$PagesManagerMessagingDetailContainer11=function(m){'use strict';var n=0;if(this.refs.threadTitle)n=c('Vector').getElementDimensions(c('ReactDOM').findDOMNode(this.refs.threadTitle)).y;var o=c('Vector').getElementDimensions(c('ReactDOM').findDOMNode(this.refs.composer)).y,p=m-n-o-this.state.appointmentBannerHeight;if(p<0)p=0;c('PagesManagerMessagingMessagelistAction').setScrollAreaHeight(p);};l.prototype.$PagesManagerMessagingDetailContainer12=function(m,n){'use strict';var o=this.$PagesManagerMessagingDetailContainer6.getSeenTimestamps(m),p=new (c('Set'))(o.keys());return o.withMutations(function(q){c('immutable').Seq(n).reverse().forEach(function(r){if(p.size===0)return false;if(!p.has(r.author))return true;q.update(r.author,function(s){if(!s||s.watermark<=r.timestamp)return {watermark:r.timestamp,action:r.timestamp};return s;});p['delete'](r.author);});});};l.prototype.componentDidMount=function(){'use strict';c('PagesManagerPerfLogger').log(c('PagesManagerMessagingTabPerfEvents').MESSAGE_TAB_DETAIL_VIEW_DID_RENDER,this.props.perfParams);if(this.props.listItemKey)this.$PagesManagerMessagingDetailContainer13(this.props.listItemKey);};l.prototype.componentWillReceiveProps=function(m){'use strict';if(this.props.listItemKey!==m.listItemKey&&m.listItemKey!==null)this.$PagesManagerMessagingDetailContainer13(m.listItemKey);};l.prototype.componentWillUpdate=function(m,n){'use strict';if(m.height!==this.props.height)this.$PagesManagerMessagingDetailContainer11(m.height);};l.prototype.componentDidUpdate=function(m,n){'use strict';if(n.appointmentBannerHeight!==this.state.appointmentBannerHeight)this.$PagesManagerMessagingDetailContainer11(this.props.height);};l.prototype.getMessageStore=function(){'use strict';return this.$PagesManagerMessagingDetailContainer5;};l.prototype.logMessageLoadingStart=function(m){'use strict';this.$PagesManagerMessagingDetailContainer3=true;this.$PagesManagerMessagingDetailContainer1=Date.now();this.$PagesManagerMessagingDetailContainer9=m;new (c('PagesMessagingPerfTypedLogger'))().setPageID(this.props.pageID).setEventName(c('PagesEventType').MESSAGES_MESSAGELIST_LOAD_START).log();};l.prototype.logMessageLoadingEnd=function(){'use strict';if(this.$PagesManagerMessagingDetailContainer3&&this.$PagesManagerMessagingDetailContainer9===this.props.listItemKey){this.$PagesManagerMessagingDetailContainer3=false;new (c('PagesMessagingPerfTypedLogger'))().setPageID(this.props.pageID).setEventName(c('PagesEventType').MESSAGES_MESSAGELIST_LOAD_END).setPerfTime(Date.now()-this.$PagesManagerMessagingDetailContainer1).log();}};l.prototype.$PagesManagerMessagingDetailContainer13=function(m){'use strict';this.$PagesManagerMessagingDetailContainer14&&this.$PagesManagerMessagingDetailContainer14.destroy();this.$PagesManagerMessagingDetailContainer15&&this.$PagesManagerMessagingDetailContainer15.release();this.$PagesManagerMessagingDetailContainer5=new (c('MercuryMessageStore'))(m,c('MessengerConfig').MessageLoadCount,this.props.pageID);var n=c('PagesManagerMessagingMessagelistStore').getMessagelist(this.props.pageID,m);if(n.length===0){c('PagesManagerMessagingMessagelistAction').setIsLoadingMore(false);c('PagesManagerMessagingMessagelistAction').setIsLoading(true);this.logMessageLoadingStart(m);}var o=this.$PagesManagerMessagingDetailContainer12(m,n);c('PagesManagerMessagingMessagelistAction').updateReadReceipts(this.props.pageID,m,o);this.$PagesManagerMessagingDetailContainer15=new (c('SubscriptionsHandler'))();this.$PagesManagerMessagingDetailContainer15.addSubscriptions(this.$PagesManagerMessagingDetailContainer5.subscribe(function(p){this.logMessageLoadingEnd();c('PagesManagerMessagingMessagelistAction').setIsLoading(false);c('PagesManagerMessagingMessagelistAction').setIsLoadingMore(false);c('PagesManagerMessagingMessagelistAction').updateMessagelist(this.props.pageID,m,p);}.bind(this)),this.$PagesManagerMessagingDetailContainer10.subscribe('threads-updated',function(p,q){if(q[this.props.listItemKey])c('PagesManagerMessagingMessagelistAction').updateThread(this.props.pageID,this.props.listItemKey);}.bind(this)),this.$PagesManagerMessagingDetailContainer6.subscribe('change',function(p,q){if(q[this.props.listItemKey]){var r=c('PagesManagerMessagingMessagelistStore').getMessagelist(this.props.pageID,this.props.listItemKey),s=this.$PagesManagerMessagingDetailContainer12(this.props.listItemKey,r);c('PagesManagerMessagingMessagelistAction').updateReadReceipts(this.props.pageID,this.props.listItemKey,s);}}.bind(this)),c('MessengerHotLikePreviewEvents').addListener(c('MessengerHotLikePreviewEvents').START,function(p,q){if(m==q)c('PagesManagerMessagingMessagelistAction').setHotLikeStart(p);}),c('MessengerHotLikePreviewEvents').addListener(c('MessengerHotLikePreviewEvents').STOP,function(p){if(m==p)c('PagesManagerMessagingMessagelistAction').setHotLikeEnd();}));};l.prototype.$PagesManagerMessagingDetailContainer16=function(){'use strict';var m=c('PagesManagerMessagingFilterStore').getActiveFilterName();if(!this.props.listItemKey||m===c('MessagingTag').UNREAD)return;c('PagesManagerMessagingThreadInteractionHelper').handleUnreadStateUpdate(this.props.listItemKey,this.props.pageID,m);c('PagesManagerMessagingThreadInteractionHelper').handlePermalinkUpdate(this.props.listItemKey,this.props.pageID);};l.prototype.$PagesManagerMessagingDetailContainer17=function(){'use strict';if(!this.state.isLoadingMore)if(this.getMessageStore().fetchMoreMessages()){c('PagesManagerMessagingMessagelistAction').setIsLoading(false);c('PagesManagerMessagingMessagelistAction').setIsLoadingMore(true);}};l.prototype.$PagesManagerMessagingDetailContainer18=function(){'use strict';return (c('React').createElement(c('PagesManagerMessagingMessageList.react'),babelHelpers['extends']({},this.props,{initLoading:this.state.isLoading,isLoadingMore:this.state.isLoadingMore,messagelist:c('immutable').List(this.state.messagelist),fetchEarlierMessages:function(){return this.$PagesManagerMessagingDetailContainer17();}.bind(this),readReceipts:this.state.readReceipts,scrollHeight:this.state.scrollHeight,threadID:this.state.threadID,thread:this.state.thread})));};l.prototype.$PagesManagerMessagingDetailContainer19=function(m){'use strict';if(!this.state.isContextCardEnabled)return null;var n=m,o=0;if(this.refs.threadTitle)o=c('Vector').getElementDimensions(c('ReactDOM').findDOMNode(this.refs.threadTitle)).y;n+=o;return (c('React').createElement(k,{alignv:'middle',className:"_2utd"+(this.state.hideContextCard?' '+"hidden_elem":'')},c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:c('React').createElement('div',{className:"hidden_elem"}),bootloadLoader:c('JSResource')('PagesMessengerContextCardContainer.react').__setRef('PagesManagerMessagingDetailContainer.react'),pageID:this.props.pageID,userID:this.state.thread&&this.state.thread.other_user_fbid,scrollHeight:n,updatedUI:true})));};l.prototype.$PagesManagerMessagingDetailContainer20=function(){'use strict';if(!this.props.config.enableBookingFlow)return null;var m=this.state.thread||{};return (c('React').createElement(c('PagesManagerMessagingAppointmentBannerRoot.react'),{messageList:this.state.messagelist,pageID:this.props.pageID,userID:m.other_user_fbid}));};l.prototype.render=function(){'use strict';return (c('React').createElement('div',null,c('React').createElement(c('Grid.react'),{alignv:'top',className:"_2utb",cols:this.state.isContextCardEnabled?2:1},c('React').createElement(k,{className:"_2utc"},c('React').createElement(c('PagesManagerMessagingThreadTitle.react'),{pageID:this.props.pageID,isContextCardEnabled:this.state.isContextCardEnabled,isContextCardHidden:this.state.hideContextCard,isBanFromPageEnabled:!this.state.isUserBanned,onIconClick:function(){return this.$PagesManagerMessagingDetailContainer21();}.bind(this),ref:'threadTitle',thread:this.state.thread}),this.$PagesManagerMessagingDetailContainer20(),this.$PagesManagerMessagingDetailContainer18()),this.$PagesManagerMessagingDetailContainer19(this.state.scrollHeight)),c('React').createElement('div',{className:!this.props.config.enableComposer?"hidden_elem":''},c('React').createElement(c('PagesManagerMessagingComposerContainer.react'),{canUseOmnipicker:this.props.config.enableOmnipicker,creatorInfo:this.props.config.creatorInfo,defaultCurrency:this.props.config.defaultCurrency,onInitialRender:function(){return this.$PagesManagerMessagingDetailContainer7();}.bind(this),onMessageOrAttachmentUpdate:function(){return this.$PagesManagerMessagingDetailContainer7();}.bind(this),onFocus:function(){return this.$PagesManagerMessagingDetailContainer16();}.bind(this),recipientID:this.state.thread?this.state.thread.other_user_fbid.toString():null,ref:'composer',shouldShowCommerceInvoiceButton:this.props.config.shouldShowCommerceInvoiceButton,shouldShowCommerceInvoiceButtonNUX:this.props.config.shouldShowCommerceInvoiceButtonNUX,shouldShowCommerceInvoiceButtonPUX:this.props.config.shouldShowCommerceInvoiceButtonPUX,shouldShowCommerceInvoiceNewFlow:this.props.config.shouldShowCommerceInvoiceNewFlow,shouldShowInvoiceShippingNUX:this.props.config.shouldShowInvoiceShippingNUX,threadElementID:this.state.threadID,threadID:this.state.threadID,userID:this.props.pageID,enableBlockedComposer:this.props.config.enableBlockedComposer}))));};f.exports=c('FluxContainer').create(l,{withProps:true});}),null);
__d('PagesManagerMessagingNotificationCountSubscriber',['Map','MercuryThreadInformer','PagesManagerMessagingFilterActions'],(function a(b,c,d,e,f,g){'use strict';var h={_pageIDTokenMap:new (c('Map'))(),enableRealtimeNotificationCountUpdates:function i(j){var k=h._pageIDTokenMap;if(k.has(j))return;var l=c('MercuryThreadInformer').getForFBID(j),m=l.subscribe('unread-updated',function(n,o){c('PagesManagerMessagingFilterActions').notifyNotificationCountChanged(j);});k.set(j,m);},disableRealtimeNotificationCountUpdates:function i(j){var k=h._pageIDTokenMap;if(!k.has(j))return;var l=k.get(j);c('MercuryThreadInformer').getForFBID(j).unsubscribe(l);k['delete'](l);}};f.exports=h;}),null);
__d('PagesManagerNavigationView.react',['cx','invariant','ContextualDialogArrow','ContextualLayerAutoFlip','Map','PagesManagerNavigationUnit','PopoverMenu.react','React','ReactXUIMenu','immutable'],(function a(b,c,d,e,f,g,h,i){var j,k,l=c('ReactXUIMenu').Item,m=c('immutable').List;j=babelHelpers.inherits(n,c('React').Component);k=j&&j.prototype;function n(){var o,p;'use strict';for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.$PagesManagerNavigationView1=function(t,u){this.props.onUnitSelected(this.$PagesManagerNavigationView3(u.item.getValue()));}.bind(this),this.$PagesManagerNavigationView2=function(t){return (c('React').createElement(l,{key:t.getKey(),value:t.getKey()},c('React').createElement('div',{className:"_-7b"},t.getDisplayTitle())));},p;}n.prototype.$PagesManagerNavigationView3=function(o){'use strict';var p=this.$PagesManagerNavigationView4(o,this.props.tabbarUnits);if(p)return p;p=this.$PagesManagerNavigationView4(o,this.props.dropdownUnits);if(p)return p;i(0);};n.prototype.$PagesManagerNavigationView4=function(o,p){'use strict';var q=p.filter(function(r){return r.getKey()===o;});if(q.count()>0)return q.get(0);};n.prototype.render=function(){'use strict';return c('React').createElement('div',{className:"_-7a"},this.$PagesManagerNavigationView5(),this.$PagesManagerNavigationView6());};n.prototype.$PagesManagerNavigationView5=function(){'use strict';var o=this.props.activeDropdownUnit;if(this.props.dropdownUnits.size===0||!o)return null;var p=c('React').createElement(c('ReactXUIMenu'),{onItemClick:this.$PagesManagerNavigationView1},this.props.dropdownUnits.map(this.$PagesManagerNavigationView2));return (c('React').createElement(c('PopoverMenu.react'),{layerBehaviors:[c('ContextualDialogArrow'),c('ContextualLayerAutoFlip')],menu:p},c('React').createElement('div',{className:"_-7c"},o.getDisplayTitle())));};n.prototype.$PagesManagerNavigationView7=function(o){'use strict';var p=this.props.unitNotificationCountMap.get(o);return (c('React').createElement('div',babelHelpers['extends']({},this.props,{className:"_-7d"+(' '+"_-7e")+(o===this.props.activeTabbarUnit?' '+"_-7f":''),onClick:function(){return this.props.onUnitSelected(o);}.bind(this),key:o.getKey()}),c('React').createElement('div',{className:"_-7g _-7e"},o.getDisplayTitle().toString().toUpperCase()),c('React').createElement('div',{className:"_-7h"+(' '+"_-7e")+(p===0?' '+"hidden_elem":'')},p)));};n.prototype.$PagesManagerNavigationView6=function(){'use strict';return this.props.tabbarUnits.map(function(o){return this.$PagesManagerNavigationView7(o);}.bind(this));};f.exports=n;}),null);
__d('PagesManagerMessagingFilterContainer.react',['PagesManagerMessagingFilterStore','FluxContainer','immutable','Map','PagesAdminToolUIActionType','PagesManagerLogger','PagesManagerMessagingFilterActions','PagesManagerMessagingNotificationCountSubscriber','PagesManagerNavigationUnit','PagesManagerNavigationView.react','React'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('immutable').List;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;function k(l){i.constructor.call(this,l);this.$PagesManagerMessagingFilterContainer1=function(m){c('PagesManagerLogger').logMessageInboxUIAction(c('PagesAdminToolUIActionType').MESSAGE_INBOX_SWITCH_FOLDER,this.props.pageID,{folder:m.getKey(),position:'filter_section'});c('PagesManagerMessagingFilterActions').changeFilter(this.props.pageID,m);}.bind(this);}k.getStores=function(){return [c('PagesManagerMessagingFilterStore')];};k.calculateState=function(l,m){return {activeFolder:c('PagesManagerMessagingFilterStore').getActiveFolder(),activeFilter:c('PagesManagerMessagingFilterStore').getActiveFilter(),folders:c('PagesManagerMessagingFilterStore').getAvailableFolders(),filters:c('PagesManagerMessagingFilterStore').getAvailableFilters(),unitNotificationCountMap:c('PagesManagerMessagingFilterStore').getUnitNotificationCountMap(m.pageID)};};k.prototype.componentWillMount=function(){c('PagesManagerMessagingNotificationCountSubscriber').enableRealtimeNotificationCountUpdates(this.props.pageID);};k.prototype.componentWillUnmount=function(){c('PagesManagerMessagingNotificationCountSubscriber').disableRealtimeNotificationCountUpdates(this.props.pageID);};k.prototype.render=function(){return (c('React').createElement(c('PagesManagerNavigationView.react'),{activeDropdownUnit:this.state.activeFolder,activeTabbarUnit:this.state.activeFilter,tabbarUnits:this.state.filters,dropdownUnits:this.state.folders,unitNotificationCountMap:this.state.unitNotificationCountMap,onUnitSelected:this.$PagesManagerMessagingFilterContainer1}));};f.exports=c('FluxContainer').create(k,{withProps:true});}),null);
__d('PagesManagerAwayToggle.react',['cx','fbt','PagesManagerAwayToggleAction','BUISwitch.react','PagesManagerCountDownTimer.react','React','Tooltip'],(function a(b,c,d,e,f,g,h,i){var j,k;j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;l.prototype.$PagesManagerAwayToggle1=function(){'use strict';if(this.props.isAway)c('PagesManagerAwayToggleAction').setToggleStatus(this.props.pageID,false);};l.prototype.$PagesManagerAwayToggle2=function(m){'use strict';if(m!==this.props.isAway)c('PagesManagerAwayToggleAction').setToggleStatus(this.props.pageID,m);};l.prototype.render=function(){'use strict';var m=i._("Going out? Set your status to Away for 12 hours. Change it if you get back sooner."),n=i._(["Away","8e0d60b5f4f0e61653bc5fce6cfff526"]),o=0;if(this.props.expirationTimestamp)o=this.props.expirationTimestamp*1000;var p=c('React').createElement(c('PagesManagerCountDownTimer.react'),{expireTimestamp:o,isHidden:!this.props.isAway,onTimeup:function(){return this.$PagesManagerAwayToggle1();}.bind(this)});return (c('React').createElement('div',{className:"_4cdp"},c('React').createElement('div',{className:"_ast"},c('React').createElement(c('BUISwitch.react'),babelHelpers['extends']({onToggle:function(q){return this.$PagesManagerAwayToggle2(q);}.bind(this),value:this.props.isAway},c('Tooltip').propsFor(m)))),c('React').createElement('div',{className:"_asu"+(this.props.isAway?' '+"_2eyq":'')},n),p));};function l(){'use strict';j.apply(this,arguments);}f.exports=l;}),null);
__d('PagesManagerMessagingBatchActionHeader.react',['cx','fbt','PagesManagerMessagingBatchActionMenu.react','PagesMessagingActionPlacement','React','XUIPopoverButton.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;l.prototype.render=function(){return (c('React').createElement(c('PagesManagerMessagingBatchActionMenu.react'),babelHelpers['extends']({layerBehaviors:[],placement:c('PagesMessagingActionPlacement').THREAD_LIST_BATCH_ACTION},this.props),c('React').createElement(c('XUIPopoverButton.react'),{className:"_3640",label:i._("Actions")})));};function l(){j.apply(this,arguments);}f.exports=l;}),null);
__d('PagesManagerMessagingBatchActionHeaderContainer.react',['FluxContainer','MercuryPageThreadActions','MercuryThreads','PagesManagerMessagingNavigationUnitKey','PagesManagerMessagingBatchActionHeader.react','PagesManagerMessagingFilterStore','PagesMessengerThreadUtils','React'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;function j(k,l){i.constructor.call(this,k,l);this.$PagesManagerMessagingBatchActionHeaderContainer1=c('MercuryPageThreadActions').getForFBID(k.pageID);}j.getStores=function(){return [c('PagesManagerMessagingFilterStore')];};j.calculateState=function(k,l){var m=c('PagesManagerMessagingFilterStore').getActiveFolderName(),n=c('PagesManagerMessagingFilterStore').getActiveFilterName(),o=c('MercuryThreads').getForFBID(l.pageID),p=false,q=false,r=false,s=false,t=false,u=false,v=false,w=false,x=false,y=0,z=0;l.selectedRows.forEach(function(ba){var ca=o.getThreadMetaNow(ba);if(c('PagesMessengerThreadUtils').isFlagThread(ca))y++;if(ca&&ca.unread_count===0)z++;});var aa=l.selectedRows.length;if(m===c('PagesManagerMessagingNavigationUnitKey').FOLDERS.INBOX&&n===c('PagesManagerMessagingNavigationUnitKey').FILTERS.ALL){p=true;s=true;u=aa-y>0;v=y>0;w=z<aa;x=z>0;}else if(m===c('PagesManagerMessagingNavigationUnitKey').FOLDERS.ARCHIVED&&n===c('PagesManagerMessagingNavigationUnitKey').FILTERS.ALL){q=true;r=true;}else if(m===c('PagesManagerMessagingNavigationUnitKey').FOLDERS.SPAM&&n===c('PagesManagerMessagingNavigationUnitKey').FILTERS.ALL){t=true;}else if(n===c('PagesManagerMessagingNavigationUnitKey').FILTERS.FLAGGED&&m===c('PagesManagerMessagingNavigationUnitKey').FOLDERS.INBOX){v=true;}else if(n===c('PagesManagerMessagingNavigationUnitKey').FILTERS.UNREAD&&m===c('PagesManagerMessagingNavigationUnitKey').FOLDERS.INBOX)w=true;return {inlineActionParam:{showArchive:p,showDelete:q,showUnarchive:r,showSpam:s,showUnspam:t,showFlag:u,showUnflag:v,showMarkRead:w,showMarkUnread:x}};};j.prototype.$PagesManagerMessagingBatchActionHeaderContainer2=function(){this.props.onSelectionClear();};j.prototype.render=function(){return (c('React').createElement(c('PagesManagerMessagingBatchActionHeader.react'),babelHelpers['extends']({onSelectionClear:function(){return this.$PagesManagerMessagingBatchActionHeaderContainer2();}.bind(this),pageID:this.props.pageID,showBatchAction:this.props.showBatchAction,selectedRows:this.props.selectedRows},this.state)));};f.exports=c('FluxContainer').create(j,{withProps:true});}),null);
__d('PagesManagerMessagingFilterPanel.react',['ix','cx','fbt','Image.react','immutable','InlineBlock.react','LeftRight.react','Link.react','MessengerSpinner.react','PageCustomTagSearchSource','PageCustomTagSearchableEntry','PagesAdminToolUIActionType','PagesContextCardCustomTag.react','PagesEnumTag.react','PagesManagerCustomTagsAction','PagesManagerLogger','PagesManagerManageCustomTagsDialog.react','PagesManagerMessagingFilterActions','PagesManagerMessagingThreadlistAction','React','ReactDOM','SearchableTextInput.react','ScrollableArea.react','Vector','fbglyph','nullthrows','PagesManagerMessagingNavigationUnitKey'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('PagesManagerMessagingNavigationUnitKey').FILTERS,n=45,o=130;k=babelHelpers.inherits(p,c('React').Component);l=k&&k.prototype;function p(q){l.constructor.call(this,q);this.$PagesManagerMessagingFilterPanel1=function(r){c('PagesManagerMessagingFilterActions').changeFilter(this.props.pageID,r);}.bind(this);this.$PagesManagerMessagingFilterPanel2=function(){c('PagesManagerMessagingFilterActions').changeFilter(this.props.pageID,this.props.defaultFilter);}.bind(this);this.$PagesManagerMessagingFilterPanel3=function(r){this.setState({tagQuery:'',tagQueryResult:null});c('PagesManagerMessagingThreadlistAction').addSearchCustomTag(this.props.pageID,r.name,'filter_panel');}.bind(this);this.$PagesManagerMessagingFilterPanel4=function(r){this.setState({tagQuery:'',tagQueryResult:null});c('PagesManagerMessagingThreadlistAction').removeSearchCustomTag(this.props.pageID,r.name,'filter_panel');}.bind(this);this.$PagesManagerMessagingFilterPanel6=function(event){this.setState({tagQuery:event.target.value});}.bind(this);this.$PagesManagerMessagingFilterPanel7=function(r,s){if(s===this.state.tagQuery)this.setState({tagQueryResult:r.map(function(t){return t.getTitle();})});}.bind(this);this.$PagesManagerMessagingFilterPanel14=function(){c('PagesManagerLogger').logMessageInboxUIAction(c('PagesAdminToolUIActionType').MESSAGE_INBOX_CLICK_MANAGE_TAGS,this.props.pageID);this.$PagesManagerMessagingFilterPanel15(true);}.bind(this);this.$PagesManagerMessagingFilterPanel15=function(r){c('PagesManagerCustomTagsAction').toggleManageTagsDialog(this.props.pageID,r);}.bind(this);this.state={tagQuery:'',tagQueryResult:null};}p.prototype.$PagesManagerMessagingFilterPanel5=function(){var q=this.props.height-n,r=c('ReactDOM').findDOMNode(this.refs.header);if(r!==null)q-=c('Vector').getElementDimensions(r).y;var s=c('ReactDOM').findDOMNode(this.refs.searchBar);if(s!==null)q-=c('Vector').getElementDimensions(s).y;return q-o;};p.prototype.$PagesManagerMessagingFilterPanel8=function(q){return c('React').createElement('div',{className:"_3v0k",key:q.getKey()},c('React').createElement(c('Image.react'),{className:"__o0",src:h("\/images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/checkmark_16_bluegray-40.png")}),c('React').createElement(c('PagesEnumTag.react'),{onClick:this.$PagesManagerMessagingFilterPanel1,unit:q,textOnly:true}),c('React').createElement(c('Link.react'),{className:"__o1",onClick:this.$PagesManagerMessagingFilterPanel2},j._("Remove")));};p.prototype.$PagesManagerMessagingFilterPanel9=function(q){return c('React').createElement('div',{className:"_3v0k",key:q.getKey()},c('React').createElement(c('PagesEnumTag.react'),{onClick:this.$PagesManagerMessagingFilterPanel1,unit:q,textOnly:true}));};p.prototype.$PagesManagerMessagingFilterPanel10=function(q){return c('React').createElement('div',{className:"_3v0k",key:q.id},c('React').createElement(c('Image.react'),{className:"__o0",src:h("\/images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/checkmark_16_bluegray-40.png")}),c('React').createElement(c('PagesContextCardCustomTag.react'),{canRemove:false,key:q.id,tagData:q,textOnly:true}),c('React').createElement(c('Link.react'),{className:"__o1",onClick:function(){return this.$PagesManagerMessagingFilterPanel4(q);}.bind(this)},j._("Remove")));};p.prototype.$PagesManagerMessagingFilterPanel11=function(q){var r=null;if(this.props.currentSearchCustomTagThreadCounts)r=this.props.currentSearchCustomTagThreadCounts.get(q.name);return c('React').createElement('div',{className:"_3v0k",key:q.id},c('React').createElement(c('PagesContextCardCustomTag.react'),{canRemove:false,key:q.id,tagData:q,onClick:this.$PagesManagerMessagingFilterPanel3,textOnly:true}),c('React').createElement('span',{className:"_2-3_"},r!==null?r:c('React').createElement(c('MessengerSpinner.react'),null)));};p.prototype.$PagesManagerMessagingFilterPanel12=function(){var q=[],r=[],s=[],t=this.state.tagQuery!==''&&this.state.tagQueryResult!==null;if(this.props.activeFilter.getKey()===m.FLAGGED)q.push(this.$PagesManagerMessagingFilterPanel8(this.props.activeFilter));this.props.currentSearchCustomTagNames.map(function(u){if(!t||c('nullthrows')(this.state.tagQueryResult).indexOf(u)>=0)q.push(this.$PagesManagerMessagingFilterPanel10(this.props.customTags.get(u)));}.bind(this));if(this.state.tagQuery!==''&&this.state.tagQueryResult!==null){c('nullthrows')(this.state.tagQueryResult).map(function(u){if(!this.props.currentSearchCustomTagNames.contains(u))s.push(this.$PagesManagerMessagingFilterPanel11(this.props.customTags.get(u)));}.bind(this));}else{if(this.props.enumTags)this.props.enumTags.forEach(function(u){if(u.getKey()!==this.props.activeFilter.getKey())r.push(this.$PagesManagerMessagingFilterPanel9(u));}.bind(this));if(this.props.currentSearchCustomTagThreadCounts!==null)this.props.currentSearchCustomTagThreadCounts.forEach(function(u,v){if(!this.props.currentSearchCustomTagNames.contains(v))s.push(this.$PagesManagerMessagingFilterPanel11(this.props.customTags.get(v)));}.bind(this));this.props.customTags.forEach(function(u,v){if(!this.props.currentSearchCustomTagNames.contains(v)&&(this.props.currentSearchCustomTagThreadCounts===null||v in this.props.currentSearchCustomTagThreadCounts))s.push(this.$PagesManagerMessagingFilterPanel11(this.props.customTags.get(v)));}.bind(this));}return c('React').createElement(c('ScrollableArea.react'),{className:"_3v0j",height:this.$PagesManagerMessagingFilterPanel5(),key:'tagList'},q,r,s);};p.prototype.$PagesManagerMessagingFilterPanel13=function(){return c('React').createElement(c('InlineBlock.react'),null,c('React').createElement(c('Image.react'),{src:'/images/pages/context_card/tag.png'}),c('React').createElement(c('InlineBlock.react'),{className:"_106m"},c('React').createElement('div',{className:"_106n"},j._("About labels")),j._("Labels help you to track and find conversations. Create your own labels and apply them to people based on what they've messaged you about.")));};p.prototype.$PagesManagerMessagingFilterPanel16=function(){return (c('React').createElement(c('PagesManagerManageCustomTagsDialog.react'),{customTags:this.props.customTags,pageID:this.props.pageID,show:this.props.isManagingTags,onToggle:this.$PagesManagerMessagingFilterPanel15,isMergingLabels:this.props.isMergingLabels}));};p.prototype.render=function(){return (c('React').createElement('div',{className:"_5xjz",style:{height:this.props.height-n+'px'}},c('React').createElement(c('LeftRight.react'),{className:"_5xj_",ref:'header'},j._("LABELS"),c('React').createElement(c('Link.react'),{onClick:this.$PagesManagerMessagingFilterPanel14},j._("Add and manage"))),c('React').createElement(c('SearchableTextInput.react'),{className:"_30p_",onChange:this.$PagesManagerMessagingFilterPanel6,onEntriesFound:this.$PagesManagerMessagingFilterPanel7,placeholder:j._("Search your labels..."),queryString:this.state.tagQuery,searchSource:c('PageCustomTagSearchSource').getInstance(this.props.customTags.toArray(),false),ref:'searchBar'}),this.$PagesManagerMessagingFilterPanel12(),this.$PagesManagerMessagingFilterPanel16(),this.$PagesManagerMessagingFilterPanel13()));};f.exports=p;}),null);
__d('PagesManagerMessagingFilterPanelContainer.react',['PagesManagerMessagingFilterStore','FluxContainer','immutable','PagesManagerCustomTagsAction','PagesManagerCustomTagsStore','PagesManagerMessagingFilterPanel.react','PagesManagerMessagingNavigationUnitKey','PagesManagerMessagingThreadlistAction','React','PagesManagerMessagingSearchStore'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('PagesManagerMessagingNavigationUnitKey').FILTERS;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;function k(l){i.constructor.call(this,l);}k.getStores=function(){return [c('PagesManagerMessagingFilterStore'),c('PagesManagerCustomTagsStore'),c('PagesManagerMessagingSearchStore')];};k.prototype.componentWillMount=function(){if(!c('PagesManagerCustomTagsStore').hasCustomTags(this.props.pageID))c('PagesManagerCustomTagsAction').fetch(this.props.pageID);};k.prototype.componentDidUpdate=function(l,m){if(this.state.isFiltering&&!m.isFiltering&&this.state.currentSearchCustomTagThreadCounts===null)c('PagesManagerMessagingThreadlistAction').fetchCustomTagThreadCounts(this.props.pageID);};k.calculateState=function(l,m){return {activeFilter:c('PagesManagerMessagingFilterStore').getActiveFilter(),currentSearchCustomTagNames:c('PagesManagerMessagingSearchStore').getCurrentSearchCustomTagNames(),currentSearchCustomTagThreadCounts:c('PagesManagerMessagingSearchStore').getCurrentSearchCustomTagThreadCounts(),customTags:c('PagesManagerCustomTagsStore').getCustomTags(m.pageID),isManagingTags:c('PagesManagerCustomTagsStore').getIsManagingTags(),isFiltering:c('PagesManagerMessagingFilterStore').getIsFiltering(),isMergingLabels:c('PagesManagerCustomTagsStore').getIsMergingLabels()};};k.prototype.render=function(){var l=c('PagesManagerMessagingFilterStore').getAvailableFilters(),m=[],n=l.get(0);if(c('PagesManagerMessagingFilterStore').getActiveFilterName()===j.ALL)m=l.filter(function(o){return o.getKey()===j.FLAGGED;});return (c('React').createElement(c('PagesManagerMessagingFilterPanel.react'),{activeFilter:this.state.activeFilter,currentSearchCustomTagNames:this.state.currentSearchCustomTagNames,currentSearchCustomTagThreadCounts:this.state.currentSearchCustomTagThreadCounts,customTags:this.state.customTags,defaultFilter:n,enumTags:m,height:this.props.height,isManagingTags:this.state.isManagingTags,pageID:this.props.pageID,isMergingLabels:this.state.isMergingLabels}));};f.exports=c('FluxContainer').create(k,{withProps:true});}),null);
__d('PagesManagerMessagingFilterPanelSwitch.react',['ix','cx','fbt','AsyncRequest','ContextualDialogArrow','ContextualLayer.react','Image.react','PagesAdminToolUIActionType','PagesManagerLogger','PagesManagerMessagingFilterActions','PagesManagerMessagingFilterPanelContainer.react','React','XBasicFBNuxDismissController','XUIAmbientNUX.react','fbglyph'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=4152;k=babelHelpers.inherits(n,c('React').Component);l=k&&k.prototype;function n(o){l.constructor.call(this,o);this.$PagesManagerMessagingFilterPanelSwitch1=function(){var p=c('XBasicFBNuxDismissController').getURIBuilder().setInt('nux_id',m).getURI();new (c('AsyncRequest'))().setURI(p).send();this.setState({showNUX:false});}.bind(this);this.$PagesManagerMessagingFilterPanelSwitch2=function(){c('PagesManagerLogger').logMessageInboxUIAction(c('PagesAdminToolUIActionType').MESSAGE_INBOX_TOGGLE_FILTER_PANEL,this.props.pageID,{show:!this.props.isFiltering});c('PagesManagerMessagingFilterActions').toggleFilterPanel(this.props.pageID,!this.props.isFiltering);}.bind(this);this.state={showNUX:this.props.showNUX};}n.prototype.$PagesManagerMessagingFilterPanelSwitch3=function(){return (c('React').createElement(c('XUIAmbientNUX.react'),{contextRef:function(){return this.refs.contextRef;}.bind(this),onCloseButtonClick:this.$PagesManagerMessagingFilterPanelSwitch1,position:'above',shown:this.state.showNUX,width:'auto'},j._("You can now filter your inbox by labels.")));};n.prototype.render=function(){return (c('React').createElement('span',null,c('React').createElement('span',{className:"_5pwy",onClick:this.$PagesManagerMessagingFilterPanelSwitch2,ref:'contextRef'},c('React').createElement('span',{className:"_5pwz"+(this.props.isFiltering?' '+"_5px3":'')},j._("Filter by")),c('React').createElement(c('Image.react'),{className:"_5px4",src:this.props.isFiltering?h("\/images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/cross_16_fig-black.png"):h("\/images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/chevron-down_16_fig-light-30.png")})),c('React').createElement(c('ContextualLayer.react'),{alignment:'right',containerWidthMatchContext:false,contextRef:function(){return this.refs.contextRef;}.bind(this),layerBehaviors:[c('ContextualDialogArrow')],shown:this.props.isFiltering,offsetX:12,offsetY:16,position:'below'},c('React').createElement(c('PagesManagerMessagingFilterPanelContainer.react'),{pageID:this.props.pageID,height:this.props.height,enablePriorityView:this.props.enablePriorityView})),this.$PagesManagerMessagingFilterPanelSwitch3()));};f.exports=n;}),null);
__d('PagesManagerMessagingList.react',['cx','fbt','Link.react','PagesManagerListRowContainer.react','PagesManagerAction','PagesMessagingSearchMode','PagesSelectableList.react','React','StickyHeader.react','emptyFunction'],(function a(b,c,d,e,f,g,h,i){var j,k;j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;l.prototype.$PagesManagerMessagingList1=function(m){'use strict';c('PagesManagerAction').viewListItem(m);};l.prototype.$PagesManagerMessagingList2=function(){'use strict';if(!this.props.isInSearchMode){if(!this.props.list.length&&(!this.props.priorityList||!this.props.priorityList.length)){if(!this.props.initLoading){return [this.props.emptyView];}else return [this.$PagesManagerMessagingList3()];}else return this.$PagesManagerMessagingList4();}else return this.$PagesManagerMessagingList5();};l.prototype.$PagesManagerMessagingList5=function(){'use strict';var m=null,n=[];switch(this.props.searchMode){case c('PagesMessagingSearchMode').MESSAGE_SEARCH:m=i._("Messages that contain \"{message search term}\"",[i.param('message search term',this.props.searchTerm)]);Object.keys(this.props.snippetSearchResult).forEach(function(p){n.push(c('React').createElement(c('PagesManagerListRowContainer.react'),babelHelpers['extends']({ChildClass:this.props.listRowContainer,disableCheckBox:true,listItem:p,pageID:this.props.pageID,ref:p,key:p,onViewingListItem:this.$PagesManagerMessagingList1,snippetSearchResult:this.props.snippetSearchResult[p],highlightText:this.props.searchTerm,useHighlightTitle:false,type:'li'},this.props.containerProps)));}.bind(this));break;case c('PagesMessagingSearchMode').NAME_SEARCH:m=i._("Names that contain \"{message search term}\"",[i.param('message search term',this.props.searchTerm)]);n=this.props.searchResult.map(function(p){return (c('React').createElement(c('PagesManagerListRowContainer.react'),babelHelpers['extends']({ChildClass:this.props.listRowContainer,disableCheckBox:true,listItem:p,pageID:this.props.pageID,ref:p,key:p,onViewingListItem:this.$PagesManagerMessagingList1,highlightText:this.props.searchTerm,useHighlightTitle:true,type:'li'},this.props.containerProps)));}.bind(this));break;}m=c('React').createElement('li',{className:"_16-z",key:'searchTitle'},m);var o=this.props.hasMoreResult?c('React').createElement('li',{className:"_2b19",key:'loadMoreResult'},c('React').createElement(c('Link.react'),{onClick:this.props.loadMore.bind(null,this.props.searchMode,this.props.searchTerm)},i._("See More Results"))):c('React').createElement('li',{className:"_3o39",key:'loadMoreResult'});return [m].concat(n,[o]);};l.prototype.$PagesManagerMessagingList3=function(){'use strict';return c('React').createElement('div',{key:'loading'});};l.prototype.$PagesManagerMessagingList4=function(){'use strict';var m=this.props.list.map(function(q){return (c('React').createElement(c('PagesManagerListRowContainer.react'),babelHelpers['extends']({ChildClass:this.props.listRowContainer,disableCheckBox:this.props.isInPriorityMode,listItem:q,pageID:this.props.pageID,ref:this.props.getKey(q),key:this.props.getKey(q),onViewingListItem:this.$PagesManagerMessagingList1,type:'li'},this.props.containerProps)));}.bind(this));if(!this.props.isInPriorityMode||!this.props.priorityList)return m;var n=this.props.priorityList.map(function(q){return (c('React').createElement(c('PagesManagerListRowContainer.react'),babelHelpers['extends']({ChildClass:this.props.listRowContainer,disableCheckBox:true,listItem:q,pageID:this.props.pageID,ref:this.props.getKey(q),key:this.props.getKey(q),onViewingListItem:this.$PagesManagerMessagingList1,type:'li'},this.props.containerProps)));}.bind(this)),o=c('React').createElement('li',{className:"_16-z",key:'priorityTitle'},i._("Unread and important messages"));if(this.props.list.length){var p=c('React').createElement('li',{className:"_16-z",key:'otherTitle'},i._("Other messages"));return [c('React').createElement(c('StickyHeader.react'),{header:o,key:'stickyPriorityHeader'},n),c('React').createElement(c('StickyHeader.react'),{header:p,key:'stickyOtherHeader'},m)];}return [c('React').createElement(c('StickyHeader.react'),{header:o,key:'stickyPriorityHeader'},n)];};l.prototype.render=function(){'use strict';var m=this.$PagesManagerMessagingList2();return (c('React').createElement(c('PagesSelectableList.react'),{actionBarRightComponent:this.props.actionBarRightContainer,customLeftComponent:this.props.folderDropDown,deselectAllLabel:'',hideBatchAction:this.props.isInSearchMode||this.props.isFilteringByTag||this.props.isInPriorityMode,enableOnVisible:!this.props.isInSearchMode&&this.props.hasMoreResult,forceRequestMoreRows:!this.props.isInSearchMode,height:this.props.height,header:this.props.header,loadingIndicator:this.props.loadingMoreSpinner,onSelectionChange:this.props.onSelectionChange,onRequestMoreRows:this.props.isInSearchMode?c('emptyFunction'):this.props.onScroll,ref:'selectableList',scrollableAreaMode:true,scrollableAreaHasShadow:false,scrollableAreaOnScroll:this.props.handleScroll,scrollableWidth:this.props.scrollableWidth,selectAllLabel:this.props.selectAllLabel},m));};l.prototype.clearSelection=function(){'use strict';this.refs.selectableList.clearSelection();};function l(){'use strict';j.apply(this,arguments);}f.exports=l;}),null);
__d('MercuryPageSeenIndicator.react',['cx','MercuryIDs','MercurySeenIndicator.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;k.prototype.render=function(){if(this.props.snippetSearchResult){var l=this.props.snippetSearchResult.snippets.length;if(l===1){var m=this.props.snippetSearchResult.snippets[0].author,n=c('MercuryIDs').getParticipantIDFromUserID(this.props.viewer);if(m===n)return (c('React').createElement('span',{className:"_3jy5 repliedLast"}));}return (c('React').createElement('span',null));}else return (c('React').createElement(c('MercurySeenIndicator.react'),{thread:this.props.thread,viewer:this.props.viewer}));};function k(){i.apply(this,arguments);}f.exports=k;}),null);
__d('MercuryPageThreadTitle.react',['DOM','MercuryMessageRenderer','MercuryThreadTitle.react','React','ReactDOM'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('MercuryThreadTitle.react'));i=h&&h.prototype;j.prototype.render=function(){return (c('React').createElement('div',{className:this.props.className},c('React').createElement('span',{ref:'title'})));};j.prototype.componentDidUpdate=function(){var k=this.props.thread.name?this.$MercuryPageThreadTitle1():this.state.participantNames;if(this.props.useHighlightTitle){var l=k.toLowerCase().search(this.props.highlightText.toLowerCase()),m={};m[l]=this.props.highlightText;k=c('MercuryMessageRenderer').formatMessageBody(k,m);}c('DOM').setContent(c('ReactDOM').findDOMNode(this.refs.title),k);};function j(){h.apply(this,arguments);}j.defaultProps={isNewThread:false,showUnreadCount:false,useShortName:false,useAndSeparator:false};f.exports=j;}),null);
__d('PagesManagerMessagingThreadIntentView.react',['cx','React','joinClasses'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;function k(l){j.constructor.call(this,l);}k.prototype.render=function(){return (c('React').createElement('div',{className:c('joinClasses')(!this.props.intentDescription||this.props.isThreadReplied&&this.props.isThreadSeen?"hidden_elem":'',this.props.className)},c('React').createElement('div',{className:"_5jsx"}),c('React').createElement('span',null,this.props.intentDescription)));};f.exports=k;}),null);
__d('PagesManagerMessagingThreadIntentContainer.react',['cx','FluxContainer','MercuryIDs','PagesManagerMessagingClassifierStore','PagesManagerMessagingThreadIntentView.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;k.getStores=function(l){return [c('PagesManagerMessagingClassifierStore')];};k.calculateState=function(l,m){var n=m.thread.snippet_sender;return {intent:c('PagesManagerMessagingClassifierStore').getIntentOnThread(m.pageID,m.userID),isThreadReplied:n?c('MercuryIDs').tokenize(n).value===m.pageID:false,isThreadSeen:m.thread.unread_count===0};};function k(l){j.constructor.call(this,l);}k.prototype.render=function(){if(this.state.isThreadReplied&&this.state.isThreadSeen)return null;return (c('React').createElement(c('PagesManagerMessagingThreadIntentView.react'),{className:"_o2k",intentDescription:this.state.intent,isThreadReplied:this.state.isThreadReplied,isThreadSeen:this.state.isThreadSeen}));};f.exports=c('FluxContainer').create(k,{withProps:true,pure:true});}),null);
__d('PagesManagerMessagingListRow.react',['csx','cx','fbt','ContextualDialogArrow','ContextualLayerAutoFlip','CSS','PagesManagerMessagingFilterStore','Image.react','Layout.react','MercuryPageSeenIndicator.react','MercuryPageThreadTitle.react','MercuryThreadSnippet.react','MercuryThreadTimestamp.react','MercuryTimestamp','PagesAdminToolUIActionType','PagesContextCardCustomTag.react','PagesEnumTag.react','PagesManagerLogger','PagesManagerMessagingBatchActionMenu.react','PagesManagerMessagingThreadIntentContainer.react','PagesMessagingActionPlacement','PagesSelectableListRow.react','React','PagesManagerMessagingNavigationUnitKey','XUIBadge.react'],(function a(b,c,d,e,f,g,h,i,j){var k,l,m=c('Layout.react').Column,n=c('Layout.react').FillColumn;k=babelHelpers.inherits(o,c('React').Component);l=k&&k.prototype;function o(p){'use strict';l.constructor.call(this,p);this.state={menuShown:false,showFadding:false};}o.prototype.renderSnippetSearchResult=function(){'use strict';var p=this.props.snippetSearchResult.snippets.length,q=this.props.snippetSearchResult.num_total_snippets;if(p===1){return (c('React').createElement('div',{className:"_3f6a"},this.props.snippetSearchResult.snippets[0].body));}else return (c('React').createElement('div',{className:"_3f6a"},j._("Found {number of messages found} results",[j.param('number of messages found',q)])));};o.prototype.$PagesManagerMessagingListRow1=function(){'use strict';var p=this.props.customTagsData,q=null;if(this.props.isFlagged)q=c('React').createElement(c('PagesEnumTag.react'),{canRemove:false,unit:c('PagesManagerMessagingFilterStore').getFilterByKey(c('PagesManagerMessagingNavigationUnitKey').FILTERS.FLAGGED)});return (c('React').createElement('div',{className:"_1woq",ref:'tagBlock'},c('React').createElement('div',{ref:'tags',className:"_4pbm"},q,p.map(function(r){return (c('React').createElement(c('PagesContextCardCustomTag.react'),{key:r.name,canRemove:false,tagData:r}));})),c('React').createElement('span',{className:"_1wor"})));};o.prototype.$PagesManagerMessagingListRow2=function(){'use strict';return (c('React').createElement('div',null,this.props.imageSource?c('React').createElement(c('Image.react'),{className:"_2fp5",src:this.props.imageSource}):c('React').createElement('div',{className:"_2fp5"}),c('React').createElement('div',{className:"_55hu"},c('React').createElement(c('MercuryThreadTimestamp.react'),{time:this.props.thread.timestamp,title:c('MercuryTimestamp').getAbsoluteTimestamp(this.props.thread.timestamp),text:c('MercuryTimestamp').getRelativeTimestamp(this.props.thread.timestamp)})),c('React').createElement(c('PagesManagerMessagingBatchActionMenu.react'),{alignh:'right',layerBehaviors:[c('ContextualDialogArrow'),c('ContextualLayerAutoFlip')],onHide:function(){this.setState({menuShown:false});}.bind(this),onShow:function(){this.setState({menuShown:true});}.bind(this),pageID:this.props.pageID,inlineActionParam:this.props.inlineActionParam,placement:c('PagesMessagingActionPlacement').THREAD_ROW_ACTION_ICON,selectedRows:[this.props.thread.thread_id],showBatchAction:true},c('React').createElement('span',{className:"_4hq1",onClick:function p(event){return event.stopPropagation();}})),c('React').createElement(c('Layout.react'),null,c('React').createElement(n,{className:"_2fp6"},c('React').createElement(c('MercuryPageThreadTitle.react'),{className:"_1a_3",highlightText:this.props.highlightText,showUnreadCount:false,thread:this.props.thread,useShortName:false,useHighlightTitle:this.props.useHighlightTitle,viewer:this.props.pageID}),c('React').createElement('div',{className:"_1a_7"},c('React').createElement(c('PagesManagerMessagingThreadIntentContainer.react'),{pageID:this.props.pageID,userID:this.props.thread.other_user_fbid,thread:this.props.thread}),this.props.snippetSearchResult?this.renderSnippetSearchResult():c('React').createElement(c('MercuryThreadSnippet.react'),{participants:this.props.participants,shouldRenderYou:false,thread:this.props.thread,viewer:this.props.pageID})),this.$PagesManagerMessagingListRow1()),c('React').createElement(m,{className:"_2fp8"},this.props.thread.unread_count>0?c('React').createElement('div',{className:"_2fp9"},c('React').createElement(c('XUIBadge.react'),{count:this.props.thread.unread_count,maxcount:99})):c('React').createElement('div',{className:"_2fpa"},c('React').createElement(c('MercuryPageSeenIndicator.react'),{snippetSearchResult:this.props.snippetSearchResult,thread:this.props.thread,viewer:this.props.pageID}))))));};o.prototype.render=function(){'use strict';return (c('React').createElement(c('PagesSelectableListRow.react'),{disabled:this.props.disableCheckBox,onSelected:this.props.onSelected,onClick:function(event){if(c('CSS').matchesSelector(event.target.parentElement,"._4vbb"))return;c('PagesManagerLogger').logMessageInboxUIAction(c('PagesAdminToolUIActionType').MESSAGE_INBOX_CLICK_THREAD_BLOCK,this.props.pageID);this.props.onViewingListItem(this.props.listItem);}.bind(this),selected:this.props.selected,className:"_1a_0"+(this.props.isUnread?' '+"_1a_1":'')+(this.props.isViewing&&!this.props.selected?' '+"_3wxb":'')+(this.state.menuShown?' '+"_1hgw":'')+(' '+"_o3f")+(' '+"_1yt-")+(this.props.selectionMode?' '+"_ptw":'')},this.$PagesManagerMessagingListRow2()));};o.defaultProps={disableCheckBox:false,useHighlightTitle:false};f.exports=o;}),null);
__d('PagesManagerMessagingListRowContainer.react',['immutable','PagesManagerMessagingListRow.react','MercuryIDs','MercuryParticipants','MercuryThreads','PagesManagerCustomTagsStore','PagesManagerMessagingFilterStore','PagesManagerMessagingThreadInteractionHelper','PagesMessengerThreadUtils','React'],(function a(b,c,d,e,f,g){var h,i,j=c('immutable').Map;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;function k(){var l,m;'use strict';for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.$PagesManagerMessagingListRowContainer1=function(q){c('PagesManagerMessagingThreadInteractionHelper').handleUnreadStateUpdate(q,this.props.pageID,c('PagesManagerMessagingFilterStore').getActiveFilterName());c('PagesManagerMessagingThreadInteractionHelper').handlePermalinkUpdate(q,this.props.pageID);this.props.onViewingListItem(q);}.bind(this),m;}k.prototype.componentWillMount=function(){'use strict';var l=c('MercuryThreads').getForFBID(this.props.pageID).getThreadMetaNow(this.props.listItem);if(l.other_user_fbid){var m=c('MercuryIDs').getParticipantIDFromUserID(l.other_user_fbid);c('MercuryParticipants').get(m,function(n){this.setState({imageSource:n.image_src});}.bind(this));}this.setState({inlineActionParam:c('PagesMessengerThreadUtils').getBatchActionMenuParam(l),thread:l,participants:j(c('immutable').Seq(l.participants).map(function(n){return [n,c('MercuryParticipants').getOrFetch(n)];}))});};k.prototype.render=function(){'use strict';if(this.state.thread.other_user_fbid===null)return c('React').createElement('div',null);var l=this.state.thread.unread_count&&this.state.thread.unread_count>0,m=this.state.thread.page_thread_info&&this.state.thread.page_thread_info.flagged,n=this.state.thread.page_thread_info&&this.state.thread.page_thread_info.customTagNames,o=c('PagesManagerCustomTagsStore').getCustomTags(this.props.pageID),p=[];(n||[]).map(function(t){if(o.has(t))p.push(o.get(t));});var q=this.props,r=q.onViewingListItem,s=babelHelpers.objectWithoutProperties(q,['onViewingListItem']);return c('React').createElement(c('PagesManagerMessagingListRow.react'),babelHelpers['extends']({customTagsData:p,imageSource:this.state.imageSource,isFlagged:m,isUnread:l,onViewingListItem:this.$PagesManagerMessagingListRowContainer1,thread:this.state.thread},s,this.state));};k.prototype.updateThread=function(){'use strict';var l=c('MercuryThreads').getForFBID(this.props.pageID).getThreadMetaNow(this.props.listItem);this.setState({thread:l,inlineActionParam:c('PagesMessengerThreadUtils').getBatchActionMenuParam(l)});};k.defaultProps={useHighlightTitle:false};f.exports=k;}),null);
__d("XPageMessageSettingsPreviewController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pages\/messaging\/settings\/preview_dialog\/",{page_id:{type:"FBID",required:true},tab:{type:"Enum",defaultValue:"messenger_code",enumType:1},__asyncDialog:{type:"Int"}});}),null);
__d('PagesManagerMessagingMessengerCodeLink.react',['ix','cx','fbt','AsyncRequest','Image.react','Link.react','MessageSettingsPreviewTab','React','TooltipData','XBasicFBNuxDismissController','XPageMessageSettingsPreviewController','XUIAmbientNUX.react','fbglyph','joinClasses'],(function a(b,c,d,e,f,g,h,i,j){var k,l,m=4156,n=4198;k=babelHelpers.inherits(o,c('React').Component);l=k&&k.prototype;function o(p){'use strict';l.constructor.call(this,p);this.state={isMessengerCodeNuxShown:this.props.showMessengerCodeNux,isResponseAssistantNuxShown:this.props.showResponseAssistantNux};}o.prototype.$PagesManagerMessagingMessengerCodeLink1=function(p){'use strict';return function(){var q=c('XBasicFBNuxDismissController').getURIBuilder().setInt('nux_id',p).getURI();new (c('AsyncRequest'))().setURI(q).send();switch(p){case m:this.setState({isMessengerCodeNuxShown:false});break;case n:this.setState({isResponseAssistantNuxShown:false});break;}}.bind(this);};o.prototype.$PagesManagerMessagingMessengerCodeLink2=function(p){'use strict';var q=void 0,r=void 0;switch(p){case m:q=this.state.isMessengerCodeNuxShown;r=j._("Download and share your Messenger Code");break;case n:q=this.state.isResponseAssistantNuxShown;r=j._("Get started with Response Assistant");break;}return (c('React').createElement(c('XUIAmbientNUX.react'),{contextRef:function(){return this.refs.codeLink;}.bind(this),hasActionableContext:true,onCloseButtonClick:this.$PagesManagerMessagingMessengerCodeLink1(p),position:'above',shown:q,width:'auto'},r));};o.prototype.render=function(){'use strict';var p=j._("View Response Assistant and Messenger Code"),q=c('XPageMessageSettingsPreviewController').getURIBuilder().setFBID('page_id',this.props.pageID);if(this.state.isResponseAssistantNuxShown)q=q.setEnum('tab',c('MessageSettingsPreviewTab').RESPONSE_ASSISTANT);var r=c('joinClasses')("_59k4",this.props.className);return (c('React').createElement('div',{className:r},c('React').createElement(c('Link.react'),babelHelpers['extends']({ajaxify:q.getURI(),className:"_4d6o",ref:'codeLink',rel:'dialog'},c('TooltipData').propsFor(p)),c('React').createElement(c('Image.react'),{src:h("\/images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/info-solid_20_fig-light-20.png")})),this.state.isMessengerCodeNuxShown?this.$PagesManagerMessagingMessengerCodeLink2(m):null,this.state.isResponseAssistantNuxShown?this.$PagesManagerMessagingMessengerCodeLink2(n):null));};f.exports=o;}),null);
__d('PagesManagerMessagingSearchInput.react',['cx','fbt','ContextualLayer.react','LayerHideOnEscape','PageCustomTagSearchableEntry','PageCustomTagTypeaheadPresenter.react','React','SearchableTextInput.react','SearchableEntry','TokenizerToken.react','XUICloseButton.react','isEmpty','joinClasses'],(function a(b,c,d,e,f,g,h,i){var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(n,o){'use strict';k.constructor.call(this,n,o);this.$PagesManagerMessagingSearchInput1=function(){this.setState({showLayer:false});}.bind(this);this.$PagesManagerMessagingSearchInput9=function(p){var q=p.target.value,r=true;if(q===''){r=false;this.props.onClear();}this.setState({query:q,showLayer:r});}.bind(this);this.$PagesManagerMessagingSearchInput10=function(){this.setState({query:''});this.props.onClear();}.bind(this);this.$PagesManagerMessagingSearchInput11=function(p,q){this.setState({matchedLabels:p});}.bind(this);this.$PagesManagerMessagingSearchInput12=function(){if(this.state.query!==''){this.refs.input.getTextFieldDOM().select();this.setState({showLayer:true});}}.bind(this);this.$PagesManagerMessagingSearchInput5=function(p){this.setState({highlightedEntry:p});}.bind(this);this.$PagesManagerMessagingSearchInput6=function(){this.setState({highlightedEntry:{}});}.bind(this);this.$PagesManagerMessagingSearchInput7=function(p){this.props.addCustomTag(p);this.setState({query:''});}.bind(this);this.state={query:'',showLayer:false,matchedLabels:[],highlightedEntry:{}};}m.prototype.$PagesManagerMessagingSearchInput2=function(n,o,event){'use strict';this.setState({showLayer:false});switch(n){case 'message':this.props.searchMessage.call(this,o);break;case 'name':this.props.searchName.call(this,o);break;}};m.prototype.$PagesManagerMessagingSearchInput3=function(n){'use strict';return c('React').createElement('div',{className:"_4j2v"},c('React').createElement('li',{className:"_4j2w",onMouseDown:this.$PagesManagerMessagingSearchInput2.bind(this,'message',this.state.query)},i._("Messages that contain \"{message search term}\"",[i.param('message search term',this.state.query)])),c('React').createElement('li',{className:"_4j2x",onMouseDown:this.$PagesManagerMessagingSearchInput2.bind(this,'name',this.state.query)},i._("Names that contain \"{message search term}\"",[i.param('message search term',this.state.query)])));};m.prototype.$PagesManagerMessagingSearchInput4=function(n){'use strict';var o=this.state.matchedLabels.filter(function(q){return !n.hasOwnProperty(q.getUniqueID());});if(o.length==0){return c('React').createElement('div',null);}else{var p=c('PageCustomTagTypeaheadPresenter.react').ViewRenderer;return c('React').createElement('div',null,c('React').createElement('li',{className:"_5n87"},i._("Labels")),c('React').createElement(p,{entries:o,highlightedEntry:this.state.highlightedEntry,onHighlight:this.$PagesManagerMessagingSearchInput5,removeHighlight:this.$PagesManagerMessagingSearchInput6,onSelect:this.$PagesManagerMessagingSearchInput7,searchBar:true}));}};m.prototype.$PagesManagerMessagingSearchInput8=function(n,o){'use strict';var p=this.props.TokenRenderer||c('TokenizerToken.react'),q=c('joinClasses')("_2ei6",this.props.tokenClassName);return c('React').createElement(p,{className:q,key:n.getUniqueID(),label:n.getTitle(),entry:n,index:o,onRemove:this.props.onRemove});};m.prototype.render=function(){'use strict';var n=this.props.entries&&this.props.entries.length>0,o=this.props.entries.map(this.$PagesManagerMessagingSearchInput8,this),p={},q;if(n)for(var r=0,s=this.props.entries.length;r<s;r++){var t=this.props.entries[r];q=t.getUniqueID();p[q]=true;}var u=this.props,v=u.className,w=u.placeholder,x=babelHelpers.objectWithoutProperties(u,['className','placeholder']);v=c('joinClasses')("_29s6"+(n?' '+"_29s7":''),v);w=n?'':this.props.placeholder;return (c('React').createElement('div',{className:v},c('React').createElement('div',{className:"_29s8"},o),c('React').createElement(c('SearchableTextInput.react'),babelHelpers['extends']({onBlur:this.$PagesManagerMessagingSearchInput1,onChange:this.$PagesManagerMessagingSearchInput9,onFocus:this.$PagesManagerMessagingSearchInput12,onEntriesFound:this.$PagesManagerMessagingSearchInput11,placeholder:w,queryString:this.state.query,ref:'input'},x)),c('React').createElement(c('XUICloseButton.react'),{className:"_3i2o"+(c('isEmpty')(this.state.query)?' '+"hidden_elem":''),onClick:this.$PagesManagerMessagingSearchInput10,size:'medium'}),this.props.contextRef&&this.props.contextRef()?c('React').createElement(c('ContextualLayer.react'),{behaviors:{LayerHideOnEscape:c('LayerHideOnEscape')},containerWidthMatchContext:true,contextRef:this.props.contextRef,shown:this.state.showLayer,position:'below'},this.$PagesManagerMessagingSearchInput3(p)):null));};m.propTypes={addCustomTag:l.func,contextRef:l.func,searchMessage:l.func,searchName:l.func,textInputClassName:String,tokenClassName:String,TokenRenderer:l.element,entries:l.arrayOf(l.instanceOf(c('SearchableEntry')))};f.exports=m;}),null);
__d('PagesManagerMessagingSearchView.react',['cx','fbt','ix','AbstractTextInput.react','AbstractTokenizer.react','PagesManagerMessagingFilterStore','Image.react','immutable','PageCustomTagSearchableEntry','PageCustomTagSearchSource','PageCustomTagTypeaheadPresenter.react','PagesAdminToolUIActionType','PagesContextCardCustomTag.react','PagesEnumTag.react','PagesManagerLogger','PagesManagerMessagingFilterActions','PagesManagerMessagingSearchInput.react','React','PagesMessagingSearchMode','PagesManagerMessagingThreadlistAction','PagesManagerMessagingNavigationUnitKey','XUICloseButton.react','emptyFunction'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l;k=babelHelpers.inherits(m,c('React').Component);l=k&&k.prototype;function m(n,o){l.constructor.call(this,n,o);this.$PagesManagerMessagingSearchView5=function(p){var q=p.target.value,r=true;if(q==='')r=false;this.setState({query:q,showLayer:r});}.bind(this);this.$PagesManagerMessagingSearchView4=function(p){c('PagesManagerMessagingThreadlistAction').removeSearchCustomTag(this.props.pageID,p,'search_block');}.bind(this);this.$PagesManagerMessagingSearchView9=function(){c('PagesManagerMessagingFilterActions').changeFilter(this.props.pageID,c('PagesManagerMessagingFilterStore').getAvailableFilters().get(0));}.bind(this);this.$PagesManagerMessagingSearchView1=function(p){c('PagesManagerMessagingThreadlistAction').changeSearchTerm(this.props.pageID,p.target.value,c('PagesManagerMessagingFilterStore').getActiveFolderName(),c('PagesMessagingSearchMode').ALL);}.bind(this);this.$PagesManagerMessagingSearchView2=function(){c('PagesManagerMessagingThreadlistAction').resetSearch(this.props.pageID);}.bind(this);this.$PagesManagerMessagingSearchView3=function(p){if(p.key==='Escape')c('PagesManagerMessagingThreadlistAction').resetSearch(this.props.pageID);}.bind(this);this.$PagesManagerMessagingSearchView7=function(p){c('PagesManagerLogger').logMessageInboxUIAction(c('PagesAdminToolUIActionType').MESSAGE_INBOX_CLICK_SEARCH_NAMES,this.props.pageID,{query:p});c('PagesManagerMessagingThreadlistAction').changeSearchTerm(this.props.pageID,p,c('PagesManagerMessagingFilterStore').getActiveFolderName(),c('PagesMessagingSearchMode').NAME_SEARCH);this.setState({showLayer:false});}.bind(this);this.$PagesManagerMessagingSearchView8=function(p){c('PagesManagerLogger').logMessageInboxUIAction(c('PagesAdminToolUIActionType').MESSAGE_INBOX_CLICK_SEARCH_MESSAGES,this.props.pageID,{query:p});c('PagesManagerMessagingThreadlistAction').changeSearchTerm(this.props.pageID,p,c('PagesManagerMessagingFilterStore').getActiveFolderName(),c('PagesMessagingSearchMode').MESSAGE_SEARCH);this.setState({showLayer:false});}.bind(this);this.$PagesManagerMessagingSearchView6=function(p){if(this.state.query!=='')this.setState({showLayer:true});}.bind(this);this.state={query:'',showLayer:false,highlightedEntry:{}};}m.prototype.$PagesManagerMessagingSearchView10=function(){var n=[];this.props.currentSearchCustomTagNames.toArray().map(function(o){if(this.props.customTagSearchSource.has(o))n.push(this.props.customTagSearchSource.get(o));}.bind(this));return n;};m.prototype.$PagesManagerMessagingSearchView11=function(){var n=i._("Search people and messages");return (c('React').createElement(c('PagesManagerMessagingSearchInput.react'),{addCustomTag:c('emptyFunction'),className:"_5ptj",contextRef:function(){return this.refs.input;}.bind(this),onClick:this.$PagesManagerMessagingSearchView6,onClear:this.$PagesManagerMessagingSearchView2,onRemove:c('emptyFunction'),placeholder:n,searchMessage:this.$PagesManagerMessagingSearchView8,searchName:this.$PagesManagerMessagingSearchView7,entries:[],excludedEntries:[],TokenRendere:c('PageCustomTagTypeaheadPresenter.react').ViewRenderer,searchSource:c('PageCustomTagSearchSource').getInstance([],false)}));};m.prototype.$PagesManagerMessagingSearchView12=function(){if(this.props.currentSearchCustomTagNames.toArray().length===0&&this.props.activeFilter.getKey()!==c('PagesManagerMessagingNavigationUnitKey').FILTERS.FLAGGED)return null;return (c('React').createElement('div',{className:"_4w11"},this.props.activeFilter.getKey()===c('PagesManagerMessagingNavigationUnitKey').FILTERS.FLAGGED?c('React').createElement(c('PagesEnumTag.react'),{canRemove:true,onRemove:this.$PagesManagerMessagingSearchView9,unit:this.props.activeFilter}):null,this.$PagesManagerMessagingSearchView10().map(function(n){return (c('React').createElement(c('PagesContextCardCustomTag.react'),{canRemove:true,hideOnRemove:true,key:n.id,onRemove:this.$PagesManagerMessagingSearchView4,tagData:n}));}.bind(this))));};m.prototype.render=function(){var n={left:this.props.arrowTopX,top:this.props.arrowTopY-8};return (c('React').createElement('div',null,c('React').createElement('div',{ref:'arrow',className:"_1u5x"+(this.props.currentSearchCustomTagNames.toArray().length>0||c('PagesManagerMessagingFilterStore').getActiveFilterName()===c('PagesManagerMessagingNavigationUnitKey').FILTERS.FLAGGED||this.props.isSearchActive?' '+"hidden_elem":''),style:n}),c('React').createElement('div',{className:"_3i2n"+(' '+"_4m_d")+(this.props.currentSearchCustomTagNames.toArray().length>0||c('PagesManagerMessagingFilterStore').getActiveFilterName()===c('PagesManagerMessagingNavigationUnitKey').FILTERS.FLAGGED?' '+"hidden_elem":''),ref:'input'},c('React').createElement(c('Image.react'),{className:"_5pti",src:j('/images/browse/search/search-gray.png')}),this.$PagesManagerMessagingSearchView11()),this.$PagesManagerMessagingSearchView12()));};f.exports=m;}),null);
__d('PagesManagerMessagingUIActionTypes',['keyMirrorRecursive'],(function a(b,c,d,e,f,g){'use strict';var h=c('keyMirrorRecursive')({SET_SEARCH_ARROW_TOP_X:'',SET_SEARCH_ARROW_TOP_Y:'',SET_SEARCH_BAR_SHADOW:''});f.exports=h;}),null);
__d('PagesManagerMessagingUIStore',['PagesManagerMessagingUIActionTypes','FluxStore','PagesManagerDispatcher'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('FluxStore'));i=h&&h.prototype;function j(){'use strict';i.constructor.call(this,c('PagesManagerDispatcher'));this.$PagesManagerMessagingUIStore1=0;this.$PagesManagerMessagingUIStore2=0;this.$PagesManagerMessagingUIStore3=false;}j.prototype.__onDispatch=function(k){'use strict';switch(k.type){case c('PagesManagerMessagingUIActionTypes').SET_SEARCH_ARROW_TOP_X:this.$PagesManagerMessagingUIStore1=k.offset;this.__emitChange();break;case c('PagesManagerMessagingUIActionTypes').SET_SEARCH_ARROW_TOP_Y:this.$PagesManagerMessagingUIStore2=k.offset;this.__emitChange();break;case c('PagesManagerMessagingUIActionTypes').SET_SEARCH_BAR_SHADOW:this.$PagesManagerMessagingUIStore3=k.status;this.__emitChange();break;}};j.prototype.getSearchBarArrowTopX=function(){'use strict';return this.$PagesManagerMessagingUIStore1;};j.prototype.getSearchBarArrowTopY=function(){'use strict';return this.$PagesManagerMessagingUIStore2;};j.prototype.getSearchBarShadow=function(){'use strict';return this.$PagesManagerMessagingUIStore3;};f.exports=new j();}),null);
__d('PagesManagerMessagingSearchContainer.react',['PagesManagerMessagingFilterStore','FluxContainer','immutable','PagesManagerCustomTagsAction','PagesManagerCustomTagsStore','PagesManagerMessagingSearchStore','PagesManagerMessagingSearchView.react','PagesManagerMessagingUIStore','React'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;function j(k,l){i.constructor.call(this,k,l);}j.getStores=function(){return [c('PagesManagerMessagingFilterStore'),c('PagesManagerCustomTagsStore'),c('PagesManagerMessagingSearchStore'),c('PagesManagerMessagingUIStore')];};j.prototype.componentWillMount=function(){if(!c('PagesManagerCustomTagsStore').hasCustomTags(this.props.pageID))c('PagesManagerCustomTagsAction').fetch(this.props.pageID);};j.calculateState=function(k,l){return {activeFilter:c('PagesManagerMessagingFilterStore').getActiveFilter(),arrowTopX:c('PagesManagerMessagingUIStore').getSearchBarArrowTopX(),arrowTopY:c('PagesManagerMessagingUIStore').getSearchBarArrowTopY(),currentSearchCustomTagNames:c('PagesManagerMessagingSearchStore').getCurrentSearchCustomTagNames(),currentSearchTerm:c('PagesManagerMessagingSearchStore').getCurrentSearchTerm(),isSearchActive:c('PagesManagerMessagingSearchStore').getIsInSearchMode(),customTagSearchSource:c('PagesManagerCustomTagsStore').getCustomTags(l.pageID)};};j.prototype.render=function(){return (c('React').createElement(c('PagesManagerMessagingSearchView.react'),babelHelpers['extends']({},this.props,{activeFilter:this.state.activeFilter,arrowTopX:this.state.arrowTopX,arrowTopY:this.state.arrowTopY,initSearchTerm:this.state.currentSearchTerm,isSearchActive:this.state.isSearchActive,customTagSearchSource:this.state.customTagSearchSource,currentSearchCustomTagNames:this.state.currentSearchCustomTagNames})));};f.exports=c('FluxContainer').create(j,{withProps:true});}),null);
__d('PagesManagerMessagingSearchListResult.react',['cx','fbt','Link.react','PagesManagerListRowContainer.react','PagesManagerAction','PagesSelectableList.react','React','emptyFunction'],(function a(b,c,d,e,f,g,h,i){var j,k;j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;l.prototype.$PagesManagerMessagingSearchListResult1=function(m){'use strict';c('PagesManagerAction').viewListItem(m);};l.prototype.getNameResultKey=function(m){'use strict';return 'NameResult:'+m;};l.prototype.getSnippetResultKey=function(m){'use strict';return 'SnippetResult:'+m;};l.prototype.$PagesManagerMessagingSearchListResult2=function(){'use strict';var m=c('React').createElement('li',{className:"_16-z",key:'nameSearchTitle'},i._("Names that contain \"{message search term}\"",[i.param('message search term',this.props.searchTerm)])),n=this.props.nameSearchResult.map(function(s){return (c('React').createElement(c('PagesManagerListRowContainer.react'),babelHelpers['extends']({ChildClass:this.props.listRowContainer,disableCheckBox:true,listItem:s,pageID:this.props.pageID,ref:this.getNameResultKey(s),key:this.getNameResultKey(s),onViewingListItem:this.$PagesManagerMessagingSearchListResult1,highlightText:this.props.searchTerm,useHighlightTitle:true,type:'li'},this.props.containerProps)));}.bind(this)),o=this.props.hasMoreNameSearchResult&&!this.props.isSearchingName?c('React').createElement('li',{className:"_16--",key:'loadMoreNameResult'},c('React').createElement(c('Link.react'),{onClick:this.props.loadMoreNameResult},i._("See More Results"))):c('React').createElement('li',{className:"_3o39",key:'loadMoreNameResult'}),p=c('React').createElement('li',{className:"_16-z",key:'snippetSearchTitle'},i._("Messages that contain \"{message search term}\"",[i.param('message search term',this.props.searchTerm)])),q=[];Object.keys(this.props.snippetSearchResult).forEach(function(s){q.push(c('React').createElement(c('PagesManagerListRowContainer.react'),babelHelpers['extends']({ChildClass:this.props.listRowContainer,disableCheckBox:true,listItem:s,pageID:this.props.pageID,ref:this.getSnippetResultKey(s),key:this.getSnippetResultKey(s),onViewingListItem:this.$PagesManagerMessagingSearchListResult1,snippetSearchResult:this.props.snippetSearchResult[s],highlightText:this.props.searchTerm,useHighlightTitle:false,type:'li'},this.props.containerProps)));}.bind(this));var r=this.props.hasMoreSnippetSearchResult&&!this.props.isSearchingSnippet?c('React').createElement('li',{className:"_16--",key:'loadMoreSnippetResult'},c('React').createElement(c('Link.react'),{onClick:this.props.loadMoreSnippetResult},i._("See More Results"))):c('React').createElement('li',{className:"_3o39",key:'loadMoreSnippetResult'});return [m].concat(n,[o,p],q,[r]);};l.prototype.render=function(){'use strict';var m=this.$PagesManagerMessagingSearchListResult2();return (c('React').createElement(c('PagesSelectableList.react'),{actionBarRightComponent:this.props.actionBarRightContainer,deselectAllLabel:'',hideBatchAction:true,enableOnVisible:false,forceRequestMoreRows:false,height:this.props.height,onSelectionChange:this.props.onSelectionChange,onRequestMoreRows:c('emptyFunction'),ref:'selectableList',scrollableAreaMode:true,scrollableAreaHasShadow:false,scrollableWidth:this.props.scrollableWidth},m));};function l(){'use strict';j.apply(this,arguments);}f.exports=l;}),null);
__d('PagesManagerMessagingSeparateSearchResultView.react',['cx','fbt','Link.react','PagesManagerListRowContainer.react','PagesManagerAction','PagesSelectableList.react','PagesMessagingSearchMode','React','emptyFunction'],(function a(b,c,d,e,f,g,h,i){var j,k;j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;l.prototype.$PagesManagerMessagingSeparateSearchResultView1=function(m){'use strict';c('PagesManagerAction').viewListItem(m);};l.prototype.$PagesManagerMessagingSeparateSearchResultView2=function(){'use strict';var m=null,n=[];switch(this.props.searchMode){case c('PagesMessagingSearchMode').MESSAGE_SEARCH:m=i._("Messages that contain \"{message search term}\"",[i.param('message search term',this.props.searchTerm)]);Object.keys(this.props.snippetSearchResult).forEach(function(p){n.push(c('React').createElement(c('PagesManagerListRowContainer.react'),babelHelpers['extends']({ChildClass:this.props.listRowContainer,disableCheckBox:true,listItem:p,pageID:this.props.pageID,ref:p,key:p,onViewingListItem:this.$PagesManagerMessagingSeparateSearchResultView1,snippetSearchResult:this.props.snippetSearchResult[p],highlightText:this.props.searchTerm,useHighlightTitle:false,type:'li'},this.props.containerProps)));}.bind(this));break;case c('PagesMessagingSearchMode').NAME_SEARCH:m=i._("Names that contain \"{message search term}\"",[i.param('message search term',this.props.searchTerm)]);n=this.props.searchResult.map(function(p){return (c('React').createElement(c('PagesManagerListRowContainer.react'),babelHelpers['extends']({ChildClass:this.props.listRowContainer,disableCheckBox:true,listItem:p,pageID:this.props.pageID,ref:p,key:p,onViewingListItem:this.$PagesManagerMessagingSeparateSearchResultView1,highlightText:this.props.searchTerm,useHighlightTitle:true,type:'li'},this.props.containerProps)));}.bind(this));break;}m=c('React').createElement('li',{className:"_16-z",key:'searchTitle'},m);var o=this.props.hasMoreResult?c('React').createElement('li',{className:"_2b19",key:'loadMoreResult'},c('React').createElement(c('Link.react'),{onClick:this.props.loadMore.bind(null,this.props.searchMode,this.props.searchTerm)},i._("See More Results"))):c('React').createElement('li',{className:"_3o39",key:'loadMoreResult'});return [m].concat(n,[o]);};l.prototype.render=function(){'use strict';var m=this.$PagesManagerMessagingSeparateSearchResultView2();return (c('React').createElement(c('PagesSelectableList.react'),{actionBarRightComponent:this.props.actionBarRightContainer,deselectAllLabel:'',hideBatchAction:true,enableOnVisible:false,forceRequestMoreRows:false,height:this.props.height,onSelectionChange:this.props.onSelectionChange,onRequestMoreRows:c('emptyFunction'),ref:'selectableList',scrollableAreaMode:true,scrollableAreaHasShadow:false,scrollableWidth:this.props.scrollableWidth},m));};function l(){'use strict';j.apply(this,arguments);}f.exports=l;}),null);
__d('PagesManagerMessagingUIActions',['PagesManagerMessagingUIActionTypes','PagesManagerDispatcher'],(function a(b,c,d,e,f,g){var h={setSearchBarArrowTopX:function i(j){c('PagesManagerDispatcher').dispatch({offset:j,type:c('PagesManagerMessagingUIActionTypes').SET_SEARCH_ARROW_TOP_X});},setSearchBarArrowTopY:function i(j){c('PagesManagerDispatcher').dispatch({offset:j,type:c('PagesManagerMessagingUIActionTypes').SET_SEARCH_ARROW_TOP_Y});},setSearchBarShaddow:function i(j){c('PagesManagerDispatcher').dispatch({status:j,type:c('PagesManagerMessagingUIActionTypes').SET_SEARCH_BAR_SHADOW});}};f.exports=h;}),null);
__d('PagesManagerMessagingListContainer.react',['cx','fbt','ix','PagesManagerMessagingBatchActionHeaderContainer.react','ContextualDialogArrow','ContextualLayerAutoFlip','FluxContainer','Image.react','immutable','LeftRight.react','PagesManagerListBatchActionContainer.react','MercuryThreadlistConstants','MessageThreadViewSource','PagesAdminToolUIActionType','PagesEventObserver','PagesEventType','PagesManagerAction','PagesManagerAwayContainer.react','PagesManagerAwayToggle.react','PagesManagerInboxSwitcher.react','PagesManagerListView.react','PagesManagerLogger','PagesManagerMessagingFilterActions','PagesManagerMessagingFilterStore','PagesManagerMessagingFilterPanelSwitch.react','PagesManagerMessagingList.react','PagesManagerMessagingListRowContainer.react','PagesManagerMessagingLogger','PagesManagerMessagingMessengerCodeLink.react','PagesManagerMessagingNUXActions','PagesManagerMessagingPriorityStore','PagesManagerMessagingSearchContainer.react','PagesManagerMessagingSearchListResult.react','PagesMessagingSearchMode','PagesManagerMessagingSearchStore','PagesManagerMessagingSeparateSearchResultView.react','PagesManagerMessagingTabPerfEvents','PagesManagerMessagingThreadInteractionHelper','PagesManagerMessagingThreadlistAction','PagesManagerMessagingThreadlistStore','PagesManagerMessagingUIActions','PagesManagerMessagingUIStore','PagesManagerPerfLogger','PagesManagerStore','PopoverMenu.react','React','ReactDOM','SubscriptionsHandler','MercuryThreadInformer','PagesManagerMessagingNavigationUnitKey','Vector','XUICard.react','ReactXUIMenu','debounce','emptyFunction'],(function a(b,c,d,e,f,g,h,i,j){var k,l,m=50,n=c('ReactXUIMenu').Item;k=babelHelpers.inherits(o,c('React').Component);l=k&&k.prototype;function o(p){'use strict';l.constructor.call(this,p);this.$PagesManagerMessagingListContainer10=function(){c('PagesManagerMessagingThreadlistAction').loadMoreNameResult(this.props.pageID,this.state.searchTerm,c('PagesManagerMessagingFilterStore').getActiveFolderName());}.bind(this);this.$PagesManagerMessagingListContainer11=function(){c('PagesManagerMessagingThreadlistAction').loadMoreSnippetResult(this.props.pageID,this.state.searchTerm,c('PagesManagerMessagingFilterStore').getActiveFolderName());}.bind(this);this.$PagesManagerMessagingListContainer12=function(q,r){switch(q){case c('PagesMessagingSearchMode').NAME_SEARCH:c('PagesManagerMessagingThreadlistAction').loadMoreNameResult(this.props.pageID,r,c('PagesManagerMessagingFilterStore').getActiveFolderName());break;case c('PagesMessagingSearchMode').MESSAGE_SEARCH:c('PagesManagerMessagingThreadlistAction').loadMoreSnippetResult(this.props.pageID,r,c('PagesManagerMessagingFilterStore').getActiveFolderName());break;}}.bind(this);this.$PagesManagerMessagingListContainer13=function(){var q=c('PagesManagerMessagingFilterStore').getNavigationKey(),r=!this.state.isInPriorityMode&&c('PagesManagerMessagingThreadlistStore').hasMoreItem(q)&&!c('PagesManagerMessagingThreadlistStore').isLoading(),s=this.state.isInPriorityMode&&c('PagesManagerMessagingPriorityStore').hasMoreNonPriorityItem()&&!c('PagesManagerMessagingPriorityStore').isLoading();if((r||s)&&!this.state.isInSearchMode){var t=this.state.isInPriorityMode?this.state.threadIDList.length+this.state.priorityThreadIDList.length:this.state.threadIDList.length;c('PagesManagerMessagingThreadlistAction').fetchThreadlist(this.props.pageID,t,c('MercuryThreadlistConstants').WEBMESSENGER_MORE_COUNT);}}.bind(this);this.$PagesManagerMessagingListContainer14=function(){if(this.refs.listView.refs.selectableList.refs.scrollableArea.getArea().isScrolledToTop()){c('PagesManagerMessagingUIActions').setSearchBarShaddow(false);}else if(!c('PagesManagerMessagingUIStore').getSearchBarShadow())c('PagesManagerMessagingUIActions').setSearchBarShaddow(true);}.bind(this);this.$PagesManagerMessagingListContainer17=function(q,r){var s=this.state.folderDropdown.filter(function(u){return u.getKey()===r.item.getValue();});if(s.count()==0)return;var t=s.get(0);c('PagesManagerLogger').logMessageInboxUIAction(c('PagesAdminToolUIActionType').MESSAGE_INBOX_SWITCH_FOLDER,this.props.pageID,{folder:t.getKey(),position:'dropdown'});c('PagesManagerMessagingFilterActions').changeFilter(this.props.pageID,t);}.bind(this);this.$PagesManagerMessagingListContainer1=false;this.$PagesManagerMessagingListContainer2=function(){this.refs.listView.clearSelection();}.bind(this);}o.getStores=function(){'use strict';return [c('PagesManagerMessagingThreadlistStore'),c('PagesManagerMessagingPriorityStore'),c('PagesManagerMessagingFilterStore'),c('PagesManagerMessagingSearchStore'),c('PagesManagerMessagingUIStore')];};o.calculateSearchState=function(p,q){'use strict';var r=c('PagesManagerMessagingSearchStore').getThreadNameSearchResults(),s=c('PagesManagerMessagingSearchStore').getIsSearchingName(),t=c('PagesManagerMessagingSearchStore').hasMoreNameSearchResult(),u=c('PagesManagerMessagingSearchStore').hasMoreSnippetSearchResult(),v=c('PagesManagerMessagingSearchStore').getThreadSnippetSearchResults(),w=c('PagesManagerMessagingSearchStore').getIsSearchingSnippet(),x=[],y={},z=false,aa=false;switch(c('PagesManagerMessagingSearchStore').getSearchMode()){case c('PagesMessagingSearchMode').MESSAGE_SEARCH:y=v;z=u;aa=w;break;case c('PagesMessagingSearchMode').NAME_SEARCH:x=r;z=t;aa=s;break;}return {hasMoreResult:z,isInSearchMode:true,isSearching:aa,searchTerm:c('PagesManagerMessagingSearchStore').getCurrentSearchTerm(),searchMode:c('PagesManagerMessagingSearchStore').getSearchMode(),searchResult:x,snippetSearchResult:y};};o.calsulateListState=function(p,q){'use strict';var r=q.config.enablePriorityInbox&&c('PagesManagerMessagingFilterStore').getIsInboxAll(),s=r?c('PagesManagerMessagingPriorityStore').getNonPriorityItemList(q.pageID):c('PagesManagerMessagingThreadlistStore').getItemList(q.pageID),t=r?c('PagesManagerMessagingPriorityStore').getPriorityItemList(q.pageID):null,u=r?c('PagesManagerMessagingPriorityStore').hasMoreNonPriorityItem():c('PagesManagerMessagingThreadlistStore').hasMoreItem(c('PagesManagerMessagingFilterStore').getNavigationKey()),v=r?t.findIndex(function(ea){return ea===c('PagesManagerStore').getViewingListItem();})>=0||s.findIndex(function(ea){return ea===c('PagesManagerStore').getViewingListItem();})>=0:s.findIndex(function(ea){return ea===c('PagesManagerStore').getViewingListItem();})>=0,w=c('PagesManagerStore').getInitialViewingItem(),x=c('PagesManagerStore').getViewingListItem(),y=s.length>0,z=w&&w===x,aa=!z&&(!x&&y||x&&y&&!v);if(aa){var ba=r&&t&&t.length?t[0]:s[0];c('PagesManagerAction').viewListItem(ba);c('PagesManagerMessagingThreadInteractionHelper').handlePermalinkUpdate(ba,q.pageID);}var ca=r?c('PagesManagerMessagingPriorityStore').isLoading():c('PagesManagerMessagingThreadlistStore').isLoading(),da=false;if(s.length===0)da=ca;if(!p||p.isInPriorityMode!==r)c('PagesManagerMessagingThreadlistAction').switchPriorityView(r);return {hasMoreItem:u,hasMoreResult:u,initLoading:da,isInPriorityMode:r,isInSearchMode:false,threadIDList:s,priorityThreadIDList:t};};o.calculateState=function(p,q){'use strict';var r=null;if(c('PagesManagerMessagingSearchStore').getIsInSearchMode()&&c('PagesManagerMessagingSearchStore').getCurrentSearchTerm().length>0){r=o.calculateSearchState(p,q);}else r=o.calsulateListState(p,q);if(p&&p.initLoading&&!r.initLoading)c('PagesManagerMessagingNUXActions').setThreadlistReady();r.isFiltering=c('PagesManagerMessagingFilterStore').getIsFiltering();r.folderDropdown=c('PagesManagerMessagingFilterStore').getFolderDropDown();r.unitNotificationCountMap=c('PagesManagerMessagingFilterStore').getUnitNotificationCountMap(q.pageID);r.showShadow=c('PagesManagerMessagingUIStore').getSearchBarShadow();r.currentSearchCustomTagNames=c('PagesManagerMessagingSearchStore').getCurrentSearchCustomTagNames();r.activeFilter=c('PagesManagerMessagingFilterStore').getActiveFilter();return r;};o.prototype.$PagesManagerMessagingListContainer3=function(){'use strict';return this.state.currentSearchCustomTagNames.size!==0||this.state.activeFilter.getKey()===c('PagesManagerMessagingNavigationUnitKey').FILTERS.FLAGGED;};o.prototype.componentDidUpdate=function(p,q){'use strict';if(this.$PagesManagerMessagingListContainer1&&!this.state.initLoading){this.$PagesManagerMessagingListContainer1=false;c('PagesEventObserver').notify(c('PagesEventType').MESSAGES_INBOX_LOAD_END,this.props.pageID,{flowID:this.props.flowID,page_id:this.props.pageID,loading_event_time:Date.now()});}if(this.state.isFiltering!==q.isFiltering||this.state.activeFilter!==q.activeFilter||this.state.currentSearchCustomTagNames.size===0&&q.currentSearchCustomTagNames.size!==0)this.$PagesManagerMessagingListContainer4();};o.prototype.componentDidMount=function(){'use strict';c('PagesManagerPerfLogger').log(c('PagesManagerMessagingTabPerfEvents').MESSAGE_TAB_THREAD_LIST_DID_RENDER,this.props.perfParams);c('PagesManagerMessagingThreadlistAction').initThreadlist(this.props.pageID);c('PagesManagerMessagingThreadlistAction').setPriorityGK(this.props.config.enablePriorityInbox);c('PagesEventObserver').notify(c('PagesEventType').MESSAGES_THREADLIST_LOAD_START,this.props.pageID,{flowID:this.props.flowID,page_id:this.props.pageID,loading_event_time:Date.now()});c('PagesManagerMessagingLogger').logPageViewFolderEvent(this.props.pageID,c('PagesManagerMessagingFilterStore').getActiveFolder(),c('MessageThreadViewSource').NEW_MESSAGETAB);this.$PagesManagerMessagingListContainer1=true;this.$PagesManagerMessagingListContainer5=c('MercuryThreadInformer').getForFBID(this.props.pageID);this.$PagesManagerMessagingListContainer6=new (c('SubscriptionsHandler'))();this.$PagesManagerMessagingListContainer6.addSubscriptions(this.$PagesManagerMessagingListContainer5.subscribe('threadlist-updated',function(p,q){return this.$PagesManagerMessagingListContainer7();}.bind(this)),this.$PagesManagerMessagingListContainer5.subscribe('threads-updated',function(p,q){return this.$PagesManagerMessagingListContainer8(Object.keys(q));}.bind(this)));this.$PagesManagerMessagingListContainer4();};o.prototype.componentWillUnmount=function(){'use strict';this.$PagesManagerMessagingListContainer6&&this.$PagesManagerMessagingListContainer6.release();};o.prototype.$PagesManagerMessagingListContainer9=function(p){'use strict';return p;};o.prototype.$PagesManagerMessagingListContainer7=function(){'use strict';c('PagesManagerMessagingThreadlistAction').updateThreadlist(this.props.pageID);};o.prototype.$PagesManagerMessagingListContainer8=function(p){'use strict';p.forEach(function(q){if(this.refs.searchResult){var r=this.refs.searchResult.refs[q];if(r)r.refs.childClass.updateThread();}else if(this.refs.listView){var s=this.refs.listView.refs[q];if(s)s.refs.childClass.updateThread();}}.bind(this));};o.prototype.$PagesManagerMessagingListContainer4=function(){'use strict';if(this.refs.fileMenu&&this.refs.unreadCount){var p=0;if(this.state.isFiltering){var q=c('Vector').getElementDimensions(c('ReactDOM').findDOMNode(this.refs.filterSwitch)).x,r=c('ReactDOM').findDOMNode(this.refs.filterSwitch).offsetLeft;p=r+q-4;}else{var s=c('Vector').getElementDimensions(c('ReactDOM').findDOMNode(this.refs.fileMenu)).x,t=c('Vector').getElementDimensions(c('ReactDOM').findDOMNode(this.refs.unreadCount)).x,u=c('ReactDOM').findDOMNode(this.refs.fileMenu).offsetLeft;p=u+(s-t)/2;}c('PagesManagerMessagingUIActions').setSearchBarArrowTopX(p);}};o.prototype.$PagesManagerMessagingListContainer15=function(){'use strict';var p=c('React').createElement(c('PagesManagerMessagingFilterPanelSwitch.react'),{pageID:this.props.pageID,ref:'filterSwitch',height:this.$PagesManagerMessagingListContainer16(),isFiltering:c('PagesManagerMessagingFilterStore').getIsFiltering(),enableManageTags:this.props.config.enableManageTags,showNUX:this.props.config.showFilterNUX});return c('React').createElement('div',null,c('React').createElement(c('PagesManagerListBatchActionContainer.react'),{ChildClass:c('PagesManagerMessagingBatchActionHeaderContainer.react'),pageID:this.props.pageID,onSelectionClear:this.$PagesManagerMessagingListContainer2}),p);};o.prototype.$PagesManagerMessagingListContainer18=function(p){'use strict';return (c('React').createElement(n,{key:p.getKey(),value:p.getKey()},c('React').createElement('div',{className:"_-7b"},p.getDisplayTitle())));};o.prototype.$PagesManagerMessagingListContainer19=function(){'use strict';var p=c('React').createElement(c('ReactXUIMenu'),{onItemClick:this.$PagesManagerMessagingListContainer17},this.state.folderDropdown.map(this.$PagesManagerMessagingListContainer18)),q=c('PagesManagerMessagingFilterStore').getActiveFolderDropDown(),r=this.state.unitNotificationCountMap.get(q);return (c('React').createElement(c('PopoverMenu.react'),{layerBehaviors:[c('ContextualDialogArrow'),c('ContextualLayerAutoFlip')],menu:p},c('React').createElement('div',{className:"_-7c _46l"},c('React').createElement('span',{ref:'fileMenu'},q.getDisplayTitle()),c('React').createElement('div',{className:"_-7h"+(' '+"_-7e")+(r===0?' '+"hidden_elem":''),ref:'unreadCount'},r))));};o.prototype.$PagesManagerMessagingListContainer20=function(){'use strict';return '';};o.prototype.$PagesManagerMessagingListContainer16=function(){'use strict';var p=c('ReactDOM').findDOMNode(this.refs.threadListHeader),q=c('ReactDOM').findDOMNode(this.refs.threadListFooter),r=0;if(q!==null)r=c('Vector').getElementDimensions(q).y;return this.props.height-r;};o.prototype.$PagesManagerMessagingListContainer21=function(){'use strict';return (c('React').createElement(c('XUICard.react'),{className:"_alj",ref:'threadListFooter'},c('React').createElement(c('LeftRight.react'),null,c('React').createElement(c('PagesManagerAwayContainer.react'),{pageID:this.props.pageID,RenderClass:c('PagesManagerAwayToggle.react')}),c('React').createElement(c('PagesManagerMessagingMessengerCodeLink.react'),{className:"_h38",pageID:this.props.pageID,showMessengerCodeNux:this.props.config.shouldShowMessengerCodeNUX,showResponseAssistantNux:this.props.config.shouldShowResponseAssistantNUX}))));};o.prototype.$PagesManagerMessagingListContainer22=function(){'use strict';return (c('React').createElement('div',{ref:'threadListHeader'},c('React').createElement('div',{className:(this.state.isFiltering?"_4f_9":'')+(' '+"_alk")+(this.state.showShadow&&!this.props.config.showInboxSwitcher?' '+"_1axm":'')},c('React').createElement(c('PagesManagerMessagingSearchContainer.react'),{arrowTopPositionY:this.state.arrowTopPositionY,pageID:this.props.pageID,switchNewInterface:false})),this.props.config.showInboxSwitcher?c('React').createElement('div',{className:this.state.showShadow?"_1axm":''},c('React').createElement(c('PagesManagerInboxSwitcher.react'),{pageID:this.props.pageID,pageToken:this.props.config.uriToken,switchNewInterface:true})):null));};o.prototype.$PagesManagerMessagingListContainer23=function(){'use strict';if(this.$PagesManagerMessagingListContainer3())return (c('React').createElement('div',{className:"_3-8-",key:'emptyView'},c('React').createElement(c('Image.react'),{className:"_5gxr",src:j('/images/pages/pages_manager/messages/gray_label.png')}),c('React').createElement('div',{className:"_5gxs"},i._("No conversations match the labels that you've selected"))));return c('React').createElement('div',{key:'emptyView'});};o.prototype.$PagesManagerMessagingListContainer24=function(){'use strict';return (c('React').createElement(c('PagesManagerMessagingList.react'),babelHelpers['extends']({},this.props,{actionBarRightContainer:this.$PagesManagerMessagingListContainer15(),folderDropDown:this.$PagesManagerMessagingListContainer19(),containerProps:{config:this.props.config},emptyView:this.$PagesManagerMessagingListContainer23(),getKey:this.$PagesManagerMessagingListContainer9,handleScroll:this.$PagesManagerMessagingListContainer14,hasMoreResult:this.state.hasMoreResult,header:this.$PagesManagerMessagingListContainer22(),height:this.$PagesManagerMessagingListContainer16(),initLoading:this.state.initLoading,isFiltering:this.state.isFiltering,isInPriorityMode:this.state.isInPriorityMode,isInSearchMode:this.state.isInSearchMode,isSearching:this.state.isSearching,isFilteringByTag:this.$PagesManagerMessagingListContainer3(),list:this.state.threadIDList,listRowContainer:c('PagesManagerMessagingListRowContainer.react'),loadMore:this.$PagesManagerMessagingListContainer12,navigationKey:c('PagesManagerMessagingFilterStore').getNavigationKey(),onScroll:this.$PagesManagerMessagingListContainer13,onSelectionChange:this.props.onSelectionChange,priorityList:this.state.priorityThreadIDList,ref:'listView',scrollableWidth:320,selectAllLabel:this.$PagesManagerMessagingListContainer20(),searchTerm:this.state.searchTerm,searchMode:this.state.searchMode,searchResult:this.state.searchResult,snippetSearchResult:this.state.snippetSearchResult})));};o.prototype.render=function(){'use strict';return (c('React').createElement('div',null,this.$PagesManagerMessagingListContainer24(),this.$PagesManagerMessagingListContainer21()));};f.exports=c('FluxContainer').create(o,{withProps:true});}),null);
__d('PagesManagerMessagingApp.react',['cx','LeftRight.react','MercuryPagesChannelHandlerDEPRECATED','MercuryServerPayloadPreprocessor','MercurySyncPageEnvironment','MessengerDialogContainer.react','PagesEventObserver','PagesEventType','PagesManagerAction','PagesManagerAwayBanner.react','PagesManagerAwayContainer.react','PagesManagerDetailContainer.react','PagesManagerListContainer.react','PagesManagerListDetailLayout.react','PagesManagerMessagingClassifierActions','PagesManagerMessagingDetailContainer.react','PagesManagerMessagingFilterContainer.react','PagesManagerMessagingListContainer.react','PagesManagerMessagingLogger','PagesManagerMessagingSearchContainer.react','PagesManagerMessagingTabPerfEvents','PagesManagerMessagingThreadlistStore','PagesManagerPerfLogger','PagesManagerStaticStore','PagesMessengerMessagePageButton.react','React','ReactDOM','PagesManagerStore'],(function a(b,c,d,e,f,g,h){var i,j;c('PagesManagerStore');i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;function k(l,m){'use strict';j.constructor.call(this,l,m);c('PagesManagerStaticStore').setPageID(this.props.pageID);this.state={rootElement:null};this.$PagesManagerMessagingApp1=function(){this.refs.body&&this.refs.body.recalculateHeight();}.bind(this);}k.prototype.componentWillMount=function(){'use strict';c('MercuryPagesChannelHandlerDEPRECATED').getForFBID(this.props.pageID).turnOn();c('MercurySyncPageEnvironment').setUp(this.props.pageID,this.props.initSyncSequenceID);c('PagesManagerMessagingLogger').logMessagesSectionViewEvent(this.props.pageID);c('PagesEventObserver').notify(c('PagesEventType').MESSAGES_THREADLIST_LAYOUT_LOAD_START,this.props.pageID,{flowID:this.props.flowID,page_id:this.props.pageID,loading_event_time:Date.now()});if(this.props.initialThreadID)c('PagesManagerAction').setInitialViewItem(this.props.initialThreadID);};k.prototype.componentDidMount=function(){'use strict';c('PagesManagerPerfLogger').log(c('PagesManagerMessagingTabPerfEvents').MESSAGE_TAB_APP_DID_RENDER,this.props.perfParams);var l=c('MercuryServerPayloadPreprocessor').getForFBID(this.props.pageID);l.handleUpdate(this.props.config.jewelInitData);this.setState({rootElement:c('ReactDOM').findDOMNode(this)});c('PagesManagerMessagingClassifierActions').initializeStore(this.props.config,this.props.pageID);};k.prototype.componentWillUnmount=function(){'use strict';c('MercuryPagesChannelHandlerDEPRECATED').getForFBID(this.props.pageID).turnOff();c('MercurySyncPageEnvironment').tearDown(this.props.pageID);c('PagesManagerMessagingThreadlistStore').getDispatcher().unregister(c('PagesManagerMessagingThreadlistStore').getDispatchToken());};k.prototype.$PagesManagerMessagingApp2=function(l){'use strict';if(l)return l;return null;};k.prototype.$PagesManagerMessagingApp3=function(){'use strict';if(this.props.config.enabledPageToPageMessaging)return (c('React').createElement(c('PagesMessengerMessagePageButton.react'),{flowID:this.props.flowID,pageID:this.props.pageID,pagesCommNewMessagesTab:true,size:'large'}));return null;};k.prototype.$PagesManagerMessagingApp4=function(){'use strict';return c('React').createElement('div',{className:"_n4_"});};k.prototype.$PagesManagerMessagingApp5=function(){'use strict';return (c('React').createElement('div',{className:"_14vf"},c('React').createElement(c('PagesManagerListContainer.react'),{config:this.props.config,ChildContainerClass:c('PagesManagerMessagingListContainer.react'),flowID:this.props.flowID,pageID:this.props.pageID,perfParams:this.props.perfParams})));};k.prototype.$PagesManagerMessagingApp6=function(){'use strict';return (c('React').createElement('div',null,c('React').createElement(c('PagesManagerDetailContainer.react'),{config:this.props.config,pageID:this.props.pageID,ChildContainerClass:c('PagesManagerMessagingDetailContainer.react'),getListItemKey:this.$PagesManagerMessagingApp2,perfParams:this.props.perfParams})));};k.prototype.$PagesManagerMessagingApp7=function(){'use strict';if(!this.props.config.enableAwayToggle)return null;return (c('React').createElement('div',null,c('React').createElement(c('PagesManagerAwayContainer.react'),{pageID:this.props.pageID,RenderClass:c('PagesManagerAwayBanner.react')})));};k.prototype.render=function(){'use strict';return (c('React').createElement('div',null,c('React').createElement('div',{className:"_15i2"},c('React').createElement(c('PagesManagerListDetailLayout.react'),{ref:'body',detailSection:this.$PagesManagerMessagingApp6(),listClassName:"_1-9p",listSection:this.$PagesManagerMessagingApp5(),navigationSection:this.$PagesManagerMessagingApp4()}),c('React').createElement(c('MessengerDialogContainer.react'),null))));};f.exports=k;}),null);