if (self.CavalryLogger) { CavalryLogger.start_js(["ABOWE"]); }

__d('MessengerMenu.react',['cx','Keys','MenuSeparator.react','ReactXUIMenu','joinClasses'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;function k(m){m.isReactLegacyFactory={};m.type=m;}i=babelHelpers.inherits(l,c('ReactXUIMenu'));j=i&&i.prototype;function l(m){var n=m.className,o=babelHelpers.objectWithoutProperties(m,['className']);j.constructor.call(this,babelHelpers['extends']({className:c('joinClasses')(n,"_2i-c _150g")},o));}l.prototype.handleKeydown=function(m,n){if(m===c('Keys').DOWN||m===c('Keys').UP||m===c('Keys').SPACE)return j.handleKeydown.call(this,m,n);return true;};k(l);l.Item=c('ReactXUIMenu').Item;l.Separator=c('MenuSeparator.react');f.exports=l;}),null);
__d('MessengerPopoverMenu.react',['cx','ContextualDialogArrow','ContextualLayerAutoFlip','ContextualLayerUpdateOnScroll','PopoverMenu.react','React','joinClasses'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').PureComponent);j=i&&i.prototype;k.prototype.render=function(){var l=this.props,m=l.children,n=l.className,o=l.isOpen,p=babelHelpers.objectWithoutProperties(l,['children','className','isOpen']),q=c('React').Children.only(m);return (c('React').createElement(c('PopoverMenu.react'),babelHelpers['extends']({className:c('joinClasses')(n,!p.disableArrowKeyActivation||o?"_150g":''),enableActivationOnEnter:true,layerBehaviors:[c('ContextualLayerAutoFlip'),c('ContextualLayerUpdateOnScroll'),c('ContextualDialogArrow')]},p),q));};function k(){i.apply(this,arguments);}f.exports=k;}),null);
__d('MessengerRTCGroupCallParticipantsPickerDialog.react',['cx','fbt','FBRTCCore','immutable','ImmutableObject','MessengerDialog.react','MessengerDialogButton.react','MessengerDialogCancelButton.react','MessengerDialogHeader.react','MessengerDialogTitle.react','MessengerRTCGroupCallContactList.react','MessengerRTCGroupCallRingParticipantsRow.react','MessengerRTCGroupCallThreadRow.react','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes,m=460,n=5;j=babelHelpers.inherits(o,c('React').Component);k=j&&j.prototype;function o(){var p,q;for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=k.constructor).call.apply(p,[this].concat(s)),this.state={isParticipantSelected:this.props.participants.mapEntries(function(u){var v=u[0],w=u[1];return ([v,this.props.participants.size<=n]);}.bind(this))},this.$MessengerRTCGroupCallParticipantsPickerDialog1=function(){var u=this.$MessengerRTCGroupCallParticipantsPickerDialog2().map(function(v){return v.fbid;});if(this.props.handleCall){this.props.handleCall(u);}else c('FBRTCCore').startGroupCall({clickSource:this.props.clickSource,conferenceName:this.props.conferenceName,hasVideo:this.props.hasVideo,usersToRing:u});this.props.onUnmount();}.bind(this),q;}o.prototype.render=function(){var p=this.props,q=p.participants,r=p.thread,s=p.viewerID;return c('React').createElement(c('MessengerDialog.react'),{onToggle:this.props.onUnmount,type:'default',width:m},c('React').createElement('div',{className:"_2m1r"},c('React').createElement(c('MessengerDialogHeader.react'),null,c('React').createElement(c('MessengerDialogCancelButton.react'),null),c('React').createElement(c('MessengerDialogTitle.react'),null,i._("Ring group members")),c('React').createElement(c('MessengerDialogButton.react'),{label:i._("Call"),onClick:this.$MessengerRTCGroupCallParticipantsPickerDialog1,disabled:this.$MessengerRTCGroupCallParticipantsPickerDialog2().length===0,type:'primary'})),c('React').createElement(c('MessengerRTCGroupCallThreadRow.react'),{participants:q,thread:r,viewerID:s}),c('React').createElement(c('MessengerRTCGroupCallRingParticipantsRow.react'),{names:this.$MessengerRTCGroupCallParticipantsPickerDialog2().map(function(t){var u=t.name;return u;}).sort(function(t,u){return t.localeCompare(u);})}),c('React').createElement(c('MessengerRTCGroupCallContactList.react'),{participants:q.toArray().sort(function(t,u){return t.name.localeCompare(u.name);}),isParticipantSelected:this.state.isParticipantSelected,onClick:function(t){return this.setState({isParticipantSelected:this.state.isParticipantSelected.set(t,!this.state.isParticipantSelected.get(t))});}.bind(this)})));};o.prototype.$MessengerRTCGroupCallParticipantsPickerDialog2=function(){return this.props.participants.filter(function(p,q){return this.state.isParticipantSelected.get(q);}.bind(this)).toArray();};o.propTypes={participants:l.instanceOf(c('immutable').Map).isRequired,thread:l.instanceOf(c('ImmutableObject')).isRequired,viewerID:l.string.isRequired,clickSource:l.string.isRequired,conferenceName:l.string.isRequired,hasVideo:l.bool.isRequired,handleCall:l.func,onUnmount:l.func.isRequired};f.exports=o;}),null);
__d('MessengerRTCGroupCallParticipantsPickerDialogController',['DOM','immutable','MessengerRTCGroupCallParticipantsPickerDialog.react','React','ReactDOM'],(function a(b,c,d,e,f,g){'use strict';var h={_container:c('DOM').create('div'),render:function i(j){var k=j.participants,l=j.thread,m=j.viewerID,n=j.clickSource,o=j.conferenceName,p=j.hasVideo,q=j.handleCall;c('ReactDOM').render(c('React').createElement(c('MessengerRTCGroupCallParticipantsPickerDialog.react'),{participants:k,thread:l,viewerID:m,clickSource:n,conferenceName:o,hasVideo:p,handleCall:q,onUnmount:function(){return this._onUnmount();}.bind(this)}),this._container);},_onUnmount:function i(){c('ReactDOM').unmountComponentAtNode(this._container);}};f.exports=h;}),null);
__d('FBRTCClientMediaUpdateReducer',['RTCCallStore','RTCGroupCallActionTypes','RTCMWProtocolHandler','MultiwayTypes'],(function a(b,c,d,e,f,g){'use strict';var h=c('MultiwayTypes').RtcResponseStatusCode,i={configureAudio:function l(m,n){switch(n.type){case c('RTCGroupCallActionTypes').AUDIO_MUTED:return j(m,'audio',false);case c('RTCGroupCallActionTypes').AUDIO_UNMUTED:return j(m,'audio',true);}return m;},configureVideo:function l(m,n){switch(n.type){case c('RTCGroupCallActionTypes').VIDEO_MUTED:return j(m,'video',false);case c('RTCGroupCallActionTypes').VIDEO_UNMUTED:return j(m,'video',true);}return m;},onClientMediaUpdateResponse:function l(m,n){switch(n.type){case c('RTCGroupCallActionTypes').ON_CLIENT_MEDIA_UPDATE_RESPONSE:if(n.responseStatusCode!==h.OK)return m;m=m.setIn(['clientMediaUpdateInfo','lastSyncedClientVersion'],n.currentVersion);if(m.clientMediaUpdateInfo.pendingResponse){m=m.setIn(['clientMediaUpdateInfo','pendingResponse'],false);if(m.clientMediaUpdateInfo.pendingUpdate)return k(m.setIn(['clientMediaUpdateInfo','pendingUpdate'],false));}return m;}return m;}};function j(l,m,n){var o=c('RTCCallStore').getState().connections.first().getLocalStreams()[0].getTracks().reduce(function(p,q){p[q.id]=q.kind===m?n:q.enabled;return p;},{});return k(l.setIn(['clientMediaUpdateInfo','localMediaUpdates'],l.clientMediaUpdateInfo.localMediaUpdates.push({mediaStatus:o})));}function k(l){if(l.clientMediaUpdateInfo.pendingResponse)return l.setIn(['clientMediaUpdateInfo','pendingUpdate'],true);var m=l.clientMediaUpdateInfo.localMediaUpdates.reduce(function(n,o,p){if(p>=l.clientMediaUpdateInfo.lastSyncedClientVersion)n.push(o);return n;},[]);if(m.length===0)return l;c('RTCMWProtocolHandler').clientMediaUpdate(c('RTCCallStore').getState().callInfo.conferenceName,c('RTCCallStore').getState().callInfo.serverInfoData,l.clientMediaUpdateInfo.lastSyncedClientVersion,l.clientMediaUpdateInfo.localMediaUpdates.size,m);return l.setIn(['clientMediaUpdateInfo','pendingResponse'],true);}f.exports=i;}),null);
__d('FBRTCGroupCallStoreState',['immutable','RTCStreamDurationTracker'],(function a(b,c,d,e,f,g){'use strict';var h,i,j,k,l,m,n={pendingResponse:false,pendingUpdate:false,lastSyncedClientVersion:2,localMediaUpdates:c('immutable').List([{mediaStatus:{}},{mediaStatus:{}}])};h=babelHelpers.inherits(o,c('immutable').Record(n));i=h&&h.prototype;function o(){h.apply(this,arguments);}var p={localVideoDurationTracker:new (c('RTCStreamDurationTracker'))('video'),remoteVideoDurationTracker:new (c('RTCStreamDurationTracker'))('video')};j=babelHelpers.inherits(q,c('immutable').Record(p));k=j&&j.prototype;function q(){j.apply(this,arguments);}var r={clientMediaUpdateInfo:new o(),videoDurationTrackerInfo:new q()};l=babelHelpers.inherits(s,c('immutable').Record(r));m=l&&l.prototype;function s(){l.apply(this,arguments);}f.exports=s;}),null);
__d('FBRTCGroupCallStore',['FBRTCClientMediaUpdateReducer','FBRTCGroupCallStoreState','FBRTCVideoDurationTrackerReducer','FluxReduceStore','RTCGroupCallDispatcher'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=[c('FBRTCClientMediaUpdateReducer').configureAudio,c('FBRTCClientMediaUpdateReducer').configureVideo,c('FBRTCClientMediaUpdateReducer').onClientMediaUpdateResponse,c('FBRTCVideoDurationTrackerReducer').track,c('FBRTCVideoDurationTrackerReducer').update,c('FBRTCVideoDurationTrackerReducer').stop];h=babelHelpers.inherits(k,c('FluxReduceStore'));i=h&&h.prototype;k.prototype.getInitialState=function(){return new (c('FBRTCGroupCallStoreState'))();};k.prototype.reduce=function(l,m){return j.reduce(function(n,o){return o(n,m);},l);};function k(){h.apply(this,arguments);}f.exports=new k(c('RTCGroupCallDispatcher'));}),null);
__d('RTCDialogProvider.react',['React'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PureComponent,k=c('React').PropTypes;h=babelHelpers.inherits(l,j);i=h&&h.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=i.constructor).call.apply(m,[this].concat(p)),this.state={dialog:null},this.$RTCDialogProvider1=function(r){this.setState({dialog:r});}.bind(this),this.$RTCDialogProvider2=function(){var r=arguments.length<=0||arguments[0]===undefined?false:arguments[0];if(!r)this.setState({dialog:null});}.bind(this),n;}l.prototype.getChildContext=function(){return {dialogShow:this.$RTCDialogProvider1,dialogHide:this.$RTCDialogProvider2};};l.prototype.render=function(){return c('React').createElement('div',this.props,this.props.children,this.state.dialog);};l.childContextTypes={dialogShow:k.func,dialogHide:k.func};f.exports=l;}),null);
__d('RTCLogo.react',['cx','ix','Image.react','React','WorkModeConfig','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j={messenger:{color:i('/images/chat/webrtc/messenger_logo_color.png'),mono:i('/images/chat/webrtc/messenger_logo_mono.png')},workplace:{color:i('/images/chat/webrtc/workplace_logo_color.png'),mono:i('/images/chat/webrtc/workplace_logo_mono.png')}},k=function m(n){var o=n.className,p=n.mode,q=p===undefined?'color':p,r=babelHelpers.objectWithoutProperties(n,['className','mode']),s=l();return (c('React').createElement(c('Image.react'),babelHelpers['extends']({alt:'',className:c('joinClasses')(o,"_4ytt"),src:j[s][q]},r)));};function l(){return c('WorkModeConfig').is_work_user?'workplace':'messenger';}f.exports=k;}),null);
__d('RTCAppView.react',['cx','FBRTCBackground.react','React','RTCDialogProvider.react','RTCLogo.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PureComponent;i=babelHelpers.inherits(l,k);j=i&&i.prototype;l.prototype.render=function(){var m=this.props.isAudioCall;return (c('React').createElement(c('RTCDialogProvider.react'),{className:"_4qn7"+(m?' '+"audioCall":'')},this.$RTCAppView1(),this.props.children,c('React').createElement(c('RTCLogo.react'),{mode:m?'color':'mono'})));};l.prototype.$RTCAppView1=function(){var m=this.props,n=m.backgroundUrl,o=m.isAudioCall,p=m.messengerUI;return (c('React').createElement(c('FBRTCBackground.react'),{src:n,messengerUI:p||o}));};function l(){i.apply(this,arguments);}l.defaultProps={isAudioCall:true,messengerUI:false};f.exports=l;}),null);
__d("XGroupCallThreadInfoController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/groupcall\/threadinfo\/",{thread_id:{type:"FBID",required:true}});}),null);
__d('RTCGroupCallUtils',['AsyncRequest','immutable','ImmutableObject','XGroupCallThreadInfoController'],(function a(b,c,d,e,f,g){'use strict';var h={getThread:function i(j,k){var l=c('XGroupCallThreadInfoController').getURIBuilder().setFBID('thread_id',j).getURI();new (c('AsyncRequest'))(l).setHandler(function(m){var n=m.payload;return k(new (c('ImmutableObject'))(n.threads[0]),c('immutable').Map(n.participants.map(function(o){return [o.id,new (c('ImmutableObject'))(o)];})));}).send();}};f.exports=h;}),null);
__d('FBRTCGroupCallIncallVideo.react',['cx','fbt','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=function k(l){var m=l.displayNone,n=l.hasVideo,o=l.user,p=o.getStreamsAsArray()[0];if(!p)return null;return (c('React').createElement('div',{className:"_5k9_"+(m?' '+"displayNone":'')+(!n?' '+"hidden":'')},c('React').createElement('p',{className:"_5ka3"+(!o.areAllTracksMuted(p.getVideoTracks())?' '+"hidden":'')},i._("{name}'s camera is off",[i.param('name',o.getUserShortName())])),c('React').createElement('video',{autoPlay:true,className:"_5ldt",muted:p.muted||false,src:window.URL.createObjectURL(p)})));};f.exports=j;}),null);
__d('FBRTCGroupCallIncallView.react',['cx','FBRTCGroupCallIncallVideo.react','immutable','React'],(function a(b,c,d,e,f,g,h){'use strict';var i=6,j=function k(l){var m=l.hasVideo,n=l.remoteUsers;return (c('React').createElement('div',{className:"_ncs"},n.map(function(o,p){return (c('React').createElement(c('FBRTCGroupCallIncallVideo.react'),{displayNone:p>=i,hasVideo:m,key:o.getUserID(),user:o}));})));};f.exports=j;}),null);
__d('RTCSVGIcon.react',['React'],(function a(b,c,d,e,f,g){'use strict';var h=c('React').Children,i=function j(k){var l=k.children,m=babelHelpers.objectWithoutProperties(k,['children']);return (c('React').cloneElement(h.only(l),babelHelpers['extends']({preserveAspectRatio:'xMidYMid meet'},m)));};f.exports=i;}),null);
__d('RTCCallControlsButton.react',['cx','AbstractButton.react','React','RTCSVGIcon.react','joinClasses'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PureComponent;i=babelHelpers.inherits(l,k);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.$RTCCallControlsButton1=function(event){var r=this.props,s=r.disabled,t=r.onClick;if(!t){return;}else if(s){event.preventDefault();return;}t(event);}.bind(this),n;}l.prototype.render=function(){var m=this.props,n=m.highlighted,o=m.children,p=m.className,q=m.disabled,r=m.title,s=babelHelpers.objectWithoutProperties(m,['highlighted','children','className','disabled','title']),t=c('React').createElement(c('RTCSVGIcon.react'),{className:"_4uwr"},o);return c('React').createElement(c('AbstractButton.react'),babelHelpers['extends']({'aria-disabled':q,'aria-label':r,className:c('joinClasses')(p,"_4uwq"+(!q&&n?' '+"highlighted":'')),'data-hover':q?'none':'tooltip','data-tooltip-alignh':'center','data-tooltip-content':r},{label:t},s,{onClick:this.$RTCCallControlsButton1}));};l.defaultProps={highlighted:false,disabled:false};f.exports=l;}),null);
__d('RTCCallControlsCloseWindowButton.react',['cx','fbt','React','RTCCallControlsButton.react','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PureComponent;j=babelHelpers.inherits(m,l);k=j&&j.prototype;m.prototype.render=function(){var n=this.props,o=n.className,p=babelHelpers.objectWithoutProperties(n,['className']);return (c('React').createElement(c('RTCCallControlsButton.react'),babelHelpers['extends']({className:c('joinClasses')("closeWindow icon-48",o)},p),c('React').createElement('svg',{viewBox:'0 0 48 48'},c('React').createElement('path',{d:'M24 25.4l-4.9 4.9c-.4 .4-1 .4-1.4 0c-.4-.4-.4-1 0-1.4L22.6 24 L17.6 19.1c-.4-.4-.4-1 0-1.4c.4-.4 1-.4 1.4 0L24 22.6l4.9-4.9 c.4-.4 1-.4 1.4 0c.4 .4 .4 1 0 1.4L25.4 24l4.9 4.9c.4 .4 .4 1 0 1.4c-.4 .4-1 .4-1.4 0L24 25.4z'}))));};function m(){j.apply(this,arguments);}m.defaultProps={onClick:function n(){window.close();},title:i._("Close")};f.exports=m;}),null);
__d('RTCCallControlsEndCallButton.react',['cx','fbt','MultiwayTypes','React','RTCCallActions','RTCCallControlsButton.react','VideoCallWebDriverIDs','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('MultiwayTypes').HangupReason,m=c('React').PureComponent;j=babelHelpers.inherits(n,m);k=j&&j.prototype;n.prototype.render=function(){var o=this.props,p=o.className,q=babelHelpers.objectWithoutProperties(o,['className']);return (c('React').createElement(c('RTCCallControlsButton.react'),babelHelpers['extends']({'data-testid':c('VideoCallWebDriverIDs').END_CALL_BUTTON,className:c('joinClasses')("opaque endCall icon-48",p)},q),c('React').createElement('svg',{viewBox:'0 0 48 48'},c('React').createElement('path',{d:'M12.054 24.58C12.52 19.102 24.34 19.002 24.54 19c.202 0 12.024 -.1 12.408 5.37.284 4.048-1.092 3.74-1.56 3.778-.41.033-4.823 -.767-5.452-1.19-.63-.422-.785-2.703-1.293-3.094-.507-.39-3.092 -.51-4.134-.502-1.043.01-3.63.174-4.143.572-.513.4-.702 2.683 -1.337 3.117-.636.434-5.062 1.31-5.47 1.283-.47-.03-1.85.3 -1.506-3.753',fillRule:'evenodd'}))));};function n(){j.apply(this,arguments);}n.defaultProps={onClick:function o(){c('RTCCallActions').hangup(l.HANGUP_CALL,'');},title:i._("End Call")};f.exports=n;}),null);
__d('RTCCallControlsRedialButton.react',['cx','fbt','React','RTCCallActions','RTCCallControlsButton.react','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PureComponent;j=babelHelpers.inherits(m,l);k=j&&j.prototype;m.prototype.render=function(){var n=this.props,o=n.isAudioCall,p=n.className,q=babelHelpers.objectWithoutProperties(n,['isAudioCall','className']),r=o?'M32.3 33.3c-4.2 3.5-12.6-4.7-12.8-4.9\n        C19.4 28.3 10.9 20 14.5 15.9\n        C17.2 12.8 17.9 14 18.3 14.3c.3 .3 2.9 4 3 4.7\n        C21.5 19.7 20 21.5 20 22.1c.1 .6 1.8 2.5 2.6 3.3c.7 .7 2.7 2.4 3.3 2.5\n        c.6 .1 2.4-1.4 3.1-1.3c.8 .1 4.5 2.7 4.8 3\n        C34.2 29.9 35.4 30.7 32.3 33.3':'M26 17H15c-1.126 0-2 .938-2 2v10c0 1.062.874 2 2 2h11\n        c1.126 0 2-.938 2-2V19c0-1.062-.874-2-2-2zm10 12h1V19h-1v10z\n        m-6-2.727L35 29V19l-5 2.727v4.546z';return (c('React').createElement(c('RTCCallControlsButton.react'),babelHelpers['extends']({className:c('joinClasses')(p,"opaque redial icon-48")},q),c('React').createElement('svg',{viewBox:'0 0 48 48'},c('React').createElement('path',babelHelpers['extends']({fillRule:'evenodd'},{d:r})))));};function m(){j.apply(this,arguments);}m.defaultProps={isAudioCall:false,onClick:function n(){c('RTCCallActions').redial();},title:i._("Redial")};f.exports=m;}),null);
__d('RTCDialog.react',['LayerFadeOnHide','LayerHideOnEscape','LayerTabIsolation','React','XUIDialog.react'],(function a(b,c,d,e,f,g){'use strict';var h=function i(j){var k=j.children,l=babelHelpers.objectWithoutProperties(j,['children']);return (c('React').createElement(c('XUIDialog.react'),babelHelpers['extends']({behaviors:{LayerFadeOnHide:c('LayerFadeOnHide'),LayerHideOnEscape:c('LayerHideOnEscape'),LayerTabIsolation:c('LayerTabIsolation')},shown:true},l),k));};f.exports=h;}),null);
__d('RTCDialogBody.react',['cx','React','joinClasses'],(function a(b,c,d,e,f,g,h){'use strict';var i=function j(k){var l=k.children,m=k.className,n=babelHelpers.objectWithoutProperties(k,['children','className']);return (c('React').createElement('div',babelHelpers['extends']({className:c('joinClasses')(m,"_zbh")},n),l));};f.exports=i;}),null);
__d('RTCDialogHeader.react',['cx','React','joinClasses'],(function a(b,c,d,e,f,g,h){'use strict';var i=function j(k){var l=k.children,m=k.className,n=babelHelpers.objectWithoutProperties(k,['children','className']);return (c('React').createElement('header',babelHelpers['extends']({className:c('joinClasses')(m,"_7xt")},n),l));};f.exports=i;}),null);
__d('RTCDialogHeaderButton.react',['cx','AbstractButton.react','React','joinClasses'],(function a(b,c,d,e,f,g,h){'use strict';var i=function j(k){var l=k.className,m=babelHelpers.objectWithoutProperties(k,['className']);return (c('React').createElement(c('AbstractButton.react'),babelHelpers['extends']({type:'button',className:c('joinClasses')(l,"_4py8")},m)));};f.exports=i;}),null);
__d('RTCSettingsAudioInputPreview.react',['React','cancelAnimationFrame','requestAnimationFrame'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=window.AudioContext||window.webkitAudioContext,k=c('React').PureComponent,l={fftSize:32,minDecibels:-90,maxDecibels:-10,smoothingTimeConstant:1},m=Math.log2(128+1);h=babelHelpers.inherits(n,k);i=h&&h.prototype;function n(s){i.constructor.call(this,s);this.$RTCSettingsAudioInputPreview2=new j();this.$RTCSettingsAudioInputPreview3=this.$RTCSettingsAudioInputPreview2.createGain();this.$RTCSettingsAudioInputPreview3.gain.value=s.gain;this.$RTCSettingsAudioInputPreview4=this.$RTCSettingsAudioInputPreview2.createAnalyser();Object.assign(this.$RTCSettingsAudioInputPreview4,l);this.$RTCSettingsAudioInputPreview6(this.props.mediaStream);}n.prototype.$RTCSettingsAudioInputPreview6=function(s){this.$RTCSettingsAudioInputPreview7();if(!(s&&this.$RTCSettingsAudioInputPreview1))return;var t=this.$RTCSettingsAudioInputPreview1.getContext('2d');if(!t)return;this.$RTCSettingsAudioInputPreview2.createMediaStreamSource(s).connect(this.$RTCSettingsAudioInputPreview3);this.$RTCSettingsAudioInputPreview3.connect(this.$RTCSettingsAudioInputPreview4);var u=this.$RTCSettingsAudioInputPreview4.frequencyBinCount,v=new Uint8Array(u),w=this.props,x=w.width,y=w.height,z=void 0,aa=function(){this.$RTCSettingsAudioInputPreview4.getByteTimeDomainData(v);var ba=o(v,x,y,z);z=ba;t.clearRect(0,0,x,y);t.fillStyle='rgba(255, 255, 255, .5)';t.fill(q(ba,x,y));this.$RTCSettingsAudioInputPreview5=c('requestAnimationFrame')(aa);}.bind(this);this.$RTCSettingsAudioInputPreview5=c('requestAnimationFrame')(aa);};n.prototype.$RTCSettingsAudioInputPreview7=function(){c('cancelAnimationFrame')(this.$RTCSettingsAudioInputPreview5);};n.prototype.render=function(){var s=this.props,t=s.width,u=s.height,v=babelHelpers.objectWithoutProperties(s,['width','height']);return (c('React').createElement('div',v,c('React').createElement('canvas',babelHelpers['extends']({ref:function(w){return this.$RTCSettingsAudioInputPreview1=w;}.bind(this)},{width:t,height:u}))));};n.prototype.componentWillReceiveProps=function(s){var t=s.mediaStream,u=s.gain;this.$RTCSettingsAudioInputPreview3.gain.value=u;if(t!==this.props.mediaStream)this.$RTCSettingsAudioInputPreview6(t);};n.prototype.componentWillUnmount=function(){this.$RTCSettingsAudioInputPreview7();};n.defaultProps={height:26,width:106,gain:3.5};function o(s,t,u,v){return [128].concat(p(s),[128]).map(function(w,x,y){var z=u*(Math.log2(Math.abs(w)+1)/m);return {x:x*t/(y.length-1),y:v?Math.min(z,u-(u-v[x].y)*.95):z};});}function p(s){var t=[];for(var u=0;u*2<s.length;u++)t[u]=Math.min(s[u*2],s[u*2+1]||0);return t;}function q(s,t,u){var v=new Path2D();v.moveTo(0,u);s.forEach(function(w,x,y){switch(x){case 0:v.lineTo(w.x,w.y);break;case 1:break;case y.length-1:v.bezierCurveTo.apply(v,r(w,y[x-1],w));v.lineTo(w.x,w.y);break;case 2:v.lineTo((5*y[x-2].x+y[x-1].x)/6,(5*y[x-2].y+y[x-1].y)/6);default:v.bezierCurveTo.apply(v,r(w,y[x-2],y[x-1]));}});v.lineTo(t,u);v.closePath();return v;}function r(s,t,u){return [(2*t.x+u.x)/3,(2*t.y+u.y)/3,(t.x+2*u.x)/3,(t.y+2*u.y)/3,(t.x+4*u.x+s.x)/6,(t.y+4*u.y+s.y)/6];}f.exports=n;}),null);
__d('RTCSettingsAudioOutputPreview.react',['cx','Promise','FBRTCUtils','React','MercurySoundsConfig'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PureComponent;i=babelHelpers.inherits(l,k);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.state={currentTime:0,disabled:true,duration:0,playing:false},this.$RTCSettingsAudioOutputPreview5=function(){var r=this.$RTCSettingsAudioOutputPreview1;if(!r||this.state.disabled)return;if(this.state.playing){r.pause();r.currentTime=0;this.$RTCSettingsAudioOutputPreview11();}else{this.setState({disabled:true});c('Promise').resolve(r.play()).done(function(){return this.setState({disabled:false});}.bind(this));}}.bind(this),this.$RTCSettingsAudioOutputPreview12=function(r){if(r)this.$RTCSettingsAudioOutputPreview2=r;}.bind(this),this.$RTCSettingsAudioOutputPreview13=function(r){if(r){r.volume=.3;this.$RTCSettingsAudioOutputPreview1=r;}}.bind(this),this.$RTCSettingsAudioOutputPreview14=function(r){var s=r.target;this.setState({disabled:false,duration:s.duration});}.bind(this),this.$RTCSettingsAudioOutputPreview15=function(){clearInterval(this.$RTCSettingsAudioOutputPreview3);this.setState({playing:true,currentTime:0});var r=Date.now(),s=function(){return this.setState({currentTime:(Date.now()-r)/1000});}.bind(this);s();this.$RTCSettingsAudioOutputPreview3=setInterval(s,40);}.bind(this),this.$RTCSettingsAudioOutputPreview11=function(){clearInterval(this.$RTCSettingsAudioOutputPreview3);this.$RTCSettingsAudioOutputPreview3=setTimeout(function(){return this.setState({playing:false,currentTime:0});}.bind(this),250);}.bind(this),n;}l.prototype.render=function(){return c('React').createElement('div',{className:"_10mu",tabIndex:0,onClick:this.$RTCSettingsAudioOutputPreview5},this.$RTCSettingsAudioOutputPreview6(),this.$RTCSettingsAudioOutputPreview7(),this.$RTCSettingsAudioOutputPreview8(),this.$RTCSettingsAudioOutputPreview9(),this.$RTCSettingsAudioOutputPreview10());};l.prototype.$RTCSettingsAudioOutputPreview6=function(){return c('React').createElement('audio',{ref:this.$RTCSettingsAudioOutputPreview12,autoPlay:true});};l.prototype.$RTCSettingsAudioOutputPreview7=function(){return c('React').createElement('audio',{ref:this.$RTCSettingsAudioOutputPreview13,autoPlay:false,loop:false,preload:'auto',onDurationChange:this.$RTCSettingsAudioOutputPreview14,onPlay:this.$RTCSettingsAudioOutputPreview15,onEnded:this.$RTCSettingsAudioOutputPreview11},c('React').createElement('source',{src:c('MercurySoundsConfig').settings_preview_sound_mp3_url,type:'audio/mpeg'}),c('React').createElement('source',{src:c('MercurySoundsConfig').settings_preview_sound_ogg_url,type:'audio/ogg'}));};l.prototype.$RTCSettingsAudioOutputPreview8=function(){var m=this.state.playing?c('React').createElement('path',{d:'M7 5h2v10H7V5zm4 0h2v10H11V5z'}):c('React').createElement('path',{d:'M7 6l6 4-6 4'});return (c('React').createElement('svg',{className:"_odh button",viewBox:'0 0 20 20'},m));};l.prototype.$RTCSettingsAudioOutputPreview9=function(){var m=this.state,n=m.duration,o=m.currentTime;return (c('React').createElement('div',{className:"_odz"},c('React').createElement('div',{className:"_od-",style:{transform:'scaleX('+(n?o/n:0)+')'}})));};l.prototype.$RTCSettingsAudioOutputPreview10=function(){var m=this.state.playing?this.state.currentTime:this.state.duration;return (c('React').createElement('div',{className:"_odh text"},Math.floor(m)+'s'));};l.prototype.componentDidMount=function(){var m=this.props,n=m.sinkID,o=m.mediaStream;this.$RTCSettingsAudioOutputPreview16(o);this.$RTCSettingsAudioOutputPreview4=setTimeout(function(){return this.$RTCSettingsAudioOutputPreview17(n);}.bind(this),1000);};l.prototype.componentDidUpdate=function(m){var n=this.props,o=n.sinkID,p=n.mediaStream;if(p!==m.mediaStream){this.$RTCSettingsAudioOutputPreview16(p);this.$RTCSettingsAudioOutputPreview17(o);}else if(o!==m.sinkID)this.$RTCSettingsAudioOutputPreview17(o);};l.prototype.$RTCSettingsAudioOutputPreview16=function(m){if(this.$RTCSettingsAudioOutputPreview2&&m)c('FBRTCUtils').attachMediaStream(this.$RTCSettingsAudioOutputPreview2,m);};l.prototype.$RTCSettingsAudioOutputPreview17=function(m){clearTimeout(this.$RTCSettingsAudioOutputPreview4);if(!this.$RTCSettingsAudioOutputPreview18())return;[this.$RTCSettingsAudioOutputPreview2,this.$RTCSettingsAudioOutputPreview1].reduce(function(n,o){return o?n.then(function(){return o.setSinkId(m);}):n;},c('Promise').resolve())['catch'](function(n){});};l.prototype.$RTCSettingsAudioOutputPreview18=function(){var m=HTMLAudioElement,n=m.prototype;return 'sinkId' in n&&typeof n.setSinkId==='function';};l.prototype.componentWillUnmount=function(){if(this.$RTCSettingsAudioOutputPreview1)this.$RTCSettingsAudioOutputPreview1.pause();clearInterval(this.$RTCSettingsAudioOutputPreview3);clearInterval(this.$RTCSettingsAudioOutputPreview4);this.$RTCSettingsAudioOutputPreview2=null;this.$RTCSettingsAudioOutputPreview1=null;};l.defaultProps={sinkID:'default'};f.exports=l;}),null);
__d('RTCSettingsDialog.react',['cx','fbt','Promise','FBRTCConfig','FBRTCUserSettings','FBRTCUtils','FBRTCVideo.react','Link.react','React','RTCDialog.react','RTCDialogBody.react','RTCDialogHeader.react','RTCDialogHeaderButton.react','RTCSettingsMediaDeviceSelector.react','XUIGrayText.react','XUIText.react','RTCUtils','RTCSettingsAudioInputPreview.react','RTCSettingsAudioOutputPreview.react','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes,m=c('React').PureComponent;j=babelHelpers.inherits(n,m);k=j&&j.prototype;function n(t){k.constructor.call(this,t);this.state={ready:false,mediaStream:null,devices:[],audioInput:c('FBRTCUserSettings').audioInput,audioOutput:c('FBRTCUserSettings').audioOutput,videoInput:c('FBRTCUserSettings').videoInput};this.$RTCSettingsDialog5=function(){this.context.dialogHide();}.bind(this);this.$RTCSettingsDialog6=function(){c('FBRTCUserSettings').save({audioInput:this.state.audioInput,audioOutput:this.state.audioOutput,videoInput:this.state.videoInput}).done(function(){return this.context.dialogHide();}.bind(this));}.bind(this);c('FBRTCUserSettings').enumerateDevices().then(function(u){return this.setState({devices:u,ready:true});}.bind(this)).then(function(){return this.$RTCSettingsDialog1();}.bind(this)).then(function(){return this.$RTCSettingsDialog2();}.bind(this)).then(function(){if(c('FBRTCUtils').supportsSetSink())c('FBRTCUserSettings').previewStart();}).done(null,function(u){this.setState({ready:true});}.bind(this));}n.prototype.$RTCSettingsDialog1=function(){return c('Promise').resolve().then(function(){return this.setState({audioInput:c('FBRTCUserSettings').selectAudioInputByLabel(r(this.state.devices,'audioinput')),audioOutput:this.state.audioOutput||s(r(this.state.devices,'audiooutput')[0]),videoInput:c('FBRTCUserSettings').selectVideoInputByLabel(r(this.state.devices,'videoinput'))});}.bind(this));};n.prototype.$RTCSettingsDialog2=function(){var t=this.state,u=t.audioInput,v=t.videoInput,w={audio:u?{deviceId:u}:true,video:v?{deviceId:v}:true};return c('Promise').resolve(c('RTCUtils').getUserMedia(w)).then(function(x){return this.setState({mediaStream:x});}.bind(this));};n.prototype.render=function(){if(!this.state.ready)return null;var t=this.props.onToggle;return c('React').createElement(c('RTCDialog.react'),{width:544,onToggle:t},this.$RTCSettingsDialog3(),this.$RTCSettingsDialog4());};n.prototype.$RTCSettingsDialog3=function(){return c('React').createElement(c('RTCDialogHeader.react'),null,c('React').createElement('h1',{className:"_10mm"},i._("Settings")),c('React').createElement(c('RTCDialogHeaderButton.react'),{label:i._("Cancel"),onClick:this.$RTCSettingsDialog5}),c('React').createElement(c('RTCDialogHeaderButton.react'),{label:i._("Save"),onClick:this.$RTCSettingsDialog6}));};n.prototype.$RTCSettingsDialog4=function(){return (c('React').createElement(c('RTCDialogBody.react'),null,this.$RTCSettingsDialog7(),this.$RTCSettingsDialog8(),this.$RTCSettingsDialog9(),this.$RTCSettingsDialog10()));};n.prototype.$RTCSettingsDialog7=function(){return (c('React').createElement(o,{className:"_10mn"},c('React').createElement(p,null,c('React').createElement(q,null,i._("Camera"))),c('React').createElement(p,null,c('React').createElement(c('RTCSettingsMediaDeviceSelector.react'),{devices:r(this.state.devices,'videoinput'),maxwidth:212,fullWidth:true,onChange:function(t){var u=t.value;return this.$RTCSettingsDialog11({videoInput:u});}.bind(this),defaultValue:this.state.videoInput})),c('React').createElement(p,null,c('React').createElement(c('FBRTCVideo.react'),{className:"_10mo",muted:true,mediaStream:this.state.mediaStream}))));};n.prototype.$RTCSettingsDialog11=function(t){this.setState(t,function(){this.$RTCSettingsDialog2();}.bind(this));};n.prototype.$RTCSettingsDialog8=function(){return (c('React').createElement(o,{className:"_10mn"},c('React').createElement(p,null,c('React').createElement(q,null,i._("Microphone"))),c('React').createElement(p,null,c('React').createElement(c('RTCSettingsMediaDeviceSelector.react'),{devices:r(this.state.devices,'audioinput'),maxwidth:212,fullWidth:true,onChange:function(t){var u=t.value;return this.$RTCSettingsDialog11({audioInput:u});}.bind(this),defaultValue:this.state.audioInput})),c('React').createElement(p,null,c('React').createElement(c('RTCSettingsAudioInputPreview.react'),{className:"_10mp",mediaStream:this.state.mediaStream}))));};n.prototype.$RTCSettingsDialog9=function(){if(!c('FBRTCUtils').supportsSetSink())return null;return (c('React').createElement(o,{className:"_10mn"},c('React').createElement(p,null,c('React').createElement(q,null,i._("Audio output"))),c('React').createElement(p,null,c('React').createElement(c('RTCSettingsMediaDeviceSelector.react'),{maxwidth:212,fullWidth:true,devices:r(this.state.devices,'audiooutput'),onChange:function(t){var u=t.value;return this.setState({audioOutput:u});}.bind(this),defaultValue:this.state.audioOutput})),c('React').createElement(p,null,c('React').createElement(c('RTCSettingsAudioOutputPreview.react'),{sinkID:this.state.audioOutput,mediaStream:this.props.remoteStream}))));};n.prototype.$RTCSettingsDialog10=function(){return (c('React').createElement('footer',{className:"_10mv _10mn"},c('React').createElement(p,null,c('React').createElement(c('XUIGrayText.react'),{shade:'light',size:'medium'},i._("Tip: Try restarting your browser if you're having trouble with your camera or microphone."))),c('React').createElement(p,null,c('React').createElement(c('XUIText.react'),{size:'medium'},c('React').createElement(c('Link.react'),{href:c('FBRTCConfig').userMediaErrorUrl(),target:'_blank'},i._("Get help"))))));};n.prototype.componentWillUnmount=function(){var t=this.state.mediaStream;if(t)c('RTCUtils').stopMediaStream(t);c('FBRTCUserSettings').previewEnd();};n.contextTypes={dialogShow:l.func,dialogHide:l.func};var o=function t(u){var v=u.children,w=u.className,x=babelHelpers.objectWithoutProperties(u,['children','className']);return (c('React').createElement('section',babelHelpers['extends']({className:c('joinClasses')(w,"_10mx")},x),v));},p=function t(u){var v=u.children,w=babelHelpers.objectWithoutProperties(u,['children']);return (c('React').createElement('div',babelHelpers['extends']({className:"_10my"},w),v));},q=function t(u){var v=u.children,w=babelHelpers.objectWithoutProperties(u,['children']);return (c('React').createElement('h1',babelHelpers['extends']({className:"_10mz"},w),v));};function r(t,u){return t.filter(function(v){return v.kind===u;});}function s(t){return t?t.deviceId:'default';}f.exports=n;}),null);
__d('RTCCallControlsShowSettingsButton.react',['cx','fbt','RTCSettingsDialog.react','FBRTCUserSettings','React','RTCCallControlsButton.react','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes,m=c('React').PureComponent;j=babelHelpers.inherits(n,m);k=j&&j.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.$RTCCallControlsShowSettingsButton1=function(){if(!c('FBRTCUserSettings').isEnabled())return;var t=this.context;if(t&&t.dialogShow&&t.dialogHide)t.dialogShow(c('React').createElement(c('RTCSettingsDialog.react'),{onToggle:t.dialogHide,remoteStream:this.props.remoteStream}));}.bind(this),p;}n.prototype.render=function(){var o=this.props,p=o.highlighted,q=o.className,r=o.onClick,s=babelHelpers.objectWithoutProperties(o,['highlighted','className','onClick']),t='M36.37 26.625c.363-.116.614-.445.63-.825v-1.775c-.016-.38-.267\n      -.71-.63-.825l-2.935-.795c-.37-.055-.686-.3-.83-.646-.144-.35-.096-.75.126\n      -1.05l1.47-2.548c.176-.337.12-.747-.14-1.026l-1.27-1.26c-.28-.256-.69\n      -.31-1.03-.135l-2.49 1.41c-.33.18-.72.22-1.08.11-.334-.176-.582-.48\n      -.69-.84l-.77-2.8c-.115-.362-.444-.614-.824-.63h-1.8c-.38.017-.71.268\n      -.823.63l-.77 2.8c-.09.386-.36.705-.73.856-.365.15-.782.117-1.12-.094\n      l-2.54-1.44c-.34-.175-.75-.12-1.03.134l-1.27 1.26c-.26.277-.315.69-.14\n      1.024l1.535 2.67c.23.27.29.65.153.98-.14.33-.45.556-.803.585l-2.936\n      .794c-.362.112-.613.442-.63.822V25.8c.017.38.268.71.63.825l2.85.77\n      c.353.098.65.332.83.65.1.35.056.728-.125 1.045l-1.504 2.615c-.176.336\n      -.12.747.137 1.025l1.27 1.26c.28.257.69.313 1.03.14l2.415-1.37\n      c.363-.18.785-.21 1.17-.075l.03.01c.365.178.644.495.775.88l.77 2.795\n      c.113.363.444.616.825.63h1.8c.38-.014.71-.267.824-.63l.77-2.795\n      c.116-.37.378-.68.725-.855.37-.12.773-.088 1.12.09l2.543 1.445\n      c.34.173.75.117 1.03-.14l1.27-1.26c.257-.278.313-.69.137-1.025\n      l-1.54-2.665c-.18-.332-.22-.723-.11-1.085.18-.33.485-.577.846-.685\n      l2.85-.77zM25 29c-1.617 0-3.076-.974-3.695-2.47-.62-1.493-.277-3.214\n      .866-4.358 1.15-1.144 2.87-1.487 4.36-.867 1.5.62 2.47 2.077 2.47\n      3.695 0 2.21-1.79 4-4 4z';return c('React').createElement(c('RTCCallControlsButton.react'),babelHelpers['extends']({className:c('joinClasses')(q,"transparent icon-50"),onClick:r||this.$RTCCallControlsShowSettingsButton1},{highlighted:p},s),c('React').createElement('svg',{viewBox:'0 0 50 50'},c('React').createElement('path',babelHelpers['extends']({className:(p?"showIfHighlighted":'')+(!p?' '+"hideIfHighlighted":'')},{d:t},{fill:'none'})),c('React').createElement('path',babelHelpers['extends']({className:(!p?"showIfHighlighted":'')+(p?' '+"hideIfHighlighted":'')},{d:t}))));};n.contextTypes={dialogShow:l.func,dialogHide:l.func};n.defaultProps={highlighted:false,callModel:{supportsSdpUpdate:function o(){return true;}},title:i._("Settings")};f.exports=n;}),null);
__d('RTCCallControlsToggleAudioButton.react',['cx','fbt','React','RTCCallActions','RTCCallControlsButton.react','VideoCallWebDriverIDs','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PureComponent;j=babelHelpers.inherits(m,l);k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.$RTCCallControlsToggleAudioButton1=function(){c('RTCCallActions').toggleMuteAudio(this.props.highlighted);}.bind(this),o;}m.prototype.render=function(){var n=this.props,o=n.highlighted,p=n.className,q=n.onClick,r=babelHelpers.objectWithoutProperties(n,['highlighted','className','onClick']),s=o?i._("Unmute your microphone"):i._("Mute your microphone"),t=o?'M25 31c.7-.1 1.3-.3 1.9-.6l-.5-.9c-.6.3-1.2.5-1.9.5-2.5 0-4.5\n        -2.2-4.5-5v-5h-1v5.2c0 3.1 2.2 5.6 5 5.8v3h-3v1h7v-1h-3v-3z\n        m-.5-2c.5 0 1-.1 1.4-.3L21 20.6v4.9c0 1.9 1.6 3.5 3.5 3.5z\n        m-5.8-16l-.9.5L30.3 34l.9-.5L18.7 13zM30 25.2V20h-1v5c0 .8-.2\n        1.6-.5 2.2l.6 1c.6-.8.9-1.9.9-3zm-2 .3v-9c0-1.9-1.6-3.5-3.5\n        -3.5-1.5 0-2.7.9-3.2 2.2L28 26.3v-.8z':'M29 20v5c0 2.7-2 5-4.5 5S20 27.8 20 25v-5h-1v5.2c0 3.1 2.2\n        5.6 5 5.8v3h-3v1h7v-1h-3v-3c2.8-.3 5-2.8 5-5.8V20h-1z\n        m-4.5 9c1.9 0 3.5-1.6 3.5-3.5v-9c0-1.9-1.6-3.5-3.5-3.5\n        S21 14.6 21 16.5v9c0 1.9 1.6 3.5 3.5 3.5z';return c('React').createElement(c('RTCCallControlsButton.react'),babelHelpers['extends']({className:c('joinClasses')(p,"semiopaque icon-48"),'data-testid':c('VideoCallWebDriverIDs').END_CALL_BUTTON,onClick:q||this.$RTCCallControlsToggleAudioButton1,title:s},{highlighted:o},r),c('React').createElement('svg',{viewBox:'0 0 48 48'},c('React').createElement('path',{d:t})));};m.defaultProps={highlighted:false};f.exports=m;}),null);
__d('RTCCallControlsToggleFullScreenButton.react',['cx','fbt','React','RTCCallControlsButton.react','RTCUtils','VideoCallWebDriverIDs','joinClasses','debounce'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PureComponent,m=['fullscreenchange','mozfullscreenchange','webkitfullscreenchange','msfullscreenchange'];j=babelHelpers.inherits(n,l);k=j&&j.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.state={highlighted:false},this.$RTCCallControlsToggleFullScreenButton2=function(t){var u=this.props.onClick;this.setState({highlighted:true});this.$RTCCallControlsToggleFullScreenButton1=setTimeout(function(){return this.setState({highlighted:false});}.bind(this),100);if(u){u(t);return;}c('RTCUtils').toggleFullScreen();}.bind(this),this.$RTCCallControlsToggleFullScreenButton3=c('debounce')(function(){return this.forceUpdate();}.bind(this),10),p;}n.prototype.render=function(){var o=this.props,p=o.className,q=babelHelpers.objectWithoutProperties(o,['className']),r=c('RTCUtils').isFullScreen()||this.state.highlighted,s=r?i._("Exit Full Screen"):i._("Enter Full Screen");return c('React').createElement(c('RTCCallControlsButton.react'),babelHelpers['extends']({className:c('joinClasses')(p,"transparent icon-50"),'data-testid':c('VideoCallWebDriverIDs').FULL_SCREEN_BUTTON,title:s},{highlighted:r},q,{onClick:this.$RTCCallControlsToggleFullScreenButton2}),c('React').createElement('svg',{viewBox:'0 0 50 50'},c('React').createElement('path',{className:(!r?"showIfHighlighted":'')+(r?' '+"hideIfHighlighted":''),d:'M27 22.8v-7.87h.82v6.48l7.605-7.61.576.577-7.6 7.605h6.49v.818 h-7.304m-4.52 4.2v7.87h-.818v-6.48L14.64 36l-.575-.577 7.6-7.605 h-6.488V27h7.305'}),c('React').createElement('path',{className:(r?"showIfHighlighted":'')+(!r?' '+"hideIfHighlighted":''),d:'M27.514 22.8l-.58-.564L34.58 14.8h-6.47V14H36v7.657h-.83v-6.3 M14.056 35.96v-7.697h.824V34.6l7.66-7.44.582.563-7.656 7.437h6.536 v.8h-7.358'})));};n.prototype.componentDidMount=function(){for(var o=m,p=Array.isArray(o),q=0,o=p?o:o[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var r;if(p){if(q>=o.length)break;r=o[q++];}else{q=o.next();if(q.done)break;r=q.value;}var event=r;document.addEventListener(event,this.$RTCCallControlsToggleFullScreenButton3);}};n.prototype.componentWillUnmount=function(){clearTimeout(this.$RTCCallControlsToggleFullScreenButton1);for(var o=m,p=Array.isArray(o),q=0,o=p?o:o[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var r;if(p){if(q>=o.length)break;r=o[q++];}else{q=o.next();if(q.done)break;r=q.value;}var event=r;document.removeEventListener(event,this.$RTCCallControlsToggleFullScreenButton3);}};f.exports=n;}),null);
__d('RTCInstallExtensionDialog.react',['cx','fbt','LinkshimCallsites','LinkshimLink.react','React','RTCCallActions','RTCDialog.react','RTCDialogBody.react','RTCDialogHeader.react','RTCDialogHeaderButton.react','ScreenSharingWebDriverIDs','URI'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PureComponent,m='https://chrome.google.com/webstore/detail/degmgkchmbgaognjjlhggmhbcpicdifm';j=babelHelpers.inherits(n,l);k=j&&j.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.$RTCInstallExtensionDialog3=function(){this.props.onToggle(false);}.bind(this),this.$RTCInstallExtensionDialog4=function(){this.props.onEndCallClick();c('RTCCallActions').redial();this.props.onToggle(true);}.bind(this),p;}n.prototype.componentDidMount=function(){};n.prototype.render=function(){return c('React').createElement(c('RTCDialog.react'),{onToggle:this.props.onToggle,width:544,layerHideOnBlur:false},this.$RTCInstallExtensionDialog1(),this.$RTCInstallExtensionDialog2());};n.prototype.$RTCInstallExtensionDialog1=function(){return c('React').createElement(c('RTCDialogHeader.react'),null,c('React').createElement('h1',{className:"_10mm"},i._("Install Screen Sharing Extension")),c('React').createElement(c('RTCDialogHeaderButton.react'),{label:i._("Cancel"),onClick:this.$RTCInstallExtensionDialog3}),c('React').createElement(c('RTCDialogHeaderButton.react'),{label:i._("Call Again"),onClick:this.$RTCInstallExtensionDialog4}));};n.prototype.$RTCInstallExtensionDialog2=function(){return (c('React').createElement(c('RTCDialogBody.react'),{'data-testid':c('ScreenSharingWebDriverIDs').INSTALL_EXT_DIALOG},c('React').createElement('div',null,c('React').createElement('p',{className:"_2gx8"},i._("To share your screen, you'll need to install an extension. Then you can return here to start your call again.")),c('React').createElement(c('LinkshimLink.react'),{callsite:c('LinkshimCallsites').THIRD_PARTY_URL,className:"_2gx9",onClick:this.$RTCInstallExtensionDialog5,target:'_blank',uri:new (c('URI'))(m)},i._("Install screen sharing extension")))));};n.prototype.$RTCInstallExtensionDialog5=function(){};f.exports=n;}),null);
__d('RTCUnsupportedBrowserDialog.react',['cx','fbt','ix','FBRTCVersionDetection','Image.react','Link.react','Layout.react','React','RTCDialog.react','RTCDialogBody.react','RTCDialogHeader.react','RTCDialogHeaderButton.react','XUIText.react'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('Layout.react').Column,n=c('React').PureComponent;k=babelHelpers.inherits(o,n);l=k&&k.prototype;function o(){var p,q;for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=l.constructor).call.apply(p,[this].concat(s)),this.$RTCUnsupportedBrowserDialog3=function(){this.props.onToggle(false);}.bind(this),q;}o.prototype.render=function(){return c('React').createElement(c('RTCDialog.react'),{onToggle:this.props.onToggle,width:544,layerHideOnBlur:false},this.$RTCUnsupportedBrowserDialog1(),this.$RTCUnsupportedBrowserDialog2());};o.prototype.$RTCUnsupportedBrowserDialog1=function(){var p=null;if(c('FBRTCVersionDetection').isChrome()){p=i._("Update browser to share your screen");}else p=i._("Switch browsers to share your screen");return c('React').createElement(c('RTCDialogHeader.react'),null,c('React').createElement('h1',{className:"_10mm"},p),c('React').createElement(c('RTCDialogHeaderButton.react'),{label:i._("Cancel"),onClick:this.$RTCUnsupportedBrowserDialog3}));};o.prototype.$RTCUnsupportedBrowserDialog2=function(){var p=c('FBRTCVersionDetection').isChrome()?this.$RTCUnsupportedBrowserDialog4():this.$RTCUnsupportedBrowserDialog5();return c('React').createElement(c('RTCDialogBody.react'),null,c('React').createElement('div',null,c('React').createElement('p',{className:"_2gx8"},p),this.$RTCUnsupportedBrowserDialog6()));};o.prototype.$RTCUnsupportedBrowserDialog4=function(){return i._("Screen sharing doesn't work in the older version of Google Chrome that you're using. To share your screen, please update Google Chrome.");};o.prototype.$RTCUnsupportedBrowserDialog5=function(){if(c('FBRTCVersionDetection').isFirefox()){return i._("Screen sharing doesn't work in Mozilla Firefox yet. To share your screen, please open Facebook in Google Chrome.");}else return i._("Screen sharing doesn't work in your browser yet. To share your screen, please open Facebook in Google Chrome.");};o.prototype.$RTCUnsupportedBrowserDialog6=function(){return (c('React').createElement(c('Layout.react'),null,c('React').createElement(m,{style:{width:'100%',textAlign:'center'}},c('React').createElement(c('Link.react'),{href:'https://www.google.com/chrome/index.html',target:'_blank'},c('React').createElement(c('Image.react'),{className:"_4_if",src:j('/images/chat/webrtc/chrome.png'),alt:'Chrome',width:'64'}),c('React').createElement(c('XUIText.react'),{display:'block'},'Google Chrome')))));};f.exports=o;}),null);
__d('RTCCallControlsToggleScreenSharingButton.react',['cx','fbt','Promise','React','RTCCallActions','RTCCallControlsButton.react','RTCInstallExtensionDialog.react','RTCScreenSharing','RTCUnsupportedBrowserDialog.react','RTCUtils','ScreenSharingWebDriverIDs','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes,m=c('React').PureComponent;j=babelHelpers.inherits(n,m);k=j&&j.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.$RTCCallControlsToggleScreenSharingButton1=function(){if(this.props.highlighted){var t=this.props.screenStream;if(!t)return;c('RTCCallActions').removeLocalScreenStream(t);for(var u=t.getVideoTracks(),v=Array.isArray(u),w=0,u=v?u:u[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var x;if(v){if(w>=u.length)break;x=u[w++];}else{w=u.next();if(w.done)break;x=w.value;}var y=x;y.stop();}return;}c('RTCUtils').initLocalScreenStream().then(function(z){c('RTCCallActions').addLocalScreenStream(z);return c('Promise').all(z.getVideoTracks().map(function(aa){return new (c('Promise'))(function(ba){aa.addEventListener('ended',ba);});})).then(function(){return c('RTCCallActions').removeLocalScreenStream(z);});})['catch'](function(z){var aa=this.context;if(aa&&aa.dialogShow&&aa.dialogHide){aa.dialogHide();switch(z){case c('RTCScreenSharing').EXTENSION_NOT_INSTALLED_ERROR:aa.dialogShow(c('React').createElement(c('RTCInstallExtensionDialog.react'),{onEndCallClick:this.props.onEndCallClick,onToggle:aa.dialogHide}));break;case c('RTCScreenSharing').NOT_SUPPORTED_ERROR:aa.dialogShow(c('React').createElement(c('RTCUnsupportedBrowserDialog.react'),{onToggle:aa.dialogHide}));break;}}}.bind(this));}.bind(this),p;}n.prototype.render=function(){var o=this.props,p=o.highlighted,q=o.className,r=o.onClick,s=babelHelpers.objectWithoutProperties(o,['highlighted','className','onClick']),t=p?'M24 11.7V20H14v10h20V20h-9v-8.3l2.8 2.3.7-.8-4-3.2-4 3.2.7.8 2.8-2.3z\n        m2 6.3v1h9v12H13V19h10v-1H12v14h24V18H26zm-7 16h10v-1H19v1z':'M12 17v14h24V17H12zm23 13H13V18h22v12zm-16 3h10v-1H19v1zm15-14\n        H14v10h20V19z';return c('React').createElement(c('RTCCallControlsButton.react'),babelHelpers['extends']({className:c('joinClasses')(q,"semiopaque icon-48"),'data-testid':c('ScreenSharingWebDriverIDs').SHARE_SCREEN_BUTTON,onClick:r||this.$RTCCallControlsToggleScreenSharingButton1},{highlighted:p},s),c('React').createElement('svg',{viewBox:'0 0 48 48'},c('React').createElement('path',{d:t})));};n.prototype.componentWillUnmount=function(){var o=this.context;if(o&&o.dialogHide)o.dialogHide();};n.defaultProps={highlighted:false,title:i._("Share Your Screen")};n.contextTypes={dialogShow:l.func,dialogHide:l.func};f.exports=n;}),null);
__d('RTCCallControlsToggleVideoButton.react',['cx','fbt','React','RTCCallActions','RTCCallControlsButton.react','VideoCallWebDriverIDs','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PureComponent;j=babelHelpers.inherits(m,l);k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.$RTCCallControlsToggleVideoButton1=function(){c('RTCCallActions').toggleMuteVideo(this.props.highlighted);}.bind(this),o;}m.prototype.render=function(){var n=this.props,o=n.highlighted,p=n.className,q=n.onClick,r=babelHelpers.objectWithoutProperties(n,['highlighted','className','onClick']),s=o?i._("Enable Your Video"):i._("Disable Your Video"),t=o?'M36 29h1V19h-1v10zm-6-2.727L35 29V19l-5 2.727v4.546z\n        M19.344 17H26c1.126 0 2 .938 2 2v10c0 .54-.225 1.047-.595\n        1.415L19.345 17zm-3.5 0H15c-1.126 0-2 .938-2 2v10c0 1.062.874\n        2 2 2h9.257l-8.413-14zm11.408 17.044l.857-.516-12.362-20.572\n        -.857.516 12.362 20.572z':'M26 17H15c-1.126 0-2 .938-2 2v10c0 1.062.874 2 2 2h11\n        c1.126 0 2-.938 2-2V19c0-1.062-.874-2-2-2zm10 12h1V19h-1v10z\n        m-6-2.727L35 29V19l-5 2.727v4.546z';return c('React').createElement(c('RTCCallControlsButton.react'),babelHelpers['extends']({className:c('joinClasses')(p,"semiopaque icon-48"),'data-testid':c('VideoCallWebDriverIDs').END_CALL_BUTTON,onClick:q||this.$RTCCallControlsToggleVideoButton1,title:s},{highlighted:o},r),c('React').createElement('svg',{viewBox:'0 0 48 48'},c('React').createElement('path',babelHelpers['extends']({fillRule:'evenodd'},{d:t}))));};m.defaultProps={highlighted:false};f.exports=m;}),null);
__d('RTCCallControls.react',['cx','FBRTCCallControlPopover.react','FBRTCConfig','FBRTCFullScreenController','FBRTCScreenSharingUtils','FBRTCUserSettings','React','RTCCallControlsCloseWindowButton.react','RTCCallControlsEndCallButton.react','RTCCallControlsRedialButton.react','RTCCallControlsShowCameraControlsButton.react','RTCCallControlsShowSettingsButton.react','RTCCallControlsToggleAudioButton.react','RTCCallControlsToggleFullScreenButton.react','RTCCallControlsToggleScreenSharingButton.react','RTCCallControlsToggleVideoButton.react','RTCConferenceState','keyMirror'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').Component,l=10000,m=c('keyMirror')({READY:null,SHOWN:null,COMPLETE:null}),n=3000,o=500,p=255,q=320;i=babelHelpers.inherits(r,k);j=i&&i.prototype;function r(){var t,u;for(var v=arguments.length,w=Array(v),x=0;x<v;x++)w[x]=arguments[x];return u=(t=j.constructor).call.apply(t,[this].concat(w)),this.state={forceVisible:m.READY,hasFocus:false,hasVideoInput:false,isMouseActive:true},this.$RTCCallControls7=function(){this.setState({hasFocus:true});}.bind(this),this.$RTCCallControls8=function(){this.setState({hasFocus:false});}.bind(this),this.$RTCCallControls19=s(function(){clearTimeout(this.$RTCCallControls3);this.setState({isMouseActive:true});this.$RTCCallControls3=setTimeout(function(){return this.setState({isMouseActive:false});}.bind(this),n);}.bind(this),o),u;}r.prototype.render=function(){return c('React').createElement('section',{className:"_1jhb"},c('React').createElement('div',{className:"_4jl7"+(this.$RTCCallControls6()?' '+"visible":'')+(this.props.isAudioCall?' '+"audioCall":''),onFocus:this.$RTCCallControls7,onBlur:this.$RTCCallControls8},c('React').createElement('div',{className:"_5ldu bottom"},this.$RTCCallControls9()),c('React').createElement('div',{className:"_5ldu top"},this.$RTCCallControls10(),c('React').createElement(c('RTCCallControlsToggleFullScreenButton.react'),null),this.$RTCCallControls11())));};r.prototype.$RTCCallControls6=function(){return this.state.isMouseActive||this.state.hasFocus||this.state.forceVisible===m.SHOWN||this.props.isAudioCall||this.props.conferenceState===c('RTCConferenceState').TERMINATED;};r.prototype.$RTCCallControls9=function(){switch(this.props.conferenceState){case c('RTCConferenceState').TERMINATED:return [c('React').createElement(c('RTCCallControlsCloseWindowButton.react'),{key:'close'}),this.$RTCCallControls12()];default:return [this.$RTCCallControls13(),this.$RTCCallControls14(),this.$RTCCallControls15(),this.$RTCCallControls16(),this.$RTCCallControls17(),this.$RTCCallControls18()];}};r.prototype.$RTCCallControls12=function(){var t=this.props.isAudioCall;return c('React').createElement(c('RTCCallControlsRedialButton.react'),babelHelpers['extends']({key:'redial'},{isAudioCall:t}));};r.prototype.$RTCCallControls13=function(){if(!this.props.showVideo)return null;var t=this.props,u=t.conferenceState,v=t.isRemoteVideoSupported,w=t.localUser,x=!(v&&(w.hasVideo()||this.state.hasVideoInput)&&u===c('RTCConferenceState').CONNECTED),y=!x&&w.isVideoMuted();return c('React').createElement(c('RTCCallControlsToggleVideoButton.react'),babelHelpers['extends']({key:'video',onClick:this.props.onToggleVideoClick,ref:function(z){this.$RTCCallControls5=z;}.bind(this)},{highlighted:y,disabled:x}));};r.prototype.$RTCCallControls15=function(){var t=this.props.localUser.isAudioMuted();return c('React').createElement(c('RTCCallControlsToggleAudioButton.react'),babelHelpers['extends']({key:'audio'},{highlighted:t}));};r.prototype.$RTCCallControls16=function(){if(!c('FBRTCScreenSharingUtils').isScreenSharingSupported()||!this.props.showScreenSharing)return null;var t=this.props.localUser.getScreenStreamsAsArray(),u=t[0],v=u!=null,w=this.props.conferenceState!==c('RTCConferenceState').CONNECTED||!this.props.canPeerReceiveScreenSharing||this.props.hasRemoteScreenStream,x=this.props.onEndCallClick;return c('React').createElement(c('RTCCallControlsToggleScreenSharingButton.react'),babelHelpers['extends']({key:'screenSharing',ref:function(y){this.$RTCCallControls4=y;}.bind(this)},{highlighted:v,disabled:w,screenStream:u,onEndCallClick:x}));};r.prototype.$RTCCallControls11=function(){if(!(c('FBRTCUserSettings').isEnabled()&&this.props.showSettings))return null;var t=this.props.remoteStream;return c('React').createElement(c('RTCCallControlsShowSettingsButton.react'),{remoteStream:t});};r.prototype.$RTCCallControls10=function(){if(!c('FBRTCConfig').isVCEndpointCall()||this.props.conferenceState!==c('RTCConferenceState').CONNECTED)return null;return c('React').createElement(c('RTCCallControlsShowCameraControlsButton.react'),null);};r.prototype.$RTCCallControls14=function(){var t=this.props.localUser;if(this.$RTCCallControls5){var u=null;if(!this.props.isRemoteVideoSupported){u=c('FBRTCCallControlPopover.react').Types.REMOTE_VIDEO_UNSUPPORTED;}else if(!t.hasVideo()&&!this.state.hasVideoInput){u=c('FBRTCCallControlPopover.react').Types.NO_VIDEO_TRACKS;}else if(this.props.videoIsAutoDisabled)u=c('FBRTCCallControlPopover.react').Types.VIDEO_AUTO_DISABLED;if(u)return c('React').createElement(c('FBRTCCallControlPopover.react'),{key:'popover:video',className:"_26bw",reason:u,peerName:this.props.remotePeerName,reference:this.$RTCCallControls5,width:q});}return null;};r.prototype.$RTCCallControls17=function(){if(this.$RTCCallControls4&&this.props.conferenceState===c('RTCConferenceState').CONNECTED&&c('FBRTCScreenSharingUtils').isScreenSharingSupported()){var t=null;if(!this.props.canPeerReceiveScreenSharing){t=c('FBRTCCallControlPopover.react').Types.SCREENSHARING_UNAVAILABLE;}else if(this.props.hasRemoteScreenStream)t=c('FBRTCCallControlPopover.react').Types.PEER_IS_SHARING_SCREEN;if(t)return c('React').createElement(c('FBRTCCallControlPopover.react'),{key:'popover:screenSharing',className:"_26bw",reason:t,peerName:this.props.remotePeerName,isVCEndpointCall:c('FBRTCConfig').isVCEndpointCall(),reference:this.$RTCCallControls4,width:p});}return null;};r.prototype.$RTCCallControls18=function(){var t=this.props.onEndCallClick;return t!=null?c('React').createElement(c('RTCCallControlsEndCallButton.react'),{key:'end',onClick:t}):c('React').createElement(c('RTCCallControlsEndCallButton.react'),{key:'end'});};r.prototype.componentDidMount=function(){this.$RTCCallControls1=c('FBRTCFullScreenController').addListener(function(){return this.forceUpdate();}.bind(this));window.addEventListener('mousemove',this.$RTCCallControls19);if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices){this.setState({hasVideoInput:true});}else navigator.mediaDevices.enumerateDevices().then(function(t){if(t.some(function(u){var v=u.kind;return v==='videoinput';}))this.setState({hasVideoInput:true});}.bind(this))['catch'](function(t){});};r.prototype.componentWillReceiveProps=function(t){var u=this.props.localUser,v=this.state.forceVisible;if(t.videoIsAutoDisabled||u.hasStream()&&!u.hasVideo()){if(v===m.READY){this.setState({forceVisible:m.SHOWN});this.$RTCCallControls2=setTimeout(function(){this.setState({forceVisible:m.COMPLETE});}.bind(this),l);}}else if(v===m.SHOWN)this.setState({forceVisible:m.COMPLETE});};r.prototype.componentWillUnmount=function(){window.removeEventListener('mousemove',this.$RTCCallControls19);clearTimeout(this.$RTCCallControls2);clearTimeout(this.$RTCCallControls3);this.$RTCCallControls19.cancel();if(this.$RTCCallControls1)this.$RTCCallControls1.remove();};r.defaultProps={canPeerReceiveScreenSharing:false,hasRemoteScreenStream:false,isAudioCall:false,isRemoteVideoSupported:true,isScreenSharingEnabled:false,showScreenSharing:false,showSettings:true,showVideo:true,videoIsAutoDisabled:false,remotePeerName:''};function s(t){var u=arguments.length<=1||arguments[1]===undefined?100:arguments[1],v=void 0,w=void 0,x=function y(){for(var z=arguments.length,aa=Array(z),ba=0;ba<z;ba++)aa[ba]=arguments[ba];var ca=Date.now(),da=function ea(){v=ca;t.apply(undefined,aa);};if(v&&ca<v+u){clearTimeout(w);w=setTimeout(da,u);}else da();};x.cancel=function(){return clearTimeout(w);};return x;}f.exports=r;}),null);
__d('RTCGroupCallFeedbackView.react',['cx','fbt','FBRTCButton.react','FBRTCFadeInMixin','FBRTCFeedbackCompleteView.react','React','RTCCallActions'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c('React').createClass({displayName:'FBRTCFeedbackView',mixins:[c('FBRTCFadeInMixin')],getInitialState:function k(){return {feedbackText:'',submitted:false,skipped:false};},componentDidMount:function k(){setTimeout(function(){c('RTCCallActions').feedbackShown();});},onSubmitButtonClicked:function k(){if(this.canSubmitFeedback()){this.setState({submitted:true});c('RTCCallActions').submitFeedback(this.state.feedbackText);}},onNotNowClicked:function k(){this.setState({skipped:true,submitted:true});},canSubmitFeedback:function k(){return this.state.feedbackText!=='';},feedbackChanged:function k(l){this.setState({feedbackText:l.target.value});l.preventDefault();},render:function k(){if(this.state.submitted)return (c('React').createElement(c('FBRTCFeedbackCompleteView.react'),{messengerUI:this.props.messengerUI,skipped:this.state.skipped,isGroupCall:true}));return (c('React').createElement('div',{className:"_1-7k"},c('React').createElement('p',{className:"_4j_k"},i._("Give Feedback")),c('React').createElement('div',{className:"_4ru1"},c('React').createElement('label',{htmlFor:'fbwebrtcfeedback',className:"_4j_k _4ru2"},i._("What was the worst problem you experienced?")),c('React').createElement('textarea',{className:"_4ru3",id:'fbwebrtcfeedback',rows:'4',onChange:this.feedbackChanged,placeholder:i._("Enter your feedback")}),c('React').createElement('div',{className:"_s97"},c('React').createElement(c('FBRTCButton.react'),{className:"_g6b",label:i._("Not Now"),messengerUI:this.props.messengerUI,onClick:this.onNotNowClicked,type:'secondary'}),c('React').createElement(c('FBRTCButton.react'),{className:"_g6b",disabled:!this.canSubmitFeedback(),label:i._("Submit"),messengerUI:this.props.messengerUI,onClick:this.onSubmitButtonClicked,type:'primary'})))));}});f.exports=j;}),null);
__d('RTCGroupCallStarRatingView.react',['cx','fbt','FBRTCButton.react','FBRTCFadeInMixin','FBRTCFeedbackCompleteView.react','React','RTCCallActions','RTCGroupCallFeedbackView.react','StarsInput.react','VideoCallWebDriverIDs'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c('React').createClass({displayName:'RTCGroupCallStarRatingView',mixins:[c('FBRTCFadeInMixin')],getInitialState:function k(){return {rating:0,submitted:false,skipped:false};},componentDidMount:function k(){setTimeout(function(){c('RTCCallActions').ratingShown();});},onStarClicked:function k(l){this.setState({rating:l});},onSubmitButtonClicked:function k(){if(this.state.rating>0){this.setState({submitted:true});c('RTCCallActions').submitRating(this.state.rating);}},onNotNowClicked:function k(){this.setState({skipped:true,submitted:true});},getRatingString:function k(){switch(this.state.rating){case 1:return i._("Poor");case 2:return i._("Fair");case 3:return i._("Good");case 4:return i._("Very good");case 5:return i._("Excellent");default:return '---';}},shouldAskForFeedback:function k(){return this.state.rating===1&&this.state.submitted&&!this.state.skipped;},render:function k(){if(this.shouldAskForFeedback())return (c('React').createElement(c('RTCGroupCallFeedbackView.react'),{messengerUI:this.props.messengerUI}));if(this.state.submitted)return (c('React').createElement(c('FBRTCFeedbackCompleteView.react'),{skipped:this.state.skipped,messengerUI:this.props.messengerUI,isGroupCall:true}));return (c('React').createElement('div',{className:"_1-7k",'data-testid':c('VideoCallWebDriverIDs').STAR_RATING_VIEW},c('React').createElement('p',{className:"_4j_k"},this.props.hasVideo?i._("Please rate the quality of your video call."):i._("Please rate the quality of your audio call.")),c('React').createElement('p',{className:"_4j_k _a16"},this.getRatingString()),c('React').createElement(c('StarsInput.react'),{allowMultipleSubmissions:true,onClick:this.onStarClicked}),c('React').createElement('div',{className:"_s97"},c('React').createElement(c('FBRTCButton.react'),{className:"_g6b",label:i._("Not Now"),messengerUI:this.props.messengerUI,onClick:this.onNotNowClicked,type:'secondary'}),c('React').createElement(c('FBRTCButton.react'),{className:"_g6b",label:i._("Submit"),disabled:this.state.rating===0,messengerUI:this.props.messengerUI,onClick:this.onSubmitButtonClicked,type:'primary'}))));}});f.exports=j;}),null);
__d("XMessengerDotComMainController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/t\/{?thread_key}\/",{thread_key:{type:"String"},mid:{type:"String"},redirect_source:{type:"Enum",enumType:1},ref:{type:"String"}});}),null);
__d('RTCGroupCallRosterUser.react',['cssVar','cx','fbt','DOM','MessengerContactImage.react','MessengerMenu.react','MessengerPopoverMenu.react','MultiwayTypes','React','ReactDOM','RTCUser','Tooltip','XMessengerDotComMainController','URI'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('MultiwayTypes').ParticipantCallState,n=c('MessengerMenu.react').Item,o=c('MessengerMenu.react').Separator,p=c('React').PropTypes,q="rgba(0, 132, 255, 0.5)",r=48;k=babelHelpers.inherits(s,c('React').Component);l=k&&k.prototype;function s(){var t,u;for(var v=arguments.length,w=Array(v),x=0;x<v;x++)w[x]=arguments[x];return u=(t=l.constructor).call.apply(t,[this].concat(w)),this.$RTCGroupCallRosterUser1=c('DOM').create('div'),this.$RTCGroupCallRosterUser2=false,this.$RTCGroupCallRosterUser3=0,this.state={audioLevel:0},this.$RTCGroupCallRosterUser7=function(){window.open(this.props.isMessengerUser?c('XMessengerDotComMainController').getURIBuilder().setString('thread_key',this.props.user.getUserID()).getURI().setProtocol(c('URI').getRequestURI().getProtocol()).setSubdomain(c('URI').getRequestURI().getSubdomain()).setDomain('messenger.com'):new (c('URI'))('/messages/'+this.props.user.getUserID()));}.bind(this),this.$RTCGroupCallRosterUser8=function(){if(this.props.user.getProfileUrl())window.open(this.props.user.getProfileUrl());}.bind(this),this.$RTCGroupCallRosterUser4=function(){c('ReactDOM').render(c('React').createElement('div',{className:"_25d6"},c('React').createElement('div',{className:"_25d7"},this.props.user.getUserName()),c('React').createElement('div',{className:"_25d8"},this.$RTCGroupCallRosterUser9())),this.$RTCGroupCallRosterUser1);c('Tooltip').set(c('ReactDOM').findDOMNode(this.refs.image),this.$RTCGroupCallRosterUser1,'above','center');}.bind(this),this.$RTCGroupCallRosterUser5=function(){var y=this.props.user.getStreamsAsArray();if(!this.$RTCGroupCallRosterUser2&&y.length>0){this.$RTCGroupCallRosterUser2=true;var z=new AudioContext(),aa=z.createMediaStreamSource(y[0]),ba=z.createAnalyser(),ca=new Uint8Array(ba.frequencyBinCount);aa.connect(ba);this.$RTCGroupCallRosterUser10(ba,ca);}}.bind(this),this.$RTCGroupCallRosterUser6=function(){this.$RTCGroupCallRosterUser2=false;cancelAnimationFrame(this.$RTCGroupCallRosterUser3);}.bind(this),this.$RTCGroupCallRosterUser10=function(y,z){this.$RTCGroupCallRosterUser3=requestAnimationFrame(function(){if(this.$RTCGroupCallRosterUser2){y.getByteFrequencyData(z);var aa=z.reduce(function(ba,ca){return ba+ca;});this.setState({audioLevel:Math.floor(aa/y.frequencyBinCount/256*40)});this.$RTCGroupCallRosterUser10(y,z);}}.bind(this));}.bind(this),u;}s.prototype.componentDidMount=function(){this.$RTCGroupCallRosterUser4();this.$RTCGroupCallRosterUser5();};s.prototype.componentDidUpdate=function(t){var u=t.user,v=this.props.user.getParticipantState(),w=u.getParticipantState();if(!v||!w)return;if(v.state!==w.state)this.$RTCGroupCallRosterUser4();this.$RTCGroupCallRosterUser5();};s.prototype.componentWillUnmount=function(){this.$RTCGroupCallRosterUser6();};s.prototype.render=function(){var t=this.props.user.getParticipantState();if(!t)return null;var u=c('React').createElement(c('MessengerMenu.react'),{className:"_1jr_"},c('React').createElement(n,{label:this.props.user.getUserName(),disabled:true}),c('React').createElement(o,null),c('React').createElement(n,{label:j._("Message"),onclick:this.$RTCGroupCallRosterUser7}),c('React').createElement(n,{label:j._("View profile"),onclick:this.$RTCGroupCallRosterUser8}));return c('React').createElement('div',{className:"_2bcu",style:{boxShadow:'0 0 0 '+this.state.audioLevel+'px '+q}},c('React').createElement(c('MessengerPopoverMenu.react'),{menu:u},c('React').createElement(c('MessengerContactImage.react'),{ref:'image',className:"_2z_7"+(t.state!==m.CONNECTED?' '+"_25d9":''),isMessengerUser:this.props.user.getIsMessengerUser(),size:r,src:this.props.user.getProfilePictureUrl()})));};s.prototype.$RTCGroupCallRosterUser9=function(){var t=this.props.user.getParticipantState();if(!t)return null;switch(t.state){case m.CONTACTING:return j._("Contacting...");case m.RINGING:return j._("Ringing...");case m.CONNECTING:return j._("Connecting...");case m.CONNECTED:return j._("Connected");default:return null;}};s.propTypes={user:p.instanceOf(c('RTCUser')).isRequired,isMessengerUser:p.bool.isRequired};f.exports=s;}),null);
__d('RTCGroupCallRosterRow.react',['cx','ix','Image.react','immutable','ImmutableObject','MessengerContactImage.react','React','RTCGroupCallDialogController','RTCGroupCallRosterUser.react','RTCUser','MultiwayTypes'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c('React').PropTypes,k=c('MultiwayTypes').ParticipantCallState,l=48,m=function p(q){var r=q.thread,s=q.participants,t=q.localUser,u=q.remoteUsers;return (c('React').createElement('div',{className:"_1a8c"},c('React').createElement(n,{thread:r,participants:s,localUser:t,remoteUsers:u}),u.filter(function(v){return o(v.getParticipantState());}).map(function(v){return (c('React').createElement(c('RTCGroupCallRosterUser.react'),{key:v.getUserID(),user:v,isMessengerUser:t.getIsMessengerUser()}));}),c('React').createElement(c('MessengerContactImage.react'),{className:"_1a8d",isMessengerUser:t.getIsMessengerUser(),size:l,src:t.getProfilePictureUrl()})));},n=function p(q){var r=q.thread,s=q.participants,t=q.localUser,u=q.remoteUsers,v=s.filter(function(w){var x=w.fbid;return (x!==t.getUserID()&&u.every(function(y){return (y.getUserID()!==x||!o(y.getParticipantState()));}));});if(v.isEmpty())return null;return (c('React').createElement('div',{className:"_2nqa",onClick:function w(){return c('RTCGroupCallDialogController').showAddGroupMembersDialog(v,c('immutable').Map(u.map(function(x){return [x.getUserID(),x.getParticipantState()];})),r,t.getUserID());}},c('React').createElement(c('Image.react'),{className:"_1a8d",src:i('/images/mercury/clients/messenger/header/AddIcon.png')})));},o=function p(q){if(!q)return false;switch(q.state){case k.CONTACTING:case k.RINGING:case k.CONNECTING:case k.CONNECTED:return true;default:return false;}};m.propTypes={thread:j.instanceOf(c('ImmutableObject')).isRequired,participants:j.instanceOf(c('immutable').Map).isRequired,localUser:j.instanceOf(c('RTCUser')).isRequired,remoteUsers:j.instanceOf(c('immutable').List).isRequired};f.exports=m;}),null);
__d('RTCGroupCallStateInfo.react',['cx','fbt','CurrentUser','FBRTCButton.react','FBRTCCallTimer.react','immutable','MercuryThreadTitle.react','MessengerRTCGroupCallParticipantsPickerDialogController','MessengerThreadImage.react','React','RTCConferenceState','RTCGroupCallRosterRow.react','RTCUtils'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PureComponent;j=babelHelpers.inherits(m,l);k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.state={start:0},o;}m.prototype.componentWillReceiveProps=function(n){var o=n.conferenceState;if(this.state.start===0&&o===c('RTCConferenceState').CONNECTED)this.setState({start:Math.floor(Date.now()/1000)});};m.prototype.render=function(){return (c('React').createElement('div',{className:'fbRTC/callStateInfo'},this.$RTCGroupCallStateInfo1(),this.renderParticipants()));};m.prototype.$RTCGroupCallStateInfo1=function(){if(this.props.hasVideo)return null;return (c('React').createElement('div',{className:"_4j_i"},this.renderPeerImage(),this.renderMessage(),this.renderSubMessage(),this.renderStartCallButton(),this.renderParticipants()));};m.prototype.renderPeerImage=function(){return (c('React').createElement(c('MessengerThreadImage.react'),{className:"_4j_j",participants:this.props.participants,size:100,thread:this.props.thread,viewer:c('CurrentUser').getID()}));};m.prototype.renderMessage=function(){if(this.props.conferenceState===c('RTCConferenceState').AWAITING_USER_START)return (c('React').createElement('p',{className:"_fjp"},i._("Ready to call {name}?",[i.param('name',c('React').createElement(c('MercuryThreadTitle.react'),{thread:this.props.thread,viewer:c('CurrentUser').getID()}))])));return (c('React').createElement('p',{className:"_fjp"},c('React').createElement(c('MercuryThreadTitle.react'),{thread:this.props.thread,viewer:c('CurrentUser').getID()})));};m.prototype.renderSubMessage=function(){return (c('React').createElement('p',{className:"_fjq"},this.callMessage(this.props.conferenceState)));};m.prototype.callMessage=function(n){switch(n){case c('RTCConferenceState').CONNECTING:return i._("Contacting...");case c('RTCConferenceState').CONNECTED:return (c('React').createElement(c('FBRTCCallTimer.react'),{start:this.state.start}));case c('RTCConferenceState').TERMINATING:return i._("Hanging up...");case c('RTCConferenceState').TERMINATED:return i._("Call ended");default:return null;}};m.prototype.renderStartCallButton=function(){var n=this.props.thread.thread_fbid;if(this.props.conferenceState!==c('RTCConferenceState').AWAITING_USER_START||!n)return null;return (c('React').createElement(c('FBRTCButton.react'),{label:i._("Start Call"),messengerUI:true,onClick:function(){return c('MessengerRTCGroupCallParticipantsPickerDialogController').render({participants:this.props.participants.filter(function(o){var p=o.fbid;return p!==c('CurrentUser').getID();}),thread:this.props.thread,viewerID:c('CurrentUser').getID(),clickSource:'multiway_popup_start_call_button',conferenceName:'GROUP:'+n,hasVideo:true,handleCall:function(o){return c('RTCUtils').initLocalStream(false).then(function(p){return this.props.onStartCallClick(p,o);}.bind(this));}.bind(this)});}.bind(this),type:'primary'}));};m.prototype.renderParticipants=function(){if(this.props.conferenceState!==c('RTCConferenceState').CONNECTING&&this.props.conferenceState!==c('RTCConferenceState').CONNECTED)return null;return (c('React').createElement('div',{className:this.props.hasVideo?"_l_f":''},c('React').createElement(c('RTCGroupCallRosterRow.react'),{thread:this.props.thread,participants:this.props.participants,localUser:this.props.localUser,remoteUsers:this.props.remoteUsers})));};f.exports=m;}),null);
__d('RTCSelfView.react',['cx','fbt','FBRTCVideo.react','Image.react','React','RTCCallActions'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').Component;j=babelHelpers.inherits(m,l);k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.state={collapsed:false},this.$RTCSelfView1=function(s){this.setState({collapsed:!this.state.collapsed},function(){return c('RTCCallActions').toggleSelfView(this.state.collapsed);}.bind(this));}.bind(this),o;}m.prototype.render=function(){var n=this.props.user,o=n.getStreamsAsArray(),p=o[0];if(!(p&&n.hasVideo()))return null;return c('React').createElement('section',{className:"_88o"},c('React').createElement('button',{className:"_88p"+(this.state.collapsed?' '+"collapsed":''),onClick:this.$RTCSelfView1},this.$RTCSelfView2(),this.$RTCSelfView3(),c('React').createElement(c('FBRTCVideo.react'),babelHelpers['extends']({className:"_88q"+(n.isVideoMuted()||!p?' '+"muted":'')},{mediaStream:p},{muted:true}))));};m.prototype.$RTCSelfView2=function(){return c('React').createElement('div',{className:"_88s"},c('React').createElement('svg',{viewBox:'0 0 8 28',className:"_891"},c('React').createElement('path',{d:'M2 2L6 14L2 26'})));};m.prototype.$RTCSelfView3=function(){var n=this.props.user;return (c('React').createElement('div',{className:"_892"+(n.isVideoMuted()||n.isAudioMuted()?' '+"visible":'')},c('React').createElement(c('Image.react'),{className:"_893"+(n.isVideoMuted()?' '+"visible":''),src:n.getProfilePictureUrl(),alt:i._("Profile picture")}),c('React').createElement('svg',{className:"_894"+(n.isAudioMuted()?' '+"visible":''),viewBox:'0 0 48 48'},c('React').createElement('path',{d:'M25 31c.7-.1 1.3-.3 1.9-.6l-.5-.9c-.6.3-1.2.5-1.9.5-2.5 0-4.5 -2.2-4.5-5v-5h-1v5.2c0 3.1 2.2 5.6 5 5.8v3h-3v1h7v-1h-3v-3z m-.5-2c.5 0 1-.1 1.4-.3L21 20.6v4.9c0 1.9 1.6 3.5 3.5 3.5z m-5.8-16l-.9.5L30.3 34l.9-.5L18.7 13zM30 25.2V20h-1v5c0 .8-.2 1.6-.5 2.2l.6 1c.6-.8.9-1.9.9-3zm-2 .3v-9c0-1.9-1.6-3.5-3.5 -3.5-1.5 0-2.7.9-3.2 2.2L28 26.3v-.8z'}))));};f.exports=m;}),null);
__d('RTCGroupCallView.react',['cx','FBRTCGroupCallIncallView.react','immutable','MultiwayTypes','React','RTCCallControls.react','RTCConferenceState','RTCConfig','RTCGroupCallStarRatingView.react','RTCGroupCallStateInfo.react','RTCMWProtocolHandler','RTCSelfView.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('MultiwayTypes').HangupReason,l=c('MultiwayTypes').ParticipantCallState,m=c('React').PureComponent;i=babelHelpers.inherits(n,m);j=i&&i.prototype;n.prototype.render=function(){var o=this.props.remoteUsers.toList().sort(function(p,q){return p.getLastConnectedAt()-q.getLastConnectedAt();});switch(this.props.conferenceState){case c('RTCConferenceState').NEW:case c('RTCConferenceState').AWAITING_USER_START:return (c('React').createElement('div',{className:"_38jq _li"},this.$RTCGroupCallView1(o)));case c('RTCConferenceState').CONNECTING:case c('RTCConferenceState').CONNECTED:case c('RTCConferenceState').TERMINATING:return (c('React').createElement('div',{className:"_38jq _li"},c('React').createElement(c('FBRTCGroupCallIncallView.react'),{hasVideo:this.props.hasVideo,remoteUsers:o.filter(function(p){var q=p.getParticipantState();return q&&q.state===l.CONNECTED;})}),this.$RTCGroupCallView1(o),this.$RTCGroupCallView2(),this.$RTCGroupCallView3()));case c('RTCConferenceState').TERMINATED:return (c('React').createElement('div',{className:"_38jq _17cj"},c('React').createElement(c('RTCGroupCallStarRatingView.react'),{messengerUI:true,hasVideo:!this.props.isAudioCall})));default:return null;}};n.prototype.$RTCGroupCallView1=function(o){return (c('React').createElement(c('RTCGroupCallStateInfo.react'),{conferenceState:this.props.conferenceState,hasVideo:this.props.hasVideo,localUser:this.props.localUser,onStartCallClick:this.props.onStartCallClick,participants:this.props.participants,remoteUsers:o,thread:this.props.thread}));};n.prototype.$RTCGroupCallView2=function(){return (c('React').createElement('div',{className:this.props.hasVideo?"_188-":''},c('React').createElement(c('RTCCallControls.react'),{conferenceState:this.props.conferenceState,isAudioCall:!this.props.hasVideo,localUser:this.props.localUser,onEndCallClick:function(){return c('RTCMWProtocolHandler').endCall(this.props.conferenceName,this.props.serverInfoData,k.HANGUP_CALL);}.bind(this),onToggleVideoClick:this.props.localUser.hasVideo()?null:function(){new (c('RTCMWProtocolHandler'))().videoEscalation();},remoteStream:null,showVideo:c('RTCConfig').RtcConferencingVideoGK})));};n.prototype.$RTCGroupCallView3=function(){return c('React').createElement(c('RTCSelfView.react'),{user:this.props.localUser});};function n(){i.apply(this,arguments);}f.exports=n;}),null);
__d('RTCGroupCallContainer.react',['fbt','invariant','FBRTCConstants','CurrentUser','FBRTCGroupCallStore','FluxContainer','MultiwayTypes','MercuryIDs','React','RTCAppView.react','RTCCallActions','RTCCallStore','RTCConferenceState','RTCGroupCallDispatcher','RTCGroupCallUtils','RTCGroupCallView.react','RTCMWProtocolHandler','RTCUser','RTCUtils','Run','URI','guid'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('FBRTCConstants').ChildWindowMessageType,m=c('MultiwayTypes').HangupReason,n=c('React').PureComponent;j=babelHelpers.inherits(o,n);k=j&&j.prototype;o.getStores=function(){return [c('RTCCallStore')];};o.calculateState=function(p,q){var r=c('RTCCallStore').getState();return babelHelpers['extends']({},p,{conferenceState:r.callInfo.conferenceState,localUser:r.localUser,remoteUsers:r.remoteUsers});};function o(p){k.constructor.call(this,p);this.$RTCGroupCallContainer4=function(q,r){var s=this.props,t=s.conferenceName,u=s.serverInfoData;c('RTCCallActions').addLocalStream(q);this.$RTCGroupCallContainer1.startCall(r,[q],t,u);}.bind(this);c('RTCGroupCallDispatcher').explicitlyRegisterStores([c('RTCCallStore'),c('FBRTCGroupCallStore')]);this.$RTCGroupCallContainer1=new (c('RTCMWProtocolHandler'))(this.props.callID);c('RTCGroupCallUtils').getThread(this.props.conferenceName.split(':')[1],function(q,r){this.setState({thread:q,participants:r});c('RTCCallActions').initLocalUser(this.$RTCGroupCallContainer2(r.get(c('MercuryIDs').getParticipantIDFromUserID(c('CurrentUser').getID()))));c('RTCCallActions').initRemoteUsers(r.filter(function(s){var t=s.fbid;return t!=c('CurrentUser').getID();}).map(this.$RTCGroupCallContainer2).toSet());this.$RTCGroupCallContainer3();}.bind(this));}o.prototype.$RTCGroupCallContainer2=function(p){var q=p.fbid,r=p.href,s=p.image_src,t=p.is_messenger_user,u=p.name,v=p.short_name;q||i(0);return new (c('RTCUser'))({FBID:q,profileUrl:new (c('URI'))(r),profilePictureUrl:s,isMessengerUser:!!t,userName:u,userShortName:v});};o.prototype.$RTCGroupCallContainer3=function(){var p=c('guid')(),q=function(event){if(event.origin!==window.location.origin||!event.data||event.data.nonce!==p)return;if(event.data.type===l.CHILD_WINDOW_START_CALL){window.removeEventListener('message',q);c('RTCUtils').initLocalStream(this.props.hasVideo).then(function(r){return this.$RTCGroupCallContainer4(r,this.props.usersToRing);}.bind(this))['catch'](function(r){});}}.bind(this);window.addEventListener('message',q);if(window.opener&&window.opener.postMessage)window.opener.postMessage({type:l.CHILD_WINDOW_READY,nonce:this.props.nonce,childNonce:p,peerID:-1},window.location.origin);setTimeout(function(){return c('RTCCallActions').waitForUserInput();},1500);};o.prototype.componentDidMount=function(){c('Run').onBeforeUnload(function(){var p=c('RTCCallStore').getState().callInfo.conferenceState;if(p===c('RTCConferenceState').TERMINATED)return null;return h._("Leaving this page will end your call.");},false);c('Run').onUnload(function(){var p=c('RTCCallStore').getState().callInfo.conferenceState;if(p===c('RTCConferenceState').TERMINATED)return;c('RTCCallActions').hangup(m.HANGUP_CALL,'BrowserClosed');});};o.prototype.render=function(){var p=this.state,q=p.participants,r=p.thread;if(!q||!r)return null;var s=this.state.remoteUsers.some(function(t){return t.getStreamsAsArray().length>0&&!t.areAllTracksMuted(t.getStreamsAsArray()[0].getVideoTracks());});return c('React').createElement(c('RTCAppView.react'),{isAudioCall:!s},c('React').createElement(c('RTCGroupCallView.react'),{conferenceName:this.props.conferenceName,conferenceState:this.state.conferenceState,hasVideo:s,isAudioCall:!this.props.hasVideo,localUser:this.state.localUser,onStartCallClick:this.$RTCGroupCallContainer4,participants:q,remoteUsers:this.state.remoteUsers,serverInfoData:c('RTCCallStore').getState().callInfo.serverInfoData,thread:r}));};f.exports=c('FluxContainer').create(o,{withProps:true});}),null);