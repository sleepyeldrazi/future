if (self.CavalryLogger) { CavalryLogger.start_js(["jjhu4"]); }

__d("LiveMapClickEventSource",[],(function a(b,c,d,e,f,g){f.exports={MAP_MARKER:"map_marker",GRID_ITEM:"grid_item",GRID_PLAYER:"grid_player",SIDEBAR_ITEM:"sidebar_item",SIDEBAR_PLAYER:"sidebar_player",TOOLTIP_PLAYER:"tooltip_player"};}),null);
__d("LiveMapViewChangeSource",[],(function a(b,c,d,e,f,g){f.exports={MAP_SIDEBAR_LINK:"map_sidebar_link",GRID_TEXT_LINK:"grid_text_link"};}),null);
__d("NFXStoryLocation",[],(function a(b,c,d,e,f,g){f.exports={FEED:"feed",VIDEO_LIST_CHANNEL:"video_list_channel",VIDEO_PLAYLIST_CHANNEL:"video_playlist_channel",WATCHED_VIDEOS_CHANNEL:"watched_videos_channel",EXPLORE_FEED:"explore_feed",PROFILE_SELF:"profile_self",PROFILE_SOMEONE_ELSE:"profile_someone_else",PAGE:"page",PERMALINK:"permalink",PHOTO_VIEWER:"photo_viewer",PAGE_REVIEW:"page_review",POPULAR_AT:"popular_at",CURATED_SECTION:"curated_section",GROUP:"group",EVENT:"event",SEARCH:"search",UNKNOWN:"unknown",PROFILE_REPORTING_FLOW:"profile_reporting_flow",HEAD_PUBLISHER_APP_MENTIONS_FEED:"head_publisher_app_mentions_feed",MESSENGER:"messenger",MESSENGER_MONTAGE_VIEWER:"messenger_montage_viewer",FUNDRAISER_PAGE_FEED:"fundraiser_page_feed",FUNDRAISER_PERSON_TO_CHARITY:"fundraiser_person_to_charity",FUNDRAISER_PERSON_FOR_PERSON:"fundraiser_person_for_person",SETTINGS:"settings",LIVE_MAP:"live_map",MESSENGER_THREAD_ACTION_PANEL:"messenger_thread_action_panel",MESSENGER_CONTACT_DETAILS:"messenger_contact_details",TICKER:"ticker",FULLSCREEN_VIDEO_PLAYER:"fullscreen_video_player",ACTIVITY_LOG_FACE_ALERTS:"face_alerts",HELP_COMMUNITY:"help_community",SUPPORT_INBOX:"support_inbox",APP_INVITES_FEED:"app_invites_feed",CHAINING_FEED:"chaining_feed",SOCIAL_REPORTING_REDIRECT:"social_reporting_redirect",WWW_CHAT_HEAD:"www_chat_head",THROWBACK:"throwback",POST_TO_PAGE:"post_to_page",ACTIVITY_LOG:"activity_log",VIDEO_CHANNEL:"video_channel",VIDEO_CHANNELS:"video_channels",VIDEO_HOME:"video_home",REVIEWS_FEED:"reviews_feed",BACKSTAGE:"backstage",MESSENGER_ENCRYPTED_THREAD:"messenger_encrypted_thread",LOCAL_NEWS:"local_news",MARKETPLACE_PROFILE:"marketplace_profile",MARKETPLACE_THREAD:"marketplace_thread",POLITICAL_ISSUE_MODULE:"political_issue_module",ELECTION_HUB:"election_hub",SPATIAL_PRIVACY_PUBLIC:"spatial_privacy_public",SPATIAL_PRIVACY_FRIENDS:"spatial_privacy_friends",SPATIAL_PRIVACY_ALL:"spatial_privacy_all",SPATIAL_PRIVACY_SELF:"spatial_privacy_self",PROFILE_DEPRECATED:"profile",TIMELINE_DEPRECATED:"timeline",BREAKUP_FLOW:"breakup_flow",ASYNC_TASK_DO_NOT_USE:"async"};}),null);
__d("PublicLiveMapEvent",[],(function a(b,c,d,e,f,g){f.exports={JS_LOADED:"js_loaded",APP_MOUNTED:"app_mounted",INITIAL_DATA_FETCHED:"initial_data_fetched",PUBLIC_CIRCLES_RENDERED:"public_circles_rendered",CIRCLE_CLICKED:"circle_clicked",VIEW_MODE_CHANGE:"view_mode_change",AUTOPLAY_VIDEO_CLOSED:"autoplay_video_closed"};}),null);
__d("VectorMapTileSet",[],(function a(b,c,d,e,f,g){f.exports={LIVE_MAP:1,LIVE_MAP_DEV:2};}),null);
__d('PublicLiveMapInteractionsTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear();}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:PublicLiveMapInteractionsLoggerConfig',this.$PublicLiveMapInteractionsTypedLogger1,c('Banzai').BASIC);};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:PublicLiveMapInteractionsLoggerConfig',this.$PublicLiveMapInteractionsTypedLogger1,c('Banzai').VITAL);};h.prototype.clear=function(){this.$PublicLiveMapInteractionsTypedLogger1={};return this;};h.prototype.updateData=function(j){this.$PublicLiveMapInteractionsTypedLogger1=babelHelpers['extends']({},this.$PublicLiveMapInteractionsTypedLogger1,j);return this;};h.prototype.setClickSource=function(j){this.$PublicLiveMapInteractionsTypedLogger1.click_source=j;return this;};h.prototype.setEvent=function(j){this.$PublicLiveMapInteractionsTypedLogger1.event=j;return this;};h.prototype.setMapZoom=function(j){this.$PublicLiveMapInteractionsTypedLogger1.map_zoom=j;return this;};h.prototype.setTimeSpentID=function(j){this.$PublicLiveMapInteractionsTypedLogger1.time_spent_id=j;return this;};h.prototype.setVideoID=function(j){this.$PublicLiveMapInteractionsTypedLogger1.video_id=j;return this;};h.prototype.setViewChangeSource=function(j){this.$PublicLiveMapInteractionsTypedLogger1.view_change_source=j;return this;};h.prototype.setViewerCount=function(j){this.$PublicLiveMapInteractionsTypedLogger1.viewer_count=j;return this;};h.prototype.updateExtraData=function(j){j=c('nullthrows')(c('GeneratedLoggerUtils').serializeMap(j));c('GeneratedLoggerUtils').checkExtraDataFieldNames(j,i);this.$PublicLiveMapInteractionsTypedLogger1=babelHelpers['extends']({},this.$PublicLiveMapInteractionsTypedLogger1,j);return this;};h.prototype.addToExtraData=function(j,k){var l={};l[j]=k;return this.updateExtraData(l);};var i={click_source:true,event:true,map_zoom:true,time_spent_id:true,video_id:true,view_change_source:true,viewer_count:true};f.exports=h;}),null);
__d('MapboxGLAttribution.react',['mapboxgl','React'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes,k={position:'bottom-left'},l={map:j.object};h=babelHelpers.inherits(m,c('React').Component);i=h&&h.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=i.constructor).call.apply(n,[this].concat(q)),this.$MapboxGLAttribution2=function(){this.context.map.addControl(this.$MapboxGLAttribution1,this.props.position);}.bind(this),o;}m.prototype.componentDidMount=function(){this.$MapboxGLAttribution1=new (c('mapboxgl').AttributionControl)();if(this.context.map.loaded()){this.$MapboxGLAttribution2();}else this.context.map.once('load',this.$MapboxGLAttribution2);};m.prototype.componentWillUnmount=function(){this.context.map.removeControl(this.$MapboxGLAttribution1);};m.prototype.render=function(){return null;};m.prototype.shouldComponentUpdate=function(){return false;};m.contextTypes=l;m.defaultProps=k;f.exports=m;}),null);
__d('MapboxGLDayNight.react',['React','setInterval','clearInterval'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes,k=180/Math.PI,l=Math.PI/180;function m(z){return z/86400000+2440587.5;}function n(z){var aa=m(z),ba=aa-2451545;return (18.697374558+24.06570982441908*ba)%24;}function o(z){var aa=z-2451545,ba=(280.46+.9857474*aa)%360,ca=(357.528+.9856003*aa)%360,da=ba+1.915*Math.sin(ca*l)+.02*Math.sin(2*ca*l),ea=1.00014-.01671*Math.cos(ca*l)-.0014*Math.cos(2*ca*l);return {sunEclipticLongitude:da,earthDistanceToSun:ea};}function p(z){var aa=z-2451545,ba=aa/36525,ca=23.43929111-ba*(46.836769/3600-ba*(.0001831/3600+ba*(.0020034/3600-ba*(5.76e-07/3600-ba*4.34e-08/3600))));return ca;}function q(z,aa){var ba=Math.atan(Math.cos(aa*l)*Math.tan(z*l))*k,ca=Math.asin(Math.sin(aa*l)*Math.sin(z*l))*k,da=Math.floor(z/90)*90,ea=Math.floor(ba/90)*90;ba+=da-ea;return {alpha:ba,delta:ca};}function r(z,aa,ba){return (ba*15+z-aa);}function s(z,aa){return (Math.atan(-Math.cos(z*l)/Math.tan(aa*l))*k);}function t(z){var aa=arguments.length<=1||arguments[1]===undefined?2:arguments[1],ba=m(z),ca=n(z),da=[],ea=o(ba),fa=p(ba),ga=q(ea.sunEclipticLongitude,fa),ha=180,ia=90;if(ga.delta<0){da.push([-ha,ia]);}else da.push([-ha,-ia]);for(var ja=0;ja<=ha*2*aa;ja++){var ka=-ha+ja/aa,la=r(ka,ga.alpha,ca),ma=s(la,ga.delta);da.push([ka,ma]);}if(ga.delta<0){da.push([ha,ia]);da.push([0,ia]);}else{da.push([ha,-ia]);da.push([0,-ia]);}return {type:'Polygon',coordinates:[da],properties:{}};}var u={outlineColor:'rgb(0, 0, 0)',opacity:.3,fillColor:'rgb(0, 0, 0)',resolution:2,layerBefore:'waterway-label'},v={map:j.object},w='day-night-overlay',x=1000*60*5;h=babelHelpers.inherits(y,c('React').PureComponent);i=h&&h.prototype;function y(z){i.constructor.call(this,z);this.$MapboxGLDayNight2=null;this.$MapboxGLDayNight3=false;this.$MapboxGLDayNight4=function(){this.$MapboxGLDayNight8();this.$MapboxGLDayNight9();if(this.props.time==null)this.$MapboxGLDayNight6();}.bind(this);this.$MapboxGLDayNight10=function(){this.$MapboxGLDayNight1=new Date();this.$MapboxGLDayNight7(this.props.resolution);}.bind(this);this.$MapboxGLDayNight1=z.time||new Date();}y.prototype.componentDidMount=function(){if(this.context.map.loaded()){this.$MapboxGLDayNight4();}else this.context.map.once('load',this.$MapboxGLDayNight4);};y.prototype.componentWillUnmount=function(){this.context.map.removeLayer(w);this.context.map.removeSource(w);this.$MapboxGLDayNight5();};y.prototype.componentWillReceiveProps=function(z){var aa=this.$MapboxGLDayNight1;if(z.time!=null){aa=z.time;this.$MapboxGLDayNight5();}else if(z.time==null&&this.props.time!=null)this.$MapboxGLDayNight6();if(z.fillColor!==this.props.fillColor)this.context.map.setPaintProperty(w,'fill-color',z.fillColor);if(z.opacity!==this.props.opacity)this.context.map.setPaintProperty(w,'fill-opacity',z.opacity);if(z.outlineColor!==this.props.outlineColor)this.context.map.setPaintProperty(w,'fill-outline-color',z.outlineColor);if(this.$MapboxGLDayNight1!==aa){this.$MapboxGLDayNight1=aa;this.$MapboxGLDayNight7(z.resolution);}else if(z.resolution!==this.props.resolution)this.$MapboxGLDayNight7(z.resolution);};y.prototype.render=function(){return null;};y.prototype.$MapboxGLDayNight8=function(){var z=t(this.$MapboxGLDayNight1,this.props.resolution);this.context.map.addSource(w,{type:'geojson',data:z});this.$MapboxGLDayNight3=true;};y.prototype.$MapboxGLDayNight9=function(){var z={id:w,source:w,type:'fill',minzoom:0,layout:{visibility:'visible'},paint:{'fill-opacity':this.props.opacity,'fill-color':this.props.fillColor,'fill-outline-color':this.props.outlineColor}};this.context.map.addLayer(z,this.props.layerBefore);};y.prototype.$MapboxGLDayNight5=function(){if(this.$MapboxGLDayNight2==null)return;c('clearInterval')(this.$MapboxGLDayNight2);this.$MapboxGLDayNight2=null;};y.prototype.$MapboxGLDayNight6=function(){this.$MapboxGLDayNight5();this.$MapboxGLDayNight2=c('setInterval')(this.$MapboxGLDayNight10,x);};y.prototype.$MapboxGLDayNight7=function(z){if(!this.$MapboxGLDayNight3)return;var aa=t(this.$MapboxGLDayNight1,z),ba=this.context.map.getSource(w);if(ba==null)return;ba.setData(aa);};y.defaultProps=u;y.contextTypes=v;f.exports=y;}),null);
__d('MapboxGLNoPitchOrRotateKeyboardHandler',[],(function a(b,c,d,e,f,g){'use strict';var h=100;function i(l){return l*(2-l);}function j(l){k.call(this);this.$MapboxGLNoPitchOrRotateKeyboardHandler1=l;this.$MapboxGLNoPitchOrRotateKeyboardHandler2=l.getCanvasContainer();this.$MapboxGLNoPitchOrRotateKeyboardHandler3=false;}j.prototype.isEnabled=function(){return this.$MapboxGLNoPitchOrRotateKeyboardHandler3;};j.prototype.enable=function(){if(this.$MapboxGLNoPitchOrRotateKeyboardHandler3)return;this.$MapboxGLNoPitchOrRotateKeyboardHandler2.addEventListener('keydown',this.$MapboxGLNoPitchOrRotateKeyboardHandler4,false);this.$MapboxGLNoPitchOrRotateKeyboardHandler3=true;};j.prototype.disable=function(){if(!this.$MapboxGLNoPitchOrRotateKeyboardHandler3)return;this.$MapboxGLNoPitchOrRotateKeyboardHandler2.removeEventListener('keydown',this.$MapboxGLNoPitchOrRotateKeyboardHandler4);this.$MapboxGLNoPitchOrRotateKeyboardHandler3=false;};j.prototype.destroy=function(){this.disable();delete this.$MapboxGLNoPitchOrRotateKeyboardHandler1;delete this.$MapboxGLNoPitchOrRotateKeyboardHandler2;delete this.$MapboxGLNoPitchOrRotateKeyboardHandler3;};var k=function l(){this.$MapboxGLNoPitchOrRotateKeyboardHandler4=function(m){if(m.altKey||m.ctrlKey||m.metaKey)return;var n=0,o=0,p=0;switch(m.keyCode){case 61:case 107:case 171:case 187:n=1;break;case 189:case 109:case 173:n=-1;break;case 37:m.preventDefault();o=-1;break;case 39:m.preventDefault();o=1;break;case 38:m.preventDefault();p=-1;break;case 40:p=1;m.preventDefault();break;}var q=this.$MapboxGLNoPitchOrRotateKeyboardHandler1,r=q.getZoom(),s={duration:300,delayEndEvents:500,easing:i,zoom:n?Math.round(r)+n*(m.shiftKey?2:1):r,offset:[-o*h,-p*h],center:q.getCenter()};q.easeTo(s,{originalEvent:m});}.bind(this);};f.exports=j;}),null);
__d('MapboxGLMap.react',['invariant','mapboxgl','MapboxGLNoPitchOrRotateKeyboardHandler','React','ReactDOM','immutable','shallowEqual','forEachDifference'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes,l=[0,0],m={minZoom:0,maxZoom:12,trackResize:true,attributionControl:false};i=babelHelpers.inherits(n,c('React').Component);j=i&&i.prototype;function n(){var p,q;for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=j.constructor).call.apply(p,[this].concat(s)),o.call(this),q;}n.prototype.componentDidMount=function(){var p=babelHelpers['extends']({},m,this.props.options),q=new (c('mapboxgl').Map)(babelHelpers['extends']({container:c('ReactDOM').findDOMNode(this.$MapboxGLMap1),style:this.props.mapboxStyle,center:this.props.intialCenter||l,zoom:this.props.initialZoom||3,trackResize:true},p));q.on('load',this.$MapboxGLMap5);this.setState({map:q});};n.prototype.componentWillUnmount=function(){if(this.$MapboxGLMap4!=null){this.$MapboxGLMap4.destroy();this.$MapboxGLMap4=null;}if(this.state.map!=null)this.state.map.remove();this.$MapboxGLMap2=false;};n.prototype.componentWillReceiveProps=function(p){var q=this.state.map;if(!q||!this.$MapboxGLMap2)return;var r=this.props,s={};if(r.layers!==p.layers){r.layers.filter(function(x,y){return !p.layers.has(y);}).forEach(function(x,y){q.removeLayer(y);s[y]=false;});p.layers.filter(function(x,y){return !r.layers.has(y);}).forEach(function(x,y){q.addLayer(x);s[y]=true;});p.layers.filter(function(x,y){return (r.layers.has(y)&&x!==r.layers.get(y)&&x.filter!==r.layers.get(y).filter);}).forEach(function(x,y){return q.setFilter(y,x.filter);});p.layers.filter(function(x,y){return (r.layers.has(y)&&x!==r.layers.get(y)&&!c('shallowEqual')(x.layout,r.layers.get(y).layout));}).forEach(function(x,y){var z=babelHelpers['extends']({},r.layers.get(y).layout),aa=babelHelpers['extends']({},x.layout);c('forEachDifference')(z,aa,{onBoth:function ba(ca,da,ea){if(ca===da)return;q.setLayoutProperty(y,ea,da);s[y]=true;},onLeft:function ba(ca,da){q.setLayoutProperty(y,da,undefined);s[y]=true;},onRight:function ba(ca,da){q.setLayoutProperty(y,da,ca);s[y]=true;}});});p.layers.filter(function(x,y){return (r.layers.has(y)&&x!==r.layers.get(y)&&!c('shallowEqual')(x.paint,r.layers.get(y).paint));}).forEach(function(x,y){var z=babelHelpers['extends']({},r.layers.get(y).paint),aa=babelHelpers['extends']({},x.paint);c('forEachDifference')(z,aa,{onBoth:function ba(ca,da,ea){if(ca===da)return;q.setPaintProperty(y,ea,da);s[y]=true;},onLeft:function ba(ca,da){q.setPaintProperty(y,da,undefined);s[y]=true;},onRight:function ba(ca,da){q.setPaintProperty(y,da,ca);s[y]=true;}});});}var t={};if(r.sources!==p.sources){r.sources.filter(function(x,y){return !p.sources.has(y);}).forEach(function(x,y){q.removeSource(y);t[y]=false;});p.sources.filter(function(x,y){return (r.sources.has(y)&&x!==r.sources.get(y));}).forEach(function(x,y){if(x.type!=='geojson')return;var z=q.getSource(y);if(z!=null){z.setData(x.data);t[y]=true;}});p.sources.filter(function(x,y){return !r.sources.has(y);}).forEach(function(x,y){q.addSource(y,x);t[y]=true;});}var u=p.eventHandlers||c('immutable').Map(),v=r.eventHandlers||c('immutable').Map();if(u!==v){v.filter(function(x,y){return x!==u.get(y);}).forEach(function(x,y){var z=this.$MapboxGLMap3.get(y,x);q.off(y,z);}.bind(this));u.filter(function(x,y){return x!==v.get(y);}).forEach(function(x,y){var z=function aa(){for(var ba=arguments.length,ca=Array(ba),da=0;da<ba;da++)ca[da]=arguments[da];return x.apply(undefined,[q].concat(ca));};this.$MapboxGLMap3=this.$MapboxGLMap3.set(y,z);q.on(y,z);}.bind(this));}var w=Object.keys(s).length>0||Object.keys(t).length>0;if(w&&p.onSourceOrLayerUpdate!=null)p.onSourceOrLayerUpdate(q,{layers:s,sources:t});};n.prototype.shouldComponentUpdate=function(p,q){return (this.props.style!==p.style||this.props.className!==p.className||this.props.children!==p.children||this.state.map!==q.map||this.props.layers!==p.layers);};n.prototype.render=function(){return (c('React').createElement('div',{className:this.props.className,style:this.props.style,ref:this.$MapboxGLMap6},this.state.map&&this.props.children));};n.childContextTypes={map:k.object};var o=function p(){this.state={map:null};this.$MapboxGLMap2=false;this.$MapboxGLMap3=c('immutable').Map();this.getChildContext=function(){return {map:this.state.map};}.bind(this);this.$MapboxGLMap6=function(q){this.$MapboxGLMap1=q;}.bind(this);this.$MapboxGLMap5=function(){var q=this.state.map;q!=null||h(0);this.$MapboxGLMap2=true;this.props.sources.forEach(function(v,w){q.addSource(w,v);});this.props.layers.forEach(function(v){return q.addLayer(v);});var r=this.props,s=r.disablePitch,t=r.disableRotation;if(s===true||t===true){q.dragRotate.disable();q.touchZoomRotate.disableRotation();if(this.props.options&&this.props.options.keyboard!==false){q.keyboard.disable();this.$MapboxGLMap4=new (c('MapboxGLNoPitchOrRotateKeyboardHandler'))(q);this.$MapboxGLMap4.enable();}}var u=this.props.eventHandlers;if(u)u.forEach(function(v,w){var x=function y(){for(var z=arguments.length,aa=Array(z),ba=0;ba<z;ba++)aa[ba]=arguments[ba];return v.apply(undefined,[q].concat(aa));};this.$MapboxGLMap3=this.$MapboxGLMap3.set(w,x);q.on(w,x);if(w==='load')x();}.bind(this));}.bind(this);};f.exports=n;}),null);
__d('MapboxGLNavigationControl.react',['mapboxgl','React'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes,k={position:'top-left'},l={map:j.object};h=babelHelpers.inherits(m,c('React').Component);i=h&&h.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=i.constructor).call.apply(n,[this].concat(q)),this.$MapboxGLNavigationControl2=function(){this.context.map.addControl(this.$MapboxGLNavigationControl1,this.props.position);}.bind(this),o;}m.prototype.componentDidMount=function(){this.$MapboxGLNavigationControl1=new (c('mapboxgl').NavigationControl)();if(this.context.map.loaded()){this.$MapboxGLNavigationControl2();}else this.context.map.once('load',this.$MapboxGLNavigationControl2);};m.prototype.componentWillUnmount=function(){this.context.map.removeControl(this.$MapboxGLNavigationControl1);};m.prototype.render=function(){return null;};m.prototype.shouldComponentUpdate=function(){return false;};m.contextTypes=l;m.defaultProps=k;f.exports=m;}),null);
__d("turfInvariant",[],(function a(b,c,d,e,f,g){function h(l){if(Array.isArray(l)&&typeof l[0]==='number'&&typeof l[1]==='number'){return l;}else if(l)if(l.type==='Feature'&&l.geometry&&l.geometry.type==='Point'&&Array.isArray(l.geometry.coordinates)){return l.geometry.coordinates;}else if(l.type==='Point'&&Array.isArray(l.coordinates))return l.coordinates;throw new Error('A coordinate, feature, or point geometry is required');}function i(l,m,n){if(!m||!n)throw new Error('type and name required');if(!l||l.type!==m)throw new Error('Invalid input to '+n+': must be a '+m+', given '+l.type);}function j(l,m,n){if(!n)throw new Error('.featureOf() requires a name');if(!l||l.type!=='Feature'||!l.geometry)throw new Error('Invalid input to '+n+', Feature with geometry required');if(!l.geometry||l.geometry.type!==m)throw new Error('Invalid input to '+n+': must be a '+m+', given '+l.geometry.type);}function k(l,m,n){if(!n)throw new Error('.collectionOf() requires a name');if(!l||l.type!=='FeatureCollection')throw new Error('Invalid input to '+n+', FeatureCollection required');for(var o=0;o<l.features.length;o++){var p=l.features[o];if(!p||p.type!=='Feature'||!p.geometry)throw new Error('Invalid input to '+n+', Feature with geometry required');if(!p.geometry||p.geometry.type!==m)throw new Error('Invalid input to '+n+': must be a '+m+', given '+p.geometry.type);}}f.exports.geojsonType=i;f.exports.collectionOf=k;f.exports.featureOf=j;f.exports.getCoord=h;}),null);
__d("turfBearing",["turfInvariant"],(function a(b,c,d,e,f,g){var h=c('turfInvariant').getCoord;f.exports=function(i,j){var k=Math.PI/180,l=180/Math.PI,m=h(i),n=h(j),o=k*m[0],p=k*n[0],q=k*m[1],r=k*n[1],s=Math.sin(p-o)*Math.cos(r),t=Math.cos(q)*Math.sin(r)-Math.sin(q)*Math.cos(r)*Math.cos(p-o),u=l*Math.atan2(s,t);return u;};}),null);
__d("turfHelpers",[],(function a(b,c,d,e,f,g){function h(j,k){return {type:'Feature',properties:k||{},geometry:j};}f.exports.feature=h;f.exports.point=function(j,k){if(!Array.isArray(j))throw new Error('Coordinates must be an array');if(j.length<2)throw new Error('Coordinates must be at least 2 numbers long');return h({type:'Point',coordinates:j.slice()},k);};f.exports.polygon=function(j,k){if(!j)throw new Error('No coordinates passed');for(var l=0;l<j.length;l++){var m=j[l];if(m.length<4)throw new Error('Each LinearRing of a Polygon must have 4 or more Positions.');for(var n=0;n<m[m.length-1].length;n++)if(m[m.length-1][n]!==m[0][n])throw new Error('First and last Position are not equivalent.');}return h({type:'Polygon',coordinates:j},k);};f.exports.lineString=function(j,k){if(!j)throw new Error('No coordinates passed');return h({type:'LineString',coordinates:j},k);};f.exports.featureCollection=function(j){return {type:'FeatureCollection',features:j};};f.exports.multiLineString=function(j,k){if(!j)throw new Error('No coordinates passed');return h({type:'MultiLineString',coordinates:j},k);};f.exports.multiPoint=function(j,k){if(!j)throw new Error('No coordinates passed');return h({type:'MultiPoint',coordinates:j},k);};f.exports.multiPolygon=function(j,k){if(!j)throw new Error('No coordinates passed');return h({type:'MultiPolygon',coordinates:j},k);};f.exports.geometryCollection=function(j,k){return h({type:'GeometryCollection',geometries:j},k);};var i={miles:3960,nauticalmiles:3441.145,degrees:57.2957795,radians:1,inches:250905600,yards:6969600,meters:6373000,metres:6373000,kilometers:6373,kilometres:6373};f.exports.radiansToDistance=function(j,k){var l=i[k||'kilometers'];if(l===undefined)throw new Error('Invalid unit');return j*l;};f.exports.distanceToRadians=function(j,k){var l=i[k||'kilometers'];if(l===undefined)throw new Error('Invalid unit');return j/l;};f.exports.distanceToDegrees=function(j,k){var l=i[k||'kilometers'];if(l===undefined)throw new Error('Invalid unit');return (j/l)*57.2958;};}),null);
__d("turfDestination",["turfInvariant","turfHelpers"],(function a(b,c,d,e,f,g){var h=c('turfInvariant').getCoord,i=c('turfHelpers'),j=i.point,k=i.distanceToRadians;f.exports=function(l,m,n,o){var p=Math.PI/180,q=180/Math.PI,r=h(l),s=p*r[0],t=p*r[1],u=p*n,v=k(m,o),w=Math.asin(Math.sin(t)*Math.cos(v)+Math.cos(t)*Math.sin(v)*Math.cos(u)),x=s+Math.atan2(Math.sin(u)*Math.sin(v)*Math.cos(t),Math.cos(v)-Math.sin(t)*Math.sin(w));return j([q*x,q*w]);};}),null);
__d("turfDistance",["turfInvariant","turfHelpers"],(function a(b,c,d,e,f,g){var h=c('turfInvariant').getCoord,i=c('turfHelpers').radiansToDistance;f.exports=function(j,k,l){var m=Math.PI/180,n=h(j),o=h(k),p=m*(o[1]-n[1]),q=m*(o[0]-n[0]),r=m*n[1],s=m*o[1],t=Math.pow(Math.sin(p/2),2)+Math.pow(Math.sin(q/2),2)*Math.cos(r)*Math.cos(s);return i(2*Math.atan2(Math.sqrt(t),Math.sqrt(1-t)),l);};}),null);
__d("turfAlong",["turfDistance","turfHelpers","turfBearing","turfDestination"],(function a(b,c,d,e,f,g){var h=c('turfDistance'),i=c('turfHelpers').point,j=c('turfBearing'),k=c('turfDestination');f.exports=function(l,m,n){var o;if(l.type==='Feature'){o=l.geometry.coordinates;}else if(l.type==='LineString'){o=l.coordinates;}else throw new Error('input must be a LineString Feature or Geometry');var p=0;for(var q=0;q<o.length;q++)if(m>=p&&q===o.length-1){break;}else if(p>=m){var r=m-p;if(!r){return i(o[q]);}else{var s=j(o[q],o[q-1])-180,t=k(o[q],r,s,n);return t;}}else p+=h(o[q],o[q+1],n);return i(o[o.length-1]);};}),null);
__d("turfLineDistance",["turfDistance","turfHelpers"],(function a(b,c,d,e,f,g){var h=c('turfDistance'),i=c('turfHelpers').point;f.exports=function k(l,m){if(l.type==='FeatureCollection')return l.features.reduce(function(r,s){return r+k(s,m);},0);var n=l.type==='Feature'?l.geometry:l,o,p;if(n.type==='LineString'){return j(n.coordinates,m);}else if(n.type==='Polygon'||n.type==='MultiLineString'){o=0;for(p=0;p<n.coordinates.length;p++)o+=j(n.coordinates[p],m);return o;}else if(l.type==='MultiPolygon'){o=0;for(p=0;p<n.coordinates.length;p++)for(var q=0;q<n.coordinates[p].length;q++)o+=j(n.coordinates[p][q],m);return o;}else throw new Error('input must be a LineString, MultiLineString, '+'Polygon, or MultiPolygon Feature or Geometry (or a FeatureCollection '+'containing only those types)');};function j(k,l){var m=0,n=i(k[0]),o=i(k[0]),p;for(var q=1;q<k.length;q++){o.geometry.coordinates=k[q];m+=h(n,o,l);p=n;n=o;o=p;}return m;}}),null);
__d('LiveListViewActionTypes',['keyMirrorRecursive'],(function a(b,c,d,e,f,g){'use strict';var h=c('keyMirrorRecursive')({RECEIVE:{VIDEOS_FOR_CHANNEL:'',POLLER_FOR_CHANNEL:''}});f.exports=h;}),null);
__d('PublicLiveMapActionTypes',['keyMirrorRecursive'],(function a(b,c,d,e,f,g){'use strict';var h=c('keyMirrorRecursive')({APP:{RETURN:''},REQUEST:{FORCE_FETCHED_STREAMS:''},RECEIVE:{GEO_STREAMS_POLL_RESPONSE:'',FORCE_FETCHED_STREAMS:'',VIEW_STAGGERED_STREAMS:'',ALL_STREAMS:'',ACTIVE_STREAM:'',VIEWERS_FOR_STREAM:'',LIST_CHANNEL_VIDEOS:'',CHANNEL_VIDEOS:'',CHANNEL_ID:'',REPLACEMENT_SIDEBAR_VIDEO:'',DYNAMIC_CACHE_PERIODIC_RESET:'',SPECIAL_EVENT_VIDEOS:''},MARKER_STATUS_TYPES:{STREAMING:'',ENTERING:''},POLLER:{MAP:{INITIALIZE:'',PAUSE:'',RESUME:'',STOP:'',INITIALIZE_DYNAMIC:'',INITIALIZE_SPECIAL_EVENT:'',PAUSE_DYNAMIC:'',RESUME_DYNAMIC:'',STOP_DYNAMIC:'',PAUSE_SPECIAL_EVENT:'',RESUME_SPECIAL_EVENT:'',STOP_SPECIAL_EVENT:''}},INTERVAL:{TICK:''},SIDEBAR:{NOW_PLAYING_FROM_CHANNEL:'',SET_NOW_PLAYING:'',SET_ACTIVE_SIDEBAR_STREAM:'',SET_SIDEBAR_OFFSET:''},VIEW_MODE:{SET:''},MAP_VIEW:{CHANGE_ZOOM:'',CHANGE_VIEWPORT:'',WEBGL_CHANGE_VIEWPORT:'',SET_MAP:'',SET_WEB_GL_MAP:'',SET_STREAMS_IN_VIEW:''},CHANNEL_PLAYER:{OPEN:'',USING_TOOLTIP_VIDEO:''},VIDEO_PLAYER:{SET_MAP_TOOLTIP_PLAYER_CONTROLLER:'',SET_LIST_VIEW_TOOLTIP_PLAYER_CONTROLLER:'',SET_SIDEBAR_VIDEO_PLAYER_CONTROLLER:'',SET_SIDEBAR_TOOLTIP_VIDEO_PLAYER_CONTROLLER:'',SET_VOLUME:'',SET_TOOLTIP_TEST_GROUP:''},VIDEO:{BLACKLIST:''},DIALOG:{SHOW:'',HIDE:''}});f.exports=h;}),null);
__d('LiveMapViewField',['invariant'],(function a(b,c,d,e,f,g,h){var i=180,j=-180;function k(l){'use strict';l.x1>=-180||h(0);l.x2<=180||h(0);this.$LiveMapViewField1=l;}k.prototype.isMinLongitudeGreaterThanMax=function(){'use strict';return this.$LiveMapViewField1.x1>this.$LiveMapViewField1.x2;};k.prototype.getSearchBounds=function(){'use strict';return this.$LiveMapViewField1;};k.prototype.getLeftSplitFor360DegreeMap=function(){'use strict';if(this.$LiveMapViewField1.x1>i)throw new Error();var l={x1:this.$LiveMapViewField1.x1,x2:i,y1:this.$LiveMapViewField1.y1,y2:this.$LiveMapViewField1.y2};return new k(l);};k.prototype.getRightSplitFor360DegreeMap=function(){'use strict';if(this.$LiveMapViewField1.x2<j)throw new Error();var l={x1:j,x2:this.$LiveMapViewField1.x2,y1:this.$LiveMapViewField1.y1,y2:this.$LiveMapViewField1.y2};return new k(l);};k.prototype.getBottomLeftBox=function(){'use strict';var l=this.$LiveMapViewField1;return {x1:l.x1,x2:(l.x1+l.x2)/2,y1:l.y1,y2:(l.y1+l.y2)/2};};k.prototype.getBottomRightBox=function(){'use strict';var l=this.$LiveMapViewField1;return {x1:(l.x1+l.x2)/2,x2:l.x2,y1:l.y1,y2:(l.y1+l.y2)/2};};k.prototype.getTopRightBox=function(){'use strict';var l=this.$LiveMapViewField1;return {x1:(l.x1+l.x2)/2,x2:l.x2,y1:(l.y1+l.y2)/2,y2:l.y2};};k.prototype.getTopLeftBox=function(){'use strict';var l=this.$LiveMapViewField1;return {x1:l.x1,x2:(l.x1+l.x2)/2,y1:(l.y1+l.y2)/2,y2:l.y2};};k.prototype.getBottomLeftMidPoint=function(){'use strict';var l=this.$LiveMapViewField1,m=((l.x1+l.x2)/2+l.x1)/2,n=((l.y1+l.y2)/2+l.y1)/2,o=this.$LiveMapViewField2(m,4),p=this.$LiveMapViewField2(n,4);return {long:o,lat:p};};k.prototype.getBottomRightMidPoint=function(){'use strict';var l=this.$LiveMapViewField1,m=((l.x1+l.x2)/2+l.x2)/2,n=((l.y1+l.y2)/2+l.y1)/2,o=this.$LiveMapViewField2(m,4),p=this.$LiveMapViewField2(n,4);return {long:o,lat:p};};k.prototype.getTopRightMidPoint=function(){'use strict';var l=this.$LiveMapViewField1,m=((l.x1+l.x2)/2+l.x2)/2,n=((l.y1+l.y2)/2+l.y2)/2,o=this.$LiveMapViewField2(m,4),p=this.$LiveMapViewField2(n,4);return {long:o,lat:p};};k.prototype.getTopLeftMidPoint=function(){'use strict';var l=this.$LiveMapViewField1,m=((l.x1+l.x2)/2+l.x1)/2,n=((l.y1+l.y2)/2+l.y2)/2,o=this.$LiveMapViewField2(m,4),p=this.$LiveMapViewField2(n,4);return {long:o,lat:p};};k.prototype.$LiveMapViewField2=function(l,m){'use strict';if(m<=0)return l;var n=Math.floor(l*Math.pow(10,m))/Math.pow(10,m);return isNaN(n)?l:n;};f.exports=k;}),null);
__d('PublicLiveMapDispatcher',['ExplicitRegistrationReactDispatcher'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('ExplicitRegistrationReactDispatcher'));i=h&&h.prototype;function j(k){i.constructor.call(this,k);this.dispatch=this.dispatch.bind(this);}j.prototype.dispatch=function(k){i.dispatch.call(this,k);};f.exports=new j({strict:true});}),null);
__d("BucketQuadTree",[],(function a(b,c,d,e,f,g){var h=0,i=1,j=2,k=3,l=6,m=10,n=4;function o(p,q,r){"use strict";this.$BucketQuadTree3=p.x;this.$BucketQuadTree4=p.y;this.$BucketQuadTree5=p.width;this.$BucketQuadTree6=p.height;this.$BucketQuadTree1=[];this.$BucketQuadTree2=new Array(n);this.$BucketQuadTree8=q;this.$BucketQuadTree7=r?r:0;}o.prototype.addPoint=function(p){var q,r=this;"use strict";if(!this.isPointInTreeBounds(p))return;if(this.$BucketQuadTree8){var s=this.$BucketQuadTree8,t=false;for(var u=0;u<this.$BucketQuadTree1.length;u++){var v=this.$BucketQuadTree1[u];if(s(v.data,p.data)&&v.x===p.x&&v.y===p.y){t=true;break;}}if(t)return;}if(this.$BucketQuadTree9())(function(){r.$BucketQuadTree10();var x=r;r.$BucketQuadTree1.forEach(function(y){var z=x.$BucketQuadTree11(y);x.$BucketQuadTree2[z]&&x.$BucketQuadTree2[z].addPoint(y);});r.$BucketQuadTree12();})();if(!this.hasChildren()){this.$BucketQuadTree1.push(p);}else{var w=this.$BucketQuadTree11(p);this.$BucketQuadTree2[w]&&this.$BucketQuadTree2[w].addPoint(p);}};o.prototype.removePoint=function(p){"use strict";if(!this.hasChildren()){this.$BucketQuadTree13(p);}else{var q=this.$BucketQuadTree11(p);this.$BucketQuadTree2[q]&&this.$BucketQuadTree2[q].removePoint(p);}};o.prototype.$BucketQuadTree13=function(p){"use strict";for(var q=0;q<this.$BucketQuadTree1.length;q++)if(this.$BucketQuadTree1[q]===p){this.$BucketQuadTree1.splice(q,1);break;}};o.prototype.getDataInBounds=function(p){"use strict";var q=this.getLeafsInBounds([this],p),r=[];for(var s=0;s<q.length;s++){var t=q[s]&&q[s].$BucketQuadTree1;if(t)for(var u=0;u<t.length;u++)if(this.isPointInBounds(t[u],p))r.push(t[u].data);}return r;};o.prototype.getLeafsInBounds=function(p,q){"use strict";var r=[];for(var s=0;s<p.length;s++)if(p[s]&&!p[s].hasChildren()){if(this.isTreeInBounds(p[s],q))r.push(p[s]);}else{var t=p[s]&&p[s].getChildren();if(t)r=r.concat(this.getLeafsInBounds(t,q));}return r;};o.prototype.isTreeInBounds=function(p,q){"use strict";if(p.$BucketQuadTree3>q.x2||p.$BucketQuadTree3+p.$BucketQuadTree5<q.x1||p.$BucketQuadTree4>q.y2||p.$BucketQuadTree4+p.$BucketQuadTree6<q.y1)return false;return true;};o.prototype.isPointInBounds=function(p,q){"use strict";return (p.x>=q.x1&&p.y>=q.y1&&p.x<=q.x2&&p.y<=q.y2);};o.prototype.isPointInTreeBounds=function(p){"use strict";var q=this.$BucketQuadTree3+this.$BucketQuadTree5,r=this.$BucketQuadTree4+this.$BucketQuadTree6,s={x1:this.$BucketQuadTree3,y1:this.$BucketQuadTree4,x2:q,y2:r};return this.isPointInBounds(p,s);};o.prototype.isAnyDataInBounds=function(p){"use strict";return this.$BucketQuadTree14([this],p);};o.prototype.$BucketQuadTree14=function(p,q){"use strict";var r=false;for(var s=0;s<p.length;s++){var t=p[s];if(t&&!t.hasChildren()){if(this.isTreeInBounds(t,q)){var u=t.$BucketQuadTree1;if(u)for(var v=0;v<u.length;v++)if(this.isPointInBounds(u[v],q)){r=true;break;}}}else{var w=t&&t.getChildren();if(w)r=this.$BucketQuadTree14(w,q);}if(r)break;}return r;};o.prototype.getSize=function(){"use strict";return this.$BucketQuadTree1.length;};o.prototype.hasChildren=function(){"use strict";return !!this.$BucketQuadTree2[0];};o.prototype.getChildren=function(){"use strict";if(this.hasChildren()===true){return this.$BucketQuadTree2;}else return null;};o.prototype.empty=function(){"use strict";this.$BucketQuadTree15();};o.prototype.$BucketQuadTree11=function(p){"use strict";for(var q=0;q<n;q++)if(this.$BucketQuadTree2[q]&&this.$BucketQuadTree2[q].isPointInTreeBounds(p))return q;throw new Error("point at "+p.x+", "+p.y+" out of bounds");};o.prototype.$BucketQuadTree9=function(){"use strict";return (!this.hasChildren()&&this.$BucketQuadTree1.length>=l&&this.$BucketQuadTree7<m);};o.prototype.$BucketQuadTree10=function(){"use strict";var p=Math.round(this.$BucketQuadTree5/2),q=Math.round(this.$BucketQuadTree6/2),r=new o({x:this.$BucketQuadTree3+p,y:this.$BucketQuadTree4,width:p,height:q},this.$BucketQuadTree8,this.$BucketQuadTree7+1),s=new o({x:this.$BucketQuadTree3,y:this.$BucketQuadTree4,width:p,height:q},this.$BucketQuadTree8,this.$BucketQuadTree7+1),t=new o({x:this.$BucketQuadTree3,y:this.$BucketQuadTree4+q,width:p,height:q},this.$BucketQuadTree8,this.$BucketQuadTree7+1),u=new o({x:this.$BucketQuadTree3+p,y:this.$BucketQuadTree4+q,width:p,height:q},this.$BucketQuadTree8,this.$BucketQuadTree7+1);this.$BucketQuadTree2[h]=r;this.$BucketQuadTree2[i]=s;this.$BucketQuadTree2[j]=t;this.$BucketQuadTree2[k]=u;};o.prototype.$BucketQuadTree12=function(){"use strict";this.$BucketQuadTree1.length=0;};o.prototype.$BucketQuadTree15=function(){"use strict";for(var p=0;p<n;p++)this.$BucketQuadTree2[p]=null;};f.exports=o;}),null);
__d('SmallQueue',[],(function a(b,c,d,e,f,g){function h(){'use strict';this.$SmallQueue1=[];}h.prototype.enqueue=function(i){'use strict';this.$SmallQueue1.push(i);};h.prototype.enqueueList=function(i){'use strict';var j=this;i.forEach(function(k){j.enqueue(k);});};h.prototype.dequeue=function(){'use strict';if(this.isEmpty())return null;return this.$SmallQueue1.shift();};h.prototype.peek=function(){'use strict';if(this.isEmpty())return null;return this.$SmallQueue1[0];};h.prototype.getLength=function(){'use strict';return this.$SmallQueue1.length;};h.prototype.isEmpty=function(){'use strict';return (this.getLength()===0);};f.exports=h;}),null);
__d('LiveMapGeoCache',['BucketQuadTree','immutable','SmallQueue'],(function a(b,c,d,e,f,g){function h(i,j){'use strict';this.$LiveMapGeoCache1=j;this.$LiveMapGeoCache4={};this.$LiveMapGeoCache3=new (c('SmallQueue'))();this.$LiveMapGeoCache2=new (c('BucketQuadTree'))(i);}h.prototype.add=function(i){'use strict';if(this.$LiveMapGeoCache4[i.videoID]){this.$LiveMapGeoCache5(i);return;}if(this.$LiveMapGeoCache3.getLength()>=this.$LiveMapGeoCache1)this.$LiveMapGeoCache6();this.$LiveMapGeoCache7(i);};h.prototype.clear=function(){'use strict';this.$LiveMapGeoCache4={};this.$LiveMapGeoCache3=new (c('SmallQueue'))();this.$LiveMapGeoCache2.empty();};h.prototype.get=function(i){'use strict';var j=this.$LiveMapGeoCache4[i];if(j)return j.video;return null;};h.prototype.getDataInBounds=function(i){'use strict';var j={},k=this.$LiveMapGeoCache2.getDataInBounds(i),l=this;k.forEach(function(m){if(l.$LiveMapGeoCache4[m])j[m]=l.$LiveMapGeoCache4[m].video;});return c('immutable').Map(j);};h.prototype.isAnyDataInBounds=function(i){'use strict';return this.$LiveMapGeoCache2.isAnyDataInBounds(i);};h.prototype.remove=function(i){'use strict';var j=this.$LiveMapGeoCache4[i].pointRef;this.$LiveMapGeoCache2.removePoint(j);delete this.$LiveMapGeoCache4[i];};h.prototype.$LiveMapGeoCache7=function(i){'use strict';this.$LiveMapGeoCache3.enqueue(i.videoID);var j={x:i.long,y:i.lat,data:i.videoID};this.$LiveMapGeoCache2.addPoint(j);this.$LiveMapGeoCache4[i.videoID]={pointRef:j,video:i};};h.prototype.$LiveMapGeoCache6=function(){'use strict';var i=this.$LiveMapGeoCache3.dequeue();if(!this.$LiveMapGeoCache4[i])return;var j=this.$LiveMapGeoCache4[i].pointRef;this.$LiveMapGeoCache2.removePoint(j);delete this.$LiveMapGeoCache4[i];};h.prototype.$LiveMapGeoCache5=function(i){'use strict';this.$LiveMapGeoCache4[i.videoID].video.viewerCount=i.viewerCount;};f.exports=h;}),null);
__d('LiveMapVisitedLocationsGeoCache',['BucketQuadTree'],(function a(b,c,d,e,f,g){var h='marker';function i(j,k){'use strict';this.$LiveMapVisitedLocationsGeoCache3=0;this.$LiveMapVisitedLocationsGeoCache1=k;this.$LiveMapVisitedLocationsGeoCache2=new (c('BucketQuadTree'))(j);}i.prototype.add=function(j){'use strict';if(this.$LiveMapVisitedLocationsGeoCache3>=this.$LiveMapVisitedLocationsGeoCache1)this.clear();var k={x:j.long,y:j.lat,data:h};this.$LiveMapVisitedLocationsGeoCache2.addPoint(k);this.$LiveMapVisitedLocationsGeoCache3++;};i.prototype.clear=function(){'use strict';this.$LiveMapVisitedLocationsGeoCache2.empty();this.$LiveMapVisitedLocationsGeoCache3=0;};i.prototype.isAnyDataInBounds=function(j){'use strict';return this.$LiveMapVisitedLocationsGeoCache2.isAnyDataInBounds(j);};i.prototype.getDataInBounds=function(j){'use strict';return this.$LiveMapVisitedLocationsGeoCache2.getDataInBounds(j);};f.exports=i;}),null);
__d('LiveMapGeoCacheUtils',['LiveMapVisitedLocationsGeoCache','LiveMapViewField'],(function a(b,c,d,e,f,g){var h={markAreaAsVisited:function i(j,k){k.add(j.getTopLeftMidPoint());k.add(j.getTopRightMidPoint());k.add(j.getBottomLeftMidPoint());k.add(j.getBottomRightMidPoint());},isSufficientDataInView:function i(j,k){var l=j.getTopLeftBox(),m=j.getTopRightBox(),n=j.getBottomLeftBox(),o=j.getBottomRightBox(),p=k.getDataInBounds(l).length>0,q=k.getDataInBounds(m).length>0,r=k.getDataInBounds(n).length>0,s=k.getDataInBounds(o).length>0,t=p&&q&&r&&s;return t;}};f.exports=h;}),null);
__d('PublicLiveMapCacheConstants',[],(function a(b,c,d,e,f,g){'use strict';var h={LEVEL_0_CACHE:'level_0_cache',LEVEL_1_CACHE:'level_1_cache',LEVEL_2_CACHE:'level_2_cache',LEVEL_0_GEO_CACHE:'level_0_geo_cache',getCacheNameByLevel:function i(j){switch(j){case 0:return h.LEVEL_0_CACHE;case 1:return h.LEVEL_1_CACHE;case 2:return h.LEVEL_2_CACHE;case 3:return h.LEVEL_0_GEO_CACHE;default:throw new Error();}},isGeoCache:function i(j){if(j==='level_0_geo_cache')return true;return false;}};f.exports=h;}),null);
__d('PublicLiveMapStoreRecord',['invariant','immutable','PublicLiveMapCacheConstants','PublicLiveMapConstants','LiveMapGeoCache','LiveMapVisitedLocationsGeoCache'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('immutable').Map(),l=c('immutable').List(),m=new (c('LiveMapGeoCache'))(c('PublicLiveMapConstants').STANDARD_MAP_BOUNDS,1),n=200,o=new (c('LiveMapGeoCache'))(c('PublicLiveMapConstants').STANDARD_MAP_BOUNDS,n),p=100,q=new (c('LiveMapVisitedLocationsGeoCache'))(c('PublicLiveMapConstants').STANDARD_MAP_BOUNDS,p),r={blacklist:k,dynamicGeoCache:o,visitedLocationsGeoCache:q,level0Cache:k,level1Cache:k,level2Cache:k,specialEventForMapCache:k,level0GeoCache:m,streamsToRender:k,mapZoomLevel:c('PublicLiveMapConstants').DEFAULT_MAP_ZOOM+1,mapLatLngBounds:null,channelPlayerOpenVideoID:null,channelPlayerUsingTooltipVideo:false,topDisplayedVideos:l,activeStream:null,activeStreamPixelLocation:null,activeSidebarStream:null,activeSidebarStreamPixelLocation:null,sidebarNowPlaying:null,playerVolume:0,nowPlayingInline:null,listViewTooltipVideoPlayerController:null,mapTooltipVideoPlayerController:null,sidebarOffset:{x:0,y:0},sidebarTooltipVideoPlayerController:null,sidebarVideoPlayerController:null,currentViewMode:c('PublicLiveMapConstants').VIEW_MODE.MAP_VIEW,channelID:null,leafletMap:null,channelVideos:k,currentViewers:l,webGLMap:null,showLoadingDialog:false};i=babelHelpers.inherits(s,c('immutable').Record(r));j=i&&i.prototype;function s(t){j.constructor.call(this,t);}s.prototype.setBlacklist=function(t){return this.set('blacklist',t);};s.prototype.setDynamicGeoCache=function(t){return this.set('dynamicGeoCache',t);};s.prototype.setVisitedLocationsGeoCache=function(t){return this.set('visitedLocationsGeoCache',t);};s.prototype.setLevel0Cache=function(t){return this.set('level0Cache',t);};s.prototype.setLevel1Cache=function(t){return this.set('level1Cache',t);};s.prototype.setLevel2Cache=function(t){return this.set('level2Cache',t);};s.prototype.setSpecialEventForMapCache=function(t){return this.set('specialEventForMapCache',t);};s.prototype.setLevel0GeoCache=function(t){return this.set('level0GeoCache',t);};s.prototype.setStreamsToRender=function(t){return this.set('streamsToRender',t);};s.prototype.setMapZoomLevel=function(t){return this.set('mapZoomLevel',t);};s.prototype.setMapLatLngBounds=function(t){return this.set('mapLatLngBounds',t);};s.prototype.setChannelPlayerOpenVideoID=function(t){return this.set('channelPlayerOpenVideoID',t);};s.prototype.setChannelPlayerUsingTooltipVideo=function(t){return this.set('channelPlayerUsingTooltipVideo',t);};s.prototype.setTopDisplayedVideos=function(t){return this.set('topDisplayedVideos',t);};s.prototype.setActiveStream=function(t){return this.set('activeStream',t);};s.prototype.setActiveStreamPixelLocation=function(t){return this.set('activeStreamPixelLocation',t);};s.prototype.setSidebarNowPlaying=function(t){return this.set('sidebarNowPlaying',t);};s.prototype.setPlayerVolume=function(t){return this.set('playerVolume',t);};s.prototype.setNowPlayingInline=function(t){return this.set('nowPlayingInline',t);};s.prototype.setListViewTooltipVideoPlayerController=function(t){return this.set('listViewTooltipVideoPlayerController',t);};s.prototype.setMapTooltipVideoPlayerController=function(t){return this.set('mapTooltipVideoPlayerController',t);};s.prototype.setSidebarTooltipVideoPlayerController=function(t){return this.set('sidebarTooltipVideoPlayerController',t);};s.prototype.setSidebarVideoPlayerController=function(t){return this.set('sidebarVideoPlayerController',t);};s.prototype.setCurrentViewMode=function(t){return this.set('currentViewMode',t);};s.prototype.setChannelID=function(t){return this.set('channelID',t);};s.prototype.setLeafletMap=function(t){return this.set('leafletMap',t);};s.prototype.setChannelVideos=function(t){return this.set('channelVideos',t);};s.prototype.setCurrentViewers=function(t){return this.set('currentViewers',t);};s.prototype.setActiveSidebarStream=function(t){return this.set('activeSidebarStream',t);};s.prototype.setActiveSidebarStreamPixelLocation=function(t){return this.set('activeSidebarStreamPixelLocation',t);};s.prototype.setSidebarOffset=function(t){return this.set('sidebarOffset',t);};s.prototype.setWebGLMap=function(t){return this.set('webGLMap',t);};s.prototype.getSpecialEventForMapCache=function(){return this.specialEventForMapCache;};s.prototype.getLevelNCache=function(t){switch(t){case c('PublicLiveMapCacheConstants').LEVEL_0_CACHE:return this.level0Cache;case c('PublicLiveMapCacheConstants').LEVEL_1_CACHE:return this.level1Cache;case c('PublicLiveMapCacheConstants').LEVEL_2_CACHE:return this.level2Cache;default:return k;}};s.prototype.setLevelNCache=function(t,u){switch(t){case c('PublicLiveMapCacheConstants').LEVEL_0_CACHE:return this.setLevel0Cache(u);case c('PublicLiveMapCacheConstants').LEVEL_1_CACHE:return this.setLevel1Cache(u);case c('PublicLiveMapCacheConstants').LEVEL_2_CACHE:return this.setLevel2Cache(u);default:return this;}};s.prototype.getLevelNGeoCache=function(t){switch(t){case c('PublicLiveMapCacheConstants').LEVEL_0_GEO_CACHE:return this.level0GeoCache;default:return m;}};s.prototype.setLevelNGeoCache=function(t,u){switch(t){case c('PublicLiveMapCacheConstants').LEVEL_0_GEO_CACHE:return this.setLevel0GeoCache(u);default:return this;}};s.prototype.setShowLoadingDialog=function(t){return this.set('showLoadingDialog',t);};f.exports=s;}),null);
__d('PublicLiveMapStore',['FluxReduceStore','Heap','immutable','LeafletUtils','LiveMapGeoCache','LiveMapVisitedLocationsGeoCache','PublicLiveMapActionTypes','PublicLiveMapCacheConstants','PublicLiveMapConstants','PublicLiveMapDispatcher','PublicLiveMapStoreRecord','PublicLiveMapVideosCacheResponseHandler','VideoPlayerStates','LiveMapViewField','LiveMapGeoCacheUtils'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('immutable').Map(),k=c('immutable').List();h=babelHelpers.inherits(l,c('FluxReduceStore'));i=h&&h.prototype;l.prototype.getInitialState=function(){return new (c('PublicLiveMapStoreRecord'))();};l.prototype.reduce=function(m,n){switch(n.type){case c('PublicLiveMapActionTypes').REQUEST.FORCE_FETCHED_STREAMS:m=this.$PublicLiveMapStore1(n.data,m);return m;case c('PublicLiveMapActionTypes').RECEIVE.FORCE_FETCHED_STREAMS:m=this.$PublicLiveMapStore2(n.data,m);m=this.$PublicLiveMapStore3(m);return m;case c('PublicLiveMapActionTypes').RECEIVE.DYNAMIC_CACHE_PERIODIC_RESET:m=this.$PublicLiveMapStore4(n.data,m);m=this.$PublicLiveMapStore3(m);return m;case c('PublicLiveMapActionTypes').MAP_VIEW.SET_WEB_GL_MAP:m=m.setWebGLMap(n.data);return m;case c('PublicLiveMapActionTypes').SIDEBAR.SET_SIDEBAR_OFFSET:m=m.setSidebarOffset(n.data);return m;case c('PublicLiveMapActionTypes').MAP_VIEW.SET_STREAMS_IN_VIEW:m=this.$PublicLiveMapStore5(m,n.data);return m;case c('PublicLiveMapActionTypes').RECEIVE.GEO_STREAMS_POLL_RESPONSE:m=this.$PublicLiveMapStore6(n.data,m);return m;case c('PublicLiveMapActionTypes').RECEIVE.VIEW_STAGGERED_STREAMS:m=c('PublicLiveMapVideosCacheResponseHandler').upsertResponseStreamsIntoCache(n.data,m);m=this.$PublicLiveMapStore3(m);return m;case c('PublicLiveMapActionTypes').RECEIVE.SPECIAL_EVENT_VIDEOS:m=this.$PublicLiveMapStore7(n.data,m);return m;case c('PublicLiveMapActionTypes').RECEIVE.ACTIVE_STREAM:if(m.channelPlayerUsingTooltipVideo)return m;var o=n.data;m=m.setActiveStream(o);m=this.$PublicLiveMapStore8(m);return m;case c('PublicLiveMapActionTypes').RECEIVE.VIEWERS_FOR_STREAM:var p=this.$PublicLiveMapStore9(n.data);m=m.setCurrentViewers(p);return m;case c('PublicLiveMapActionTypes').RECEIVE.LIST_CHANNEL_VIDEOS:m=this.$PublicLiveMapStore10(n.data,m);return m;case c('PublicLiveMapActionTypes').RECEIVE.REPLACEMENT_SIDEBAR_VIDEO:m=this.$PublicLiveMapStore11(n.data,m);return m;case c('PublicLiveMapActionTypes').RECEIVE.CHANNEL_VIDEOS:m=this.$PublicLiveMapStore12(n.data,m);return m;case c('PublicLiveMapActionTypes').SIDEBAR.NOW_PLAYING_FROM_CHANNEL:m=this.$PublicLiveMapStore13(n.data,m);return m;case c('PublicLiveMapActionTypes').VIEW_MODE.SET:var q=this.getState().currentViewMode;if(q===n.data)return m;m=m.setCurrentViewMode(n.data).setActiveStream(null).setActiveStreamPixelLocation(null).setActiveSidebarStream(null).setActiveSidebarStreamPixelLocation(null).setLeafletMap(null).setCurrentViewers(k).setMapLatLngBounds(null).setStreamsToRender(j).setNowPlayingInline(null).setSidebarNowPlaying(null).setTopDisplayedVideos(k).setSidebarVideoPlayerController(null).setMapTooltipVideoPlayerController(null).setSidebarTooltipVideoPlayerController(null).setListViewTooltipVideoPlayerController(null);return m;case c('PublicLiveMapActionTypes').RECEIVE.CHANNEL_ID:m=m.setChannelID(n.data);return m;case c('PublicLiveMapActionTypes').CHANNEL_PLAYER.USING_TOOLTIP_VIDEO:m=m.setChannelPlayerUsingTooltipVideo(n.data);return m;case c('PublicLiveMapActionTypes').MAP_VIEW.CHANGE_VIEWPORT:m=this.$PublicLiveMapStore14(n.data.mapType,n.data.zoomLevel,n.data.bounds,m);return m;case c('PublicLiveMapActionTypes').MAP_VIEW.SET_MAP:m=m.setLeafletMap(n.data);return m;case c('PublicLiveMapActionTypes').VIDEO_PLAYER.SET_MAP_TOOLTIP_PLAYER_CONTROLLER:m=m.setMapTooltipVideoPlayerController(n.data);return m;case c('PublicLiveMapActionTypes').VIDEO_PLAYER.SET_LIST_VIEW_TOOLTIP_PLAYER_CONTROLLER:m=m.setListViewTooltipVideoPlayerController(n.data);return m;case c('PublicLiveMapActionTypes').VIDEO_PLAYER.SET_SIDEBAR_VIDEO_PLAYER_CONTROLLER:m=m.setSidebarVideoPlayerController(n.data);return m;case c('PublicLiveMapActionTypes').VIDEO_PLAYER.SET_SIDEBAR_TOOLTIP_VIDEO_PLAYER_CONTROLLER:m=m.setSidebarTooltipVideoPlayerController(n.data);return m;case c('PublicLiveMapActionTypes').SIDEBAR.SET_NOW_PLAYING:m=m.setSidebarNowPlaying(n.data);return m;case c('PublicLiveMapActionTypes').VIDEO_PLAYER.SET_VOLUME:m=m.setPlayerVolume(n.data.level);return m;case c('PublicLiveMapActionTypes').CHANNEL_PLAYER.OPEN:m=m.setChannelPlayerOpenVideoID(n.data);return m;case c('PublicLiveMapActionTypes').SIDEBAR.SET_ACTIVE_SIDEBAR_STREAM:m=m.setActiveSidebarStream(n.data.stream);m=m.setActiveSidebarStreamPixelLocation(n.data.position);return m;case c('PublicLiveMapActionTypes').VIDEO.BLACKLIST:m=this.$PublicLiveMapStore15(n.data.videoID,m);m=this.$PublicLiveMapStore3(m);return m;case c('PublicLiveMapActionTypes').DIALOG.SHOW:m=m.setShowLoadingDialog(true);return m;case c('PublicLiveMapActionTypes').DIALOG.HIDE:m=m.setShowLoadingDialog(false);return m;default:return m;}};l.prototype.$PublicLiveMapStore15=function(m,n){var o=n.blacklist,p=o.set(m,true);n=n.setBlacklist(p);return n;};l.prototype.$PublicLiveMapStore11=function(m,n){var o=this.getSidebarVideoPlayerController();if(o){var p=o.getState();if(p===c('VideoPlayerStates').FINISHED)if(m.videos[0]&&m.videos[0].isLive){n=n.setSidebarNowPlaying(m.videos[0]);}else if(m.videos[1]&&m.videos[1].isLive)n=n.setSidebarNowPlaying(m.videos[1]);}return n;};l.prototype.$PublicLiveMapStore10=function(m,n){if(n.sidebarNowPlaying===null&&m.videos[0])n=n.setSidebarNowPlaying(m.videos[0]);return this.$PublicLiveMapStore12(m,n);};l.prototype.$PublicLiveMapStore12=function(m,n){var o=n.nowPlayingInline;if(m.videos){var p=m.videos.reduce(function(s,t){s[t.videoID]=t;return s;},{}),q=c('immutable').Map(p).sort(function(s,t){return t.viewerCount-s.viewerCount;});n=n.setChannelVideos(q);}else n=n.setChannelVideos(j);var r=n.channelVideos;if(!o||!r.has(o.videoID))o=r.first();n=n.setChannelID(m.channelID);n=n.setNowPlayingInline(o);return n;};l.prototype.$PublicLiveMapStore5=function(m,n){var o=[],p=m.level0Cache,q=m.level1Cache,r=m.level2Cache,s=m.dynamicGeoCache;for(var t in n){if(!n.hasOwnProperty(t))continue;var u=p.get(t)||q.get(t)||r.get(t)||s.get(t);if(u!=null)o.push(u);}var v=new (c('Heap'))(o,function(y,z){return z.viewerCount<y.viewerCount;}),w=[];for(var x=0;x<c('PublicLiveMapConstants').TOP_N_TO_SHOW_IN_SIDEBAR;x++){if(v.empty())break;w.push(v.pop());}m=m.setTopDisplayedVideos(c('immutable').List(w));return m;};l.prototype.$PublicLiveMapStore13=function(m,n){if(!m.video||!m.video.videoID)return n;var o=n.channelVideos,p=o.keySeq().toArray(),q=p.length,r=p.indexOf(m.video.videoID),s=r+1,t=r-1,u=s,v=null;if(s>q)s=0;if(t<0)t=q-1;if(m.previous)u=t;v=o.get(p[u]);if(!v)v=o.first();n=n.setNowPlayingInline(v);return n;};l.prototype.$PublicLiveMapStore1=function(m,n){var o=n.visitedLocationsGeoCache,p=new (c('LiveMapViewField'))(m),q=c('LiveMapGeoCacheUtils').isSufficientDataInView(p,o);if(q)return n;c('LiveMapGeoCacheUtils').markAreaAsVisited(p,o);n=n.setVisitedLocationsGeoCache(o);return n;};l.prototype.$PublicLiveMapStore2=function(m,n){if(!m.streams)return n;var o=n.dynamicGeoCache;for(var p=0;p<m.streams.length;p++){var q=m.streams[p],r=o.get(q.videoID);if(r){r.viewerCount=q.viewerCount;r.formattedCount=q.formattedCount;}if(!this.getLiveStreamByID(q.videoID))o.add(m.streams[p]);}n=n.setDynamicGeoCache(o);return n;};l.prototype.$PublicLiveMapStore4=function(m,n){var o=n.dynamicGeoCache,p=new (c('LiveMapGeoCache'))(c('PublicLiveMapConstants').STANDARD_MAP_BOUNDS,200),q=new (c('LiveMapVisitedLocationsGeoCache'))(c('PublicLiveMapConstants').STANDARD_MAP_BOUNDS,100);if(m.streams)for(var r=0;r<m.streams.length;r++){var s=m.streams[r],t=o.get(s.videoID);if(t){p.add(t);}else p.add(s);}if(!m.streams||m.streams.length===0&&m.west&&m.east&&m.south&&m.north){var u=new (c('LiveMapViewField'))({x1:m.west,x2:m.east,y1:m.south,y2:m.north});c('LiveMapGeoCacheUtils').markAreaAsVisited(u,q);}n=n.setDynamicGeoCache(p);n=n.setVisitedLocationsGeoCache(q);return n;};l.prototype.$PublicLiveMapStore6=function(m,n){if(m.streams){var o=c('PublicLiveMapConstants').STANDARD_MAP_BOUNDS,p=new (c('LiveMapGeoCache'))(o,1000);for(var q=0;q<m.streams.length;q++)p.add(m.streams[q]);n=n.setLevelNGeoCache(c('PublicLiveMapCacheConstants').LEVEL_0_GEO_CACHE,p);}n=this.$PublicLiveMapStore3(n);return n;};l.prototype.$PublicLiveMapStore7=function(m,n){if(m.streams){var o='special_event',p=n.getSpecialEventForMapCache(o),q={};for(var r=0;r<m.streams.length;r++){var s=m.streams[r],t=s.videoID,u=p.get(t);if(!u){s.markerStatus=c('PublicLiveMapConstants').MARKER_STATUS.SPECIAL_EVENT;q[s.videoID]=s;}else{u.markerStatus=c('PublicLiveMapConstants').MARKER_STATUS.SPECIAL_EVENT;u.viewerCount=s.viewerCount;u.formattedCount=s.formattedCount;q[u.videoID]=u;}}n=n.setSpecialEventForMapCache(c('immutable').Map(q));}n=this.$PublicLiveMapStore3(n);return n;};l.prototype.$PublicLiveMapStore9=function(m){if(!m||!m.lat_longs)return k;return c('immutable').List(m.lat_longs);};l.prototype.$PublicLiveMapStore16=function(m){var n=new (c('Heap'))(m.streamsToRender.toArray(),function(q,r){return r.viewerCount<q.viewerCount;}),o=[];for(var p=0;p<c('PublicLiveMapConstants').TOP_N_TO_SHOW_IN_SIDEBAR;p++){if(n.empty())break;o.push(n.pop());}m=m.setTopDisplayedVideos(c('immutable').List(o));return m;};l.prototype.$PublicLiveMapStore14=function(m,n,o,p){if(m===c('PublicLiveMapConstants').MAP_TYPE.LEAFLET)p=this.$PublicLiveMapStore17(n,o,p);if(m===c('PublicLiveMapConstants').MAP_TYPE.WEBGL)p=this.$PublicLiveMapStore18(n,o,p);return p;};l.prototype.$PublicLiveMapStore17=function(m,n,o){o=o.setMapZoomLevel(m);o=o.setMapLatLngBounds(n);o=this.$PublicLiveMapStore8(o);o=this.$PublicLiveMapStore3(o);return o;};l.prototype.$PublicLiveMapStore18=function(m,n,o){o=o.setMapZoomLevel(m);o=o.setMapLatLngBounds(n);return o;};l.prototype.$PublicLiveMapStore3=function(m){var n,o=this;if(m.webGLMap!=null)return m;var p=m.mapLatLngBounds;if(p==null){m=m.setStreamsToRender(j);m=m.setActiveStream(null);m=m.setActiveStreamPixelLocation(null);m=m.setCurrentViewers(k);}else (function(){var q=m.mapZoomLevel,r=o.getLevelNCacheData(c('PublicLiveMapCacheConstants').LEVEL_0_CACHE);if(q>=4)r=r.concat(o.getLevelNCacheData(c('PublicLiveMapCacheConstants').LEVEL_1_CACHE));if(q>=5)r=r.concat(o.getLevelNCacheData(c('PublicLiveMapCacheConstants').LEVEL_2_CACHE));if(q>=6)r=r.concat(o.getLevelNCacheData(c('PublicLiveMapCacheConstants').LEVEL_0_GEO_CACHE));if(q>=c('PublicLiveMapConstants').ZOOM_CUTOFF_FOR_CACHE.DYNAMIC){var s=o.getAllDynamicGeoCacheData();r=r.concat(s);}var t=m.getSpecialEventForMapCache();r=r.concat(t);var u=m.blacklist;r=r.filter(function(y){if(u.get(y.videoID))return false;return true;});var v=m.activeStream,w=false,x=r.filter(function(y){if(v===y)w=true;var z=y.lat,aa=y.long,ba=aa<0?aa+360:aa-360,ca=[z,aa],da=[z,ba];return (p.contains(ca)||p.contains(da));});if(!w){m=m.setActiveStream(null);m=m.setActiveStreamPixelLocation(null);m=m.setCurrentViewers(k);}m=m.setStreamsToRender(x);})();m=this.$PublicLiveMapStore16(m);return m;};l.prototype.$PublicLiveMapStore8=function(m){var n=m.activeStream;if(n==null)return m.setActiveStreamPixelLocation(null);var o=m.leafletMap;if(o==null){var p=m.webGLMap;if(p==null)return m.setActiveStreamPixelLocation(null);var q=p.getBounds(),r=void 0;if(n.long>=q.getWest()&&n.long<=q.getEast()){r=p.project([n.long,n.lat]);}else if(n.long>q.getEast()){var s=n.long;s+=Math.floor((q.getWest()+180)/360)*360;if(s<q.getWest())s+=360;r=p.project([s,n.lat]);}else if(n.long<q.getWest()){var t=n.long;t+=Math.floor((q.getEast()+180)/360)*360;if(t>q.getEast())t-=360;r=p.project([t,n.lat]);}m=m.setActiveStreamPixelLocation(r);return m;}var u=m.mapLatLngBounds;if(u==null)return m.setActiveStreamPixelLocation(null);var v=n.lat,w=n.long,x=w<0?w+360:w-360,y=void 0,z=[v,w],aa=[v,x];if(u.contains(z)){y=o.latLngToContainerPoint(z);}else if(u.contains(aa)){y=o.latLngToContainerPoint(aa);}else y=o.latLngToContainerPoint(z);m=m.setActiveStreamPixelLocation(y);return m;};l.prototype.getLiveStreamByID=function(m){var n=null;for(var o=0;o<this.getNumberOfCacheLevels();o++){var p=c('PublicLiveMapCacheConstants').getCacheNameByLevel(o),q=this.getLevelNCacheData(p);n=q.get(m);if(n)return n;}var r=this.getAllDynamicGeoCacheData();n=r.get(m);if(n)return n;var s=this.getSpecialEventForMapCache();n=s.get(m);return n;};l.prototype.getActiveStream=function(){return this.getState().activeStream;};l.prototype.isStreamActive=function(m){var n=this.getActiveStream();return n!=null&&n.videoID===m;};l.prototype.getCurrentViewers=function(){return this.getState().currentViewers;};l.prototype.getChannelID=function(){return this.getState().channelID;};l.prototype.getCurrentChannelVideos=function(){return this.getState().channelVideos;};l.prototype.getNowPlayingVideo=function(){return this.getState().nowPlayingInline;};l.prototype.getDynamicGeoCache=function(){return this.getState().dynamicGeoCache;};l.prototype.getVisitedLocationsGeoCache=function(){return this.getState().visitedLocationsGeoCache;};l.prototype.getAllDynamicGeoCacheData=function(){var m=this.getState().dynamicGeoCache,n=m.getDataInBounds({x1:-180,y1:-90,x2:180,y2:90});return n;};l.prototype.getDynamicGeoCacheDataInCurrentBounds=function(){var m=this.getState().dynamicGeoCache,n=this.getLatLngBounds();if(!n)return j;var o=c('LeafletUtils').wrapLongitude(n.getEast()),p=c('LeafletUtils').wrapLongitude(n.getWest()),q=n.getSouth(),r=n.getNorth(),s=m.getDataInBounds({x1:p,y1:q,x2:o,y2:r});return s;};l.prototype.getLevelNCacheData=function(m){if(!c('PublicLiveMapCacheConstants').isGeoCache(m)){return this.getState().getLevelNCache(m);}else{var n=this.getState().getLevelNGeoCache(m),o=this.getLatLngBounds();if(!o)return j;var p=c('LeafletUtils').wrapLongitude(o.getEast()),q=c('LeafletUtils').wrapLongitude(o.getWest()),r=o.getSouth(),s=o.getNorth(),t=n.getDataInBounds({x1:q,y1:r,x2:p,y2:s});return t;}};l.prototype.getCurrentViewMode=function(){return this.getState().currentViewMode;};l.prototype.getNumberOfCacheLevels=function(){return c('PublicLiveMapConstants').NUMBER_OF_CACHE_LEVELS;};l.prototype.getTopDisplayedMapVideos=function(){var m=this.getState().topDisplayedVideos.toArray(),n=this.getState().blacklist,o=m.filter(function(p){if(n.get(p.videoID))return false;return true;});return c('immutable').List(o);};l.prototype.getActiveStreamPixelLocation=function(){return this.getState().activeStreamPixelLocation;};l.prototype.getStreamsToRender=function(){return this.getState().streamsToRender;};l.prototype.getMapViewTooltipVideoPlayerController=function(){return this.getState().mapTooltipVideoPlayerController;};l.prototype.getListViewTooltipVideoPlayerController=function(){return this.getState().listViewTooltipVideoPlayerController;};l.prototype.getSidebarTooltipVideoPlayerController=function(){return this.getState().sidebarTooltipVideoPlayerController;};l.prototype.getSidebarOffset=function(){var m=this.getState().sidebarOffset;return m;};l.prototype.getMapPixelSize=function(){var m=this.getState().leafletMap;if(m==null){var n=this.getState().webGLMap;if(n==null)return null;var o=n.getContainer();return {x:o.offsetWidth,y:o.offsetHeight};}return m.getSize();};l.prototype.getSidebarNowPlaying=function(){return this.getState().sidebarNowPlaying;};l.prototype.getForceSidebarMute=function(){return this.getState().forceSidebarMute;};l.prototype.getSidebarVideoPlayerController=function(){return this.getState().sidebarVideoPlayerController;};l.prototype.getIsChannelPlayerOpen=function(){return this.getState().channelPlayerOpenVideoID!=null;};l.prototype.getChannelPlayerOpenVideoID=function(){return this.getState().channelPlayerOpenVideoID;};l.prototype.getActiveSidebarStream=function(){return this.getState().activeSidebarStream;};l.prototype.getActiveSidebarStreamPixelLocation=function(){return this.getState().activeSidebarStreamPixelLocation;};l.prototype.getLatLngBounds=function(){return this.getState().mapLatLngBounds;};l.prototype.getPlayerVolume=function(){return this.getState().playerVolume;};l.prototype.getBlacklist=function(){var m=this.getState().blacklist;return m;};l.prototype.getShouldShowLoadingDialog=function(){return this.getState().showLoadingDialog;};l.prototype.getSpecialEventForMapCache=function(){return this.getState().specialEventForMapCache;};function l(){h.apply(this,arguments);}f.exports=new l(c('PublicLiveMapDispatcher'));}),null);
__d('PublicLiveMapVideosCacheResponseHandler',['PublicLiveMapCacheConstants','PublicLiveMapConstants','PublicLiveMapStoreRecord','PublicLiveMapStore','immutable'],(function a(b,c,d,e,f,g){var h=c('immutable').Map(),i={upsertResponseStreamsIntoCache:function j(k,l){var m=k.level,n=c('PublicLiveMapCacheConstants').getCacheNameByLevel(m),o=l.getLevelNCache(n);if(k.streams){var p={};for(var q=0;q<k.streams.length;q++){var r=k.streams[q],s=r.videoID;l=this._removeVideoFromAllCachesExceptThisLevel(s,m,l);var t=o.get(s);if(!t){r.markerStatus=c('PublicLiveMapConstants').MARKER_STATUS.ENTERING;p[r.videoID]=r;}else{t.markerStatus=c('PublicLiveMapConstants').MARKER_STATUS.STREAMING;t.viewerCount=r.viewerCount;p[t.videoID]=t;}}l=l.setLevelNCache(n,c('immutable').Map(p));}else l=l.setLevelNCache(n,h);return l;},_removeVideoFromAllCachesExceptThisLevel:function j(k,l,m){for(var n=0;n<c('PublicLiveMapStore').getNumberOfCacheLevels();n++)if(n!==l){var o=c('PublicLiveMapCacheConstants').getCacheNameByLevel(n),p=m.getLevelNCache(o);if(p.get(k)){var q=p['delete'](k);m=m.setLevelNCache(o,q);}}return m;}};f.exports=i;}),null);
__d('PublicLiveMapUIStateStore',['FluxMapStore','immutable','PublicLiveMapActionTypes','PublicLiveMapDispatcher'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FluxMapStore'));i=h&&h.prototype;j.prototype.getInitialState=function(){return i.getInitialState.call(this).set('zoomLevel',null);};j.prototype.reduce=function(k,l){switch(l.type){case c('PublicLiveMapActionTypes').MAP_VIEW.CHANGE_ZOOM:k=this.$PublicLiveMapUIStateStore1(l.data,k);return k;default:return k;}};j.prototype.$PublicLiveMapUIStateStore1=function(k,l){l=l.set('zoomLevel',k);return l;};j.prototype.getZoomLevel=function(){return this.getState().get('zoomLevel');};function j(){h.apply(this,arguments);}f.exports=new j(c('PublicLiveMapDispatcher'));}),null);
__d("XLiveMapAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ajax\/livemap\/map\/data\/",{video_count:{type:"Int"},level:{type:"Int",required:true}});}),null);
__d("XLiveMapAsyncGeoBoundedVideosController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ajax\/livemap\/map\/geo-videos\/",{min_viewers:{type:"Int",required:true},max_viewers:{type:"Int",required:true},video_count:{type:"Int",required:true},west:{type:"Float",required:true},east:{type:"Float",required:true},south:{type:"Float",required:true},north:{type:"Float",required:true}});}),null);
__d("XLiveMapSidebarChannelAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ajax\/livemap\/sidebar\/channel\/",{limit:{type:"Int"},img_size:{type:"Int"}});}),null);
__d("XLiveMapSpecialEventAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ajax\/livemap\/videos\/events\/",{video_count:{type:"Int",required:true},include_vods:{type:"Bool",defaultValue:false}});}),null);
__d("XLiveMapsVideoAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ajax\/livemap\/videos\/viewers\/",{video_id:{type:"String",required:true},live_viewers_count:{type:"Int",required:true}});}),null);
__d('PublicLiveMapActions',['cx','invariant','AsyncRequest','CSS','LeafletUtils','LiveMapViewField','Poller','PublicLiveMapConstants','PublicLiveMapActionTypes','PublicLiveMapConfig','PublicLiveMapDispatcher','PublicLiveMapStore','PublicLiveMapUIStateStore','PublicLiveMapVideosFetcher','VideoChannel','VideoChannelController','VideoPlayerReason','VideoPlayerStates','XLiveMapAsyncController','XLiveMapsVideoAsyncController','XLiveMapSidebarChannelAsyncController','XLiveMapAsyncGeoBoundedVideosController','XLiveMapSpecialEventAsyncController','setImmediate'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c('PublicLiveMapConstants').NUMBER_OF_VIEWERS_TO_SHOW,k=4000,l=Math.max(k,c('PublicLiveMapConfig').poll_interval_ms),m=12000,n='live_map',o=c('PublicLiveMapConfig').min_viewers_to_display_viewers,p=120000,q={_startPollingCurrentLiveStreamsForLevel:function r(s,t){var u=c('XLiveMapAsyncController').getURIBuilder().setInt('level',s).setInt('video_count',t).getURI(),v=new (c('Poller'))({interval:l,dontStart:true,allowNotLoggedIn:true,setupRequest:function w(x){x.setURI(u).setMethod('GET').setReadOnly(true).setHandler(function(y){c('PublicLiveMapDispatcher').dispatch({data:y.payload,type:c('PublicLiveMapActionTypes').RECEIVE.VIEW_STAGGERED_STREAMS});}).setErrorHandler(function(y){}).setTimeoutHandler(p,function(){});}});v.start();return v;},_startPollingSpecialEventForMap:function r(s){var t=new (c('Poller'))({interval:l,dontStart:true,allowNotLoggedIn:true,setupRequest:function u(v){v.setURI(s).setMethod('GET').setReadOnly(true).setHandler(function(w){c('PublicLiveMapDispatcher').dispatch({data:w.payload,type:c('PublicLiveMapActionTypes').RECEIVE.SPECIAL_EVENT_VIDEOS});});}});t.start();return t;},initializeDynamicGeoCache:function r(s,t,u){var v=new (c('Poller'))({interval:m,dontStart:true,allowNotLoggedIn:true,setupRequest:function w(x){var y=c('PublicLiveMapStore').getLatLngBounds(),z=y?c('LeafletUtils').wrapLongitude(y.getEast()):0,aa=y?c('LeafletUtils').wrapLongitude(y.getWest()):0,ba=y?y.getSouth():0,ca=y?y.getNorth():0,da={x1:aa,x2:z,y1:ba,y2:ca},ea=new (c('LiveMapViewField'))(da);if(ea.isMinLongitudeGreaterThanMax())da=ea.getLeftSplitFor360DegreeMap().getSearchBounds();var fa=c('XLiveMapAsyncGeoBoundedVideosController').getURIBuilder().setInt('min_viewers',t).setInt('max_viewers',u).setInt('video_count',s).setFloat('west',da.x1).setFloat('east',da.x2).setFloat('south',da.y1).setFloat('north',da.y2).getURI();x.setURI(fa).setMethod('GET').setReadOnly(true).setHandler(function(ga){c('PublicLiveMapDispatcher').dispatch({data:ga.payload,type:c('PublicLiveMapActionTypes').RECEIVE.DYNAMIC_CACHE_PERIODIC_RESET});});return;}});v.start();c('PublicLiveMapDispatcher').dispatch({data:{poller:v},type:c('PublicLiveMapActionTypes').POLLER.MAP.INITIALIZE_DYNAMIC});return v;},forceFetchGeoBoundedStreams:function r(s,t,u,v){c('PublicLiveMapDispatcher').dispatch({data:t,type:c('PublicLiveMapActionTypes').REQUEST.FORCE_FETCHED_STREAMS});q._forceFetchGeoBoundedStreamsRequest(s,t,u,v);},_forceFetchGeoBoundedStreamsRequest:function r(s,t,u,v){var w=c('XLiveMapAsyncGeoBoundedVideosController').getURIBuilder().setInt('video_count',s).setFloat('west',t.x1).setFloat('east',t.x2).setFloat('south',t.y1).setFloat('north',t.y2).setInt('min_viewers',u).setInt('max_viewers',v).getURI(),x=new (c('AsyncRequest'))().setURI(w).setMethod('GET').setReadOnly(true).setHandler(function(y){c('PublicLiveMapDispatcher').dispatch({data:y.payload,type:c('PublicLiveMapActionTypes').RECEIVE.FORCE_FETCHED_STREAMS});});x.send();},_startGeoPollingCurrentLiveStreamsForLevel:function r(s,t){var u=0,v=8,w=new (c('Poller'))({interval:l,dontStart:true,allowNotLoggedIn:true,setupRequest:function x(y){var z=c('PublicLiveMapStore').getLatLngBounds(),aa=z?c('LeafletUtils').wrapLongitude(z.getEast()):0,ba=z?c('LeafletUtils').wrapLongitude(z.getWest()):0,ca=z?z.getSouth():0,da=z?z.getNorth():0,ea=c('XLiveMapAsyncGeoBoundedVideosController').getURIBuilder().setInt('min_viewers',u).setInt('max_viewers',v).setInt('video_count',t).setFloat('west',ba).setFloat('east',aa).setFloat('south',ca).setFloat('north',da).getURI();y.setURI(ea).setMethod('GET').setReadOnly(true).setHandler(function(fa){c('PublicLiveMapDispatcher').dispatch({data:fa.payload,type:c('PublicLiveMapActionTypes').RECEIVE.GEO_STREAMS_POLL_RESPONSE});}).setErrorHandler(function(fa){return;}).setTimeoutHandler(p,function(){return;});return;}});w.start();return w;},startPollingLiveChannel:function r(){var s=c('XLiveMapSidebarChannelAsyncController').getURIBuilder().getURI(),t=new (c('Poller'))({interval:10000,dontStart:true,allowNotLoggedIn:true,setupRequest:function u(v){v.setURI(s).setMethod('GET').setReadOnly(true).setHandler(function(w){c('PublicLiveMapDispatcher').dispatch({data:w.payload,type:c('PublicLiveMapActionTypes').RECEIVE.CHANNEL_VIDEOS});}).setErrorHandler(function(w){}).setTimeoutHandler(p,function(){});}});t.start();return t;},initializeChannelVideo:function r(){var s=c('XLiveMapSidebarChannelAsyncController').getURIBuilder().setInt('limit',1).getURI(),t=new (c('AsyncRequest'))().setURI(s).setMethod('GET').setReadOnly(true).setHandler(function(u){c('PublicLiveMapDispatcher').dispatch({data:u.payload,type:c('PublicLiveMapActionTypes').RECEIVE.LIST_CHANNEL_VIDEOS});});t.send();},replaceCompletedChannelVideo:function r(){var s=c('XLiveMapSidebarChannelAsyncController').getURIBuilder().setInt('limit',2).getURI(),t=new (c('AsyncRequest'))().setURI(s).setMethod('GET').setReadOnly(true).setHandler(function(u){if(u.payload.videos[0]&&u.payload.videos[0].isLive||u.payload.videos[1]&&u.payload.videos[1].isLive){c('PublicLiveMapDispatcher').dispatch({data:u.payload,type:c('PublicLiveMapActionTypes').RECEIVE.REPLACEMENT_SIDEBAR_VIDEO});}else{var v=5000,w=c('PublicLiveMapStore').getSidebarVideoPlayerController();if(w){var x=w.getState();if(x===c('VideoPlayerStates').FINISHED)setTimeout(q.replaceCompletedChannelVideo,v);}}});t.send();},_viewersAsyncRequest:null,_getViewersForActiveStream:function r(s){var t=s;if(!t)return;if(q._viewersAsyncRequest)q._viewersAsyncRequest.abort();q._resetCurrentViewers();var u=c('XLiveMapsVideoAsyncController').getURIBuilder().setString('video_id',t.videoID).setInt('live_viewers_count',j).getURI();q._viewersAsyncRequest=new (c('AsyncRequest'))().setURI(u).setMethod('GET').setReadOnly(true).setHandler(function(v){q._viewersAsyncRequest=null;v.payload.videoID=t.videoID;c('PublicLiveMapDispatcher').dispatch({data:v.payload,type:c('PublicLiveMapActionTypes').RECEIVE.VIEWERS_FOR_STREAM});}).setErrorHandler(function(v){}).setTimeoutHandler(p,function(){});q._viewersAsyncRequest.send();},_cancelViewersAsyncRequest:function r(){if(q._viewersAsyncRequest){q._viewersAsyncRequest.abort();q._viewersAsyncRequest=null;}},setActiveStream:function r(s,t){if(t)s.subOrigin=t;c('PublicLiveMapDispatcher').dispatch({data:s,type:c('PublicLiveMapActionTypes').RECEIVE.ACTIVE_STREAM});if(s.viewerCount>=o)q._getViewersForActiveStream(s);},resetActiveStream:function r(){c('PublicLiveMapDispatcher').dispatch({data:null,type:c('PublicLiveMapActionTypes').RECEIVE.ACTIVE_STREAM});q._resetCurrentViewers();},_resetCurrentViewers:function r(){q._cancelViewersAsyncRequest();c('PublicLiveMapDispatcher').dispatch({data:null,type:c('PublicLiveMapActionTypes').RECEIVE.VIEWERS_FOR_STREAM});},setNowPlayingFromChannelVideo:function r(s){if(!s.video||!s.video.videoID)return;c('PublicLiveMapDispatcher').dispatch({data:s,type:c('PublicLiveMapActionTypes').SIDEBAR.NOW_PLAYING_FROM_CHANNEL});},setViewMode:function r(s){c('PublicLiveMapDispatcher').dispatch({data:s,type:c('PublicLiveMapActionTypes').VIEW_MODE.SET});},setChannelID:function r(s){c('PublicLiveMapDispatcher').dispatch({data:s,type:c('PublicLiveMapActionTypes').RECEIVE.CHANNEL_ID});},setZoomLevel:function r(s){c('PublicLiveMapVideosFetcher').handleZoomChange(s);c('PublicLiveMapDispatcher').dispatch({data:s,type:c('PublicLiveMapActionTypes').MAP_VIEW.CHANGE_ZOOM});},returnToApp:function r(){var s=c('PublicLiveMapUIStateStore').getZoomLevel(),t=[0,1];if(s>=c('PublicLiveMapConstants').ZOOM_CUTOFF_FOR_CACHE.LEVEL_2)t.push(2);c('PublicLiveMapDispatcher').dispatch({data:{levelsToResumePolling:t},type:c('PublicLiveMapActionTypes').APP.RETURN});},initializePollerAtLevel:function r(s,t){var u=this._startPollingCurrentLiveStreamsForLevel(s,t);c('PublicLiveMapDispatcher').dispatch({data:{level:s,poller:u},type:c('PublicLiveMapActionTypes').POLLER.MAP.INITIALIZE});},initializePollerForSpecialEvent:function r(s){var t=c('XLiveMapSpecialEventAsyncController').getURIBuilder().setInt('video_count',50).setBool('include_vods',false).getURI(),u=this._startPollingSpecialEventForMap(t);c('PublicLiveMapDispatcher').dispatch({data:{poller:u},type:c('PublicLiveMapActionTypes').POLLER.MAP.INITIALIZE_SPECIAL_EVENT});},initializeGeoPollerAtLevel:function r(s,t){var u=q._startGeoPollingCurrentLiveStreamsForLevel(s,t);c('PublicLiveMapDispatcher').dispatch({data:{level:s,poller:u},type:c('PublicLiveMapActionTypes').POLLER.MAP.INITIALIZE});},pauseAllMapPolling:function r(){var s=c('PublicLiveMapStore').getNumberOfCacheLevels();for(var t=0;t<s;t++)q.pausePollerAtLevel(t);q.pauseDynamicPoller();q.pauseSpecialEventPoller();},resumeAllMapPolling:function r(){var s=c('PublicLiveMapStore').getNumberOfCacheLevels();for(var t=0;t<s;t++)q.resumePollerAtLevel(t);q.resumeDynamicPoller();q.resumeSpecialEventPoller();},pausePollerAtLevel:function r(s){c('PublicLiveMapDispatcher').dispatch({data:{level:s},type:c('PublicLiveMapActionTypes').POLLER.MAP.PAUSE});},resumePollerAtLevel:function r(s){c('PublicLiveMapDispatcher').dispatch({data:{level:s},type:c('PublicLiveMapActionTypes').POLLER.MAP.RESUME});},pauseDynamicPoller:function r(){c('PublicLiveMapDispatcher').dispatch({data:null,type:c('PublicLiveMapActionTypes').POLLER.MAP.PAUSE_DYNAMIC});},resumeDynamicPoller:function r(){c('PublicLiveMapDispatcher').dispatch({data:null,type:c('PublicLiveMapActionTypes').POLLER.MAP.RESUME_DYNAMIC});},stopDynamicPoller:function r(){c('PublicLiveMapDispatcher').dispatch({data:null,type:c('PublicLiveMapActionTypes').POLLER.MAP.STOP_DYNAMIC});},pauseSpecialEventPoller:function r(){c('PublicLiveMapDispatcher').dispatch({data:null,type:c('PublicLiveMapActionTypes').POLLER.MAP.PAUSE_SPECIAL_EVENT});},resumeSpecialEventPoller:function r(){c('PublicLiveMapDispatcher').dispatch({data:null,type:c('PublicLiveMapActionTypes').POLLER.MAP.RESUME_SPECIAL_EVENT});},stopSpecialEventPoller:function r(){c('PublicLiveMapDispatcher').dispatch({data:null,type:c('PublicLiveMapActionTypes').POLLER.MAP.STOP_SPECIAL_EVENT});},stopPollerAtLevel:function r(s){c('PublicLiveMapDispatcher').dispatch({data:{level:s},type:c('PublicLiveMapActionTypes').POLLER.MAP.STOP});},blacklistVideo:function r(s){c('PublicLiveMapDispatcher').dispatch({data:{videoID:s},type:c('PublicLiveMapActionTypes').VIDEO.BLACKLIST});},setListViewTooltipVideoPlayerController:function r(s){c('PublicLiveMapDispatcher').dispatch({data:s,type:c('PublicLiveMapActionTypes').VIDEO_PLAYER.SET_LIST_VIEW_TOOLTIP_PLAYER_CONTROLLER});},setMapViewTooltipVideoPlayerController:function r(s){c('PublicLiveMapDispatcher').dispatch({data:s,type:c('PublicLiveMapActionTypes').VIDEO_PLAYER.SET_MAP_TOOLTIP_PLAYER_CONTROLLER});},setMapViewport:function r(s,t,u){c('PublicLiveMapDispatcher').dispatch({data:{bounds:u,mapType:s,zoomLevel:t},type:c('PublicLiveMapActionTypes').MAP_VIEW.CHANGE_VIEWPORT});},setMap:function r(s){c('PublicLiveMapDispatcher').dispatch({data:s,type:c('PublicLiveMapActionTypes').MAP_VIEW.SET_MAP});},openChannelPlayer:function r(s,t,u,v){var w=c('PublicLiveMapStore').getState().channelID;if(w==null)return;if(c('VideoChannel').get()){c('VideoChannel').get().getDialog().hide();c('setImmediate')(function(){return q.openChannelPlayer(s,t,u,v);});return;}var x=null;if(t!=null&&!t.isPlayerVersion('silvercity'))x=t;c('VideoChannel').set(new (c('VideoChannelController'))(w,n,s,x,null,function(){c('PublicLiveMapDispatcher').dispatch({data:null,type:c('PublicLiveMapActionTypes').CHANNEL_PLAYER.OPEN});if(u)u();}));c('PublicLiveMapDispatcher').dispatch({data:s,type:c('PublicLiveMapActionTypes').CHANNEL_PLAYER.OPEN});if(v!=null)v(x!=null);},_hideChannelVideoStrip:function r(){var s=c('VideoChannel').get(),t=s.getDialog().getRoot();c('CSS').addClass(t,"__s4");},_onChannelPlayerOpenForMap:function r(s){if(s){c('PublicLiveMapDispatcher').dispatch({data:true,type:c('PublicLiveMapActionTypes').CHANNEL_PLAYER.USING_TOOLTIP_VIDEO});}else{c('PublicLiveMapDispatcher').dispatch({data:false,type:c('PublicLiveMapActionTypes').CHANNEL_PLAYER.USING_TOOLTIP_VIDEO});q.resetActiveStream();}},_onChannelPlayerCloseForMap:function r(){c('PublicLiveMapDispatcher').dispatch({data:false,type:c('PublicLiveMapActionTypes').CHANNEL_PLAYER.USING_TOOLTIP_VIDEO});q.resetActiveStream();},openChannelPlayerForMapTooltip:function r(){var s=c('PublicLiveMapStore').getActiveStream();if(s==null)return;var t=c('PublicLiveMapStore').getMapViewTooltipVideoPlayerController();q.openChannelPlayer(s.videoID,t,q._onChannelPlayerCloseForMap,q._onChannelPlayerOpenForMap);},_onChannelPlayerForSidebarVideoClose:function r(){var s=c('PublicLiveMapStore').getSidebarNowPlaying();if(s==null)s=c('PublicLiveMapStore').getNowPlayingVideo();if(s==null)return;var t=c('PublicLiveMapStore').getSidebarVideoPlayerController();if(t==null)return;t.play(c('VideoPlayerReason').USER);},openChannelPlayerForSidebarVideo:function r(){var s=c('PublicLiveMapStore').getSidebarNowPlaying();if(s==null)s=c('PublicLiveMapStore').getNowPlayingVideo();if(s==null)return;var t=c('PublicLiveMapStore').getSidebarVideoPlayerController();if(t){var u=t.getVolume();if(u===0)t.setVolume(.75);}q.openChannelPlayer(s.videoID,t,q._onChannelPlayerForSidebarVideoClose);},_onChannelPlayerOpenForSidebarTooltip:function r(s){if(s){c('PublicLiveMapDispatcher').dispatch({data:true,type:c('PublicLiveMapActionTypes').CHANNEL_PLAYER.USING_TOOLTIP_VIDEO});}else{c('PublicLiveMapDispatcher').dispatch({data:false,type:c('PublicLiveMapActionTypes').CHANNEL_PLAYER.USING_TOOLTIP_VIDEO});q.resetActiveSidebarStream();}},_onChannelPlayerCloseForSidebarTooltip:function r(){c('PublicLiveMapDispatcher').dispatch({data:false,type:c('PublicLiveMapActionTypes').CHANNEL_PLAYER.USING_TOOLTIP_VIDEO});q.resetActiveSidebarStream();},openChannelPlayerForSidebarTooltipVideo:function r(){var s=c('PublicLiveMapStore').getActiveSidebarStream();if(s==null)return;var t=c('PublicLiveMapStore').getSidebarTooltipVideoPlayerController();q.openChannelPlayer(s.videoID,t,q._onChannelPlayerCloseForSidebarTooltip,q._onChannelPlayerOpenForSidebarTooltip);},setNowPlayingInSidebar:function r(s){c('PublicLiveMapDispatcher').dispatch({data:s,type:c('PublicLiveMapActionTypes').SIDEBAR.SET_NOW_PLAYING});if(c('PublicLiveMapStore').getActiveStream()===s)q.resetActiveStream();},setSidebarVideoPlayerController:function r(s){c('PublicLiveMapDispatcher').dispatch({data:s,type:c('PublicLiveMapActionTypes').VIDEO_PLAYER.SET_SIDEBAR_VIDEO_PLAYER_CONTROLLER});},setSideBarTooltipVideoPlayerController:function r(s){c('PublicLiveMapDispatcher').dispatch({data:s,type:c('PublicLiveMapActionTypes').VIDEO_PLAYER.SET_SIDEBAR_TOOLTIP_VIDEO_PLAYER_CONTROLLER});},setActiveSidebarStream:function r(s,t,u,v){c('PublicLiveMapDispatcher').dispatch({data:{stream:s,position:{top:t,bottom:u,right:v}},type:c('PublicLiveMapActionTypes').SIDEBAR.SET_ACTIVE_SIDEBAR_STREAM});},resetActiveSidebarStream:function r(){c('PublicLiveMapDispatcher').dispatch({data:{stream:null,position:null},type:c('PublicLiveMapActionTypes').SIDEBAR.SET_ACTIVE_SIDEBAR_STREAM});},updateControllerVolume:function r(s){c('PublicLiveMapDispatcher').dispatch({data:{level:s},type:c('PublicLiveMapActionTypes').VIDEO_PLAYER.SET_VOLUME});},setStreamsInView:function r(s){c('PublicLiveMapDispatcher').dispatch({data:s,type:c('PublicLiveMapActionTypes').MAP_VIEW.SET_STREAMS_IN_VIEW});},setWebGLMap:function r(s){c('PublicLiveMapDispatcher').dispatch({data:s,type:c('PublicLiveMapActionTypes').MAP_VIEW.SET_WEB_GL_MAP});},setSidebarElement:function r(s){if(!s)return;c('PublicLiveMapDispatcher').dispatch({data:s,type:c('PublicLiveMapActionTypes').SIDEBAR.SET_SIDEBAR_OFFSET});},showLoadingDialog:function r(){c('PublicLiveMapDispatcher').dispatch({data:{},type:c('PublicLiveMapActionTypes').DIALOG.SHOW});},hideLoadingDialog:function r(){c('PublicLiveMapDispatcher').dispatch({data:{},type:c('PublicLiveMapActionTypes').DIALOG.HIDE});}};f.exports=q;}),null);
__d('PublicLiveMapVideosFetcher',['LiveMapGeoCacheUtils','LiveMapExperiments','LiveMapViewField','PublicLiveMapActions','PublicLiveMapConstants','PublicLiveMapStore'],(function a(b,c,d,e,f,g){var h={initialize:function i(){c('PublicLiveMapActions').initializePollerAtLevel(0,300);c('PublicLiveMapActions').initializePollerAtLevel(1,300);c('PublicLiveMapActions').initializePollerAtLevel(2,400);this.initializeDynamicGeoCache();if(c('LiveMapExperiments').specialevent)c('PublicLiveMapActions').initializePollerForSpecialEvent(50);if(c('PublicLiveMapConstants').DEFAULT_MAP_ZOOM<c('PublicLiveMapConstants').ZOOM_CUTOFF_FOR_CACHE.LEVEL_2)c('PublicLiveMapActions').pausePollerAtLevel(2);if(c('PublicLiveMapConstants').DEFAULT_MAP_ZOOM<c('PublicLiveMapConstants').ZOOM_CUTOFF_FOR_CACHE.DYNAMIC)c('PublicLiveMapActions').pauseDynamicPoller();},stop:function i(){c('PublicLiveMapActions').stopPollerAtLevel(0);c('PublicLiveMapActions').stopPollerAtLevel(1);c('PublicLiveMapActions').stopPollerAtLevel(2);c('PublicLiveMapActions').stopDynamicPoller();if(c('LiveMapExperiments').specialevent)c('PublicLiveMapActions').stopSpecialEventPoller(50);},pause:function i(){c('PublicLiveMapActions').pauseAllMapPolling();},initializeDynamicGeoCache:function i(){var j=100,k=0,l=6;c('PublicLiveMapActions').initializeDynamicGeoCache(j,k,l);},handleZoomChange:function i(j){if(j<c('PublicLiveMapConstants').ZOOM_CUTOFF_FOR_CACHE.LEVEL_2){c('PublicLiveMapActions').pausePollerAtLevel(2);}else c('PublicLiveMapActions').resumePollerAtLevel(2);if(j<c('PublicLiveMapConstants').ZOOM_CUTOFF_FOR_CACHE.DYNAMIC){c('PublicLiveMapActions').pauseDynamicPoller();}else c('PublicLiveMapActions').resumeDynamicPoller();},shouldDynamicGeoFetch:function i(j,k){var l=k>c('PublicLiveMapConstants').ZOOM_CUTOFF_FOR_CACHE.DYNAMIC;if(!l)return false;var m=new (c('LiveMapViewField'))(j),n=c('PublicLiveMapStore').getVisitedLocationsGeoCache(),o=c('LiveMapGeoCacheUtils').isSufficientDataInView(m,n);return !o;},dynamicGeoFetch:function i(j,k){if(!j)return;if(j.isMinLongitudeGreaterThanMax()){this.dynamicGeoFetch(j.getLeftSplitFor360DegreeMap(),k);this.dynamicGeoFetch(j.getRightSplitFor360DegreeMap(),k);return;}var l=this.shouldDynamicGeoFetch(j.getSearchBounds(),k);if(!l)return;var m=100,n=0,o=8;c('PublicLiveMapActions').forceFetchGeoBoundedStreams(m,j.getSearchBounds(),n,o);}};f.exports=h;}),null);
__d('Duration.react',['React','ServerTime','setTimeout','clearTimeout'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=500,k=1000,l=60,m=60;h=babelHelpers.inherits(n,c('React').Component);i=h&&h.prototype;function n(o){i.constructor.call(this,o);this.state={duration:0};}n.prototype.componentWillMount=function(){this.$Duration2();};n.prototype.componentWillUnmount=function(){c('clearTimeout')(this.$Duration1);};n.prototype.$Duration2=function(){var o=void 0;if(this.props.isBroadcaster){o=Date.now();}else o=c('ServerTime').getMillis();this.setState({duration:Math.max(o-this.props.startTime,0)});this.$Duration1=c('setTimeout')(function(){return this.$Duration2();}.bind(this),j);};n.prototype.render=function(){var o=Math.floor(this.state.duration/k),p=o%l,q=Math.floor(o/l),r=q%m,s=Math.floor(q/m),t='';if(s>0)t=s+':';var u=r+':';if(u.length<3&&t.length>0)u='0'+u;var v=''+p;if(v.length<2)v='0'+v;return (c('React').createElement('span',null,t,u,v));};n.defaultProps={isBroadcaster:false};f.exports=n;}),null);
__d('LiveMapGenericLoadingDialog.react',['cx','React','XUIDialog.react','XUISpinner.react'],(function a(b,c,d,e,f,g,h){'use strict';function i(j){var k=300;return (c('React').createElement(c('XUIDialog.react'),{shown:j.showLoadingDialog,width:k},c('React').createElement('div',{className:"_57-x"},c('React').createElement(c('XUISpinner.react'),{size:'large'}))));}f.exports=i;}),null);
__d('LiveMapGenericLoadingDialogContainer.react',['FluxContainer','LiveMapGenericLoadingDialog.react','PublicLiveMapStore','React'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;function j(k){i.constructor.call(this,k);}j.getStores=function(){return [c('PublicLiveMapStore')];};j.calculateState=function(k){var l=c('PublicLiveMapStore').getShouldShowLoadingDialog();return {showLoadingDialog:l};};j.prototype.render=function(){return c('React').createElement(c('LiveMapGenericLoadingDialog.react'),this.state);};f.exports=c('FluxContainer').create(j);}),null);
__d('LiveMapClickEventLogger',['PublicLiveMapEvent','PublicLiveMapInteractionsTypedLogger','LiveMapClickEventSource','LiveMapViewChangeSource','pageID'],(function a(b,c,d,e,f,g){var h={logVideoClickEvent:function i(j,k){if(!j)return;switch(k){case c('LiveMapClickEventSource').MAP_MARKER:j.clickSource=c('LiveMapClickEventSource').MAP_MARKER;break;case c('LiveMapClickEventSource').TOOLTIP_PLAYER:j.clickSource=c('LiveMapClickEventSource').TOOLTIP_PLAYER;break;case c('LiveMapClickEventSource').SIDEBAR_ITEM:j.clickSource=c('LiveMapClickEventSource').SIDEBAR_ITEM;break;case c('LiveMapClickEventSource').SIDEBAR_PLAYER:j.clickSource=c('LiveMapClickEventSource').SIDEBAR_PLAYER;break;case c('LiveMapClickEventSource').GRID_ITEM:j.clickSource=c('LiveMapClickEventSource').GRID_ITEM;break;default:j.clickSource=c('LiveMapClickEventSource').MAP_MARKER;}new (c('PublicLiveMapInteractionsTypedLogger'))().setEvent(c('PublicLiveMapEvent').CIRCLE_CLICKED).setTimeSpentID(c('pageID')).setVideoID(j.videoID).setMapZoom(j.mapZoom).setViewerCount(j.viewerCount).setClickSource(j.clickSource).log();},logViewModeChangeEvent:function i(j){if(!j)return;new (c('PublicLiveMapInteractionsTypedLogger'))().setEvent(c('PublicLiveMapEvent').VIEW_MODE_CHANGE).setTimeSpentID(c('pageID')).setViewChangeSource(j).log();},logCloseAutoplayVideoClickEvent:function i(){new (c('PublicLiveMapInteractionsTypedLogger'))().setEvent(c('PublicLiveMapEvent').AUTOPLAY_VIDEO_CLOSED).setTimeSpentID(c('pageID')).log();},logMapMarkerClickEvent:function i(j){h.logVideoClickEvent(j,c('LiveMapClickEventSource').MAP_MARKER);},logSidebarItemClickEvent:function i(j){h.logVideoClickEvent(j,c('LiveMapClickEventSource').SIDEBAR_ITEM);},logSidebarPlayerClickEvent:function i(j){h.logVideoClickEvent(j,c('LiveMapClickEventSource').SIDEBAR_PLAYER);},logTooltipPlayerClickEvent:function i(j){h.logVideoClickEvent(j,c('LiveMapClickEventSource').TOOLTIP_PLAYER);},logGridItemClickEvent:function i(j){h.logVideoClickEvent(j,c('LiveMapClickEventSource').GRID_ITEM);},logViewChangeFromMapSidebarLink:function i(){h.logViewModeChangeEvent(c('LiveMapViewChangeSource').MAP_SIDEBAR_LINK);},logViewChangeFromGridTextLink:function i(){h.logViewModeChangeEvent(c('LiveMapViewChangeSource').GRID_TEXT_LINK);},logCloseSidebarAutoplayVideo:function i(){h.logCloseAutoplayVideoClickEvent();}};f.exports=h;}),null);
__d('PublicLiveMapTooltipController',['PublicLiveMapActions','PublicLiveMapConstants','setTimeout'],(function a(b,c,d,e,f,g){var h={webGLTooltipShowing:false,addTooltip:function i(j,k){this.webGLTooltipShowing=true;if(this._removeTooltipTimer!=null)this.clearRemoveTooltipTimer();c('PublicLiveMapActions').setActiveStream(j,k);},removeTooltip:function i(){this.webGLTooltipShowing=false;c('PublicLiveMapActions').resetActiveStream();},setRemoveTooltipTimer:function i(j){if(this._removeTooltipTimer!=null)this.clearRemoveTooltipTimer();if(this._addTooltipTimer!=null)this.clearAddTooltipTimer();this._removeTooltipTimer=c('setTimeout')(function(){this.removeTooltip();}.bind(this),j||c('PublicLiveMapConstants').DEBOUNCE_TIMER_MS);},setRemoveWebGLTooltipTimer:function i(){if(this._removeTooltipTimer!=null||!this.webGLTooltipShowing)return;this._removeTooltipTimer=c('setTimeout')(function(){this.removeTooltip();}.bind(this),c('PublicLiveMapConstants').DEBOUNCE_TIMER_MS);},setAddTooltipTimer:function i(j,k){if(this._addTooltipTimer!=null)this.clearAddTooltipTimer();if(this._removeTooltipTimer!=null)this.clearRemoveTooltipTimer();this._addTooltipTimer=c('setTimeout')(function(){this.addTooltip(j,k);}.bind(this),c('PublicLiveMapConstants').HOVER_INTENT_TIMEOUT_MS);},clearRemoveTooltipTimer:function i(){if(this._removeTooltipTimer!=null){clearTimeout(this._removeTooltipTimer);this._removeTooltipTimer=null;}},clearAddTooltipTimer:function i(){clearTimeout(this._addTooltipTimer);this._addTooltipTimer=null;}};f.exports=h;}),null);
__d("XRapidReportingDialogController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/rapid_report\/",{context:{type:"String",required:true},__asyncDialog:{type:"Int"}});}),null);
__d('LiveMapSidebarChannelItem.react',['cx','fbt','AsyncRequest','Image.react','ImageBlock.react','Link.react','NFXStoryLocation','PopoverMenu.react','PublicLiveMapActions','PublicLiveMapTooltipController','React','ReactXUIMenu','TextWithEmoticons.react','VideoPlayerLoggerSource','VideoPlayerMetaData','VideoPlayerReactExperiments','XRapidReportingDialogController','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('ReactXUIMenu').Item,m=300;j=babelHelpers.inherits(n,c('React').Component);k=j&&j.prototype;function n(o){k.constructor.call(this,o);this.$LiveMapSidebarChannelItem3=function(){if(this.$LiveMapSidebarChannelItem1){clearTimeout(this.$LiveMapSidebarChannelItem1);this.$LiveMapSidebarChannelItem1=null;}if(c('VideoPlayerReactExperiments').liveMapListViewCloseDelay){c('PublicLiveMapTooltipController').setRemoveTooltipTimer(c('VideoPlayerReactExperiments').liveMapListViewCloseDelay);}else if(this.props.tooltipTestGroup){c('PublicLiveMapTooltipController').removeTooltip();}else c('PublicLiveMapActions').resetActiveStream();}.bind(this);this.$LiveMapSidebarChannelItem1=null;}n.prototype.$LiveMapSidebarChannelItem2=function(o,p){if(this.$LiveMapSidebarChannelItem1)return;if(c('VideoPlayerReactExperiments').liveMapPrfetchListViewMpdOnEnter)c('VideoPlayerMetaData').genPrefetch(p.videoID,{},0);this.$LiveMapSidebarChannelItem1=setTimeout(function(){if(c('VideoPlayerReactExperiments').liveMapListViewCloseDelay)c('PublicLiveMapTooltipController').clearRemoveTooltipTimer();if(this.props.tooltipTestGroup){c('PublicLiveMapTooltipController').addTooltip(p,c('VideoPlayerLoggerSource').LIVE_MAP_TOOLTIP_FROM_LISTVIEW);}else c('PublicLiveMapActions').setActiveStream(p,c('VideoPlayerLoggerSource').LIVE_MAP_TOOLTIP_FROM_LISTVIEW);this.$LiveMapSidebarChannelItem1=null;}.bind(this),c('VideoPlayerReactExperiments').liveMapListViewOpenDelay);};n.prototype.$LiveMapSidebarChannelItem4=function(o){o.stopPropagation();};n.prototype.$LiveMapSidebarChannelItem5=function(){c('PublicLiveMapActions').blacklistVideo(this.props.video.videoID);};n.prototype.$LiveMapSidebarChannelItem6=function(){var o=JSON.stringify({reportable_ent_token:this.props.video.videoID,story_location:c('NFXStoryLocation').LIVE_MAP}),p=c('XRapidReportingDialogController').getURIBuilder().setString('context',o).getURI(),q=new (c('AsyncRequest'))().setURI(p);q.send();};n.prototype.$LiveMapSidebarChannelItem7=function(){var o=c('React').createElement(c('ReactXUIMenu'),null,c('React').createElement(l,{onclick:this.$LiveMapSidebarChannelItem5.bind(this)},i._("Hide video")),c('React').createElement(l,{onclick:this.$LiveMapSidebarChannelItem6.bind(this)},i._("Report live video")));return (c('React').createElement(c('PopoverMenu.react'),{alignh:'right',className:"_hvg",menu:o,onClick:this.$LiveMapSidebarChannelItem4},c('React').createElement(c('Link.react'),{className:"_hvh"})));};n.prototype.render=function(){var o=this.props,p=o.video,q=o.eventHandlers,r=o.nowPlaying,s=babelHelpers.objectWithoutProperties(o,['video','eventHandlers','nowPlaying']),t=null;if(p.message)t=c('React').createElement(c('TextWithEmoticons.react'),{renderEmoji:true,renderEmoticons:true,text:p.message});var u=p.height>p.width?"_1m-t":"_3x22";return (c('React').createElement('li',babelHelpers['extends']({},s,{className:c('joinClasses')(this.props.className,(r?"_8r6":'')+(' '+"_8r7")),onMouseEnter:function(v){return this.$LiveMapSidebarChannelItem2(v,p);}.bind(this),onMouseLeave:this.$LiveMapSidebarChannelItem3,onClick:function v(w){return q.click(w,p);}}),this.$LiveMapSidebarChannelItem7(),c('React').createElement(c('ImageBlock.react'),{spacing:'medium'},c('React').createElement('div',{className:"_3x21"},c('React').createElement(c('Image.react'),{src:p.previewImage,className:u})),c('React').createElement('div',null,c('React').createElement('div',{className:"_4hxo"},c('React').createElement('span',{className:"_4hxq"}),i._("Now playing")),c('React').createElement('div',{className:"_53zt _328h"},c('React').createElement('span',{className:"_8r8"},c('React').createElement(c('Link.react'),{href:p.url},p.name)),c('React').createElement('span',{className:"_53zu"},' ','\u00B7',' '),c('React').createElement('span',{className:"_8r9 _328h"},p.publisherCategory)),c('React').createElement('div',{className:"_53zv _328h"},t),c('React').createElement('div',{className:"_8ra _328h"},p.formattedCount,' ',i._({"*":"viewers","268435456":"viewer"},[i.plural(p.viewerCount)]))))));};f.exports=n;}),null);
__d('VideoElementPrefetchContainer.react',['cx','invariant','AdsMouseStateStore','CurrentUser','OnVisible.react','React','URI','VideoPlayerReactExperiments','VideoPlayerMetaData','guid'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('AdsMouseStateStore').STATES,m={'':null,videoDataStarted:"_2c6x",videoDataFetched:"_2c6y",mpdQueued:"_2c6z",mpdStarted:"_2c75",mpdDone:"_2c76"};j=babelHelpers.inherits(n,c('React').Component);k=j&&j.prototype;function n(o){k.constructor.call(this,o);this.$VideoElementPrefetchContainer8=function(){this&&this.refs.item&&this.setState({progress:'videoDataFetched'});}.bind(this);this.$VideoElementPrefetchContainer9=function(){this&&this.refs.item&&this.setState({progress:'mpdQueued'});}.bind(this);this.$VideoElementPrefetchContainer10=function(){this&&this.refs.item&&this.setState({progress:'mpdStarted'});}.bind(this);this.$VideoElementPrefetchContainer11=function(){this&&this.refs.item&&this.setState({progress:'mpdDone'});}.bind(this);this.$VideoElementPrefetchContainer2=c('guid')();this.state={progress:''};}n.prototype.componentWillUnmount=function(){if(this.$VideoElementPrefetchContainer1){this.$VideoElementPrefetchContainer1.destroy();this.$VideoElementPrefetchContainer1=null;}};n.prototype.render=function(){var o=this.props,p=o.videoID,q=o.children,r=babelHelpers.objectWithoutProperties(o,['videoID','children']);q||i(0);var s=this.$VideoElementPrefetchContainer3()?m[this.state.progress]:null,t=c('React').cloneElement(q,babelHelpers['extends']({ref:'item',id:this.$VideoElementPrefetchContainer4(p),className:s},r));return c('React').createElement(c('OnVisible.react'),{onVisible:function(){return this.$VideoElementPrefetchContainer5(p);}.bind(this),onHidden:function(){return this.$VideoElementPrefetchContainer6(p);}.bind(this)},t);};n.prototype.$VideoElementPrefetchContainer3=function(){return c('CurrentUser').isEmployee()&&c('URI').getRequestURI().getQueryData().prefetchDebugging;};n.prototype.$VideoElementPrefetchContainer7=function(){this&&this.refs.item&&this.setState({progress:'videoDataStarted'});};n.prototype.$VideoElementPrefetchContainer12=function(o,p){if((o.getState()===l.INTENT||o.getState()===l.HOVER)&&o.isPointWithinDist(c('VideoPlayerReactExperiments').prefetchMouseProximityThreshold))c('VideoPlayerMetaData').genPrefetch(p,{},o.getPointToRectSquareDist(),this.$VideoElementPrefetchContainer9,this.$VideoElementPrefetchContainer10,this.$VideoElementPrefetchContainer11);};n.prototype.$VideoElementPrefetchContainer6=function(o){if(this.$VideoElementPrefetchContainer1){this.$VideoElementPrefetchContainer1.destroy();this.$VideoElementPrefetchContainer1=null;}};n.prototype.$VideoElementPrefetchContainer5=function(o){if(c('VideoPlayerReactExperiments').livemapPrefetchVideoData||c('VideoPlayerReactExperiments').reactLivePrefetchWhenMouseMove){this.$VideoElementPrefetchContainer7();c('VideoPlayerMetaData').genVideoData(o).then(this.$VideoElementPrefetchContainer8).done();}if(c('VideoPlayerReactExperiments').reactLivePrefetch)c('VideoPlayerMetaData').genPrefetch(o);if(c('VideoPlayerReactExperiments').reactLivePrefetchWhenMouseMove)if(!this.$VideoElementPrefetchContainer1)this.$VideoElementPrefetchContainer13(o);};n.prototype.$VideoElementPrefetchContainer4=function(o){return 'video_'+this.$VideoElementPrefetchContainer2+'_'+o;};n.prototype.$VideoElementPrefetchContainer13=function(o){var p=new (c('AdsMouseStateStore'))(this.$VideoElementPrefetchContainer4(o),c('VideoPlayerReactExperiments').prefetchMouseDetectionFrequency);this.$VideoElementPrefetchContainer1=p;p.addListener('change',function(){return this.$VideoElementPrefetchContainer12(p,o);}.bind(this));};f.exports=n;}),null);
__d('LiveMapSidebarList.react',['cx','fbt','AdsMouseStateStore','immutable','LiveMapClickEventLogger','LiveMapSidebarChannelItem.react','Map','PublicLiveMapActions','React','VideoElementPrefetchContainer.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;function l(m){k.constructor.call(this,m);this.$LiveMapSidebarList3=function(n,o){c('PublicLiveMapActions').setNowPlayingInSidebar(o);this.$LiveMapSidebarList2({videoID:o.videoID,viewerCount:o.viewerCount});}.bind(this);this.$LiveMapSidebarList1=new (c('Map'))();}l.prototype.$LiveMapSidebarList2=function(m){c('LiveMapClickEventLogger').logSidebarItemClickEvent(m);};l.prototype.$LiveMapSidebarList4=function(){var m={click:this.$LiveMapSidebarList3};return this.props.topVideos.map(function(n){var o=n.videoID;return (c('React').createElement(c('VideoElementPrefetchContainer.react'),{videoID:o,key:o},c('React').createElement(c('LiveMapSidebarChannelItem.react'),{nowPlaying:false,video:n,eventHandlers:m})));}).toArray();};l.prototype.render=function(){return (c('React').createElement('div',{className:"_12_g"},c('React').createElement('div',{className:"_135u"},i._("Popular in current map view")),c('React').createElement('div',{className:"_12_h"},c('React').createElement('ul',{className:"_u0z"},this.$LiveMapSidebarList4()))));};f.exports=l;}),null);
__d('LiveMapSidebarListContainer.react',['PublicLiveMapDispatcher','LiveMapSidebarList.react','PublicLiveMapStore','FluxContainer','React'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;function j(k){i.constructor.call(this,k);c('PublicLiveMapDispatcher').explicitlyRegisterStores([c('PublicLiveMapStore')]);}j.getStores=function(){return [c('PublicLiveMapStore')];};j.calculateState=function(k){var l=c('PublicLiveMapStore').getTopDisplayedMapVideos();return {topVideos:l};};j.prototype.render=function(){var k=babelHelpers['extends']({},this.state,this.props);return c('React').createElement(c('LiveMapSidebarList.react'),k);};f.exports=c('FluxContainer').create(j);}),null);
__d('VideoCompnentWithFluentUFISupport.react',['React','UFIVideoPlayerRegistry','VideoComponent'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;j.prototype.enable=function(k){c('UFIVideoPlayerRegistry').registerVideoPlayerController(k);};j.prototype.disable=function(){};j.prototype.render=function(){return null;};function j(){h.apply(this,arguments);}f.exports=c('VideoComponent').createContainer(j);}),null);
__d('VideoComponentClickForMore.react',['cx','fbt','React','VideoClickForMoreOverlay','VideoComponent','VideoPlayerUIComponentDrawer','VideoRenderingUtils','nullthrows','shallowCompare'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;function l(m){k.constructor.call(this,m);this.$VideoComponentClickForMore2=function(n){this.setState({height:n});}.bind(this);this.$VideoComponentClickForMore3=function(){c('nullthrows')(this.vpc).clickVideo();}.bind(this);this.state={height:this.$VideoComponentClickForMore1()};this.vpc=null;}l.prototype.$VideoComponentClickForMore1=function(){return c('VideoRenderingUtils').isEmbeddedControlRedesign()?c('VideoClickForMoreOverlay').REDESIGN_HEIGHT:c('VideoClickForMoreOverlay').DEFAULT_HEIGHT;};l.prototype.enable=function(m){this.vpc=m;this.drawer=m.registerDrawer(c('VideoPlayerUIComponentDrawer').priorities.ClickForMore,this.$VideoComponentClickForMore1());this.drawer.addListener('reposition',this.$VideoComponentClickForMore2);};l.prototype.disable=function(){this.drawer&&this.drawer.release();this.drawer=null;};l.prototype.shouldComponentUpdate=function(m,n){return c('shallowCompare')(this,m,n);};l.prototype.render=function(){var m=this.drawer,n=this.vpc;if(!m||!n)return null;var o=n.getOption('VideoControls','areControlsVisible'),p=n.getState();if(p!=='playing'||!o){m.release();return null;}m.reserve();return c('React').createElement('div',{className:"_3htz"+(' '+"_4i5p")+('')+(c('VideoRenderingUtils').isEmbeddedControlRedesign()?' '+"_2is6":''),style:{bottom:this.state.height+'px'},onClick:this.$VideoComponentClickForMore3},i._("Click for more"));};f.exports=c('VideoComponent').createContainer(l,{observedVpcEvents:['VideoControls/visibilityUpdate','stateChange']});}),null);
__d('VideoComponentContextMenu.react',['React','Relay','VideoComponent','VideoContextMenu','VideoPlayerHTML5Experiments','VideoPlayerVersions'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;j.prototype.componentWillReceiveProps=function(k){var l=this.contextMenu;if(l&&k.video&&k.video!==this.props.video)l.setPermalinkURL(k.video.permalinkUrl);};j.prototype.enable=function(k){if(!this.refs.container)return;if(k.getPlayerVersion()===c('VideoPlayerVersions').PLEASANTVILLE)this.contextMenu=new (c('VideoContextMenu'))(k,this.refs.container,{permalinkURL:''});};j.prototype.disable=function(){};j.prototype.render=function(){return c('React').createElement('div',{ref:'container'});};function j(){h.apply(this,arguments);}f.exports=c('VideoComponent').createContainer(j,{suppressMount:function k(){return !c('VideoPlayerHTML5Experiments').useCustomContextMenu;},relayVideoConfig:{fragments:{video:function k(){return function(){return {children:[{alias:'permalinkUrl',fieldName:'permalink_url',kind:'Field',metadata:{},type:'Url'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],id:c('Relay').QL.__id(),kind:'Fragment',metadata:{},name:'VideoComponentContextMenu_react_VideoRelayQL',type:'Video'};}();}}}});}),null);
__d('VideoComponentDebugOverlay.react',['cx','React','ReactDOM','VideoComponent','VideoDebugOverlay','VideoPlayerShakaExperiments'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;function k(l){j.constructor.call(this,l);}k.prototype.enable=function(l){this.debugOverlay=new (c('VideoDebugOverlay'))(c('ReactDOM').findDOMNode(this.refs.videoDebugOverlay),{autoplayReason:this.props.autoplayReason,autoplayReasonReadable:'?'},{hidden:true});this.debugOverlay.enable(l);};k.prototype.disable=function(){this.debugOverlay.setHidden(true);this.debugOverlay.disable();};k.prototype.render=function(){return (c('React').createElement('div',{ref:'videoDebugOverlay',className:"_5m64"+(' '+"_1jto")+(' '+"_3htz")+(' '+"hidden_elem")}));};f.exports=c('VideoComponent').createContainer(k,{suppressMount:function l(){return !c('VideoPlayerShakaExperiments').enableVideoDebug;}});}),null);
__d("XLiveMapController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/livemap\/",{rest:{type:"String"},ref:{type:"Enum",enumType:1},video_id:{type:"FBID"}});}),null);
__d('VideoComponentLiveEndScreen.react',['cx','fbt','CenteredContainer.react','Image.react','Link.react','LiveMapEntryPointsEnum','LiveMapEntryPointsLoggerController','LiveMapGK','React','Relay','SubscriptionsHandler','VideoComponent','VideoPlayerExperiments','XLiveMapController','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=70;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(n){k.constructor.call(this,n);this.$VideoComponentLiveEndScreen1=function(){if(this.$VideoComponentLiveEndScreen2())c('LiveMapEntryPointsLoggerController').logEndscreenImpression();}.bind(this);this.vpc=null;this.subscriptions=new (c('SubscriptionsHandler'))();}m.prototype.enable=function(n){this.vpc=n;this.subscriptions.engage();this.subscriptions.addSubscriptions(n.addListener('finishPlayback',this.$VideoComponentLiveEndScreen1));n.registerOption('VideoLiveEndscreen','enabled',function(){return true;});};m.prototype.disable=function(){this.subscriptions.release();};m.prototype.render=function(){var n=this.props,o=this.vpc;if(!n.video||!o||o.getState()!=='finished')return null;return (c('React').createElement('div',{className:c('joinClasses')(this.props.className,"_1uwa")},c('React').createElement('div',{className:"_5sjs"}),c('React').createElement(c('CenteredContainer.react'),{vertical:true,className:"_2q2t"},c('React').createElement('div',{className:"_1uwb"},c('React').createElement('div',{className:"_39rw"},this.$VideoComponentLiveEndScreen3(this.props.video))))));};m.prototype.$VideoComponentLiveEndScreen3=function(n){var o=n.liveEndText,p=n.liveEndFollowPromptText,q=n.owner,r=n.isLiveAudioFormat,s=c('React').createElement(c('Image.react'),{className:"_3-96",src:q.profilePicture.uri,width:l,height:l}),t=i._("This live video has ended."),u=i._("This live audio has ended."),v=r&&c('VideoPlayerExperiments').liveAudioViewer?u:t,w=c('React').createElement('div',{className:"_39ry"},s,c('React').createElement('div',{className:"_39rz"},v),c('React').createElement('div',null,c('React').createElement('div',null,o?o.text:'',c('React').createElement('div',null,p?p.text:'')),this.$VideoComponentLiveEndScreen4()));return w;};m.prototype.$VideoComponentLiveEndScreen4=function(){if(this.$VideoComponentLiveEndScreen2()){var n=c('XLiveMapController').getURIBuilder().setEnum('ref',c('LiveMapEntryPointsEnum').TRENDING).getURI(),o=c('React').createElement('div',{className:"_2pig"},c('React').createElement(c('Link.react'),{href:n,className:"_39g5"},c('React').createElement('div',{className:"_1svp"},i._("Explore more live videos."))));return o;}return null;};m.prototype.$VideoComponentLiveEndScreen2=function(){return c('LiveMapGK').live_map_public&&c('LiveMapGK').livemap_on_live_endscreen;};f.exports=c('VideoComponent').createContainer(m,{suppressMount:function n(o){return o.getStreamType()==='progressive';},observedVpcEvents:['beginPlayback','finishPlayback','playRequested'],relayVideoConfig:{fragments:{video:function n(){return function(o,p){return {children:[{alias:'liveEndText',children:[{fieldName:'text',kind:'Field',metadata:{},type:'String'}],fieldName:'live_end_text',kind:'Field',metadata:{canHaveSubselections:true},type:'TextWithEntities'},{alias:'liveEndFollowPromptText',children:[{fieldName:'text',kind:'Field',metadata:{},type:'String'}],fieldName:'live_end_follow_prompt_text',kind:'Field',metadata:{canHaveSubselections:true},type:'TextWithEntities'},{alias:'isLiveAudioFormat',fieldName:'is_live_audio_format',kind:'Field',metadata:{},type:'Boolean'},{children:[{alias:'profilePicture',calls:[{kind:'Call',metadata:{},name:'width',value:c('Relay').QL.__var(o)},{kind:'Call',metadata:{},name:'height',value:c('Relay').QL.__var(p)}],children:[{fieldName:'uri',kind:'Field',metadata:{},type:'Url'}],fieldName:'profile_picture',kind:'Field',metadata:{canHaveSubselections:true},type:'Image'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'},{fieldName:'__typename',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'String'}],fieldName:'owner',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id',isAbstract:true},type:'Actor'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],id:c('Relay').QL.__id(),kind:'Fragment',metadata:{},name:'VideoComponentLiveEndScreen_react_VideoRelayQL',type:'Video'};}(l,l);}}}});}),null);
__d('VideoComponentLiveInterruptedScreen.react',['cx','fbt','React','Relay','VideoComponent','VideoPlayerExperiments','joinClasses','ChannelManager'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;c('ChannelManager');j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;function l(m){k.constructor.call(this,m);this.vpc=null;}l.prototype.enable=function(m){this.vpc=m;};l.prototype.disable=function(){};l.prototype.render=function(){if(!this.vpc||!this.vpc.isStreamInterrupted())return null;return (c('React').createElement('div',{className:c('joinClasses')(this.props.className,"_1uwa")},c('React').createElement('div',{className:"_4qn1"}),c('React').createElement('div',{className:"_1uwb"},c('React').createElement('div',{className:"_39rw"},this.$VideoComponentLiveInterruptedScreen1()))));};l.prototype.$VideoComponentLiveInterruptedScreen1=function(){var m=i._("Live video interrupted"),n=i._("Live audio interrupted"),o=this.props.video&&this.props.video.isLiveAudioFormat&&c('VideoPlayerExperiments').liveAudioViewer,p=o?n:m;return (c('React').createElement('div',{className:"_39ry"+(' '+"_4qn2")},c('React').createElement('div',{className:"_39rz"},p),c('React').createElement('div',{className:"_4qn3"},i._("The broadcast has been paused. It should resume shortly."))));};f.exports=c('VideoComponent').createContainer(l,{suppressMount:function m(n){return n.getStreamType()==='progressive';},observedVpcEvents:['streamInterrupted','streamResumed'],relayVideoConfig:{fragments:{video:function m(){return function(){return {children:[{alias:'isLiveAudioFormat',fieldName:'is_live_audio_format',kind:'Field',metadata:{},type:'Boolean'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],id:c('Relay').QL.__id(),kind:'Fragment',metadata:{},name:'VideoComponentLiveInterruptedScreen_react_VideoRelayQL',type:'Video'};}();}}}});}),null);
__d('VideoComponentLiveVideoIndicator.react',['cx','fbt','DOMContainer.react','React','Relay','VideoBroadcastStatus','VideoComponent','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;function l(m){k.constructor.call(this,m);this.state={viewCountNode:null};}l.prototype.enable=function(m){m.addListener('VideoWithLiveBroadcast/viewCountChange',function(n){this.setState({viewCountNode:n});}.bind(this));};l.prototype.disable=function(){};l.prototype.render=function(){if(!this.props.video)return null;var m=this.props.video.broadcastStatus,n=m===c('VideoBroadcastStatus').LIVE;if(m===c('VideoBroadcastStatus').PREVIEW)return this.renderPreview();var o=null;if(this.state.viewCountNode)o=c('React').createElement(c('DOMContainer.react'),null,this.state.viewCountNode);return (c('React').createElement('div',{className:c('joinClasses')("_3htz"+(' '+"_5pe_")+(' '+"_530p")+(' '+"_4ubd")+(' '+"_2lwf")+(n?' '+"_3rno":''))},c('React').createElement('div',{className:"_5pe-"},c('React').createElement('span',{className:"_5pf0"},i._("LIVE"))),o));};l.prototype.renderPreview=function(){return (c('React').createElement('div',{className:"_5vj"},c('React').createElement('div',{className:"_5vm"},c('React').createElement('span',{className:"_5vo"},i._("PREVIEW")))));};f.exports=c('VideoComponent').createContainer(l,{relayVideoConfig:{fragments:{video:function m(){return function(){return {children:[{alias:'broadcastStatus',fieldName:'broadcast_status',kind:'Field',metadata:{},type:'VideoBroadcastStatus'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],id:c('Relay').QL.__id(),kind:'Fragment',metadata:{},name:'VideoComponentLiveVideoIndicator_react_VideoRelayQL',type:'Video'};}();}}}});}),null);
__d('VideoComponentWithLiveBroadcast.react',['React','Relay','VideoBroadcastStatus','VideoComponent','VideoWithLiveBroadcast'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;function j(k){i.constructor.call(this,k);}j.prototype.componentWillReceiveProps=function(k){if(k.video&&k.video!==this.props.video&&k.video.broadcastStatus===c('VideoBroadcastStatus').LIVE)this.liveBroadCast=new (c('VideoWithLiveBroadcast'))(this.vpc);};j.prototype.disable=function(k){var l=this.liveBroadCast;if(l){l.leave();this.liveBroadCast=null;}};j.prototype.enable=function(k){this.vpc=k;};j.prototype.render=function(){return null;};f.exports=c('VideoComponent').createContainer(j,{relayVideoConfig:{fragments:{video:function k(){return function(){return {children:[{fieldName:'id',kind:'Field',metadata:{isRequisite:true},type:'ID'},{alias:'broadcastStatus',fieldName:'broadcast_status',kind:'Field',metadata:{},type:'VideoBroadcastStatus'}],id:c('Relay').QL.__id(),kind:'Fragment',metadata:{},name:'VideoComponentWithLiveBroadcast_react_VideoRelayQL',type:'Video'};}();}}}});}),null);
__d("XLiveMapTooltipVideoAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ajax\/livemap\/video\/tooltip\/",{video_id:{type:"String",required:true},video_container_id:{type:"String",required:true},height:{type:"Int",required:true},width:{type:"Int",required:true},show_controls:{type:"Bool",defaultValue:false},video_player_source:{type:"Enum",defaultValue:"live_map",enumType:1}});}),null);
__d('PublicLiveMapVideoPlayer.react',['cssVar','cx','invariant','AsyncRequest','React','VideoCompnentWithFluentUFISupport.react','VideoComponentClickForMore.react','VideoComponentContextMenu.react','VideoComponentCover.react','VideoComponentDebugOverlay.react','VideoComponentEmbeddedControls.react','VideoComponentLiveEndScreen.react','VideoComponentLiveInterruptedScreen.react','VideoComponentLiveVideoIndicator.react','VideoComponentPlayButton.react','VideoComponentWithFallbackMode.react','VideoComponentWithLiveBroadcast.react','VideoDataContainer.react','VideoPlayer.react','VideoPlayerLoggerSource','VideoPlayerOrigins','VideoPlayerReactExperiments','XLiveMapTooltipVideoAsyncController','AdsVideoPlayer.react'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l;k=babelHelpers.inherits(m,c('React').Component);l=k&&k.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=l.constructor).call.apply(n,[this].concat(q)),this.state={videoData:null},this.$PublicLiveMapVideoPlayer2=null,this.$PublicLiveMapVideoPlayer3=false,this.$PublicLiveMapVideoPlayer4=null,this.$PublicLiveMapVideoPlayer7=function(s){return (c('React').createElement('div',{style:{width:this.props.videoWidth,height:this.props.videoHeight,color:"#ffffff"}},c('React').createElement('div',{className:"_2pie _2pi8",style:{fontSize:16}},s.summary),c('React').createElement('div',{className:"_2pid _2pi8"},s.message)));}.bind(this),this.$PublicLiveMapVideoPlayer6=function(){if(this.$PublicLiveMapVideoPlayer3)this.$PublicLiveMapVideoPlayer5();this.$PublicLiveMapVideoPlayer10();}.bind(this),this.$PublicLiveMapVideoPlayer8=function(s){this.$PublicLiveMapVideoPlayer4=s||null;}.bind(this),this.$PublicLiveMapVideoPlayer11=function(s){this.$PublicLiveMapVideoPlayer2=s||null;}.bind(this),this.$PublicLiveMapVideoPlayer9=function(s,t,u){if(this.$PublicLiveMapVideoPlayer1)this.$PublicLiveMapVideoPlayer1.abandon();var v=c('XLiveMapTooltipVideoAsyncController').getURIBuilder().setString('video_id',u.videoID).setString('video_container_id',s).setEnum('video_player_source',this.props.videoPlayerSource).setInt('width',u.playerWidth).setInt('height',u.playerHeight).setBool('show_controls',this.props.showControls).getURI();this.$PublicLiveMapVideoPlayer1=new (c('AsyncRequest'))().setMethod('POST').setRelativeTo(t).setURI(v).setReadOnly(true);this.$PublicLiveMapVideoPlayer1.send();}.bind(this),this.$PublicLiveMapVideoPlayer10=function(){var s,t=this;this.$PublicLiveMapVideoPlayer3=true;var u=this.props.onVideoLoaded;if(u!=null)(function(){var v=t.getVideoPlayerController();v!=null||j(0);v.runOnApiReady(function(){return u(v);});})();}.bind(this),o;}m.prototype.componentWillUnmount=function(){if(this.$PublicLiveMapVideoPlayer1)this.$PublicLiveMapVideoPlayer1.abandon();if(this.$PublicLiveMapVideoPlayer3)this.$PublicLiveMapVideoPlayer5();};m.prototype.render=function(){var n=this.props,o=n.videoID,p=n.videoWidth,q=n.videoHeight,r=n.showControls;if(c('VideoPlayerReactExperiments').reactPlayer){var s=r?c('React').createElement(c('VideoComponentClickForMore.react'),null):null,t=r?c('React').createElement(c('VideoComponentEmbeddedControls.react'),{showFullscreenButton:true,hideControlsOnFinish:true}):null,u=c('VideoPlayerReactExperiments').liveMapWithFallbackMode?c('React').createElement(c('VideoComponentWithFallbackMode.react'),null):null;return c('React').createElement(c('VideoDataContainer.react'),{videoID:o,onVideoLoaded:this.$PublicLiveMapVideoPlayer6,renderError:this.$PublicLiveMapVideoPlayer7,renderAfterMpdFetch:c('VideoPlayerReactExperiments').prefetchMpdForListViewVideo&&this.props.videoPlayerSource===c('VideoPlayerLoggerSource').LIVE_MAP_TOOLTIP_FROM_LISTVIEW,renderLoading:function x(){return c('VideoDataContainer.react').renderSpinner(p,q);}},c('React').createElement(c('VideoPlayer.react'),{ref:this.$PublicLiveMapVideoPlayer8,width:p,height:q,videoData:this.state.videoData,autoplay:true,playerOrigin:c('VideoPlayerOrigins').LIVE_MAP,subOrigin:this.props.videoPlayerSource},t,c('React').createElement(c('VideoComponentWithLiveBroadcast.react'),null),c('React').createElement(c('VideoComponentCover.react'),null),c('React').createElement(c('VideoComponentPlayButton.react'),null),c('React').createElement(c('VideoComponentLiveVideoIndicator.react'),null),s,c('React').createElement(c('VideoComponentDebugOverlay.react'),null),c('React').createElement(c('VideoComponentContextMenu.react'),null),c('React').createElement(c('VideoComponentLiveEndScreen.react'),null),c('React').createElement(c('VideoComponentLiveInterruptedScreen.react'),null),c('React').createElement(c('VideoCompnentWithFluentUFISupport.react'),null),u));}var v=null,w=c('AdsVideoPlayer.react');v=c('React').createElement(w,{videoID:o,autoPlay:true,playerWidth:p,playerHeight:q,hideCloseButton:true,loadVideoPlayer:this.$PublicLiveMapVideoPlayer9,onVideoLoaded:this.$PublicLiveMapVideoPlayer10,ref:this.$PublicLiveMapVideoPlayer11});return v;};m.prototype.getVideoPlayerController=function(){if(this.$PublicLiveMapVideoPlayer4)return this.$PublicLiveMapVideoPlayer4.vpc;if(this.$PublicLiveMapVideoPlayer2&&this.$PublicLiveMapVideoPlayer2.state&&this.$PublicLiveMapVideoPlayer2.state.playerAPI)return this.$PublicLiveMapVideoPlayer2.state.playerAPI;return null;};m.prototype.$PublicLiveMapVideoPlayer5=function(){if(this.$PublicLiveMapVideoPlayer3){this.$PublicLiveMapVideoPlayer3=false;this.props.onVideoUnloaded&&this.props.onVideoUnloaded();}};m.defaultProps={onVideoLoaded:function n(){}};f.exports=m;}),null);
__d('LiveMapSidebarVideo.react',['cx','EventListener','Link.react','LiveMapClickEventLogger','LiveMapExperiments','PublicLiveMapActions','PublicLiveMapVideoPlayer.react','React','TextWithEntities.react','VideoPlayerExperiments','VideoPlayerLoggerSource','VideoPlayerReason','VideoPlayerStates','XUIText.react','debounce','shallowCompare'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;function k(l){j.constructor.call(this,l);this.$LiveMapSidebarVideo23=function(){var n=this.$LiveMapSidebarVideo3;if(n==null||this.$LiveMapSidebarVideo5!=null||this.$LiveMapSidebarVideo13||this.$LiveMapSidebarVideo14)return;this.$LiveMapSidebarVideo5=n.addListener('clickVideo',this.$LiveMapSidebarVideo24);}.bind(this);this.$LiveMapSidebarVideo16=function(){this.$LiveMapSidebarVideo18();}.bind(this);this.$LiveMapSidebarVideo25=function(n){this.$LiveMapSidebarVideo3=n;if(this.props.onPlayerLoaded)this.props.onPlayerLoaded(n);if(!(this.props.volume>0))this.$LiveMapSidebarVideo26();if(this.$LiveMapSidebarVideo4!=null)this.$LiveMapSidebarVideo20();if(this.props.volume>0)this.$LiveMapSidebarVideo27(this.props.volume);if(this.props.mute){this.$LiveMapSidebarVideo19();}else this.$LiveMapSidebarVideo20();this.$LiveMapSidebarVideo23();this.$LiveMapSidebarVideo6=n.addListener('VideoChannelController/enterChannel',function(){this.$LiveMapSidebarVideo13=true;this.$LiveMapSidebarVideo17();}.bind(this));this.$LiveMapSidebarVideo7=n.addListener('VideoChannelController/exitChannel',function(){this.$LiveMapSidebarVideo13=false;if(this.state.nowPlaying!=this.props.nowPlaying)this.setState({nowPlaying:this.props.nowPlaying});this.$LiveMapSidebarVideo23();}.bind(this));this.$LiveMapSidebarVideo8=n.addListener('beginPlayback',this.$LiveMapSidebarVideo23);this.$LiveMapSidebarVideo9=n.addListener('finishPlayback',this.$LiveMapSidebarVideo28.bind(this));this.$LiveMapSidebarVideo11=n.addListener('stateChange',this.$LiveMapSidebarVideo29.bind(this));this.$LiveMapSidebarVideo10=n.addListener('toggleFullscreen',function(){if(n.isFullscreen()){this.$LiveMapSidebarVideo14=true;this.$LiveMapSidebarVideo17();}else{this.$LiveMapSidebarVideo14=false;this.$LiveMapSidebarVideo23();}}.bind(this));this.$LiveMapSidebarVideo12=n.addListener('volume',function(o){var p=o.level;c('PublicLiveMapActions').updateControllerVolume(p);});this.$LiveMapSidebarVideo15=true;}.bind(this);this.$LiveMapSidebarVideo30=function(){this.$LiveMapSidebarVideo3=null;if(this.props.onPlayerUnloaded)this.props.onPlayerUnloaded();}.bind(this);this.$LiveMapSidebarVideo24=function(){c('PublicLiveMapActions').openChannelPlayerForSidebarVideo();this.$LiveMapSidebarVideo31({videoID:this.props.nowPlaying.videoID,viewerCount:this.props.nowPlaying.viewerCount});}.bind(this);this.$LiveMapSidebarVideo32=function(){c('PublicLiveMapActions').setNowPlayingFromChannelVideo({video:this.props.nowPlaying,previous:true});}.bind(this);this.$LiveMapSidebarVideo33=function(){c('PublicLiveMapActions').setNowPlayingFromChannelVideo({video:this.props.nowPlaying});}.bind(this);this.$LiveMapSidebarVideo34=function(n){this.$LiveMapSidebarVideo1=n;}.bind(this);this.state={videoContainerDimension:null,nowPlaying:l.nowPlaying};this.$LiveMapSidebarVideo3=null;this.$LiveMapSidebarVideo4=null;this.$LiveMapSidebarVideo13=false;this.$LiveMapSidebarVideo14=false;this.$LiveMapSidebarVideo15=false;var m=this;m.$LiveMapSidebarVideo16=c('debounce')(this.$LiveMapSidebarVideo16,300);}k.prototype.shouldComponentUpdate=function(l,m){return c('shallowCompare')(this,l,m);};k.prototype.componentWillMount=function(){this.$LiveMapSidebarVideo2=c('EventListener').listen(window,'resize',this.$LiveMapSidebarVideo16);};k.prototype.componentWillUnmount=function(){if(this.$LiveMapSidebarVideo2!=null)this.$LiveMapSidebarVideo2.remove();this.$LiveMapSidebarVideo17();if(this.$LiveMapSidebarVideo6!=null)this.$LiveMapSidebarVideo6.remove();if(this.$LiveMapSidebarVideo7!=null)this.$LiveMapSidebarVideo7.remove();if(this.$LiveMapSidebarVideo8!=null)this.$LiveMapSidebarVideo8.remove();if(this.$LiveMapSidebarVideo9!=null)this.$LiveMapSidebarVideo9.remove();if(this.$LiveMapSidebarVideo10!=null)this.$LiveMapSidebarVideo10.remove();if(this.$LiveMapSidebarVideo12!=null)this.$LiveMapSidebarVideo12.remove();};k.prototype.componentDidMount=function(){this.$LiveMapSidebarVideo18();};k.prototype.componentWillReceiveProps=function(l){if(this.props.nowPlaying!==l.nowPlaying)if(this.$LiveMapSidebarVideo13!=true)this.setState({nowPlaying:l.nowPlaying});if(this.props.mute!==l.mute)if(l.mute){this.$LiveMapSidebarVideo19();}else this.$LiveMapSidebarVideo20();if(c('VideoPlayerExperiments').liveMapAbortLoading&&this.props.abortedLoading!==l.abortedLoading)if(l.abortedLoading){this.$LiveMapSidebarVideo21();}else this.$LiveMapSidebarVideo22();};k.prototype.componentWillUpdate=function(l,m){if(this.state.nowPlaying!==m.nowPlaying)this.$LiveMapSidebarVideo17();};k.prototype.$LiveMapSidebarVideo17=function(){if(this.$LiveMapSidebarVideo5!=null){this.$LiveMapSidebarVideo5.remove();this.$LiveMapSidebarVideo5=null;}};k.prototype.$LiveMapSidebarVideo18=function(){if(this.$LiveMapSidebarVideo1==null)return;this.setState({videoContainerDimension:this.$LiveMapSidebarVideo1.offsetWidth});};k.prototype.$LiveMapSidebarVideo28=function(){var l=5000;this.$LiveMapSidebarVideo17();setTimeout(c('PublicLiveMapActions').replaceCompletedChannelVideo,l);};k.prototype.$LiveMapSidebarVideo29=function(){if(this.$LiveMapSidebarVideo3&&this.$LiveMapSidebarVideo3.isState(c('VideoPlayerStates').FALLBACK))this.$LiveMapSidebarVideo17();};k.prototype.$LiveMapSidebarVideo31=function(l){c('LiveMapClickEventLogger').logSidebarPlayerClickEvent(l);};k.prototype.$LiveMapSidebarVideo26=function(){this.$LiveMapSidebarVideo27(0);};k.prototype.$LiveMapSidebarVideo27=function(l){var m=this.$LiveMapSidebarVideo3;if(m==null)return;m.setVolume(l);};k.prototype.$LiveMapSidebarVideo19=function(){var l=this.$LiveMapSidebarVideo3;if(l==null||this.$LiveMapSidebarVideo4!=null)return;this.$LiveMapSidebarVideo4=l.getVolume();l.setVolume(0);};k.prototype.$LiveMapSidebarVideo20=function(){if(this.$LiveMapSidebarVideo3==null||this.$LiveMapSidebarVideo4==null)return;this.$LiveMapSidebarVideo3.setVolume(this.$LiveMapSidebarVideo4);this.$LiveMapSidebarVideo4=null;};k.prototype.$LiveMapSidebarVideo21=function(){var l=this.$LiveMapSidebarVideo3;if(l){l.pause(c('VideoPlayerReason').VIDEO_DATA_SWITCH);l.abortLoading();}};k.prototype.$LiveMapSidebarVideo22=function(){var l=this.$LiveMapSidebarVideo3;if(l)l.play(c('VideoPlayerReason').VIDEO_DATA_SWITCH);};k.prototype.render=function(){var l=this.state.nowPlaying,m=this.props.abortedLoading,n=false;if(!this.$LiveMapSidebarVideo15&&m)n=true;var o=null;if(l.message)o=c('React').createElement(c('TextWithEntities.react'),{text:l.message,ranges:l.messageRanges,renderEmoticons:true,renderEmoji:true});var p=null,q=l.height/l.width,r=this.state.videoContainerDimension||0,s=q<1?parseInt(r*q,10):r;if(this.state.videoContainerDimension!=null&&!n)p=c('React').createElement(c('PublicLiveMapVideoPlayer.react'),{videoID:l.videoID,videoWidth:this.state.videoContainerDimension,videoHeight:s,videoPlayerSource:c('VideoPlayerLoggerSource').LIVE_MAP_SIDEBAR,onVideoLoaded:this.$LiveMapSidebarVideo25,onVideoUnloaded:this.$LiveMapSidebarVideo30,showControls:true});var t=null,u=null;if(this.props.showNextPrevArrows){t=c('React').createElement('a',{className:"_7nu",onClick:this.$LiveMapSidebarVideo32,role:'button',tabIndex:'0'});u=c('React').createElement('a',{className:"_7nv",onClick:this.$LiveMapSidebarVideo33,role:'button',tabIndex:'0'});}var v=null;if(this.props.closeVideo!=null)v=c('React').createElement('a',{className:"_5nl0",onClick:this.props.closeVideo,role:'button',tabIndex:'0'});var w=c('React').createElement('div',{className:"_7nt"},t,u,v);return c('React').createElement('div',{className:"_7sj"},c('React').createElement('div',{className:"_7ns",style:{height:s+'px'}},c('React').createElement('div',{ref:this.$LiveMapSidebarVideo34,className:"_2rv2"},p),w),c('React').createElement('div',{className:"_7sk _328h"},c('React').createElement(c('Link.react'),{href:l.url},l.name)),c('React').createElement('div',{className:"_8r9 _328h"},c('React').createElement(c('XUIText.react'),null,l.publisherCategory)),c('React').createElement('div',{className:"_7sp"},o));};f.exports=k;}),null);
__d('LiveMapSidebarVideoContainer.react',['FluxContainer','LiveMapClickEventLogger','LiveMapSidebarVideo.react','PublicLiveMapDispatcher','PublicLiveMapActions','PublicLiveMapStore','React'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;function j(k){i.constructor.call(this,k);c('PublicLiveMapDispatcher').explicitlyRegisterStores([c('PublicLiveMapStore')]);}j.getStores=function(){return [c('PublicLiveMapStore')];};j.calculateState=function(k,l){var m=void 0;m=c('PublicLiveMapStore').getSidebarNowPlaying();var n=c('PublicLiveMapStore').getPlayerVolume(),o=c('PublicLiveMapStore').getActiveStream(),p=c('PublicLiveMapStore').getChannelPlayerOpenVideoID(),q=p!=null&&m!=null&&m.videoID!==p,r=o!=null&&m!=null&&o.videoID!==m.videoID,s=q||r||c('PublicLiveMapStore').getActiveSidebarStream()!=null,t=q||r;return {nowPlaying:m,mute:s,volume:n,abortedLoading:t};};j.prototype.$LiveMapSidebarVideoContainer1=function(k){c('PublicLiveMapActions').setSidebarVideoPlayerController(k);};j.prototype.$LiveMapSidebarVideoContainer2=function(){c('PublicLiveMapActions').setSidebarVideoPlayerController(null);};j.prototype.$LiveMapSidebarVideoContainer3=function(){c('PublicLiveMapActions').setNowPlayingInSidebar(null);c('LiveMapClickEventLogger').logCloseSidebarAutoplayVideo();};j.prototype.render=function(){if(!this.state.nowPlaying)return null;var k={nowPlaying:this.state.nowPlaying,onPlayerLoaded:this.$LiveMapSidebarVideoContainer1,onPlayerUnloaded:this.$LiveMapSidebarVideoContainer2,mute:this.state.mute,abortedLoading:this.state.abortedLoading,showNextPrevArrows:this.props.showNextPrevArrows,closeVideo:this.$LiveMapSidebarVideoContainer3,volume:this.state.volume};return c('React').createElement(c('LiveMapSidebarVideo.react'),k);};f.exports=c('FluxContainer').create(j,{withProps:true});}),null);
__d('LiveMapSidebar.react',['cx','fbt','EventListener','Link.react','LiveMapClickEventLogger','LiveMapExperiments','LiveMapSidebarListContainer.react','LiveMapSidebarVideoContainer.react','PublicLiveMapActions','PublicLiveMapConstants','React','debounce'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;function l(){if(!c('LiveMapExperiments').gridview)return null;var n=function o(){c('PublicLiveMapActions').setNowPlayingInSidebar(null);c('PublicLiveMapActions').setViewMode(c('PublicLiveMapConstants').VIEW_MODE.LIST_VIEW);c('LiveMapClickEventLogger').logViewChangeFromMapSidebarLink();};return (c('React').createElement(c('Link.react'),{onClick:n,className:"_3b6"+(' '+"clearfix")},i._("Rio 2016")));}j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.$LiveMapSidebar2=c('debounce')(function(){var s=this.refs.sidebar;if(!s)return;var t={x:s.offsetWidth,y:s.offsetHeight};c('PublicLiveMapActions').setSidebarElement(t);}.bind(this)),o;}m.prototype.componentDidMount=function(){this.$LiveMapSidebar1=c('EventListener').listen(window,'resize',this.$LiveMapSidebar2);var n=this.refs.sidebar;if(!n)return;var o={x:n.offsetWidth,y:n.offsetHeight};c('PublicLiveMapActions').setSidebarElement(o);};m.prototype.componentWillUncount=function(){this.$LiveMapSidebar1&&this.$LiveMapSidebar1.remove();};m.prototype.render=function(){var n=void 0,o=false,p=null;n=c('React').createElement(c('LiveMapSidebarListContainer.react'),null);var q=c('LiveMapExperiments').webgl?"_4uwp":'';return (c('React').createElement('div',{className:q,ref:'sidebar'},c('React').createElement('div',{className:"_7si"},c('React').createElement('div',{className:"_27ce"},c('React').createElement('div',{className:"_328i"},c('React').createElement('div',{className:"_7sr clearfix"},i._("Live videos"),l()),c('React').createElement(c('LiveMapSidebarVideoContainer.react'),{showNextPrevArrows:o})),n,c('React').createElement('div',{className:"_1elp"})),p)));};f.exports=m;}),null);
__d('LiveMapSpecialEventKey.react',['cx','fbt','ix','Image.react','React'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k=j('/images/live_map/ELECTIONS_20-2x.png');function l(m){if(!m.shown)return null;return (c('React').createElement('span',{className:"_2fzx"},c('React').createElement(c('Image.react'),{src:k,height:'20',width:'20'}),i._("#50lives50states")));}f.exports=l;}),null);
__d('LiveMapSpecialEventKeyContainer.react',['FluxContainer','LiveMapSpecialEventKey.react','PublicLiveMapStore','React'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;function j(k){i.constructor.call(this,k);}j.getStores=function(){return [c('PublicLiveMapStore')];};j.calculateState=function(k){var l=!!c('PublicLiveMapStore').getSpecialEventForMapCache().size;return {shown:l};};j.prototype.render=function(){return c('React').createElement(c('LiveMapSpecialEventKey.react'),this.state);};f.exports=c('FluxContainer').create(j);}),null);
__d('LiveMapGLStyleConstants',[],(function a(b,c,d,e,f,g){'use strict';f.exports={SOURCE_NAMES:{COMPOSITE:'composite'},FONTS:{DEFAULT:{REGULAR:'Noto Sans Regular',SEMIBOLD:'Noto Sans Bold',BOLD:'Noto Sans Bold',ITALIC:'Noto Sans Italic'},ja_JP:{REGULAR:'Noto Sans CJK JP Regular',SEMIBOLD:'Noto Sans CJK JP Bold',BOLD:'Noto Sans CJK JP Bold',ITALIC:'Noto Sans CJK JP Thin'},ko_KR:{REGULAR:'Noto Sans CJK KR Regular',SEMIBOLD:'Noto Sans CJK KR Bold',BOLD:'Noto Sans CJK KR Bold',ITALIC:'Noto Sans CJK KR Thin'}},COLORS:{WATER_FILL:'#eff0f1',LAND_FILL:'#cfd1d5',STATE_BORDER:'#adb1b8',COUNTRY_BORDER:'#adb1b8',PLACE_LABEL:'hsla(0, 0, 50%, 1)',OCEAN_LABEL:'#666'}};}),null);
__d('LiveMapGLLabelStyle',['LiveMapGLStyleConstants','CurrentLocale'],(function a(b,c,d,e,f,g){'use strict';var h=c('CurrentLocale').get(),i=c('LiveMapGLStyleConstants').FONTS[h]||c('LiveMapGLStyleConstants').FONTS.DEFAULT,j={id:'ocean-labels',type:'symbol',source:c('LiveMapGLStyleConstants').SOURCE_NAMES.COMPOSITE,'source-layer':'ocean-labels',interactive:true,layout:{'text-font':[i.SEMIBOLD],'text-field':'{display_name}','text-max-width':7,'text-line-height':1.5,'text-letter-spacing':.25,'symbol-placement':'point','text-size':{base:1,stops:[[1,12],[4,30]]}},paint:{'text-color':c('LiveMapGLStyleConstants').COLORS.OCEAN_LABEL,'text-opacity':.25}},k={id:'city-labels',type:'symbol',source:c('LiveMapGLStyleConstants').SOURCE_NAMES.COMPOSITE,'source-layer':'placenames-city',minzoom:4,maxzoom:16,interactive:true,filter:['==','place','city'],layout:{'text-field':'{display_name}','text-font':[i.REGULAR],'text-max-width':15,'text-transform':'none','text-anchor':{base:1,stops:[[0,'top'],[6,'center']]},'text-size':{stops:[[4,12],[10,18]],base:.9}},paint:{'text-color':c('LiveMapGLStyleConstants').COLORS.PLACE_LABEL}},l={id:'village-labels',type:'symbol',source:c('LiveMapGLStyleConstants').SOURCE_NAMES.COMPOSITE,'source-layer':'placenames-small',minzoom:8,maxzoom:16,interactive:true,filter:['==','place','village'],layout:{'text-field':'{display_name}','text-font':[i.REGULAR],'text-max-width':10,'text-anchor':{base:1,stops:[[0,'top'],[6,'center']]},'text-size':{stops:[[6,10],[14,10]]}},paint:{'text-color':c('LiveMapGLStyleConstants').COLORS.PLACE_LABEL}},m={id:'town-labels',type:'symbol',source:c('LiveMapGLStyleConstants').SOURCE_NAMES.COMPOSITE,'source-layer':'placenames-city',minzoom:6,maxzoom:16,interactive:true,filter:['==','place','town'],layout:{'text-field':'{display_name}','text-font':[i.REGULAR],'text-max-width':10,'text-anchor':{base:1,stops:[[0,'bottom'],[6,'center']]},'text-size':{stops:[[5,11],[12,11]],base:.9}},paint:{'text-color':c('LiveMapGLStyleConstants').COLORS.PLACE_LABEL}},n={id:'state-label',type:'symbol',source:c('LiveMapGLStyleConstants').SOURCE_NAMES.COMPOSITE,'source-layer':'placenames-state',minzoom:4,maxzoom:7,interactive:true,layout:{'text-transform':'uppercase','text-field':'{display_name}','text-font':[i.REGULAR],'text-letter-spacing':.15,'text-max-width':7,'text-size':{base:1,stops:[[4,9],[7,18]]}},paint:{'text-color':c('LiveMapGLStyleConstants').COLORS.PLACE_LABEL,'text-opacity':{base:1,stops:[[0,0],[3,0],[5,.75]]}},filter:['in','is_in:country_code','US','CA']},o={id:'country-label',type:'symbol',source:c('LiveMapGLStyleConstants').SOURCE_NAMES.COMPOSITE,'source-layer':'country-labels',minzoom:3,maxzoom:12,interactive:true,layout:{'text-field':'{display_name}','text-font':[i.REGULAR],'text-max-width':6,'text-size':{stops:[[1,9],[5,18]],base:.9},'text-transform':'none'},paint:{'text-color':c('LiveMapGLStyleConstants').COLORS.PLACE_LABEL,'text-opacity':{base:1,stops:[[0,0],[2,0],[3,.75]]}}};f.exports={oceanLabels:j,townLabels:m,villageLabels:l,cityLabels:k,stateLabels:n,countryLabels:o};}),null);
__d('LiveMapGLLightGreyStyle',['CurrentLocale','TilesVectorMapConfig','VectorMapTileSet'],(function a(b,c,d,e,f,g){'use strict';var h,i=c('TilesVectorMapConfig').URL_TEMPLATE.replace('{tile_set}',''+c('VectorMapTileSet').LIVE_MAP).replace('{version}',''+c('TilesVectorMapConfig').LIVE_MAP_VECTOR_VERSION)+'&language='+c('CurrentLocale').get(),j=c('TilesVectorMapConfig').FONT_URL_TEMPLATE,k='Open Sans Regular',l='Open Sans Semibold',m='Open Sans Italic',n='composite',o='hsla(0, 0, 50%, 1)',p=[],q={id:'background',type:'background',interactive:true,layout:{},paint:{'background-color':'#cfd1d5'}},r={id:'waterway',type:'line',source:n,'source-layer':'waterway',interactive:true,filter:['all',['==','$type','LineString'],['in','class','canal','river']],paint:{'line-color':'#eff0f1','line-width':{base:1,stops:[[6,.25],[20,6]]},'line-opacity':.5}},s={id:'waterway_stream',type:'line',source:n,'source-layer':'waterway',interactive:true,filter:['all',['==','$type','LineString'],['==','class','stream']],paint:{'line-color':'#EFF0F1','line-width':{base:1,stops:[[20,4],[22,.75]]},'line-opacity':.5}},t={id:'water',type:'fill',source:n,'source-layer':'water',interactive:true,layout:{},paint:{'fill-color':'#eff0f1','fill-opacity':1,'fill-outline-color':'hsla(0, 0%, 0%, 0)'}},u={id:'admin_level_3',type:'line',source:n,'source-layer':'admin',interactive:true,filter:['all',['==','maritime',0],['>=','admin_level',3]],layout:{'line-join':'bevel'},paint:{'line-width':{base:1,stops:[[3,.5],[10,3]]},'line-opacity':{base:1,stops:[[0,.1],[3,.2],[8,.1]]},'line-color':'#5f6673','line-dasharray':[1,0]}},v={id:'admin_level_3_maritime',type:'line',source:n,'source-layer':'admin',interactive:true,filter:['all',['==','maritime',0],['>=','admin_level',3]],layout:{'line-join':'bevel'},paint:{'line-width':{base:1,stops:[[3,.5],[10,3]]},'line-opacity':{base:1,stops:[[0,.1],[3,.2],[8,.1]]},'line-color':'#5f6673','line-dasharray':[1,0]}},w={id:'admin_level_2',type:'line',source:n,'source-layer':'admin',interactive:true,filter:['all',['==','admin_level',2],['==','maritime',0],['==','disputed',0]],layout:{'line-join':'miter'},paint:{'line-color':'#5f6673','line-opacity':{base:1,stops:[[0,.1],[3,.2],[8,.1]]},'line-width':{base:1,stops:[[3,.75],[10,5]]}}},x={id:'admin_level_2_disputed',type:'line',source:n,'source-layer':'admin',interactive:true,filter:['all',['==','admin_level',2],['==','maritime',0],['==','disputed',1]],layout:{'line-join':'round','line-cap':'round'},paint:{'line-color':'#5f6673','line-opacity':{base:1,stops:[[0,.1],[3,.2],[8,.1]]},'line-width':{base:1,stops:[[3,.5],[10,3]]},'line-dasharray':[1,1.5]}},y={id:'admin_level_2_maritime',type:'line',source:n,'source-layer':'admin',interactive:true,filter:['all',['==','admin_level',2],['==','maritime',1],['==','disputed',0]],layout:{'line-join':'round','line-cap':'round'},paint:{'line-color':'#5f6673','line-opacity':{base:1,stops:[[0,.1],[3,.2],[8,.1]]},'line-width':{base:1,stops:[[3,.5],[10,3]]},'line-dasharray':[0,0]}},z={id:'waterway-label',type:'symbol',source:n,'source-layer':'waterway_label',minzoom:12,interactive:true,filter:['==','class','river'],layout:{'text-font':[m],visibility:'visible','symbol-placement':'line','text-field':'{name_en}','text-size':{base:1,stops:[[13,12],[18,16]]}},paint:{'text-color':'#929292','text-opacity':0}},aa={id:'water-label',type:'symbol',source:n,'source-layer':'water_label',minzoom:5,interactive:true,layout:{'text-font':[m],'text-field':'{name_en}','text-max-width':7,'text-size':{base:1,stops:[[13,12],[18,16]]}},paint:{'text-color':'#929292'}},ba={id:'place_label_neighborhood',type:'symbol',source:n,'source-layer':'place_label',minzoom:12,interactive:true,filter:['all',['==','$type','Point'],['in','type','neighbourhood','suburb']],layout:{'text-field':'{name_en}','text-font':[m],'text-max-width':7,'text-letter-spacing':.1,'text-transform':'uppercase','text-size':{stops:[[12,10],[16,10]]}},paint:{'text-color':o,'text-opacity':{base:1,stops:[[0,0],[12,.66],[13,1]]}}},ca={id:'place_label_other',type:'symbol',source:n,'source-layer':'place_label',minzoom:8,interactive:true,filter:['in','type','hamlet','suburb','neighbourhood','island','islet'],layout:{'text-field':'{name_en}','text-font':[m],'text-max-width':15,'text-size':{stops:[[6,10],[12,10]]}},paint:{'text-color':o}},da={id:'place_label_village',type:'symbol',source:n,'source-layer':'place_label',maxzoom:16,interactive:true,filter:['==','type','village'],layout:{'text-field':{base:1,stops:[[0,'{name_en}'],[22,'{name_en}']]},'text-font':[k],'text-max-width':10,'text-anchor':{base:1,stops:[[0,'top'],[6,'center']]},'text-size':{stops:[[6,10],[14,10]]}},paint:{'text-color':o}},ea={id:'place_label_town',type:'symbol',source:n,'source-layer':'place_label',maxzoom:16,interactive:true,filter:['==','type','town'],layout:{'text-field':'{name_en}','text-font':[k],'text-max-width':10,'text-anchor':{base:1,stops:[[0,'bottom'],[6,'center']]},'text-size':{stops:[[5,11],[12,11]],base:.9}},paint:{'text-color':o}},fa={id:'place_label_city',type:'symbol',source:n,'source-layer':'place_label',maxzoom:16,interactive:true,filter:['==','type','city'],layout:{'text-field':'{name_en}','text-font':[k],'text-max-width':15,'text-transform':'none','text-anchor':{base:1,stops:[[0,'top'],[6,'center']]},'text-size':{stops:[[4,12],[10,18]],base:.9}},paint:{'text-color':o}},ga={id:'marine_label_point_other',type:'symbol',source:n,'source-layer':'marine_label',interactive:true,filter:['all',['==','$type','Point'],['in','labelrank',4,5,6]],layout:{'text-max-width':8,visibility:'visible','symbol-placement':'point','text-field':'{name_en}','text-line-height':1.2,'text-letter-spacing':.1,'text-font':[k],'text-size':{base:1,stops:[[4,12],[6,16]]}},paint:{'text-color':'#666','text-opacity':.25}},ha={id:'marine_label_point_3',type:'symbol',source:n,'source-layer':'marine_label',interactive:true,filter:['all',['==','$type','Point'],['==','labelrank',3]],layout:{'text-max-width':8,visibility:'visible','symbol-placement':'point','text-field':'{name_en}','text-line-height':1.3,'text-letter-spacing':.1,'text-font':[l],'text-size':{base:1,stops:[[3,13],[5,18]]}},paint:{'text-color':'#666','text-opacity':.25}},ia={id:'marine_label_point_2',type:'symbol',source:n,'source-layer':'marine_label',interactive:true,filter:['all',['==','$type','Point'],['==','labelrank',2]],layout:{'text-max-width':8,visibility:'visible','symbol-placement':'point','text-field':'{name_en}','text-line-height':1.2,'text-letter-spacing':0,'text-font':[l],'text-size':{base:1,stops:[[3,14],[5,24]]}},paint:{'text-color':'#666','text-opacity':.25}},ja={id:'marine_label_point_1',type:'symbol',source:n,'source-layer':'marine_label',interactive:true,filter:['all',['==','$type','Point'],['==','labelrank',1]],layout:{'text-max-width':4,visibility:'visible','symbol-placement':'point','text-field':'{name_en}','text-line-height':1.5,'text-letter-spacing':.25,'text-font':[l],'text-size':{base:1,stops:[[1,12],[4,30]]}},paint:{'text-color':'#666','text-opacity':.25}},ka={id:'marine_label_line_other',type:'symbol',source:n,'source-layer':'marine_label',interactive:true,filter:['all',['==','$type','LineString'],['in','labelrank',4,5,6]],layout:{'text-max-width':15,visibility:'visible','symbol-placement':'line','text-field':'{name_en}','text-line-height':1.2,'text-letter-spacing':0,'text-font':[l],'text-size':{base:1,stops:[[4,12],[6,16]]}},paint:{'text-color':'#666','text-opacity':.25}},la={id:'marine_label_line_3',type:'symbol',source:n,'source-layer':'marine_label',interactive:true,filter:['all',['==','$type','LineString'],['==','labelrank',3]],layout:{'text-max-width':15,visibility:'visible','symbol-placement':'line','text-field':'{name_en}','text-line-height':1.2,'text-letter-spacing':0,'text-font':[l],'text-size':{base:1,stops:[[3,13],[5,18]]}},paint:{'text-color':'#666','text-opacity':.25}},ma={id:'marine_label_line_2',type:'symbol',source:n,'source-layer':'marine_label',interactive:true,filter:['all',['==','$type','LineString'],['==','labelrank',2]],layout:{'text-max-width':15,visibility:'visible','symbol-placement':'line','text-field':'{name_en}','text-line-height':1.2,'text-letter-spacing':0,'text-font':[l],'text-size':{base:1,stops:[[3,14],[5,24]]}},paint:{'text-color':'#666','text-opacity':.25}},na={id:'marine_label_line_1',type:'symbol',source:n,'source-layer':'marine_label',interactive:true,filter:['all',['==','$type','LineString'],['==','labelrank',1]],layout:{'text-max-width':15,visibility:'visible','symbol-placement':'line','text-field':'{name_en}','text-line-height':1.2,'text-letter-spacing':.4,'text-font':[l],'text-size':{base:1,stops:[[3,25],[4,30]]}},paint:{'text-color':'#666','text-opacity':.25}},oa={id:'state-label-sm',type:'symbol',source:n,'source-layer':'state_label',minzoom:5,maxzoom:7,interactive:true,filter:['<','area',80000],layout:{'text-transform':'uppercase',visibility:'visible','text-field':{base:1,stops:[[0,'{abbr}'],[4,'{name_en}']]},'text-font':[k],'text-letter-spacing':.15,'text-max-width':7,'text-size':{base:1,stops:[[4,8],[7,16]]}},paint:{'text-color':o,'text-opacity':{base:1,stops:[[0,0],[3,0],[5,.75]]}}},pa={id:'state-label-lg',type:'symbol',source:n,'source-layer':'state_label',minzoom:5,maxzoom:7,interactive:true,filter:['>=','area',80000],layout:{'text-transform':'uppercase',visibility:'visible','text-field':{base:1,stops:[[0,'{abbr}'],[4,'{name_en}']]},'text-font':[k],'text-letter-spacing':.15,'text-max-width':7,'text-size':{base:1,stops:[[4,9],[7,18]]}},paint:{'text-color':o,'text-opacity':{base:1,stops:[[0,0],[3,0],[5,.75]]}}},qa={id:'country-label-sm',type:'symbol',source:n,'source-layer':'country_label',minzoom:4,maxzoom:10,interactive:true,filter:['>=','scalerank',5],layout:{'text-field':'{name_en}','text-font':[k],'text-max-width':7,'text-size':{stops:[[3,8],[9,18]],base:.9},'text-transform':'none'},paint:{'text-color':o,'text-opacity':{base:1,stops:[[0,0],[2,0],[3,.75]]}}},ra={id:'country-label-md',type:'symbol',source:n,'source-layer':'country_label',minzoom:4,maxzoom:8,interactive:true,filter:['in','scalerank',3,4],layout:{'text-field':{base:1,stops:[[0,'{code}'],[2,'{name_en}']]},'text-font':[k],'text-max-width':7,'text-size':{stops:[[2,8],[7,18]],base:.9},'text-transform':'none'},paint:{'text-color':o,'text-opacity':{base:1,stops:[[0,0],[2,0],[3,.75]]}}},sa={id:'country-label-lg',type:'symbol',source:n,'source-layer':'country_label',minzoom:3,maxzoom:12,interactive:true,filter:['in','scalerank',1,2],layout:{'text-field':'{name_en}','text-font':[k],'text-max-width':6,'text-size':{stops:[[1,9],[5,18]],base:.9},'text-transform':'none'},paint:{'text-color':o,'text-opacity':{base:1,stops:[[0,0],[2,0],[3,.75]]}}};p.push(q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa,ra,sa);var ta={version:8,name:'LightGrey',center:[0,0],zoom:1,bearing:0,pitch:0,sources:(h={},h[n]={type:'vector',tiles:[i],maxzoom:10,minzoom:1,attribution:'<a href="http://www.openstreetmap.org/about/" target="_blank">\u00A9 OpenStreetMap contributors</a>'},h),glyphs:j,layers:p};f.exports=ta;}),null);
__d('LiveMapGLBorderStyle',['LiveMapGLStyleConstants'],(function a(b,c,d,e,f,g){'use strict';var h={id:'stateBorders',type:'line',source:c('LiveMapGLStyleConstants').SOURCE_NAMES.COMPOSITE,'source-layer':'nestates50m-usa-can',interactive:true,minzoom:4,layout:{'line-join':'bevel'},paint:{'line-width':{base:1,stops:[[3,.5],[10,3]]},'line-opacity':1,'line-color':c('LiveMapGLStyleConstants').COLORS.STATE_BORDER,'line-dasharray':{stops:[[0,[1,0]],[5,[1,1]]]}}},i={'line-color':c('LiveMapGLStyleConstants').COLORS.COUNTRY_BORDER,'line-opacity':1,'line-width':{base:1,stops:[[3,.75],[10,5]]}},j={id:'countryBorders',type:'line',source:c('LiveMapGLStyleConstants').SOURCE_NAMES.COMPOSITE,'source-layer':'osm-country-borders',interactive:true,minzoom:3,layout:{'line-join':'miter'},paint:i},k={'line-color':c('LiveMapGLStyleConstants').COLORS.COUNTRY_BORDER,'line-opacity':1,'line-width':1,'line-dasharray':[5,5]},l={id:'disputedCountryBorders',type:'line',source:c('LiveMapGLStyleConstants').SOURCE_NAMES.COMPOSITE,'source-layer':'osm-disputed-country-borders',interactive:true,minzoom:3,layout:{'line-join':'miter'},paint:k};f.exports={stateBorders:h,countryBorders:j,disputedCountryBorders:l};}),null);
__d('LiveMapGLWaterStyle',['LiveMapGLStyleConstants'],(function a(b,c,d,e,f,g){'use strict';var h={id:'ocean-shape',type:'fill',source:c('LiveMapGLStyleConstants').SOURCE_NAMES.COMPOSITE,'source-layer':'ocean-poly',interactive:true,layout:{},paint:{'fill-color':c('LiveMapGLStyleConstants').COLORS.WATER_FILL}},i={id:'lake-shape',type:'fill',source:c('LiveMapGLStyleConstants').SOURCE_NAMES.COMPOSITE,'source-layer':'lake-poly',interactive:true,layout:{},paint:{'fill-color':c('LiveMapGLStyleConstants').COLORS.WATER_FILL}},j={id:'na-lake-shape',type:'fill',source:c('LiveMapGLStyleConstants').SOURCE_NAMES.COMPOSITE,'source-layer':'na-lake-poly',interactive:true,layout:{},paint:{'fill-color':c('LiveMapGLStyleConstants').COLORS.WATER_FILL}},k={id:'eu-lake-shape',type:'fill',source:c('LiveMapGLStyleConstants').SOURCE_NAMES.COMPOSITE,'source-layer':'eu-lake-poly',interactive:true,layout:{},paint:{'fill-color':c('LiveMapGLStyleConstants').COLORS.WATER_FILL}};f.exports={oceanShapefile:h,lakeShapefile:i,naLakeShapefile:j,euLakeShapefile:k};}),null);
__d('LiveMapGLMapStyle',['LiveMapGLStyleConstants','LiveMapGLWaterStyle','LiveMapGLLabelStyle','LiveMapGLBorderStyle','CurrentLocale','TilesVectorMapConfig','VectorMapTileSet','URI'],(function a(b,c,d,e,f,g){'use strict';var h,i=10,j=1,k=new (c('URI'))(c('TilesVectorMapConfig').URL_TEMPLATE.replace('{tile_set}',''+c('VectorMapTileSet').LIVE_MAP).replace('{version}',''+c('TilesVectorMapConfig').LIVE_MAP_VECTOR_VERSION));k.addQueryData({language:c('CurrentLocale').get()});var l=k.toString(),m=c('TilesVectorMapConfig').FONT_URL_TEMPLATE,n={id:'background',type:'background',interactive:true,layout:{},paint:{'background-color':c('LiveMapGLStyleConstants').COLORS.WATER_FILL}},o={id:'world-land',type:'fill',source:c('LiveMapGLStyleConstants').SOURCE_NAMES.COMPOSITE,'source-layer':'world',interactive:true,layout:{},paint:{'fill-color':c('LiveMapGLStyleConstants').COLORS.LAND_FILL}},p=[n,o,c('LiveMapGLBorderStyle').disputedCountryBorders,c('LiveMapGLBorderStyle').countryBorders,c('LiveMapGLBorderStyle').stateBorders,c('LiveMapGLWaterStyle').oceanShapefile,c('LiveMapGLWaterStyle').lakeShapefile,c('LiveMapGLWaterStyle').naLakeShapefile,c('LiveMapGLWaterStyle').euLakeShapefile,c('LiveMapGLLabelStyle').villageLabels,c('LiveMapGLLabelStyle').townLabels,c('LiveMapGLLabelStyle').cityLabels,c('LiveMapGLLabelStyle').stateLabels,c('LiveMapGLLabelStyle').countryLabels],q='<a href="http://www.openstreetmap.org/about/" target="_blank">\u00A9 OpenStreetMap contributors</a>',r={version:8,name:'LightGrey',center:[0,0],zoom:1,bearing:0,pitch:0,sources:(h={},h[c('LiveMapGLStyleConstants').SOURCE_NAMES.COMPOSITE]={type:'vector',tiles:[l],maxzoom:i,minzoom:j,attribution:q},h),glyphs:m,layers:p};f.exports=r;}),null);
__d('LiveMapMapboxLayers',['PublicLiveMapConfig'],(function a(b,c,d,e,f,g){'use strict';var h='rgb(53, 120, 229)',i=.8,j=.25,k='#1c4f8c',l={ONE:{iconSize:6,animationMax:12},TWO:{iconSize:8,animationMax:18},THREE:{iconSize:10,animationMax:24},FOUR:{iconSize:12,animationMax:36}},m={normalLayers:{layer0:{id:'layer0',type:'circle',source:'videos',minzoom:4,paint:{'circle-radius':4,'circle-color':h,'circle-opacity':i},filter:['<','viewer_count',20]},layer1:{id:'layer1',type:'circle',source:'videos',minzoom:3,paint:{'circle-radius':4,'circle-color':h,'circle-opacity':i},filter:['all',['>=','viewer_count',20],['<','viewer_count',40]]},layer2:{id:'layer2',type:'circle',source:'videos',paint:{'circle-radius':4,'circle-color':h,'circle-opacity':i},filter:['all',['>=','viewer_count',40],['<','viewer_count',c('PublicLiveMapConfig').popularity_levels.level_1]]},popular1:{id:'popular1',type:'circle',source:'videos',paint:{'circle-radius':l.ONE.iconSize,'circle-color':h,'circle-opacity':i},filter:['all',['>=','viewer_count',c('PublicLiveMapConfig').popularity_levels.level_1],['<','viewer_count',c('PublicLiveMapConfig').popularity_levels.level_2]]},popular2:{id:'popular2',type:'circle',source:'videos',paint:{'circle-radius':l.TWO.iconSize,'circle-color':h,'circle-opacity':i},filter:['all',['>=','viewer_count',c('PublicLiveMapConfig').popularity_levels.level_2],['<','viewer_count',c('PublicLiveMapConfig').popularity_levels.level_3]]},popular3:{id:'popular3',type:'circle',source:'videos',paint:{'circle-radius':l.THREE.iconSize,'circle-color':h,'circle-opacity':i},filter:['all',['>=','viewer_count',c('PublicLiveMapConfig').popularity_levels.level_3],['<','viewer_count',c('PublicLiveMapConfig').popularity_levels.level_4]]},popular4:{id:'popular4',type:'circle',source:'videos',paint:{'circle-radius':l.FOUR.iconSize,'circle-color':h,'circle-opacity':i},filter:['all',['>=','viewer_count',c('PublicLiveMapConfig').popularity_levels.level_4]]},viewerLines:{id:'viewerLines',type:'line',source:'viewers',layout:{'line-cap':'round','line-join':'round'},paint:{'line-width':1,'line-color':k,'line-opacity':.5}}},animationLayers:{popular1Animated:{id:'popular1Animated',type:'circle',source:'videos',paint:{'circle-radius':l.ONE.animationMax,'circle-color':h,'circle-opacity':j},filter:['all',['!=','stream_id',''],['>=','viewer_count',c('PublicLiveMapConfig').popularity_levels.level_1],['<','viewer_count',c('PublicLiveMapConfig').popularity_levels.level_2]],metadata:{'base-radius':l.ONE.animationMax,delay:0,duration:4000}},popular2Animated:{id:'popular2Animated',type:'circle',source:'videos',paint:{'circle-radius':l.TWO.animationMax,'circle-color':h,'circle-opacity':j},filter:['all',['!=','stream_id',''],['>=','viewer_count',c('PublicLiveMapConfig').popularity_levels.level_2],['<','viewer_count',c('PublicLiveMapConfig').popularity_levels.level_3]],metadata:{'base-radius':l.TWO.animationMax,delay:800,duration:4200}},popular3Animated:{id:'popular3Animated',type:'circle',source:'videos',paint:{'circle-radius':l.THREE.animationMax,'circle-color':h,'circle-opacity':j},filter:['all',['!=','stream_id',''],['>=','viewer_count',c('PublicLiveMapConfig').popularity_levels.level_3],['<','viewer_count',c('PublicLiveMapConfig').popularity_levels.level_4]],metadata:{'base-radius':l.THREE.animationMax,delay:1500,duration:4500}},popular4Animated:{id:'popular4Animated',type:'circle',source:'videos',paint:{'circle-radius':l.FOUR.animationMax,'circle-color':h,'circle-opacity':j},filter:['all',['!=','stream_id',''],['>=','viewer_count',c('PublicLiveMapConfig').popularity_levels.level_4]],metadata:{'base-radius':l.FOUR.animationMax,delay:500,duration:5000}}},highlightLayers:{activeStream:{id:'activeStream',type:'circle',source:'videos',paint:{'circle-radius':10,'circle-color':k,'circle-opacity':1},filter:['all',['==','stream_id','']]}}};f.exports=m;}),null);
__d("XLiveMapReportAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ajax\/livemap\/map\/report\/",{});}),null);
__d('PublicLiveMapReportForm.react',['ix','cx','fbt','AsyncRequest','Image.react','LoadingIndicator.react','React','XLiveMapReportAsyncController','XUIDialogTitle.react','XUIDialogBody.react','XUIDialogFooter.react','XUIDialogCancelButton.react','XUIDialogButton.react','XUITextInput.react','XUISelector.react','fbglyph'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('XUISelector.react').Option;k=babelHelpers.inherits(n,c('React').Component);l=k&&k.prototype;function n(o){l.constructor.call(this,o);this.state={issue:'borders',input:'',isSending:false,hasReport:false};}n.prototype.resetForm=function(){this.setState({issue:'borders',input:'',isSending:false,hasReport:false});};n.prototype.$PublicLiveMapReportForm1=function(event){this.setState({issue:event.value});};n.prototype.$PublicLiveMapReportForm2=function(event){this.setState({input:event.target.value});};n.prototype.$PublicLiveMapReportForm3=function(o){o.preventDefault();o.stopPropagation();var p=c('XLiveMapReportAsyncController').getURIBuilder().getURI();this.setState({isSending:true});new (c('AsyncRequest'))().setURI(p).setMethod('POST').setData({category:this.state.issue,description:this.state.input}).setHandler(function(q){this.setState({isSending:false,hasReport:true});}.bind(this)).setErrorHandler(function(){this.setState({isSending:false,hasReport:false});}.bind(this)).send();};n.prototype.$PublicLiveMapReportForm4=function(){return (c('React').createElement('div',null,c('React').createElement(c('XUIDialogTitle.react'),null,c('React').createElement('span',null,j._("Sending feedback"))),c('React').createElement(c('XUIDialogBody.react'),{className:"_bsd"},c('React').createElement('div',{className:"_4av- _bse"},c('React').createElement(c('LoadingIndicator.react'),{size:'large',color:'white'})))));};n.prototype.$PublicLiveMapReportForm5=function(){return (c('React').createElement('div',null,c('React').createElement(c('XUIDialogTitle.react'),null,c('React').createElement('span',null,j._("Thank you"))),c('React').createElement(c('XUIDialogBody.react'),{className:"_4aw2"},c('React').createElement('div',{className:"_4av-"},c('React').createElement(c('Image.react'),{src:h("\/images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/checkmark-solid_24_fig-light-20.png")}),c('React').createElement('p',{className:"_3-8w"},j._("Thank you."),c('React').createElement('br',null),j._("Your feedback helps us to improve the Live Map."))))));};n.prototype.$PublicLiveMapReportForm6=function(){return (c('React').createElement('form',{onSubmit:this.$PublicLiveMapReportForm3.bind(this)},c('React').createElement(c('XUIDialogTitle.react'),null,c('React').createElement('span',null,j._("Provide map feedback"))),c('React').createElement(c('XUIDialogBody.react'),{className:"_4aw2"},c('React').createElement('div',{className:"_4av-"},c('React').createElement(c('Image.react'),{src:h("\/images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/report_24_fig-light-20.png")}),c('React').createElement('p',{className:"_3-8w"},j._("Help us to improve the Live Map."),c('React').createElement('br',null),j._("What's the problem with the map?")),c('React').createElement('div',null,c('React').createElement(c('XUISelector.react'),{className:"_4av_",name:'report_form_select',size:'large',value:this.state.issue,onChange:this.$PublicLiveMapReportForm1.bind(this)},c('React').createElement(m,{value:'borders'},j._("Map border is wrong")),c('React').createElement(m,{value:'labels'},j._("Labels are wrong")),c('React').createElement(m,{value:'other'},j._("Other")))),c('React').createElement('div',null,c('React').createElement(c('XUITextInput.react'),{className:"_4aw0",placeholder:j._("Can you tell us more about what needs to be changed?"),maxLength:500,height:'tall',value:this.state.input,onChange:this.$PublicLiveMapReportForm2.bind(this)}))),c('React').createElement('hr',null),c('React').createElement('p',{className:"_4aw1"},j._("Geographic data in Live Map is provided by OpenStreetMap. To report a specific video, go to the video and click \"Report Live Video\"."))),c('React').createElement(c('XUIDialogFooter.react'),null,c('React').createElement(c('XUIDialogCancelButton.react'),null),c('React').createElement(c('XUIDialogButton.react'),{use:'confirm',label:j._("Send"),disabled:!this.state.input.trim()}))));};n.prototype.render=function(){if(!this.state.hasReport){return this.$PublicLiveMapReportForm6();}else if(this.state.isSending){return this.$PublicLiveMapReportForm4();}else return this.$PublicLiveMapReportForm5();};f.exports=n;}),null);
__d('LiveWebGLMap.react',['cx','fbt','CubicBezier','immutable','PublicLiveMapActions','PublicLiveMapConstants','PublicLiveMapVideosFetcher','LiveMapExperiments','LiveMapMapboxLayers','LiveMapViewField','LeafletUtils','React','Link.react','XUIDialog.react','PublicLiveMapEvent','PublicLiveMapReportForm.react','MapboxGLMap.react','MapboxGLDayNight.react','MapboxGLAttribution.react','MapboxGLNavigationControl.react','EventListener','VideoPlayerLoggerSource','PublicLiveMapTooltipController','LiveMapGLLabelStyle','LiveMapGLMapStyle','LiveMapGLLightGreyStyle','turfAlong','turfLineDistance','debounce','throttle','getViewportDimensions','PublicLiveMapInteractionsTypedLogger','pageID'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('LiveMapExperiments').liveMapVectorService?c('LiveMapGLMapStyle'):c('LiveMapGLLightGreyStyle'),m=8,n=/@([-+]?\d+\.?\d*),([-+]?\d+\.?\d*),(\d+\.?\d*)z/i,o=.05,p=1,q=180/p,r=1500;function s(){var ea=c('getViewportDimensions').withoutScrollbars().height;return ea-c('PublicLiveMapConstants').FB_HEADER_HEIGHT;}var t='videos',u=c('immutable').Map({videos:y([]),viewers:y([])}),v=c('immutable').OrderedMap(c('LiveMapMapboxLayers').normalLayers),w=c('immutable').OrderedMap(c('LiveMapMapboxLayers').highlightLayers),x=c('immutable').OrderedMap(c('LiveMapMapboxLayers').animationLayers);function y(ea){return {type:'geojson',data:{type:'FeatureCollection',features:ea}};}function z(ea){return {type:'Feature',geometry:{type:'Point',coordinates:[ea.long,ea.lat]},properties:{stream_id:ea.videoID,viewer_count:ea.viewerCount}};}function aa(ea,fa){var ga={type:'Feature',geometry:{type:'LineString',coordinates:[[fa.long,fa.lat],[ea.longitude,ea.latitude]]},properties:{}},ha=c('turfLineDistance')(ga,'degrees'),ia=[];for(var ja=0;ja<ha;ja+=p){var ka=ja===0?.0001:ja,la=c('turfAlong')(ga,ka,'degrees'),ma=la.geometry.coordinates;ia.push(ma);}var na=c('turfAlong')(ga,ha,'degrees'),oa=na.geometry.coordinates;ia.push(oa);ga.geometry.coordinates=ia.slice(0,1);ga.properties={arc:ia};return ga;}var ba=10;j=babelHelpers.inherits(ca,c('React').Component);k=j&&j.prototype;function ca(ea){k.constructor.call(this,ea);da.call(this);var fa=void 0,ga=3,ha=window.location.hash||'',ia=ha.match(n);if(ia==null){fa=[ea.userLocation.longitude,ea.userLocation.latitude];}else{var ja=parseFloat(ia[1],10),ka=parseFloat(ia[2],10);ga=parseInt(ia[3],10);fa=[ka,ja];}this.$LiveWebGLMap4={minZoom:2,maxZoom:11,center:fa,zoom:ga};}ca.prototype.componentDidMount=function(){this.setState({mapHeight:s()});this.$LiveWebGLMap3=c('EventListener').listen(window,'resize',this.$LiveWebGLMap8);var ea=performance.now();this.$LiveWebGLMap9(ea,ea,0);};ca.prototype.componentWillUnmount=function(){if(this.$LiveWebGLMap3!=null)this.$LiveWebGLMap3.remove();this.$LiveWebGLMap10();if(this.$LiveWebGLMap6!=null)cancelAnimationFrame(this.$LiveWebGLMap6);c('PublicLiveMapActions').setWebGLMap(null);};ca.prototype.$LiveWebGLMap13=function(ea,fa,ga){var ha=ea-fa,ia=ga+ha,ja=ga/r,ka=Math.floor(q*ja),la=ia/r,ma=Math.floor(q*la);if(ma!=ka)this.$LiveWebGLMap14(ma);if(ma<this.$LiveWebGLMap12){this.$LiveWebGLMap11=requestAnimationFrame(function(na){return this.$LiveWebGLMap13(na,ea,ia);}.bind(this));}else this.$LiveWebGLMap6=null;};ca.prototype.$LiveWebGLMap10=function(){if(this.$LiveWebGLMap11!=null)cancelAnimationFrame(this.$LiveWebGLMap11);};ca.prototype.$LiveWebGLMap14=function(ea){var fa=this.state.sources.get('viewers'),ga=fa.data.features;for(var ha=0;ha<ga.length;ha++){var ia=ga[ha],ja=ia.geometry,ka=ia.properties;if(ja==null||ka==null)continue;if(ja.coordinates.length<ea)ja.coordinates=ka.arc.slice(0,ea);}var la=this.state.sources.set('viewers',babelHelpers['extends']({},fa));this.setState({sources:la});};ca.prototype.componentWillReceiveProps=function(ea){var fa,ga=this,ha,ia=this.state,ja=ia.sources,ka=ia.highlightLayers,la=ia.animatedLayers,ma=ia.layers,na=false;if(this.props.allStreams!==ea.allStreams)ja=ja.set('videos',y(ea.allStreams.map(function(oa){return z(oa);}).toArray()));if(this.props.currentViewers!==ea.currentViewers)(function(){var oa=ea.activeStream,pa=[];ga.$LiveWebGLMap12=0;if(oa!=null)ea.currentViewers.forEach(function(qa){var ra=aa(qa,oa),sa=ra.properties;if(sa==null)return;this.$LiveWebGLMap12=Math.max(this.$LiveWebGLMap12,sa.arc.length);pa.push(ra);}.bind(ga));ja=ja.merge(c('immutable').Map({viewers:y(pa)}));na=true;})();if(this.props.activeStream!==ea.activeStream)(function(){var oa=ea.activeStream,pa=oa!=null?oa.videoID:'',qa=oa!=null?.2:.8;ka=ka.map(function(ra){var sa=[].concat(ra.filter);sa[1]=['==','stream_id',pa];return babelHelpers['extends']({},ra,{filter:sa});});la=la.map(function(ra){var sa=[].concat(ra.filter);sa[1]=['!=','stream_id',pa];return babelHelpers['extends']({},ra,{filter:sa});});ma=ma.map(function(ra){if(ra.type!='circle')return ra;return babelHelpers['extends']({},ra,{paint:babelHelpers['extends']({},ra.paint,{'circle-opacity':qa})});});})();if(this.state.sources!==ja||this.state.highlightLayers!=ka||this.state.animatedLayers!=la||this.state.layers!=ma)this.setState({sources:ja,highlightLayers:ka,animatedLayers:la,layers:ma},function(){if(na){var oa=performance.now();this.$LiveWebGLMap13(oa,oa,0);}}.bind(this));};ca.prototype.render=function(){return (c('React').createElement('div',null,this.$LiveWebGLMap15(),this.$LiveWebGLMap16(),this.$LiveWebGLMap17()));};ca.prototype.$LiveWebGLMap16=function(){return (c('React').createElement(c('Link.react'),{className:"_4g4h",ref:this.$LiveWebGLMap18,onClick:this.$LiveWebGLMap19},i._("Map feedback")));};ca.prototype.$LiveWebGLMap17=function(){return (c('React').createElement(c('XUIDialog.react'),{causalElementRef:this.$LiveWebGLMap20,shown:this.state.reportDialogShown,onToggle:this.$LiveWebGLMap21,fixedTopPosition:100,width:425},c('React').createElement(c('PublicLiveMapReportForm.react'),{ref:this.$LiveWebGLMap22})));};ca.prototype.$LiveWebGLMap15=function(){var ea=s(),fa=this.state.animatedLayers.concat(this.state.layers).concat(this.state.highlightLayers);return (c('React').createElement('div',{style:{width:'100%',height:ea+'px'},className:"_3kmv"},c('React').createElement(c('MapboxGLMap.react'),{mapboxStyle:l,style:{position:'absolute',top:0,bottom:0,width:'100%'},options:this.$LiveWebGLMap4,sources:this.state.sources,layers:fa,initialZoom:m,eventHandlers:this.$LiveWebGLMap23,onSourceOrLayerUpdate:this.$LiveWebGLMap24,disablePitch:true,disableRotation:true},c('React').createElement(c('MapboxGLDayNight.react'),{opacity:o,layerBefore:c('LiveMapGLLabelStyle').villageLabels.id}),c('React').createElement(c('MapboxGLAttribution.react'),null),c('React').createElement(c('MapboxGLNavigationControl.react'),{position:'bottom-right'}))));};ca.prototype.$LiveWebGLMap25=function(ea){var fa=this.$LiveWebGLMap7.solve(ea),ga=1;if(fa===0){ga=.15;}else if(fa<.25){ga=.15+.85*fa/.25;}else if(fa>=.25&&fa<=.5){ga=1;}else if(fa>.5)ga=1;var ha=0;if(fa===0){ha=0;}else if(fa<.25){ha=.25*fa/.25;}else if(fa>=.25&&fa<=.5){ha=.25;}else if(fa>.5)ha=.25-(fa-.5)/.5*.25;return {radiusTransform:ga,newOpacity:ha};};ca.prototype.$LiveWebGLMap9=function(ea,fa,ga){ga+=ea-fa;var ha=this.state.animatedLayers,ia=ha.map(function(ja){if(ja.type!=='circle'||!ja.metadata||ja.metadata['base-radius']==null)return ja;var ka=ja.metadata.duration,la=ja.metadata.delay,ma=ga%(ka+la+1),na=ma-la,oa=0;if(ma>la&&ma<la+ka)oa=Math.max(na/ka,0);var pa=this.$LiveWebGLMap25(oa),qa=pa.radiusTransform,ra=pa.newOpacity,sa=ja.paint['circle-opacity'],ta=ja.paint['circle-radius'],ua=ja.metadata['base-radius']*qa;if(Math.abs(ra-sa)<.01&&Math.abs(ua-ta)<.5)return ja;var va=babelHelpers['extends']({},ja);va.paint=babelHelpers['extends']({},va.paint);va.paint['circle-radius']=ua;va.paint['circle-opacity']=ra;return va;}.bind(this));this.$LiveWebGLMap5=(this.$LiveWebGLMap5+1)%ba;if(ha!==ia)this.setState({animatedLayers:ia});this.$LiveWebGLMap6=requestAnimationFrame(function(ja){return (this.$LiveWebGLMap9(ja,ea,ga));}.bind(this));};ca.prototype.$LiveWebGLMap31=function(ea){c('PublicLiveMapActions').setWebGLMap(ea);};ca.prototype.$LiveWebGLMap33=function(event,ea,fa,ga){new (c('PublicLiveMapInteractionsTypedLogger'))().setEvent(event).setVideoID(ea).setMapZoom(fa).setViewerCount(ga).setTimeSpentID(c('pageID')).log();};ca.prototype.$LiveWebGLMap27=function(ea){var fa=ea.getCenter().toArray(),ga=fa[0],ha=fa[1],ia=ea.getZoom(),ja=c('LeafletUtils').wrapLongitude(parseFloat(ga.toFixed(9))),ka=parseFloat(ha.toFixed(9)),la=parseFloat(ia.toFixed(9)),ma='@'+ka+','+ja+','+la+'z',na=window.location.hash||'#',oa=window.location.hash!=null&&window.location.hash.match(n)?window.location.hash.replace(n,ma):''+na+ma;window.history.replaceState(undefined,undefined,oa);};var da=function ea(){this.state={reportDialogShown:false,mapHeight:0,sources:u,layers:v,highlightLayers:w,animatedLayers:x};this.$LiveWebGLMap5=0;this.$LiveWebGLMap6=null;this.$LiveWebGLMap7=new (c('CubicBezier'))([.39,.575],[.565,1]);this.$LiveWebGLMap11=null;this.$LiveWebGLMap12=0;this.$LiveWebGLMap18=function(fa){this.$LiveWebGLMap1=fa;}.bind(this);this.$LiveWebGLMap20=function(){return this.$LiveWebGLMap1;}.bind(this);this.$LiveWebGLMap22=function(fa){this.$LiveWebGLMap2=fa;}.bind(this);this.$LiveWebGLMap19=function(){this.setState({reportDialogShown:true});}.bind(this);this.$LiveWebGLMap21=function(fa){if(!fa&&this.$LiveWebGLMap2!=null)this.$LiveWebGLMap2.resetForm();this.setState({reportDialogShown:fa});}.bind(this);this.$LiveWebGLMap8=c('throttle')(function(){this.setState({mapHeight:s()});}.bind(this),100);this.$LiveWebGLMap24=function(fa,ga){if(ga.sources[t]!=null)this.$LiveWebGLMap26(fa);}.bind(this);this.$LiveWebGLMap26=c('throttle')(function(fa,event){var ga=fa.transform.width,ha=fa.transform.height,ia=this.props.xOffset,ja=[[ia,0],[ga,ha]],ka=fa.queryRenderedFeatures(ja,{layers:this.state.layers.keySeq().toArray()}),la=ka.reduce(function(ma,na){if(na&&na.properties&&na.properties.stream_id){var oa=na.properties.stream_id;ma[oa]=na;}return ma;},{});c('PublicLiveMapActions').setStreamsInView(la);this.$LiveWebGLMap27(fa);}.bind(this),100);this.$LiveWebGLMap28=c('debounce')(function(fa,ga){var ha=fa.getZoom(),ia=fa.getBounds(),ja=c('LeafletUtils').wrapLongitude(ia.getWest()),ka=c('LeafletUtils').wrapLongitude(ia.getEast()),la={x1:ja,x2:ka,y2:ia.getNorth(),y1:ia.getSouth()},ma=new (c('LiveMapViewField'))(la);c('PublicLiveMapVideosFetcher').dynamicGeoFetch(ma,ha);c('PublicLiveMapActions').setMapViewport(c('PublicLiveMapConstants').MAP_TYPE.WEBGL,ha,ia);this.$LiveWebGLMap26(fa,ga);}.bind(this),50);this.$LiveWebGLMap29=c('debounce')(function(fa,ga){var ha=fa.getZoom(),ia=fa.getBounds();c('PublicLiveMapVideosFetcher').handleZoomChange(ha);c('PublicLiveMapActions').setMapViewport(c('PublicLiveMapConstants').MAP_TYPE.WEBGL,ha,ia);this.$LiveWebGLMap26(fa,ga);}.bind(this));this.$LiveWebGLMap30=c('throttle')(function(fa,ga){var ha=fa.queryRenderedFeatures(ga.point,{layers:this.state.layers.keySeq().toArray()}),ia=ha[0];if(ia==null){fa.getCanvas().style.cursor='';c('PublicLiveMapTooltipController').setRemoveWebGLTooltipTimer();return;}fa.getCanvas().style.cursor='pointer';if(ia==null||ia.properties==null||ia.properties.stream_id==null)return;var ja=ia.properties.stream_id,ka=this.props.allStreams.get(ja);if(ka==null||this.props.activeStream===ka)return;c('PublicLiveMapTooltipController').addTooltip(ka,c('VideoPlayerLoggerSource').LIVE_MAP_TOOLTIP_FROM_MAP);}.bind(this),20);this.$LiveWebGLMap32=function(fa,ga){var ha=fa.queryRenderedFeatures(ga.point,{layers:this.state.highlightLayers.keySeq().toArray()}),ia=ha[0];if(ia==null||ia.properties==null||ia.properties.stream_id==null)return;var ja=ia.properties.stream_id,ka=this.props.allStreams.get(ja);if(ka==null)return;this.$LiveWebGLMap33(c('PublicLiveMapEvent').CIRCLE_CLICKED,ja,-1,ka.viewerCount);if(this.props.clicksOpenInSidebar){c('PublicLiveMapActions').setNowPlayingInSidebar(ka);}else c('PublicLiveMapActions').openChannelPlayerForMapTooltip();}.bind(this);this.$LiveWebGLMap23=c('immutable').Map({load:this.$LiveWebGLMap31,mousemove:this.$LiveWebGLMap30,click:this.$LiveWebGLMap32,moveend:this.$LiveWebGLMap28,zoomend:this.$LiveWebGLMap29,rotateend:this.$LiveWebGLMap26,pitch:this.$LiveWebGLMap26});};f.exports=ca;}),null);
__d('LiveListViewChannelsStore',['FluxMapStore','immutable','LiveListViewActionTypes','PublicLiveMapDispatcher'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FluxMapStore'));i=h&&h.prototype;function j(){i.constructor.call(this,c('PublicLiveMapDispatcher'));this.$LiveListViewChannelsStore1=c('immutable').Map();}j.prototype.reduce=function(k,l){switch(l.type){case c('LiveListViewActionTypes').RECEIVE.VIDEOS_FOR_CHANNEL:k=k.set(l.data.channel,l.data.videos);return k;case c('LiveListViewActionTypes').RECEIVE.POLLER_FOR_CHANNEL:this.$LiveListViewChannelsStore1=this.$LiveListViewChannelsStore1.set(l.data.channel,l.data.poller);return k;default:return k;}};j.prototype.getVideosForChannel=function(k){return this.getState().get(k)||[];};j.prototype.getAllChannelPollers=function(){return this.$LiveListViewChannelsStore1;};j.prototype.stopPollerForChannel=function(k){var l=this.$LiveListViewChannelsStore1.get(k);if(l)l.startSkipIndefinitely();};j.prototype.startPollerForChannel=function(k){var l=this.$LiveListViewChannelsStore1.get(k);if(l)l.stopSkipIndefinitely();};j.prototype.stopAllChannelPollers=function(){this.$LiveListViewChannelsStore1.forEach(function(k){k.stop();});this.$LiveListViewChannelsStore1=c('immutable').Map();return this.$LiveListViewChannelsStore1;};j.prototype.startAllChannelPollers=function(){this.$LiveListViewChannelsStore1.forEach(function(k){k.start();});return this.$LiveListViewChannelsStore1;};f.exports=new j(c('PublicLiveMapDispatcher'));}),null);
__d('PublicLiveMapTooltipVideo.react',['EventListener','LiveMapClickEventLogger','PublicLiveMapActions','PublicLiveMapVideoPlayer.react','React'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;function j(k){i.constructor.call(this,k);this.$PublicLiveMapTooltipVideo4=function(l){this.$PublicLiveMapTooltipVideo1=l;if(this.props.onVideoLoaded)this.props.onVideoLoaded(l);this.$PublicLiveMapTooltipVideo5();}.bind(this);this.$PublicLiveMapTooltipVideo6=function(){this.$PublicLiveMapTooltipVideo1=null;this.$PublicLiveMapTooltipVideo3();if(this.props.onVideoUnloaded)this.props.onVideoUnloaded();}.bind(this);this.$PublicLiveMapTooltipVideo7=function(){c('PublicLiveMapActions').openChannelPlayerForMapTooltip();this.$PublicLiveMapTooltipVideo8({videoID:this.props.videoID,viewerCount:this.props.viewerCount});}.bind(this);this.$PublicLiveMapTooltipVideo1=null;this.$PublicLiveMapTooltipVideo2=null;}j.prototype.componentWillUnmount=function(){this.$PublicLiveMapTooltipVideo3();};j.prototype.$PublicLiveMapTooltipVideo3=function(){if(this.$PublicLiveMapTooltipVideo2!=null){this.$PublicLiveMapTooltipVideo2.remove();this.$PublicLiveMapTooltipVideo2=null;}};j.prototype.$PublicLiveMapTooltipVideo5=function(){var k=this.$PublicLiveMapTooltipVideo1;if(k==null||this.$PublicLiveMapTooltipVideo2!=null)return;this.$PublicLiveMapTooltipVideo2=k.addListener('clickVideo',this.$PublicLiveMapTooltipVideo7);};j.prototype.$PublicLiveMapTooltipVideo8=function(k){c('LiveMapClickEventLogger').logTooltipPlayerClickEvent(k);};j.prototype.render=function(){var k=this.props,l=k.videoID,m=k.videoWidth,n=k.videoHeight,o=null;o=c('React').createElement(c('PublicLiveMapVideoPlayer.react'),{videoID:l,videoWidth:m,videoHeight:n,videoPlayerSource:this.props.videoPlayerSource,onVideoLoaded:this.$PublicLiveMapTooltipVideo4,onVideoUnloaded:this.$PublicLiveMapTooltipVideo6,showControls:false});return o;};j.defaultProps={onVideoLoaded:null};f.exports=j;}),null);
__d('PublicLiveMapTooltipContent.react',['ix','cx','fbt','Duration.react','Image.react','Link.react','PublicLiveMapTooltipVideo.react','React','VideoPlayerLoggerSource','XUIText.react','fbglyph'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l;k=babelHelpers.inherits(m,c('React').Component);l=k&&k.prototype;function m(n){l.constructor.call(this,n);}m.prototype.render=function(){var n=this.props.stream,o=c('React').createElement('div',{className:"_4vp5 _4vpd"},c('React').createElement(c('Link.react'),{href:n.url},n.name)),p=n.startTime?c('React').createElement(c('Duration.react'),{startTime:n.startTime*1000}):null;return (c('React').createElement('div',{className:"_4rvc clearfix"},this.$PublicLiveMapTooltipContent1(),c('React').createElement('div',{className:"_wye"},c('React').createElement('div',{className:"_4vp3"},c('React').createElement(c('Image.react'),{className:"_blr",src:n.profilePicture,height:64,width:64})),c('React').createElement('div',{className:"_4vp4"},c('React').createElement('div',{className:"_23w6"+(this.props.isNowPlaying?' '+"_23w7":'')},c('React').createElement('span',{className:"_23wb"}),j._("Now playing")),o,c('React').createElement('div',{className:"_4vpc"},this.$PublicLiveMapTooltipContent2(n),c('React').createElement('div',{className:"_4vpd"},p,' ','\u00B7',' ',this.$PublicLiveMapTooltipContent3()))))));};m.prototype.$PublicLiveMapTooltipContent1=function(){if(this.props.isNowPlaying)return null;var n=this.props.stream,o=this.$PublicLiveMapTooltipContent4(n,this.props.videoWidth,this.props.videoHeight);return (c('React').createElement('div',{className:"_wyd"},o));};m.prototype.$PublicLiveMapTooltipContent3=function(){return (c('React').createElement(c('Image.react'),{style:{verticalAlign:'top'},src:h("\/images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/globe-americas_16_fig-light-20.png")}));};m.prototype.$PublicLiveMapTooltipContent2=function(n){if(!n.publisherCategory)return null;return (c('React').createElement('div',{className:"_4vpd"+(this.props.isNowPlaying?' '+"_23wc":'')},n.publisherCategory));};m.prototype.$PublicLiveMapTooltipContent4=function(n,o,p){return (c('React').createElement(c('PublicLiveMapTooltipVideo.react'),{videoID:n.videoID,viewerCount:n.viewerCount,videoWidth:o,videoHeight:p,onVideoLoaded:this.props.onVideoLoaded,onVideoUnloaded:this.props.onVideoUnloaded,showControls:false,videoPlayerSource:n.subOrigin||c('VideoPlayerLoggerSource').LIVE_MAP_TOOLTIP}));};f.exports=m;}),null);
__d('PublicLiveMapTooltipPlacement',['immutable','PublicLiveMapConstants','LiveMapExperiments'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('PublicLiveMapConstants').TOOLTIP.VIDEO_DIMENSIONS,k={LEFT:'left',TOP:'top',RIGHT:'right'},l=c('immutable').Record({left:c('PublicLiveMapConstants').TOOLTIP.OFFSCREEN+'px',top:c('PublicLiveMapConstants').TOOLTIP.OFFSCREEN+'px',right:'auto'});h=babelHelpers.inherits(m,l);i=h&&h.prototype;function m(n){i.constructor.call(this,n);}m.prototype.setLeft=function(n){var o=void 0;if(typeof n==='string'){o=n;}else if(n!=null){o=Math.floor(n)+'px';}else o=n;return this.set(k.LEFT,o);};m.prototype.getLeft=function(){return this.left;};m.prototype.setTop=function(n){var o=void 0;if(typeof n==='string'){o=n;}else if(n!=null){o=Math.floor(n)+'px';}else o=n;return this.set(k.TOP,o);};m.prototype.getTop=function(){return this.top;};m.prototype.setRight=function(n){var o=void 0;if(typeof n==='string'){o=n;}else if(n!=null){o=Math.floor(n)+'px';}else o=n;return this.set(k.RIGHT,o);};m.prototype.getRight=function(){return this.right;};m.getPlacementForMap=function(n,o,p,q,r){var s=j.TOOLTIP_SIZE;if(q)s=0;var t=o-s-110,u=n-Math.floor(j.TOOLTIP_SIZE/2),v='auto',w=r?r.x:n;if(c('LiveMapExperiments').webgl){if(u<=w)u=w+36;}else if(u<=0)u=n+20;if(u>=p.x-j.TOOLTIP_SIZE){u='auto';v=p.x-n+20;}if(t<=0)t=o+20;return new m().setTop(t).setRight(v).setLeft(u);};m.getSidebarTooltipPlacement=function(n,o,p){var q=p+24,r=c('PublicLiveMapConstants').TOOLTIP.SIDEBAR.RIGHT,s=o-c('PublicLiveMapConstants').TOOLTIP.SIDEBAR.TOP;if(s<50)s=n;return new m().setTop(s).setLeft(q).setRight(r);};f.exports=m;}),null);
__d('PublicLiveMapTooltip.react',['cx','PublicLiveMapConfig','PublicLiveMapConstants','PublicLiveMapTooltipContent.react','PublicLiveMapTooltipController','PublicLiveMapTooltipPlacement','React','joinClasses'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('PublicLiveMapConstants').TOOLTIP.VIDEO_DIMENSIONS,j=c('PublicLiveMapConfig').tooltip_animation||'none';function k(){c('PublicLiveMapTooltipController').clearRemoveTooltipTimer();}function l(){c('PublicLiveMapTooltipController').removeTooltip();}function m(o){if(o.activeStream==null)return null;return (c('React').createElement(c('PublicLiveMapTooltipContent.react'),{stream:o.activeStream,videoWidth:i.TOOLTIP_SIZE,videoHeight:i.TOOLTIP_SIZE,onVideoLoaded:o.onVideoLoaded,onVideoUnloaded:o.onVideoUnloaded,isNowPlaying:o.isNowPlaying}));}function n(o){var p="_2c0w"+(o.displayAbsolute===true?' '+"_3dp5":'')+(o.activeStream!=null?' '+"_50ij":'')+(j==='none'?' '+"_50ik":'')+(j==='fade'?' '+"_50in":''),q=o.placement||new (c('PublicLiveMapTooltipPlacement'))();return (c('React').createElement('div',{className:c('joinClasses')(o.className,p),onMouseEnter:k,onMouseLeave:l,style:{left:q.getLeft(),top:q.getTop(),right:q.getRight()}},c('React').createElement(m,o)));}f.exports=n;}),null);
__d('PublicLiveMapTooltipContainer.react',['PublicLiveMapActions','PublicLiveMapDispatcher','PublicLiveMapTooltip.react','PublicLiveMapTooltipPlacement','PublicLiveMapStore','FluxContainer','React','LiveListViewChannelsStore'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;function j(k){i.constructor.call(this,k);c('PublicLiveMapDispatcher').explicitlyRegisterStores([c('LiveListViewChannelsStore')]);}j.getStores=function(){return [c('PublicLiveMapStore')];};j.calculateState=function(k){var l=c('PublicLiveMapStore').getActiveStream(),m=c('PublicLiveMapStore').getSidebarNowPlaying(),n=false;if(m&&l)n=l.videoID===m.videoID;var o=null,p=c('PublicLiveMapStore').getActiveStreamPixelLocation(),q=c('PublicLiveMapStore').getMapPixelSize(),r=c('PublicLiveMapStore').getSidebarOffset();if(p!=null&&q){o=c('PublicLiveMapTooltipPlacement').getPlacementForMap(p.x,p.y,q,n,r);}else if(l!=null&&q)o=c('PublicLiveMapTooltipPlacement').getPlacementForMap(0,0,q,n,r);return {activeStream:l,placement:o,isNowPlaying:n};};j.prototype.$PublicLiveMapTooltipContainer1=function(k){c('PublicLiveMapActions').setMapViewTooltipVideoPlayerController(k);};j.prototype.$PublicLiveMapTooltipContainer2=function(){c('PublicLiveMapActions').setMapViewTooltipVideoPlayerController(null);};j.prototype.render=function(){var k=babelHelpers['extends']({},this.state,this.props,{onVideoLoaded:this.$PublicLiveMapTooltipContainer1,onVideoUnloaded:this.$PublicLiveMapTooltipContainer2,displayAbsolute:true});return c('React').createElement(c('PublicLiveMapTooltip.react'),k);};f.exports=c('FluxContainer').create(j);}),null);
__d('LiveWebGLMapContainer.react',['cx','immutable','LiveWebGLMap.react','PublicLiveMapCacheConstants','PublicLiveMapStore','PublicLiveMapTooltipContainer.react','FluxContainer','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;function k(l){j.constructor.call(this,l);}k.getStores=function(){return [c('PublicLiveMapStore')];};k.calculateState=function(l){var m=c('PublicLiveMapStore').getCurrentViewers(),n=c('PublicLiveMapStore').getActiveStream(),o=c('PublicLiveMapStore').getSidebarOffset(),p=o?o.x:0,q=k.$LiveWebGLMapContainer1();return {currentViewers:m,activeStream:n,allStreams:q,xOffset:p};};k.$LiveWebGLMapContainer1=function(){var l=c('PublicLiveMapStore').getAllDynamicGeoCacheData();return c('PublicLiveMapStore').getLevelNCacheData(c('PublicLiveMapCacheConstants').LEVEL_2_CACHE).merge(c('PublicLiveMapStore').getLevelNCacheData(c('PublicLiveMapCacheConstants').LEVEL_1_CACHE)).merge(c('PublicLiveMapStore').getLevelNCacheData(c('PublicLiveMapCacheConstants').LEVEL_0_CACHE)).merge(l);};k.prototype.render=function(){var l=babelHelpers['extends']({},this.state,this.props);return (c('React').createElement('div',{className:"_4u4p"},c('React').createElement(c('LiveWebGLMap.react'),l),c('React').createElement(c('PublicLiveMapTooltipContainer.react'),null)));};f.exports=c('FluxContainer').create(k);}),null);
__d('LeafletPolyline.react',['leaflet','LeafletPath','LeafletUtils','immutable','React','areEqual','nearlyEqualNumbers'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;k.coordinatesToLatLngs=function(l){return l.toSeq().map(c('LeafletUtils').toLatLng).toArray();};k.mutate=function(l,m,n){if(!k.mutateOptions(l,m.options,n.options))return false;if(n&&!c('areEqual')(n,m)&&m.popup){l.unbindPopup();l.bindPopup(m.popup.type.toLayer(m.popup.props,l));}if(!c('immutable').is(m.coordinates,n.coordinates))l.setLatLngs(k.coordinatesToLatLngs(m.coordinates));return true;};k.toLayer=function(l){var m=c('leaflet').polyline(k.coordinatesToLatLngs(l.coordinates),l.options);if(l.popup)m.bindPopup(l.popup.type.toLayer(l.popup.props,m));return m;};k.mutateOptions=function(l,m,n){var o=m||{},p=o.smoothFactor,q=o.noClip,r=babelHelpers.objectWithoutProperties(o,['smoothFactor','noClip']),s=n||{},t=s.smoothFactor,u=s.noClip,v=babelHelpers.objectWithoutProperties(s,['smoothFactor','noClip']);if(!c('LeafletPath').mutateOptions(l,r,v))return false;if(!c('nearlyEqualNumbers')(t,p)||u!==q)return false;return true;};k.prototype.render=function(){return null;};function k(){h.apply(this,arguments);}k.propTypes={options:j.object,coordinates:j.instanceOf(c('immutable').List).isRequired,popup:j.element};f.exports=k;}),null);
__d('PublicLiveMapInfoIcon.react',['cx','fbt','ix','React','SignalsTooltipInfo.react'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k=j('/images/ads/signals/icons/InfoIcon_13x13.png');function l(){return (c('React').createElement('span',{className:"_51pq"},c('React').createElement(c('SignalsTooltipInfo.react'),{iconURL:k,position:'left',message:i._("Map displays people and Pages sharing to a public audience")})));}f.exports=l;}),null);
__d('PublicLiveMapFixedRadiusCircle',['leaflet'],(function a(b,c,d,e,f,g){'use strict';c('leaflet').FixedRadiusCircle=c('leaflet').CircleMarker.extend({options:{radius:10}});var h=c('leaflet').fixedRadiusCircle=function(i,j){return new (c('leaflet').FixedRadiusCircle)(i,j);};f.exports=h;}),null);
__d('PublicLiveMapMarker.react',['GeoCoordinates','LeafletLayer.react','LeafletPath','LeafletUtils','PublicLiveMapFixedRadiusCircle','React'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;k.mutate=function(l,m,n){var o=m.options||{},p=o.radius,q=n.options||{},r=q.prevRadius;if(!c('LeafletPath').mutateOptions(l,m.options,n.options))return false;c('LeafletLayer.react').mutateEventHandlers(l,m.eventHandlers,n.eventHandlers);if(m.center!==n.center)l.setLatLng(c('LeafletUtils').toLatLng(m.center));if(p!==r)l.setRadius(m.options.radius);return true;};k.toLayer=function(l){var m=c('PublicLiveMapFixedRadiusCircle')(c('LeafletUtils').toLatLng(l.center),l.options);c('LeafletLayer.react').addEventHandlers(m,l.eventHandlers);return m;};k.prototype.render=function(){return null;};function k(){h.apply(this,arguments);}k.propTypes={options:j.object,eventHandlers:j.object,center:j.instanceOf(c('GeoCoordinates')).isRequired};f.exports=k;}),null);
__d('PublicLiveMapPage',['EventEmitter','EventEmitterWithHolding','EventHolder','performanceAbsoluteNow','PublicLiveMapEvent'],(function a(b,c,d,e,f,g){'use strict';var h={Events:c('PublicLiveMapEvent'),addRetroactiveListener:function j(k,l){return i.addRetroactiveListener(k,l);},emit:function j(k){i.emitAndHold(k,c('performanceAbsoluteNow')());},removeCurrentListener:function j(){i.removeCurrentListener();}},i=new (c('EventEmitterWithHolding'))(new (c('EventEmitter'))(),new (c('EventHolder'))());f.exports=h;}),null);
__d('PublicLiveMap.react',['cx','fbt','FBTilesMap.react','FBOverlayElement.react','FBTilesMapZoomOverlay.react','GeoCoordinates','immutable','leaflet','LeafletMarker.react','LeafletPolyline.react','LeafletUtils','LeafletView','Link.react','LiveMapExperiments','LiveMapClickEventLogger','LiveMapSpecialEventKeyContainer.react','LiveMapViewField','PublicLiveMapActions','PublicLiveMapConfig','PublicLiveMapConstants','PublicLiveMapInfoIcon.react','PublicLiveMapPage','PublicLiveMapReportForm.react','PublicLiveMapStore','PublicLiveMapMarker.react','PublicLiveMapTooltipController','PublicLiveMapVideosFetcher','React','VideoChannel','VideoChannelController','VideoPlayerLoggerSource','XUIDialog.react','CSS','joinClasses','debounceCore','getViewportDimensions','setTimeout','clearTimeout'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('PublicLiveMapConstants').DEFAULT_MAP_ZOOM,m=c('PublicLiveMapConfig').min_zoom,n=c('PublicLiveMapConfig').max_zoom,o=c('PublicLiveMapConstants').MAP_BOUNDS,p=/@([-+]?\d+\.?\d*),([-+]?\d+\.?\d*),(\d+\.?\d*)z/i;function q(){var t=c('getViewportDimensions').withoutScrollbars().height;return t-c('PublicLiveMapConstants').FB_HEADER_HEIGHT;}function r(){}j=babelHelpers.inherits(s,c('React').Component);k=j&&j.prototype;function s(t){k.constructor.call(this,t);this.$PublicLiveMap10=function(){this.setState({reportDialogShown:true});}.bind(this);this.$PublicLiveMap11=function(w){if(!w)this.refs.reportForm.resetForm();this.setState({reportDialogShown:w});}.bind(this);this.$PublicLiveMap12=function(w){var x=w.target.options.videoID,y=c('PublicLiveMapStore').getLiveStreamByID(x);if(!y)return;c('PublicLiveMapActions').setActiveStream(y);var z=this.state.view.zoom;if(this.$PublicLiveMap2)z=this.$PublicLiveMap2.getZoom();this.$PublicLiveMap13({videoID:x,mapZoom:z,viewerCount:y.viewerCount});if(this.props.clicksOpenInSidebar){c('PublicLiveMapActions').setNowPlayingInSidebar(y);}else c('PublicLiveMapActions').openChannelPlayerForMapTooltip();}.bind(this);this.$PublicLiveMap14=function(w){var x=w.target,y=x.options.videoID,z=c('PublicLiveMapStore').getLiveStreamByID(y);if(this.$PublicLiveMap3!=null)c('clearTimeout')(this.$PublicLiveMap3);if(!z)return;if(x.bringToFront)x.bringToFront();c('CSS').removeClass(w.originalEvent.target,"_1d39");if(c('LiveMapExperiments').hovertooltips){c('PublicLiveMapTooltipController').setAddTooltipTimer(z,c('VideoPlayerLoggerSource').LIVE_MAP_TOOLTIP_FROM_MAP);}else this.$PublicLiveMap3=c('setTimeout')(function(){c('PublicLiveMapActions').setActiveStream(z,c('VideoPlayerLoggerSource').LIVE_MAP_TOOLTIP_FROM_MAP);this.$PublicLiveMap3=null;}.bind(this),c('PublicLiveMapConstants').HOVER_INTENT_TIMEOUT_MS);}.bind(this);this.$PublicLiveMap15=function(w){if(this.$PublicLiveMap3!=null)c('clearTimeout')(this.$PublicLiveMap3);if(c('LiveMapExperiments').hovertooltips){c('PublicLiveMapTooltipController').setRemoveTooltipTimer();}else c('PublicLiveMapActions').resetActiveStream();}.bind(this);this.$PublicLiveMap16=function(w){if(this.$PublicLiveMap1!==true){c('PublicLiveMapPage').emit(c('PublicLiveMapPage').Events.PUBLIC_CIRCLES_RENDERED);this.$PublicLiveMap1=true;}}.bind(this);this.$PublicLiveMap29=function(){if(this.state.view.zoom<n)this.setState({view:this.state.view.setZoom(this.state.view.zoom+1)});}.bind(this);this.$PublicLiveMap30=function(){if(this.state.view.zoom>m)this.setState({view:this.state.view.setZoom(this.state.view.zoom-1)});}.bind(this);this.$PublicLiveMap27=function(event){if(this.$PublicLiveMap2==null){this.$PublicLiveMap2=event.target;c('PublicLiveMapActions').setMap(this.$PublicLiveMap2);}c('PublicLiveMapActions').setZoomLevel(this.$PublicLiveMap2.getZoom());this.$PublicLiveMap26(event);}.bind(this);this.$PublicLiveMap4=function(event){if(this.$PublicLiveMap2==null){this.$PublicLiveMap2=event.target;c('PublicLiveMapActions').setMap(this.$PublicLiveMap2);}this.$PublicLiveMap26(event);}.bind(this);this.$PublicLiveMap26=function(event){if(this.$PublicLiveMap2==null){this.$PublicLiveMap2=event.target;c('PublicLiveMapActions').setMap(this.$PublicLiveMap2);}var w=this.$PublicLiveMap2.getZoom(),x=this.$PublicLiveMap2.getBounds(),y=new (c('LeafletView'))({center:c('LeafletUtils').fromLatLng(this.$PublicLiveMap2.getCenter()),zoom:w}),z='@'+y.center.latitude+','+y.center.longitude+','+y.zoom+'z',aa=window.location.hash||'#',ba=window.location.hash!=null&&window.location.hash.match(p)?window.location.hash.replace(p,z):''+aa+z;window.history.replaceState(undefined,undefined,ba);this.setState({view:y});c('PublicLiveMapActions').setMapViewport(c('PublicLiveMapConstants').MAP_TYPE.LEAFLET,w,x);var ca=this.state.view.zoom;this.$PublicLiveMap31(x,ca);}.bind(this);var u=this;u.$PublicLiveMap4=c('debounceCore')(this.$PublicLiveMap4.bind(this),100);this.$PublicLiveMap3=null;var v=this.$PublicLiveMap5(t.userLocation.latitude,t.userLocation.longitude).setZoom(n);this.state={view:v,reportDialogShown:false};}s.prototype.$PublicLiveMap5=function(t,u){return new (c('LeafletView'))({center:new (c('GeoCoordinates'))(t,u),zoom:l});};s.prototype.componentDidMount=function(){var t=window.location.hash||'',u=t.match(p);if(u==null){this.setState({view:this.$PublicLiveMap5(this.props.userLocation.latitude,this.props.userLocation.longitude)});return;}var v=parseFloat(u[1],10),w=parseFloat(u[2],10),x=parseInt(u[3],10),y=new (c('LeafletView'))({center:new (c('GeoCoordinates'))(v,w),zoom:Math.max(Math.min(x,n),m)});this.setState({view:y});};s.prototype.componentWillUnmount=function(){var t=c('VideoChannel').get();if(t&&t.close)t.close();if(this.$PublicLiveMap3!=null)c('clearTimeout')(this.$PublicLiveMap3);};s.prototype.render=function(){return c('React').createElement('div',null,this.$PublicLiveMap6(),this.$PublicLiveMap7(),this.$PublicLiveMap8(),this.$PublicLiveMap9());};s.prototype.$PublicLiveMap9=function(){if(!c('LiveMapExperiments').specialevent)return null;return c('React').createElement(c('LiveMapSpecialEventKeyContainer.react'),null);};s.prototype.$PublicLiveMap7=function(){return c('React').createElement('span',{className:"_4g4h"},c('React').createElement(c('PublicLiveMapInfoIcon.react'),null),c('React').createElement(c('Link.react'),{ref:'reportLink',onClick:this.$PublicLiveMap10},i._("Map feedback")));};s.prototype.$PublicLiveMap8=function(){return c('React').createElement(c('XUIDialog.react'),{causalElementRef:function(){return this.refs.reportLink;}.bind(this),shown:this.state.reportDialogShown,onToggle:this.$PublicLiveMap11,fixedTopPosition:100,width:425},c('React').createElement(c('PublicLiveMapReportForm.react'),{ref:'reportForm'}));};s.prototype.$PublicLiveMap17=function(){var t=this.props.streamsToRender;if(!this.$PublicLiveMap2)return null;return t.map(function(u){return this.$PublicLiveMap18(u);}.bind(this)).toArray();};s.prototype.$PublicLiveMap18=function(t){var u=t.viewerCount;if(t.markerStatus===c('PublicLiveMapConstants').MARKER_STATUS.SPECIAL_EVENT)return this.$PublicLiveMap19(t,c('PublicLiveMapConstants').SPECIAL_EVENT_MARKER);if(u>=c('PublicLiveMapConfig').popularity_levels.level_4){return this.$PublicLiveMap19(t,c('PublicLiveMapConstants').POPULARITY_MARKERS.FOUR);}else if(u>=c('PublicLiveMapConfig').popularity_levels.level_3){return this.$PublicLiveMap19(t,c('PublicLiveMapConstants').POPULARITY_MARKERS.THREE);}else if(u>=c('PublicLiveMapConfig').popularity_levels.level_2){return this.$PublicLiveMap19(t,c('PublicLiveMapConstants').POPULARITY_MARKERS.TWO);}else if(u>=c('PublicLiveMapConfig').popularity_levels.level_1){return this.$PublicLiveMap19(t,c('PublicLiveMapConstants').POPULARITY_MARKERS.ONE);}else return this.$PublicLiveMap20(t);};s.prototype.$PublicLiveMap20=function(t){var u={add:this.$PublicLiveMap16,click:this.$PublicLiveMap12,mouseover:this.$PublicLiveMap14,mouseout:this.$PublicLiveMap15},v=this.$PublicLiveMap21({latitude:t.lat,longitude:t.long}),w="_4qel"+(t===this.props.activeStream?' '+"_2813":''),x={center:v,key:t.videoID,options:babelHelpers['extends']({videoID:t.videoID,className:w},c('PublicLiveMapConstants').BROADCAST_MARKER_OPTIONS),eventHandlers:u};return c('React').createElement(c('PublicLiveMapMarker.react'),x);};s.prototype.$PublicLiveMap19=function(t,u){var v={add:this.$PublicLiveMap16,click:this.$PublicLiveMap12,mouseover:this.$PublicLiveMap14,mouseout:this.$PublicLiveMap15},w=t===this.props.activeStream?"_2813":'';w=c('joinClasses')(u.className,w);var x=c('leaflet').divIcon({className:w,iconSize:u.iconSize,iconAnchor:u.iconAnchor}),y=this.$PublicLiveMap21({latitude:t.lat,longitude:t.long}),z={coordinates:y,key:t.videoID,eventHandlers:v,options:{icon:x,videoID:t.videoID,riseOnHover:true}};return c('React').createElement(c('LeafletMarker.react'),z);};s.prototype.$PublicLiveMap21=function(t){var u=this.$PublicLiveMap2.getBounds(),v=t.latitude,w=t.longitude,x=w<0?w+360:w-360,y=[v,w],z=[v,x];if(u.contains(y)){return new (c('GeoCoordinates'))(v,w);}else if(u.contains(z)){return new (c('GeoCoordinates'))(v,x);}else return new (c('GeoCoordinates'))(v,w);};s.prototype.$PublicLiveMap22=function(t,u){var v="_1vxe";return c('React').createElement(c('PublicLiveMapMarker.react'),{center:t,key:u+'viewer-marker',options:babelHelpers['extends']({className:v},c('PublicLiveMapConstants').VIEWER_MARKER_OPTIONS)});};s.prototype.$PublicLiveMap23=function(t,u){var v=u.longitude,w=t.latitude,x=t.longitude,y=x-360,z=x+360,aa=Math.abs(v-x),ba=Math.abs(v-y),ca=Math.abs(v-z),da=Math.min(aa,ba,ca);switch(da){case aa:return new (c('GeoCoordinates'))(w,x);case ba:return new (c('GeoCoordinates'))(w,y);case ca:return new (c('GeoCoordinates'))(w,z);default:return new (c('GeoCoordinates'))(w,x);}};s.prototype.$PublicLiveMap24=function(t,u,v){var w="_5ja1",x=c('immutable').List([v,t]);return c('React').createElement(c('LeafletPolyline.react'),{key:u+'viewer-line',coordinates:x,options:babelHelpers['extends']({className:w},c('PublicLiveMapConstants').VIEWER_LINE_OPTIONS)});};s.prototype.$PublicLiveMap25=function(){var t=this.props,u=t.currentViewers,v=t.activeStream;if(!u.size||!v)return null;var w={latitude:v.lat,longitude:v.long},x=this.$PublicLiveMap21(w);return u.flatMap(function(y,z){var aa=this.$PublicLiveMap23(y,x);return [this.$PublicLiveMap22(aa,z),this.$PublicLiveMap24(aa,z,x)];}.bind(this)).toArray();};s.prototype.$PublicLiveMap6=function(){var t=q();return c('React').createElement(c('FBTilesMap.react'),{onViewChange:r,showZoomControls:false,showReportButton:false,style:{width:'100%',height:t+'px'},view:this.state.view,ref:'map',theme:'live_maps',eventHandlers:{moveend:this.$PublicLiveMap26,zoomend:this.$PublicLiveMap27,resize:this.$PublicLiveMap4},options:{maxZoom:n,minZoom:m,maxBounds:o,bounceAtZoomLimits:false,inertia:false,zoomAnimationThreshold:1,markerZoomAnimation:false,zoomAnimation:true,worldCopyJump:true}},this.$PublicLiveMap28(),this.$PublicLiveMap17(),this.$PublicLiveMap25());};s.prototype.$PublicLiveMap28=function(){return c('React').createElement(c('FBOverlayElement.react'),{vertical:c('PublicLiveMapConstants').ZOOM_CONTROLS.vertical,horizontal:c('PublicLiveMapConstants').ZOOM_CONTROLS.horizontal},c('React').createElement(c('FBTilesMapZoomOverlay.react'),{className:"_3-8j _1yx0",onZoomIn:this.$PublicLiveMap29,onZoomOut:this.$PublicLiveMap30}));};s.prototype.$PublicLiveMap13=function(t){c('LiveMapClickEventLogger').logMapMarkerClickEvent(t);};s.prototype.$PublicLiveMap31=function(t,u){var v={x1:c('LeafletUtils').wrapLongitude(t.getWest()),x2:c('LeafletUtils').wrapLongitude(t.getEast()),y2:t.getNorth(),y1:t.getSouth()},w=new (c('LiveMapViewField'))(v);c('PublicLiveMapVideosFetcher').dynamicGeoFetch(w,u);};f.exports=s;}),null);
__d('PublicLiveMapIntroNUX.react',['cx','fbt','React','SimpleNUXMessage','SimpleNUXMessageTypes','XUICloseButton.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;function l(m){k.constructor.call(this,m);this.state={showIntroNUX:!c('SimpleNUXMessage').hasUserSeenMessage(c('SimpleNUXMessageTypes').LIVE_MAP_NEW_USER_NUX)};}l.prototype.$PublicLiveMapIntroNUX1=function(){c('SimpleNUXMessage').markMessageSeenByUser(c('SimpleNUXMessageTypes').LIVE_MAP_NEW_USER_NUX);this.setState({showIntroNUX:false});};l.prototype.$PublicLiveMapIntroNUX2=function(){return i._("See who's live around the world");};l.prototype.$PublicLiveMapIntroNUX3=function(){return i._("The map displays people sharing to a public audience.");};l.prototype.$PublicLiveMapIntroNUX4=function(){return i._("Your location is not visible to anyone.");};l.prototype.render=function(){if(!this.state.showIntroNUX)return null;return (c('React').createElement('div',{className:"_oxf"},c('React').createElement('div',{className:"_oxg"},c('React').createElement(c('XUICloseButton.react'),{onClick:this.$PublicLiveMapIntroNUX1.bind(this),size:'medium',className:"_oxh"}),c('React').createElement('div',{className:"_oxi"},this.$PublicLiveMapIntroNUX2()),c('React').createElement('div',{className:"_oxj"},this.$PublicLiveMapIntroNUX3()),c('React').createElement('div',{className:"_oxj"},this.$PublicLiveMapIntroNUX4())),c('React').createElement('div',{className:"_53in"},c('React').createElement('i',{className:"_53io"}))));};f.exports=l;}),null);
__d('PublicLiveMapLeafletMapContainer.react',['cx','immutable','PublicLiveMap.react','PublicLiveMapIntroNUX.react','PublicLiveMapStore','PublicLiveMapTooltipContainer.react','FluxContainer','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;function k(l){j.constructor.call(this,l);}k.getStores=function(){return [c('PublicLiveMapStore')];};k.calculateState=function(l){var m=c('PublicLiveMapStore').getCurrentViewers(),n=c('PublicLiveMapStore').getStreamsToRender(),o=c('PublicLiveMapStore').getActiveStream();return {streamsToRender:n,currentViewers:m,activeStream:o};};k.prototype.$PublicLiveMapLeafletMapContainer1=function(){if(!this.props.showsidebar)return null;return c('React').createElement(c('PublicLiveMapIntroNUX.react'),null);};k.prototype.render=function(){var l=babelHelpers['extends']({},this.state,this.props);return (c('React').createElement('div',{className:"_4u4p"},c('React').createElement(c('PublicLiveMap.react'),l),c('React').createElement(c('PublicLiveMapTooltipContainer.react'),null),this.$PublicLiveMapLeafletMapContainer1()));};f.exports=c('FluxContainer').create(k);}),null);
__d('LiveMapViewRoot.react',['cx','LiveMapExperiments','LiveMapSidebar.react','LiveMapGenericLoadingDialogContainer.react','PublicLiveMapActions','LiveWebGLMapContainer.react','PublicLiveMapLeafletMapContainer.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;function k(l){j.constructor.call(this,l);}k.prototype.componentWillMount=function(){c('PublicLiveMapActions').initializeChannelVideo();};k.prototype.render=function(){var l=false,m=babelHelpers['extends']({},this.props,{clicksOpenInSidebar:l}),n=c('LiveMapExperiments').webgl?c('React').createElement(c('LiveWebGLMapContainer.react'),m):c('React').createElement(c('PublicLiveMapLeafletMapContainer.react'),m),o=c('LiveMapExperiments').webgl?"_2d0a":'';return (c('React').createElement('div',{className:o},c('React').createElement('div',{className:"_lia"},n,c('React').createElement(c('LiveMapSidebar.react'),null),c('React').createElement(c('LiveMapGenericLoadingDialogContainer.react'),null))));};f.exports=k;}),null);
__d("XLiveMapGoLiveController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/live_map\/dialog\/go_live\/",{__asyncDialog:{type:"Int"}});}),null);
__d('LiveMapGoLiveButton.react',['AsyncDialog','AsyncRequest','Button.react','React','XLiveMapGoLiveController'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;j.prototype.render=function(){return (c('React').createElement(c('Button.react'),babelHelpers['extends']({},this.props,{onClick:function(){return this.$LiveMapGoLiveButton1();}.bind(this)})));};j.prototype.$LiveMapGoLiveButton1=function(){var k=c('XLiveMapGoLiveController').getURIBuilder().getURI();c('AsyncDialog').send(new (c('AsyncRequest'))(k));};function j(){h.apply(this,arguments);}f.exports=j;}),null);
__d('LiveVideosRoot.react',['cx','fbt','LiveMapViewRoot.react','React','ReactCSSTransitionGroup','LiveMapExperiments','CurrentUser','LiveMapGoLiveButton.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;function l(m){k.constructor.call(this,m);}l.prototype.$LiveVideosRoot1=function(){return (c('React').createElement(c('LiveMapViewRoot.react'),babelHelpers['extends']({key:'map'},this.props)));};l.prototype.$LiveVideosRoot2=function(){if(!c('LiveMapExperiments').goLive)return null;var m=i._("Go Live"),n=parseInt(c('CurrentUser').getID(),10);return (c('React').createElement('div',{className:"_38tz"},c('React').createElement(c('LiveMapGoLiveButton.react'),{label:m,className:"_42gz _38t-",targetId:n})));};l.prototype.render=function(){return (c('React').createElement(c('ReactCSSTransitionGroup'),{className:"_5ygv",component:'div',transitionEnterTimeout:0,transitionLeaveTimeout:0,transitionName:{enter:"_5ygx",enterActive:"_5yh6",leave:"_5yh8",leaveActive:"_5yh9"}},this.$LiveVideosRoot1(),this.$LiveVideosRoot2()));};f.exports=l;}),null);
__d('LiveVideosRootContainer.react',['LiveVideosRoot.react','React'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;function j(k){i.constructor.call(this,k);}j.prototype.render=function(){var k=babelHelpers['extends']({},this.state,this.props);return c('React').createElement(c('LiveVideosRoot.react'),k);};f.exports=j;}),null);
__d('PublicLiveMapPollerStore',['FluxMapStore','immutable','PublicLiveMapActionTypes','PublicLiveMapDispatcher'],(function a(b,c,d,e,f,g){'use strict';var h,i,j='dynamic',k='special_event';h=babelHelpers.inherits(l,c('FluxMapStore'));i=h&&h.prototype;function l(){i.constructor.call(this,c('PublicLiveMapDispatcher'));}l.prototype.reduce=function(m,n){switch(n.type){case c('PublicLiveMapActionTypes').POLLER.MAP.INITIALIZE:m=m.set(n.data.level,n.data.poller);return m;case c('PublicLiveMapActionTypes').POLLER.MAP.PAUSE:this.pausePollerForLevel(n.data.level);return m;case c('PublicLiveMapActionTypes').POLLER.MAP.RESUME:this.resumePollerForLevel(n.data.level);return m;case c('PublicLiveMapActionTypes').POLLER.MAP.STOP:this.stopPollerForLevel(n.data.level);return m;case c('PublicLiveMapActionTypes').POLLER.MAP.INITIALIZE_DYNAMIC:m=m.set(j,n.data.poller);return m;case c('PublicLiveMapActionTypes').POLLER.MAP.INITIALIZE_SPECIAL_EVENT:m=m.set(k,n.data.poller);return m;case c('PublicLiveMapActionTypes').POLLER.MAP.PAUSE_DYNAMIC:this.pauseDynamicPoller();return m;case c('PublicLiveMapActionTypes').POLLER.MAP.RESUME_DYNAMIC:this.resumeDynamicPoller();return m;case c('PublicLiveMapActionTypes').POLLER.MAP.STOP_DYNAMIC:this.stopDynamicPoller();return m;case c('PublicLiveMapActionTypes').POLLER.MAP.PAUSE_SPECIAL_EVENT:this.pauseSpecialEventPoller();return m;case c('PublicLiveMapActionTypes').POLLER.MAP.RESUME_SPECIAL_EVENT:this.resumeSpecialEventPoller();return m;case c('PublicLiveMapActionTypes').POLLER.MAP.STOP_SPECIAL_EVENT:this.stopSpecialEventPoller();return m;case c('PublicLiveMapActionTypes').APP.RETURN:this.$PublicLiveMapPollerStore1(n.data.levelsToResumePolling);return m;default:return m;}};l.prototype.$PublicLiveMapPollerStore1=function(m){m.forEach(function(n){this.resumePollerForLevel(n);}.bind(this));};l.prototype.pausePollerForLevel=function(m){var n=this.getState().get(m);if(n)n.startSkipIndefinitely();};l.prototype.resumePollerForLevel=function(m){var n=this.getState().get(m);if(n)n.stopSkipIndefinitely();};l.prototype.stopPollerForLevel=function(m){var n=this.getState().get(m);if(n)n.stop();};l.prototype.pauseDynamicPoller=function(){var m=this.getState().get(j);if(m)m.startSkipIndefinitely();};l.prototype.resumeDynamicPoller=function(){var m=this.getState().get(j);if(m)m.stopSkipIndefinitely();};l.prototype.stopDynamicPoller=function(){var m=this.getState().get(j);if(m)m.stop();};l.prototype.pauseSpecialEventPoller=function(){var m=this.getState().get(k);if(m)m.startSkipIndefinitely();};l.prototype.resumeSpecialEventPoller=function(){var m=this.getState().get(k);if(m)m.stopSkipIndefinitely();};l.prototype.stopSpecialEventPoller=function(){var m=this.getState().get(k);if(m)m.stop();};f.exports=new l(c('PublicLiveMapDispatcher'));}),null);
__d('PublicLiveMapBaseController.react',['LiveVideosRootContainer.react','PublicLiveMapActions','PublicLiveMapDispatcher','PublicLiveMapPage','PublicLiveMapVideosFetcher','React','Visibility','ChannelManager','PublicLiveMapStore','LiveListViewChannelsStore','PublicLiveMapPollerStore','PublicLiveMapUIStateStore'],(function a(b,c,d,e,f,g){'use strict';var h,i;c('ChannelManager');h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;function j(k){c('PublicLiveMapPage').emit(c('PublicLiveMapPage').Events.JS_LOADED);i.constructor.call(this,k);c('PublicLiveMapDispatcher').explicitlyRegisterStores([c('PublicLiveMapStore'),c('LiveListViewChannelsStore'),c('PublicLiveMapPollerStore'),c('PublicLiveMapUIStateStore')]);this.$PublicLiveMapBaseController1=[];}j.prototype.componentWillMount=function(){c('PublicLiveMapActions').setChannelID(this.props.channelID);c('PublicLiveMapVideosFetcher').initialize();this.$PublicLiveMapBaseController1.push(c('Visibility').addListener(c('Visibility').HIDDEN,function(){return c('PublicLiveMapVideosFetcher').pause();}));this.$PublicLiveMapBaseController1.push(c('Visibility').addListener(c('Visibility').VISIBLE,function(){return c('PublicLiveMapActions').returnToApp();}));};j.prototype.componentDidMount=function(){c('PublicLiveMapPage').emit(c('PublicLiveMapPage').Events.APP_MOUNTED);if(this.props.videoID)c('PublicLiveMapActions').openChannelPlayer(this.props.videoID,null);};j.prototype.componentWillUnmount=function(){c('PublicLiveMapVideosFetcher').stop();this.$PublicLiveMapBaseController1.forEach(function(k){return k.remove();});};j.prototype.render=function(){return (c('React').createElement('div',null,c('React').createElement(c('LiveVideosRootContainer.react'),this.props)));};f.exports=j;}),null);
__d('PublicLiveMapArtilleryClient',['Promise','Artillery','ArtilleryCategory','ArtillerySequenceType','PublicLiveMapPage'],(function a(b,c,d,e,f,g){'use strict';var h={start:function k(){if(!c('Artillery').isEnabled()||!window._cstart)return;var l=c('Artillery').getPageTrace();i(c('PublicLiveMapPage').Events.JS_LOADED,c('PublicLiveMapPage').Events.APP_MOUNTED,c('PublicLiveMapPage').Events.INITIAL_DATA_FETCHED,c('PublicLiveMapPage').Events.PUBLIC_CIRCLES_RENDERED).done(function(m){var n=m[0],o=m[1],p=m[2],q=m[3],r=l.createSegment({category:c('ArtilleryCategory').CLIENT,description:'requiring_modules',begin:window._cstart,end:n}),s=l.createSegment({category:c('ArtilleryCategory').CLIENT,description:'mounting_app',begin:n,end:o}),t=l.createSegment({category:c('ArtilleryCategory').CLIENT,description:'fetching_data',begin:o,end:p}),u=l.createSegment({category:c('ArtilleryCategory').CLIENT,description:'rendering_public_circles',begin:p,end:q}),v=l.createSequence({category:c('ArtillerySequenceType').SEQUENCE_CLIENT,description:'initialization'});v.addSegment(r,s,t,u);l.markSegment(u,'first_marker_shown');l.post();});}};function i(){for(var k=arguments.length,l=Array(k),m=0;m<k;m++)l[m]=arguments[m];return c('Promise').all(l.map(j));}function j(k){return new (c('Promise'))(function(l){c('PublicLiveMapPage').addRetroactiveListener(k,function(m){c('PublicLiveMapPage').removeCurrentListener();l(m);});});}f.exports=h;}),null);